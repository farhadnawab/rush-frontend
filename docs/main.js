(function(e){function t(a){if(o[a])return o[a].exports;var r=o[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var o={};return t.m=e,t.c=o,t.d=function(e,o,a){t.o(e,o)||Object.defineProperty(e,o,{enumerable:!0,get:a})},t.r=function(e){'undefined'!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:'Module'}),Object.defineProperty(e,'__esModule',{value:!0})},t.t=function(e,o){if(1&o&&(e=t(e)),8&o)return e;if(4&o&&'object'==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(t.r(a),Object.defineProperty(a,'default',{enumerable:!0,value:e}),2&o&&'string'!=typeof e)for(var r in e)t.d(a,r,function(t){return e[t]}.bind(null,r));return a},t.n=function(e){var o=e&&e.__esModule?function(){return e['default']}:function(){return e};return t.d(o,'a',o),o},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p='',t(t.s=3)})([function(e,t){var o=Math.ceil,a=Math.max,r=String.fromCharCode,n,i;/*!
 * jQuery JavaScript Library v3.5.1
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2020-05-04T22:49Z
 */(function(t,o){'use strict';'object'==typeof e.exports?e.exports=t.document?o(t,!0):function(e){if(!e.document)throw new Error('jQuery requires a window with a document');return o(e)}:o(t)})('undefined'==typeof window?this:window,function(l,s){'use strict';function p(e,t,o){o=o||Ae;var a=o.createElement('script'),r,n;if(a.text=e,t)for(r in ke)n=t[r]||t.getAttribute&&t.getAttribute(r),n&&a.setAttribute(r,n);o.head.appendChild(a).parentNode.removeChild(a)}function d(e){return null==e?e+'':'object'==typeof e||'function'==typeof e?ve[be.call(e)]||'object':typeof e}function c(e){var t=!!e&&'length'in e&&e.length,o=d(e);return!(Ce(e)||Ie(e))&&('array'===o||0===t||'number'==typeof t&&0<t&&t-1 in e)}function u(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}function m(e,t,o){return Ce(t)?ze.grep(e,function(e,a){return!!t.call(e,a,e)!==o}):t.nodeType?ze.grep(e,function(e){return e===t!==o}):'string'==typeof t?ze.filter(t,e,o):ze.grep(e,function(e){return-1<xe.call(t,e)!==o})}function g(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function y(e){var t={};return ze.each(e.match(qe)||[],function(e,o){t[o]=!0}),t}function _(e){return e}function f(e){throw e}function h(e,t,o,a){var r;try{e&&Ce(r=e.promise)?r.call(e).done(t).fail(o):e&&Ce(r=e.then)?r.call(e,t,o):t.apply(void 0,[e].slice(a))}catch(e){o.apply(void 0,[e])}}function x(){Ae.removeEventListener('DOMContentLoaded',x),l.removeEventListener('load',x),ze.ready()}function v(e,t){return t.toUpperCase()}function b(e){return e.replace(He,'ms-').replace(We,v)}function w(){this.expando=ze.expando+w.uid++}function T(e){return'true'===e||'false'!==e&&('null'===e?null:e===+e+''?+e:Je.test(e)?JSON.parse(e):e)}function E(e,t,o){var a;if(void 0===o&&1===e.nodeType)if(a='data-'+t.replace($e,'-$&').toLowerCase(),o=e.getAttribute(a),'string'==typeof o){try{o=T(o)}catch(t){}Ye.set(e,t,o)}else o=void 0;return o}function S(e,t,o,a){var r=20,n=a?function(){return a.cur()}:function(){return ze.css(e,t,'')},i=n(),s=o&&o[3]||(ze.cssNumber[t]?'':'px'),l=e.nodeType&&(ze.cssNumber[t]||'px'!==s&&+i)&&et.exec(ze.css(e,t)),p,d;if(l&&l[3]!==s){for(i/=2,s=s||l[3],l=+i||1;r--;)ze.style(e,t,l+s),0>=(1-d)*(1-(d=n()/i||.5))&&(r=0),l/=d;l*=2,ze.style(e,t,l+s),o=o||[]}return o&&(l=+l||+i||0,p=o[1]?l+(o[1]+1)*o[2]:+o[2],a&&(a.unit=s,a.start=l,a.end=p)),p}function C(e){var t=e.ownerDocument,o=e.nodeName,a=it[o],r;return a?a:(r=t.body.appendChild(t.createElement(o)),a=ze.css(r,'display'),r.parentNode.removeChild(r),'none'===a&&(a='block'),it[o]=a,a)}function I(e,t){for(var o=[],a=0,r=e.length,n,i;a<r;a++)(i=e[a],!!i.style)&&(n=i.style.display,t?('none'===n&&(o[a]=Ke.get(i,'display')||null,!o[a]&&(i.style.display='')),''===i.style.display&&nt(i)&&(o[a]=C(i))):'none'!==n&&(o[a]='none',Ke.set(i,'display',n)));for(a=0;a<r;a++)null!=o[a]&&(e[a].style.display=o[a]);return e}function A(e,t){var o;return o='undefined'==typeof e.getElementsByTagName?'undefined'==typeof e.querySelectorAll?[]:e.querySelectorAll(t||'*'):e.getElementsByTagName(t||'*'),void 0===t||t&&u(e,t)?ze.merge([e],o):o}function k(e,t){for(var o=0,a=e.length;o<a;o++)Ke.set(e[o],'globalEval',!t||Ke.get(t[o],'globalEval'))}function P(e,t,o,a,r){for(var n=t.createDocumentFragment(),s=[],p=0,i=e.length,l,c,u,m,g,y;p<i;p++)if(l=e[p],l||0===l)if('object'===d(l))ze.merge(s,l.nodeType?[l]:l);else if(!ct.test(l))s.push(t.createTextNode(l));else{for(c=c||n.appendChild(t.createElement('div')),u=(lt.exec(l)||['',''])[1].toLowerCase(),m=dt[u]||dt._default,c.innerHTML=m[1]+ze.htmlPrefilter(l)+m[2],y=m[0];y--;)c=c.lastChild;ze.merge(s,c.childNodes),c=n.firstChild,c.textContent=''}for(n.textContent='',p=0;l=s[p++];){if(a&&-1<ze.inArray(l,a)){r&&r.push(l);continue}if(g=at(l),c=A(n.appendChild(l),'script'),g&&k(c),o)for(y=0;l=c[y++];)pt.test(l.type||'')&&o.push(l)}return n}function z(){return!0}function D(){return!1}function L(e,t){return e===R()==('focus'===t)}function R(){try{return Ae.activeElement}catch(e){}}function B(e,t,o,a,r,n){var i,s;if('object'==typeof t){for(s in'string'!=typeof o&&(a=a||o,o=void 0),t)B(e,s,o,a,t[s],n);return e}if(null==a&&null==r?(r=o,a=o=void 0):null==r&&('string'==typeof o?(r=a,a=void 0):(r=a,a=o,o=void 0)),!1===r)r=D;else if(!r)return e;return 1===n&&(i=r,r=function(e){return ze().off(e),i.apply(this,arguments)},r.guid=i.guid||(i.guid=ze.guid++)),e.each(function(){ze.event.add(this,t,r,a,o)})}function F(e,t,o){return o?void(Ke.set(e,t,!1),ze.event.add(e,t,{namespace:!1,handler:function(e){var a=Ke.get(this,t),r,n;if(!(1&e.isTrigger&&this[t]))a.length&&(Ke.set(this,t,{value:ze.event.trigger(ze.extend(a[0],ze.Event.prototype),a.slice(1),this)}),e.stopImmediatePropagation());else if(!!a.length)(ze.event.special[t]||{}).delegateType&&e.stopPropagation();else if(a=_e.call(arguments),Ke.set(this,t,a),r=o(this,t),this[t](),n=Ke.get(this,t),a!==n||r?Ke.set(this,t,!1):n={},a!==n)return e.stopImmediatePropagation(),e.preventDefault(),n.value}})):void(void 0===Ke.get(e,t)&&ze.event.add(e,t,z))}function M(e,t){return u(e,'table')&&u(11===t.nodeType?t.firstChild:t,'tr')?ze(e).children('tbody')[0]||e:e}function O(e){return e.type=(null!==e.getAttribute('type'))+'/'+e.type,e}function N(e){return'true/'===(e.type||'').slice(0,5)?e.type=e.type.slice(5):e.removeAttribute('type'),e}function U(e,t){var o,a,r,n,i,s,l;if(1===t.nodeType){if(Ke.hasData(e)&&(n=Ke.get(e),l=n.events,l))for(r in Ke.remove(t,'handle events'),l)for(o=0,a=l[r].length;o<a;o++)ze.event.add(t,r,l[r][o]);Ye.hasData(e)&&(i=Ye.access(e),s=ze.extend({},i),Ye.set(t,s))}}function V(e,t){var o=t.nodeName.toLowerCase();'input'===o&&st.test(e.type)?t.checked=e.checked:('input'===o||'textarea'===o)&&(t.defaultValue=e.defaultValue)}function q(e,t,o,a){t=fe(t);var r=0,n=e.length,i=t[0],s=Ce(i),l,d,c,u,m,g;if(s||1<n&&'string'==typeof i&&!Se.checkClone&&_t.test(i))return e.each(function(r){var n=e.eq(r);s&&(t[0]=i.call(this,r,n.html())),q(n,t,o,a)});if(n&&(l=P(t,e[0].ownerDocument,!1,e,a),d=l.firstChild,1===l.childNodes.length&&(l=d),d||a)){for(c=ze.map(A(l,'script'),O),u=c.length;r<n;r++)m=l,r!=n-1&&(m=ze.clone(m,!0,!0),u&&ze.merge(c,A(m,'script'))),o.call(e[r],m,r);if(u)for(g=c[c.length-1].ownerDocument,ze.map(c,N),r=0;r<u;r++)m=c[r],pt.test(m.type||'')&&!Ke.access(m,'globalEval')&&ze.contains(g,m)&&(m.src&&'module'!==(m.type||'').toLowerCase()?ze._evalUrl&&!m.noModule&&ze._evalUrl(m.src,{nonce:m.nonce||m.getAttribute('nonce')},g):p(m.textContent.replace(ft,''),m,g))}return e}function j(e,t,o){for(var a=t?ze.filter(t,e):e,r=0,n;null!=(n=a[r]);r++)o||1!==n.nodeType||ze.cleanData(A(n)),n.parentNode&&(o&&at(n)&&k(A(n,'script')),n.parentNode.removeChild(n));return e}function Z(e,t,o){var a=e.style,r,n,i,s;return o=o||xt(e),o&&(s=o.getPropertyValue(t)||o[t],''===s&&!at(e)&&(s=ze.style(e,t)),!Se.pixelBoxStyles()&&ht.test(s)&&bt.test(t)&&(r=a.width,n=a.minWidth,i=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=o.width,a.width=r,a.minWidth=n,a.maxWidth=i)),void 0===s?s:s+''}function G(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function H(e){for(var t=e[0].toUpperCase()+e.slice(1),o=wt.length;o--;)if(e=wt[o]+t,e in Tt)return e}function W(e){var t=ze.cssProps[e]||Et[e];return t?t:e in Tt?e:Et[e]=H(e)||e}function X(e,t,o){var r=et.exec(t);return r?a(0,r[2]-(o||0))+(r[3]||'px'):t}function K(e,t,r,n,s,l){var p='width'===t?1:0,i=0,d=0;if(r===(n?'border':'content'))return 0;for(;4>p;p+=2)'margin'===r&&(d+=ze.css(e,r+tt[p],!0,s)),n?('content'===r&&(d-=ze.css(e,'padding'+tt[p],!0,s)),'margin'!==r&&(d-=ze.css(e,'border'+tt[p]+'Width',!0,s))):(d+=ze.css(e,'padding'+tt[p],!0,s),'padding'===r?i+=ze.css(e,'border'+tt[p]+'Width',!0,s):d+=ze.css(e,'border'+tt[p]+'Width',!0,s));return!n&&0<=l&&(d+=a(0,o(e['offset'+t[0].toUpperCase()+t.slice(1)]-l-d-i-.5))||0),d}function Y(e,t,o){var a=xt(e),r=!Se.boxSizingReliable()||o,n=r&&'border-box'===ze.css(e,'boxSizing',!1,a),i=n,s=Z(e,t,a),l='offset'+t[0].toUpperCase()+t.slice(1);if(ht.test(s)){if(!o)return s;s='auto'}return(!Se.boxSizingReliable()&&n||!Se.reliableTrDimensions()&&u(e,'tr')||'auto'===s||!parseFloat(s)&&'inline'===ze.css(e,'display',!1,a))&&e.getClientRects().length&&(n='border-box'===ze.css(e,'boxSizing',!1,a),i=l in e,i&&(s=e[l])),s=parseFloat(s)||0,s+K(e,t,o||(n?'border':'content'),i,a,s)+'px'}function J(e,t,o,a,r){return new J.prototype.init(e,t,o,a,r)}function $(){Dt&&(!1===Ae.hidden&&l.requestAnimationFrame?l.requestAnimationFrame($):l.setTimeout($,ze.fx.interval),ze.fx.tick())}function Q(){return l.setTimeout(function(){zt=void 0}),zt=Date.now()}function ee(e,t){var o=0,a={height:e},r;for(t=t?1:0;4>o;o+=2-t)r=tt[o],a['margin'+r]=a['padding'+r]=e;return t&&(a.opacity=a.width=e),a}function te(e,t,o){for(var a=(re.tweeners[t]||[]).concat(re.tweeners['*']),r=0,n=a.length,i;r<n;r++)if(i=a[r].call(o,t,e))return i}function oe(e,t,o){var a='width'in t||'height'in t,r=this,n={},i=e.style,s=e.nodeType&&nt(e),l=Ke.get(e,'fxshow'),p,d,c,u,m,g,y,_;for(p in o.queue||(u=ze._queueHooks(e,'fx'),null==u.unqueued&&(u.unqueued=0,m=u.empty.fire,u.empty.fire=function(){u.unqueued||m()}),u.unqueued++,r.always(function(){r.always(function(){u.unqueued--,ze.queue(e,'fx').length||u.empty.fire()})})),t)if(d=t[p],kt.test(d)){if(delete t[p],c=c||'toggle'===d,d===(s?'hide':'show'))if('show'===d&&l&&void 0!==l[p])s=!0;else continue;n[p]=l&&l[p]||ze.style(e,p)}if(g=!ze.isEmptyObject(t),g||!ze.isEmptyObject(n))for(p in a&&1===e.nodeType&&(o.overflow=[i.overflow,i.overflowX,i.overflowY],y=l&&l.display,null==y&&(y=Ke.get(e,'display')),_=ze.css(e,'display'),'none'===_&&(y?_=y:(I([e],!0),y=e.style.display||y,_=ze.css(e,'display'),I([e]))),('inline'===_||'inline-block'===_&&null!=y)&&'none'===ze.css(e,'float')&&(!g&&(r.done(function(){i.display=y}),null==y&&(_=i.display,y='none'===_?'':_)),i.display='inline-block')),o.overflow&&(i.overflow='hidden',r.always(function(){i.overflow=o.overflow[0],i.overflowX=o.overflow[1],i.overflowY=o.overflow[2]})),g=!1,n)g||(l?'hidden'in l&&(s=l.hidden):l=Ke.access(e,'fxshow',{display:y}),c&&(l.hidden=!s),s&&I([e],!0),r.done(function(){for(p in s||I([e]),Ke.remove(e,'fxshow'),n)ze.style(e,p,n[p])})),g=te(s?l[p]:0,p,r),p in l||(l[p]=g.start,s&&(g.end=g.start,g.start=0))}function ae(e,t){var o,a,r,n,i;for(o in e)if(a=b(o),r=t[a],n=e[o],Array.isArray(n)&&(r=n[1],n=e[o]=n[0]),o!=a&&(e[a]=n,delete e[o]),i=ze.cssHooks[a],i&&'expand'in i)for(o in n=i.expand(n),delete e[a],n)o in e||(e[o]=n[o],t[o]=r);else t[a]=r}function re(e,t,o){var r=0,n=re.prefilters.length,i=ze.Deferred().always(function(){delete s.elem}),s=function(){if(c)return!1;for(var t=zt||Q(),o=a(0,l.startTime+l.duration-t),r=o/l.duration||0,n=1-r,s=0,p=l.tweens.length;s<p;s++)l.tweens[s].run(n);return(i.notifyWith(e,[l,n,o]),1>n&&p)?o:(p||i.notifyWith(e,[l,1,0]),i.resolveWith(e,[l]),!1)},l=i.promise({elem:e,props:ze.extend({},t),opts:ze.extend(!0,{specialEasing:{},easing:ze.easing._default},o),originalProperties:t,originalOptions:o,startTime:zt||Q(),duration:o.duration,tweens:[],createTween:function(t,o){var a=ze.Tween(e,l.opts,t,o,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(a),a},stop:function(t){var o=0,a=t?l.tweens.length:0;if(c)return this;for(c=!0;o<a;o++)l.tweens[o].run(1);return t?(i.notifyWith(e,[l,1,0]),i.resolveWith(e,[l,t])):i.rejectWith(e,[l,t]),this}}),p=l.props,d,c;for(ae(p,l.opts.specialEasing);r<n;r++)if(d=re.prefilters[r].call(l,e,p,l.opts),d)return Ce(d.stop)&&(ze._queueHooks(l.elem,l.opts.queue).stop=d.stop.bind(d)),d;return ze.map(p,te,l),Ce(l.opts.start)&&l.opts.start.call(e,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),ze.fx.timer(ze.extend(s,{elem:e,anim:l,queue:l.opts.queue})),l}function ne(e){var t=e.match(qe)||[];return t.join(' ')}function ie(e){return e.getAttribute&&e.getAttribute('class')||''}function se(e){return Array.isArray(e)?e:'string'==typeof e?e.match(qe)||[]:[]}function le(e,t,o,a){if(Array.isArray(t))ze.each(t,function(t,r){o||jt.test(e)?a(e,r):le(e+'['+('object'==typeof r&&null!=r?t:'')+']',r,o,a)});else if(!o&&'object'===d(t))for(var r in t)le(e+'['+r+']',t[r],o,a);else a(e,t)}function pe(e){return function(t,o){'string'!=typeof t&&(o=t,t='*');var a=0,r=t.toLowerCase().match(qe)||[],n;if(Ce(o))for(;n=r[a++];)'+'===n[0]?(n=n.slice(1)||'*',(e[n]=e[n]||[]).unshift(o)):(e[n]=e[n]||[]).push(o)}}function de(e,t,o,a){function r(s){var l;return n[s]=!0,ze.each(e[s]||[],function(e,s){var p=s(t,o,a);return'string'!=typeof p||i||n[p]?i?!(l=p):void 0:(t.dataTypes.unshift(p),r(p),!1)}),l}var n={},i=e===to;return r(t.dataTypes[0])||!n['*']&&r('*')}function ce(e,t){var o=ze.ajaxSettings.flatOptions||{},a,r;for(a in t)void 0!==t[a]&&((o[a]?e:r||(r={}))[a]=t[a]);return r&&ze.extend(!0,e,r),e}function ue(e,t,o){for(var a=e.contents,r=e.dataTypes,n,i,s,l;'*'===r[0];)r.shift(),void 0===n&&(n=e.mimeType||t.getResponseHeader('Content-Type'));if(n)for(i in a)if(a[i]&&a[i].test(n)){r.unshift(i);break}if(r[0]in o)s=r[0];else{for(i in o){if(!r[0]||e.converters[i+' '+r[0]]){s=i;break}l||(l=i)}s=s||l}return s?(s!==r[0]&&r.unshift(s),o[s]):void 0}function me(e,t,o,a){var r={},n=e.dataTypes.slice(),i,s,l,p,d;if(n[1])for(l in e.converters)r[l.toLowerCase()]=e.converters[l];for(s=n.shift();s;)if(e.responseFields[s]&&(o[e.responseFields[s]]=t),!d&&a&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),d=s,s=n.shift(),s)if('*'===s)s=d;else if('*'!==d&&d!=s){if(l=r[d+' '+s]||r['* '+s],!l)for(i in r)if(p=i.split(' '),p[1]===s&&(l=r[d+' '+p[0]]||r['* '+p[0]],l)){!0===l?l=r[i]:!0!==r[i]&&(s=p[0],n.unshift(p[1]));break}if(!0!==l)if(l&&e.throws)t=l(t);else try{t=l(t)}catch(t){return{state:'parsererror',error:l?t:'No conversion from '+d+' to '+s}}}return{state:'success',data:t}}var ge=[],ye=Object.getPrototypeOf,_e=ge.slice,fe=ge.flat?function(e){return ge.flat.call(e)}:function(e){return ge.concat.apply([],e)},he=ge.push,xe=ge.indexOf,ve={},be=ve.toString,we=ve.hasOwnProperty,Te=we.toString,Ee=Te.call(Object),Se={},Ce=function(e){return'function'==typeof e&&'number'!=typeof e.nodeType},Ie=function(e){return null!=e&&e===e.window},Ae=l.document,ke={type:!0,src:!0,nonce:!0,noModule:!0},Pe='3.5.1',ze=function(e,t){return new ze.fn.init(e,t)};ze.fn=ze.prototype={jquery:Pe,constructor:ze,length:0,toArray:function(){return _e.call(this)},get:function(e){return null==e?_e.call(this):0>e?this[e+this.length]:this[e]},pushStack:function(e){var t=ze.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return ze.each(this,e)},map:function(e){return this.pushStack(ze.map(this,function(t,o){return e.call(t,o,t)}))},slice:function(){return this.pushStack(_e.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(ze.grep(this,function(e,t){return(t+1)%2}))},odd:function(){return this.pushStack(ze.grep(this,function(e,t){return t%2}))},eq:function(e){var t=this.length,o=+e+(0>e?t:0);return this.pushStack(0<=o&&o<t?[this[o]]:[])},end:function(){return this.prevObject||this.constructor()},push:he,sort:ge.sort,splice:ge.splice},ze.extend=ze.fn.extend=function(){var e=arguments[0]||{},t=1,o=arguments.length,a=!1,r,n,i,s,l,p;for('boolean'==typeof e&&(a=e,e=arguments[t]||{},t++),'object'==typeof e||Ce(e)||(e={}),t===o&&(e=this,t--);t<o;t++)if(null!=(r=arguments[t]))for(n in r)(s=r[n],'__proto__'!==n&&e!==s)&&(a&&s&&(ze.isPlainObject(s)||(l=Array.isArray(s)))?(i=e[n],p=l&&!Array.isArray(i)?[]:l||ze.isPlainObject(i)?i:{},l=!1,e[n]=ze.extend(a,p,s)):void 0!==s&&(e[n]=s));return e},ze.extend({expando:'jQuery'+(Pe+Math.random()).replace(/\D/g,''),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,o;return!!(e&&'[object Object]'===be.call(e))&&((t=ye(e),!!!t)||(o=we.call(t,'constructor')&&t.constructor,'function'==typeof o&&Te.call(o)===Ee))},isEmptyObject:function(e){for(var t in e)return!1;return!0},globalEval:function(e,t,o){p(e,{nonce:t&&t.nonce},o)},each:function(e,t){var o=0,a;if(c(e))for(a=e.length;o<a&&!1!==t.call(e[o],o,e[o]);o++);else for(o in e)if(!1===t.call(e[o],o,e[o]))break;return e},makeArray:function(e,t){var o=t||[];return null!=e&&(c(Object(e))?ze.merge(o,'string'==typeof e?[e]:e):he.call(o,e)),o},inArray:function(e,t,o){return null==t?-1:xe.call(t,e,o)},merge:function(e,t){for(var o=+t.length,a=0,r=e.length;a<o;a++)e[r++]=t[a];return e.length=r,e},grep:function(e,t,o){for(var a=[],r=0,n=e.length,i;r<n;r++)i=!t(e[r],r),i!==!o&&a.push(e[r]);return a},map:function(e,t,o){var a=0,r=[],n,i;if(c(e))for(n=e.length;a<n;a++)i=t(e[a],a,o),null!=i&&r.push(i);else for(a in e)i=t(e[a],a,o),null!=i&&r.push(i);return fe(r)},guid:1,support:Se}),'function'==typeof Symbol&&(ze.fn[Symbol.iterator]=ge[Symbol.iterator]),ze.each(['Boolean','Number','String','Function','Array','Date','RegExp','Object','Error','Symbol'],function(e,t){ve['[object '+t+']']=t.toLowerCase()});var De=/*!
 * Sizzle CSS Selector Engine v2.3.5
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://js.foundation/
 *
 * Date: 2020-03-14
 */function(e){function t(e,t,o,a){var r=t&&t.ownerDocument,n=t?t.nodeType:9,s,l,i,p,d,c,u;if(o=o||[],'string'!=typeof e||!e||1!==n&&9!==n&&11!==n)return o;if(!a&&(he(t),t=t||xe,be)){if(11!==n&&(d=ee.exec(e)))if(!(s=d[1])){if(d[2])return F.apply(o,t.getElementsByTagName(e)),o;if((s=d[3])&&pe.getElementsByClassName&&t.getElementsByClassName)return F.apply(o,t.getElementsByClassName(s)),o}else if(9===n){if(!(i=t.getElementById(s)))return o;if(i.id===s)return o.push(i),o}else if(r&&(i=r.getElementById(s))&&Se(t,i)&&i.id===s)return o.push(i),o;if(pe.qsa&&!P[e+' ']&&(!we||!we.test(e))&&(1!==n||'object'!==t.nodeName.toLowerCase())){if(u=e,r=t,1===n&&(H.test(e)||G.test(e))){for(r=te.test(e)&&m(t.parentNode)||t,r===t&&pe.scope||((p=t.getAttribute('id'))?p=p.replace(re,ne):t.setAttribute('id',p=T)),c=ue(e),l=c.length;l--;)c[l]=(p?'#'+p:':scope')+' '+y(c[l]);u=c.join(',')}try{return F.apply(o,r.querySelectorAll(u)),o}catch(t){P(e,!0)}finally{p===T&&t.removeAttribute('id')}}}return ge(e.replace(Z,'$1'),t,o,a)}function o(){function e(o,a){return t.push(o+' ')>de.cacheLength&&delete e[t.shift()],e[o+' ']=a}var t=[];return e}function a(e){return e[T]=!0,e}function n(e){var t=xe.createElement('fieldset');try{return!!e(t)}catch(t){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function s(e,t){for(var o=e.split('|'),a=o.length;a--;)de.attrHandle[o[a]]=t}function l(e,t){var o=t&&e,a=o&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(a)return a;if(o)for(;o=o.nextSibling;)if(o===t)return-1;return e?1:-1}function p(e){return function(t){var o=t.nodeName.toLowerCase();return'input'===o&&t.type===e}}function d(e){return function(t){var o=t.nodeName.toLowerCase();return('input'===o||'button'===o)&&t.type===e}}function c(e){return function(t){return'form'in t?t.parentNode&&!1===t.disabled?'label'in t?'label'in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&se(t)===e:t.disabled===e:!!('label'in t)&&t.disabled===e}}function u(e){return a(function(t){return t=+t,a(function(o,a){for(var r=e([],o.length,t),n=r.length,i;n--;)o[i=r[n]]&&(o[i]=!(a[i]=o[i]))})})}function m(e){return e&&'undefined'!=typeof e.getElementsByTagName&&e}function g(){}function y(e){for(var t=0,o=e.length,a='';t<o;t++)a+=e[t].value;return a}function _(e,t,o){var a=t.dir,r=t.next,n=r||a,i=o&&'parentNode'===n,s=C++;return t.first?function(t,o,r){for(;t=t[a];)if(1===t.nodeType||i)return e(t,o,r);return!1}:function(t,o,l){var p=[S,s],d,c,u;if(l){for(;t=t[a];)if((1===t.nodeType||i)&&e(t,o,l))return!0;}else for(;t=t[a];)if(1===t.nodeType||i)if(u=t[T]||(t[T]={}),c=u[t.uniqueID]||(u[t.uniqueID]={}),r&&r===t.nodeName.toLowerCase())t=t[a]||t;else{if((d=c[n])&&d[0]===S&&d[1]===s)return p[2]=d[2];if(c[n]=p,p[2]=e(t,o,l))return!0}return!1}}function f(e){return 1<e.length?function(t,o,a){for(var r=e.length;r--;)if(!e[r](t,o,a))return!1;return!0}:e[0]}function h(e,o,a){for(var r=0,n=o.length;r<n;r++)t(e,o[r],a);return a}function x(e,t,o,a,r){for(var n=[],s=0,i=e.length,l;s<i;s++)(l=e[s])&&(!o||o(l,a,r))&&(n.push(l),null!=t&&t.push(s));return n}function v(e,t,o,r,n,i){return r&&!r[T]&&(r=v(r)),n&&!n[T]&&(n=v(n,i)),a(function(a,s,l,p){var d=[],c=[],u=s.length,m=a||h(t||'*',l.nodeType?[l]:l,[]),g=e&&(a||!t)?x(m,d,e,l,p):m,y=o?n||(a?e:u||r)?[]:s:g,_,f,i;if(o&&o(g,y,l,p),r)for(_=x(y,c),r(_,[],l,p),f=_.length;f--;)(i=_[f])&&(y[c[f]]=!(g[c[f]]=i));if(!a)y=x(y===s?y.splice(u,y.length):y),n?n(null,s,y,p):F.apply(s,y);else if(n||e){if(n){for(_=[],f=y.length;f--;)(i=y[f])&&_.push(g[f]=i);n(null,y=[],_,p)}for(f=y.length;f--;)(i=y[f])&&-1<(_=n?O(a,i):d[f])&&(a[_]=!(s[_]=i))}})}function b(e){for(var t=e.length,o=de.relative[e[0].type],a=o||de.relative[' '],r=o?1:0,n=_(function(e){return e===l},a,!0),i=_(function(e){return-1<O(l,e)},a,!0),s=[function(e,t,a){var r=!o&&(a||t!==ye)||((l=t).nodeType?n(e,t,a):i(e,t,a));return l=null,r}],l,p,d;r<t;r++)if(p=de.relative[e[r].type])s=[_(f(s),p)];else{if(p=de.filter[e[r].type].apply(null,e[r].matches),p[T]){for(d=++r;d<t&&!de.relative[e[d].type];d++);return v(1<r&&f(s),1<r&&y(e.slice(0,r-1).concat({value:' '===e[r-2].type?'*':''})).replace(Z,'$1'),p,r<d&&b(e.slice(r,d)),d<t&&b(e=e.slice(d)),d<t&&y(e))}s.push(p)}return f(s)}function w(e,o){var r=0<o.length,n=0<e.length,i=function(a,s,l,p,d){var c=0,u='0',i=a&&[],m=[],g=ye,y=a||n&&de.find.TAG('*',d),_=S+=null==g?1:Math.random()||.1,f=y.length,h,v,b;for(d&&(ye=s==xe||s||d);u!==f&&null!=(h=y[u]);u++){if(n&&h){for(v=0,s||h.ownerDocument==xe||(he(h),l=!be);b=e[v++];)if(b(h,s||xe,l)){p.push(h);break}d&&(S=_)}r&&((h=!b&&h)&&c--,a&&i.push(h))}if(c+=u,r&&u!==c){for(v=0;b=o[v++];)b(i,m,s,l);if(a){if(0<c)for(;u--;)i[u]||m[u]||(m[u]=R.call(p));m=x(m)}F.apply(p,m),d&&!a&&0<m.length&&1<c+o.length&&t.uniqueSort(p)}return d&&(S=_,ye=g),i};return r?a(i):i}var T='sizzle'+1*new Date,E=e.document,S=0,C=0,I=o(),A=o(),k=o(),P=o(),z=function(e,t){return e===t&&(fe=!0),0},D={}.hasOwnProperty,L=[],R=L.pop,B=L.push,F=L.push,M=L.slice,O=function(e,t){for(var o=0,a=e.length;o<a;o++)if(e[o]===t)return o;return-1},N='checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped',U='[\\x20\\t\\r\\n\\f]',V='(?:\\\\[\\da-fA-F]{1,6}'+U+'?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+',q=/[\x20\t\r\n\f]+/g,Z=/^[\x20\t\r\n\f]+|((?:^|[^\\])(?:\\.)*)[\x20\t\r\n\f]+$/g,j=/^[\x20\t\r\n\f]*,[\x20\t\r\n\f]*/,G=/^[\x20\t\r\n\f]*([>+~]|[\x20\t\r\n\f])[\x20\t\r\n\f]*/,H=/[\x20\t\r\n\f]|>/,W=/:((?:\\[\da-fA-F]{1,6}[\x20\t\r\n\f]?|\\[^\r\n\f]|[\w-]|[^\0-\x7f])+)(?:\((('((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)")|((?:\\.|[^\\()[\]]|\[[\x20\t\r\n\f]*((?:\\[\da-fA-F]{1,6}[\x20\t\r\n\f]?|\\[^\r\n\f]|[\w-]|[^\0-\x7f])+)(?:[\x20\t\r\n\f]*([*^$|!~]?=)[\x20\t\r\n\f]*(?:'((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)"|((?:\\[\da-fA-F]{1,6}[\x20\t\r\n\f]?|\\[^\r\n\f]|[\w-]|[^\0-\x7f])+))|)[\x20\t\r\n\f]*\])*)|.*)\)|)/,X=/^(?:\\[\da-fA-F]{1,6}[\x20\t\r\n\f]?|\\[^\r\n\f]|[\w-]|[^\0-\x7f])+$/,K={ID:/^#((?:\\[\da-fA-F]{1,6}[\x20\t\r\n\f]?|\\[^\r\n\f]|[\w-]|[^\0-\x7f])+)/,CLASS:/^\.((?:\\[\da-fA-F]{1,6}[\x20\t\r\n\f]?|\\[^\r\n\f]|[\w-]|[^\0-\x7f])+)/,TAG:/^((?:\\[\da-fA-F]{1,6}[\x20\t\r\n\f]?|\\[^\r\n\f]|[\w-]|[^\0-\x7f])+|[*])/,ATTR:/^\[[\x20\t\r\n\f]*((?:\\[\da-fA-F]{1,6}[\x20\t\r\n\f]?|\\[^\r\n\f]|[\w-]|[^\0-\x7f])+)(?:[\x20\t\r\n\f]*([*^$|!~]?=)[\x20\t\r\n\f]*(?:'((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)"|((?:\\[\da-fA-F]{1,6}[\x20\t\r\n\f]?|\\[^\r\n\f]|[\w-]|[^\0-\x7f])+))|)[\x20\t\r\n\f]*\]/,PSEUDO:/^:((?:\\[\da-fA-F]{1,6}[\x20\t\r\n\f]?|\\[^\r\n\f]|[\w-]|[^\0-\x7f])+)(?:\((('((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)")|((?:\\.|[^\\()[\]]|\[[\x20\t\r\n\f]*((?:\\[\da-fA-F]{1,6}[\x20\t\r\n\f]?|\\[^\r\n\f]|[\w-]|[^\0-\x7f])+)(?:[\x20\t\r\n\f]*([*^$|!~]?=)[\x20\t\r\n\f]*(?:'((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)"|((?:\\[\da-fA-F]{1,6}[\x20\t\r\n\f]?|\\[^\r\n\f]|[\w-]|[^\0-\x7f])+))|)[\x20\t\r\n\f]*\])*)|.*)\)|)/,CHILD:/^:(only|first|last|nth|nth-last)-(child|of-type)(?:\([\x20\t\r\n\f]*(even|odd|(([+-]|)(\d*)n|)[\x20\t\r\n\f]*(?:([+-]|)[\x20\t\r\n\f]*(\d+)|))[\x20\t\r\n\f]*\)|)/i,bool:/^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$/i,needsContext:/^[\x20\t\r\n\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\([\x20\t\r\n\f]*((?:-\d)?\d*)[\x20\t\r\n\f]*\)|)(?=[^-]|$)/i},Y=/HTML$/i,J=/^(?:input|select|textarea|button)$/i,$=/^h\d$/i,Q=/^[^{]+\{\s*\[native \w/,ee=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,te=/[+~]/,oe=/\\[\da-fA-F]{1,6}[\x20\t\r\n\f]?|\\([^\r\n\f])/g,ae=function(e,t){var o='0x'+e.slice(1)-65536;return t?t:0>o?r(o+65536):r(55296|o>>10,56320|1023&o)},re=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ne=function(e,t){return t?'\0'===e?'\uFFFD':e.slice(0,-1)+'\\'+e.charCodeAt(e.length-1).toString(16)+' ':'\\'+e},ie=function(){he()},se=_(function(e){return!0===e.disabled&&'fieldset'===e.nodeName.toLowerCase()},{dir:'parentNode',next:'legend'}),le,pe,de,ce,i,ue,me,ge,ye,_e,fe,he,xe,ve,be,we,Te,Ee,Se;try{F.apply(L=M.call(E.childNodes),E.childNodes),L[E.childNodes.length].nodeType}catch(t){F={apply:L.length?function(e,t){B.apply(e,M.call(t))}:function(e,t){for(var o=e.length,a=0;e[o++]=t[a++];);e.length=o-1}}}for(le in pe=t.support={},i=t.isXML=function(e){var t=e.namespaceURI,o=(e.ownerDocument||e).documentElement;return!Y.test(t||o&&o.nodeName||'HTML')},he=t.setDocument=function(e){var t=e?e.ownerDocument||e:E,o,a;return t!=xe&&9===t.nodeType&&t.documentElement?(xe=t,ve=xe.documentElement,be=!i(xe),E!=xe&&(a=xe.defaultView)&&a.top!==a&&(a.addEventListener?a.addEventListener('unload',ie,!1):a.attachEvent&&a.attachEvent('onunload',ie)),pe.scope=n(function(e){return ve.appendChild(e).appendChild(xe.createElement('div')),'undefined'!=typeof e.querySelectorAll&&!e.querySelectorAll(':scope fieldset div').length}),pe.attributes=n(function(e){return e.className='i',!e.getAttribute('className')}),pe.getElementsByTagName=n(function(e){return e.appendChild(xe.createComment('')),!e.getElementsByTagName('*').length}),pe.getElementsByClassName=Q.test(xe.getElementsByClassName),pe.getById=n(function(e){return ve.appendChild(e).id=T,!xe.getElementsByName||!xe.getElementsByName(T).length}),pe.getById?(de.filter.ID=function(e){var t=e.replace(oe,ae);return function(e){return e.getAttribute('id')===t}},de.find.ID=function(e,t){if('undefined'!=typeof t.getElementById&&be){var o=t.getElementById(e);return o?[o]:[]}}):(de.filter.ID=function(e){var t=e.replace(oe,ae);return function(e){var o='undefined'!=typeof e.getAttributeNode&&e.getAttributeNode('id');return o&&o.value===t}},de.find.ID=function(e,t){if('undefined'!=typeof t.getElementById&&be){var o=t.getElementById(e),a,r,n;if(o){if(a=o.getAttributeNode('id'),a&&a.value===e)return[o];for(n=t.getElementsByName(e),r=0;o=n[r++];)if(a=o.getAttributeNode('id'),a&&a.value===e)return[o]}return[]}}),de.find.TAG=pe.getElementsByTagName?function(e,t){return'undefined'==typeof t.getElementsByTagName?pe.qsa?t.querySelectorAll(e):void 0:t.getElementsByTagName(e)}:function(e,t){var o=[],a=0,r=t.getElementsByTagName(e),n;if('*'===e){for(;n=r[a++];)1===n.nodeType&&o.push(n);return o}return r},de.find.CLASS=pe.getElementsByClassName&&function(e,t){if('undefined'!=typeof t.getElementsByClassName&&be)return t.getElementsByClassName(e)},Te=[],we=[],(pe.qsa=Q.test(xe.querySelectorAll))&&(n(function(e){var t;ve.appendChild(e).innerHTML='<a id=\''+T+'\'></a><select id=\''+T+'-\r\\\' msallowcapture=\'\'><option selected=\'\'></option></select>',e.querySelectorAll('[msallowcapture^=\'\']').length&&we.push('[*^$]='+U+'*(?:\'\'|"")'),e.querySelectorAll('[selected]').length||we.push('\\['+U+'*(?:value|'+N+')'),e.querySelectorAll('[id~='+T+'-]').length||we.push('~='),t=xe.createElement('input'),t.setAttribute('name',''),e.appendChild(t),e.querySelectorAll('[name=\'\']').length||we.push('\\['+U+'*name'+U+'*='+U+'*(?:\'\'|"")'),e.querySelectorAll(':checked').length||we.push(':checked'),e.querySelectorAll('a#'+T+'+*').length||we.push('.#.+[+~]'),e.querySelectorAll('\\\f'),we.push('[\\r\\n\\f]')}),n(function(e){e.innerHTML='<a href=\'\' disabled=\'disabled\'></a><select disabled=\'disabled\'><option/></select>';var t=xe.createElement('input');t.setAttribute('type','hidden'),e.appendChild(t).setAttribute('name','D'),e.querySelectorAll('[name=d]').length&&we.push('name'+U+'*[*^$|!~]?='),2!==e.querySelectorAll(':enabled').length&&we.push(':enabled',':disabled'),ve.appendChild(e).disabled=!0,2!==e.querySelectorAll(':disabled').length&&we.push(':enabled',':disabled'),e.querySelectorAll('*,:x'),we.push(',.*:')})),(pe.matchesSelector=Q.test(Ee=ve.matches||ve.webkitMatchesSelector||ve.mozMatchesSelector||ve.oMatchesSelector||ve.msMatchesSelector))&&n(function(e){pe.disconnectedMatch=Ee.call(e,'*'),Ee.call(e,'[s!=\'\']:x'),Te.push('!=',':('+V+')(?:\\(((\'((?:\\\\.|[^\\\\\'])*)\'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|'+('\\['+U+'*('+V+')(?:'+U+'*([*^$|!~]?=)'+U+'*(?:\'((?:\\\\.|[^\\\\\'])*)\'|"((?:\\\\.|[^\\\\"])*)"|('+V+'))|)'+U+'*\\]')+')*)|.*)\\)|)')}),we=we.length&&new RegExp(we.join('|')),Te=Te.length&&new RegExp(Te.join('|')),o=Q.test(ve.compareDocumentPosition),Se=o||Q.test(ve.contains)?function(e,t){var o=9===e.nodeType?e.documentElement:e,a=t&&t.parentNode;return e===a||!!(a&&1===a.nodeType&&(o.contains?o.contains(a):e.compareDocumentPosition&&16&e.compareDocumentPosition(a)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},z=o?function(e,t){if(e===t)return fe=!0,0;var o=!e.compareDocumentPosition-!t.compareDocumentPosition;return o?o:(o=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&o||!pe.sortDetached&&t.compareDocumentPosition(e)===o?e==xe||e.ownerDocument==E&&Se(E,e)?-1:t==xe||t.ownerDocument==E&&Se(E,t)?1:_e?O(_e,e)-O(_e,t):0:4&o?-1:1)}:function(e,t){if(e===t)return fe=!0,0;var o=0,a=e.parentNode,r=t.parentNode,n=[e],i=[t],s;if(!a||!r)return e==xe?-1:t==xe?1:a?-1:r?1:_e?O(_e,e)-O(_e,t):0;if(a===r)return l(e,t);for(s=e;s=s.parentNode;)n.unshift(s);for(s=t;s=s.parentNode;)i.unshift(s);for(;n[o]===i[o];)o++;return o?l(n[o],i[o]):n[o]==E?-1:i[o]==E?1:0},xe):xe},t.matches=function(e,o){return t(e,null,null,o)},t.matchesSelector=function(e,o){if(he(e),pe.matchesSelector&&be&&!P[o+' ']&&(!Te||!Te.test(o))&&(!we||!we.test(o)))try{var a=Ee.call(e,o);if(a||pe.disconnectedMatch||e.document&&11!==e.document.nodeType)return a}catch(t){P(o,!0)}return 0<t(o,xe,null,[e]).length},t.contains=function(e,t){return(e.ownerDocument||e)!=xe&&he(e),Se(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!=xe&&he(e);var o=de.attrHandle[t.toLowerCase()],a=o&&D.call(de.attrHandle,t.toLowerCase())?o(e,t,!be):void 0;return void 0===a?pe.attributes||!be?e.getAttribute(t):(a=e.getAttributeNode(t))&&a.specified?a.value:null:a},t.escape=function(e){return(e+'').replace(re,ne)},t.error=function(e){throw new Error('Syntax error, unrecognized expression: '+e)},t.uniqueSort=function(e){var t=[],o=0,a=0,r;if(fe=!pe.detectDuplicates,_e=!pe.sortStable&&e.slice(0),e.sort(z),fe){for(;r=e[a++];)r===e[a]&&(o=t.push(a));for(;o--;)e.splice(t[o],1)}return _e=null,e},ce=t.getText=function(e){var t='',o=0,a=e.nodeType,r;if(!a)for(;r=e[o++];)t+=ce(r);else if(1===a||9===a||11===a){if('string'==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)t+=ce(e)}else if(3===a||4===a)return e.nodeValue;return t},de=t.selectors={cacheLength:50,createPseudo:a,match:K,attrHandle:{},find:{},relative:{">":{dir:'parentNode',first:!0}," ":{dir:'parentNode'},"+":{dir:'previousSibling',first:!0},"~":{dir:'previousSibling'}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(oe,ae),e[3]=(e[3]||e[4]||e[5]||'').replace(oe,ae),'~='===e[2]&&(e[3]=' '+e[3]+' '),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),'nth'===e[1].slice(0,3)?(!e[3]&&t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*('even'===e[3]||'odd'===e[3])),e[5]=+(e[7]+e[8]||'odd'===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t=!e[6]&&e[2],o;return K.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||'':t&&W.test(t)&&(o=ue(t,!0))&&(o=t.indexOf(')',t.length-o)-t.length)&&(e[0]=e[0].slice(0,o),e[2]=t.slice(0,o)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(oe,ae).toLowerCase();return'*'===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=I[e+' '];return t||(t=new RegExp('(^|'+U+')'+e+'('+U+'|$)'))&&I(e,function(e){return t.test('string'==typeof e.className&&e.className||'undefined'!=typeof e.getAttribute&&e.getAttribute('class')||'')})},ATTR:function(e,o,a){return function(r){var n=t.attr(r,e);return null==n?'!='===o:!o||(n+='','='===o?n===a:'!='===o?n!==a:'^='===o?a&&0===n.indexOf(a):'*='===o?a&&-1<n.indexOf(a):'$='===o?a&&n.slice(-a.length)===a:'~='===o?-1<(' '+n.replace(q,' ')+' ').indexOf(a):'|='==o&&(n===a||n.slice(0,a.length+1)===a+'-'))}},CHILD:function(e,t,o,a,r){var n='nth'!==e.slice(0,3),i='last'!==e.slice(-4),s='of-type'===t;return 1===a&&0===r?function(e){return!!e.parentNode}:function(t,o,l){var p=n==i?'previousSibling':'nextSibling',d=t.parentNode,c=s&&t.nodeName.toLowerCase(),u=!l&&!s,m=!1,g,y,_,f,h,x;if(d){if(n){for(;p;){for(f=t;f=f[p];)if(s?f.nodeName.toLowerCase()===c:1===f.nodeType)return!1;x=p='only'===e&&!x&&'nextSibling'}return!0}if(x=[i?d.firstChild:d.lastChild],i&&u){for(f=d,_=f[T]||(f[T]={}),y=_[f.uniqueID]||(_[f.uniqueID]={}),g=y[e]||[],h=g[0]===S&&g[1],m=h&&g[2],f=h&&d.childNodes[h];f=++h&&f&&f[p]||(m=h=0)||x.pop();)if(1===f.nodeType&&++m&&f===t){y[e]=[S,h,m];break}}else if(u&&(f=t,_=f[T]||(f[T]={}),y=_[f.uniqueID]||(_[f.uniqueID]={}),g=y[e]||[],h=g[0]===S&&g[1],m=h),!1===m)for(;(f=++h&&f&&f[p]||(m=h=0)||x.pop())&&!((s?f.nodeName.toLowerCase()===c:1===f.nodeType)&&++m&&(u&&(_=f[T]||(f[T]={}),y=_[f.uniqueID]||(_[f.uniqueID]={}),y[e]=[S,m]),f===t)););return m-=r,m===a||0==m%a&&0<=m/a}}},PSEUDO:function(e,o){var r=de.pseudos[e]||de.setFilters[e.toLowerCase()]||t.error('unsupported pseudo: '+e),n;return r[T]?r(o):1<r.length?(n=[e,e,'',o],de.setFilters.hasOwnProperty(e.toLowerCase())?a(function(e,t){for(var a=r(e,o),n=a.length,i;n--;)i=O(e,a[n]),e[i]=!(t[i]=a[n])}):function(e){return r(e,0,n)}):r}},pseudos:{not:a(function(e){var t=[],o=[],r=me(e.replace(Z,'$1'));return r[T]?a(function(e,t,o,a){for(var n=r(e,null,a,[]),s=e.length,i;s--;)(i=n[s])&&(e[s]=!(t[s]=i))}):function(e,a,n){return t[0]=e,r(t,null,n,o),t[0]=null,!o.pop()}}),has:a(function(e){return function(o){return 0<t(e,o).length}}),contains:a(function(e){return e=e.replace(oe,ae),function(t){return-1<(t.textContent||ce(t)).indexOf(e)}}),lang:a(function(e){return X.test(e||'')||t.error('unsupported lang: '+e),e=e.replace(oe,ae).toLowerCase(),function(t){var o;do if(o=be?t.lang:t.getAttribute('xml:lang')||t.getAttribute('lang'))return o=o.toLowerCase(),o===e||0===o.indexOf(e+'-');while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var o=e.location&&e.location.hash;return o&&o.slice(1)===t.id},root:function(e){return e===ve},focus:function(e){return e===xe.activeElement&&(!xe.hasFocus||xe.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:c(!1),disabled:c(!0),checked:function(e){var t=e.nodeName.toLowerCase();return'input'===t&&!!e.checked||'option'===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(6>e.nodeType)return!1;return!0},parent:function(e){return!de.pseudos.empty(e)},header:function(e){return $.test(e.nodeName)},input:function(e){return J.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return'input'===t&&'button'===e.type||'button'===t},text:function(e){var t;return'input'===e.nodeName.toLowerCase()&&'text'===e.type&&(null==(t=e.getAttribute('type'))||'text'===t.toLowerCase())},first:u(function(){return[0]}),last:u(function(e,t){return[t-1]}),eq:u(function(e,t,o){return[0>o?o+t:o]}),even:u(function(e,t){for(var o=0;o<t;o+=2)e.push(o);return e}),odd:u(function(e,t){for(var o=1;o<t;o+=2)e.push(o);return e}),lt:u(function(e,t,o){for(var a=0>o?o+t:o>t?t:o;0<=--a;)e.push(a);return e}),gt:u(function(e,t,o){for(var a=0>o?o+t:o;++a<t;)e.push(a);return e})}},de.pseudos.nth=de.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})de.pseudos[le]=p(le);for(le in{submit:!0,reset:!0})de.pseudos[le]=d(le);return g.prototype=de.filters=de.pseudos,de.setFilters=new g,ue=t.tokenize=function(e,o){var a=A[e+' '],r,n,i,s,l,p,d;if(a)return o?0:a.slice(0);for(l=e,p=[],d=de.preFilter;l;){for(s in(!r||(n=j.exec(l)))&&(n&&(l=l.slice(n[0].length)||l),p.push(i=[])),r=!1,(n=G.exec(l))&&(r=n.shift(),i.push({value:r,type:n[0].replace(Z,' ')}),l=l.slice(r.length)),de.filter)(n=K[s].exec(l))&&(!d[s]||(n=d[s](n)))&&(r=n.shift(),i.push({value:r,type:s,matches:n}),l=l.slice(r.length));if(!r)break}return o?l.length:l?t.error(e):A(e,p).slice(0)},me=t.compile=function(e,t){var o=[],a=[],r=k[e+' '],n;if(!r){for(t||(t=ue(e)),n=t.length;n--;)r=b(t[n]),r[T]?o.push(r):a.push(r);r=k(e,w(a,o)),r.selector=e}return r},ge=t.select=function(e,t,o,a){var r='function'==typeof e&&e,n=!a&&ue(e=r.selector||e),s,i,l,p,d;if(o=o||[],1===n.length){if(i=n[0]=n[0].slice(0),2<i.length&&'ID'===(l=i[0]).type&&9===t.nodeType&&be&&de.relative[i[1].type]){if(t=(de.find.ID(l.matches[0].replace(oe,ae),t)||[])[0],!t)return o;r&&(t=t.parentNode),e=e.slice(i.shift().value.length)}for(s=K.needsContext.test(e)?0:i.length;s--&&(l=i[s],!de.relative[p=l.type]);)if((d=de.find[p])&&(a=d(l.matches[0].replace(oe,ae),te.test(i[0].type)&&m(t.parentNode)||t))){if(i.splice(s,1),e=a.length&&y(i),!e)return F.apply(o,a),o;break}}return(r||me(e,n))(a,t,!be,o,!t||te.test(e)&&m(t.parentNode)||t),o},pe.sortStable=T.split('').sort(z).join('')===T,pe.detectDuplicates=!!fe,he(),pe.sortDetached=n(function(e){return 1&e.compareDocumentPosition(xe.createElement('fieldset'))}),n(function(e){return e.innerHTML='<a href=\'#\'></a>','#'===e.firstChild.getAttribute('href')})||s('type|href|height|width',function(e,t,o){if(!o)return e.getAttribute(t,'type'===t.toLowerCase()?1:2)}),pe.attributes&&n(function(e){return e.innerHTML='<input/>',e.firstChild.setAttribute('value',''),''===e.firstChild.getAttribute('value')})||s('value',function(e,t,o){if(!o&&'input'===e.nodeName.toLowerCase())return e.defaultValue}),n(function(e){return null==e.getAttribute('disabled')})||s(N,function(e,t,o){var a;if(!o)return!0===e[t]?t.toLowerCase():(a=e.getAttributeNode(t))&&a.specified?a.value:null}),t}(l);ze.find=De,ze.expr=De.selectors,ze.expr[':']=ze.expr.pseudos,ze.uniqueSort=ze.unique=De.uniqueSort,ze.text=De.getText,ze.isXMLDoc=De.isXML,ze.contains=De.contains,ze.escapeSelector=De.escape;var Le=function(e,t,o){for(var a=[];(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(void 0!==o&&ze(e).is(o))break;a.push(e)}return a},Re=function(e,t){for(var o=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&o.push(e);return o},Be=ze.expr.match.needsContext,Fe=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;ze.filter=function(e,t,o){var a=t[0];return o&&(e=':not('+e+')'),1===t.length&&1===a.nodeType?ze.find.matchesSelector(a,e)?[a]:[]:ze.find.matches(e,ze.grep(t,function(e){return 1===e.nodeType}))},ze.fn.extend({find:function(e){var t=this.length,o=this,a,r;if('string'!=typeof e)return this.pushStack(ze(e).filter(function(){for(a=0;a<t;a++)if(ze.contains(o[a],this))return!0}));for(r=this.pushStack([]),a=0;a<t;a++)ze.find(e,o[a],r);return 1<t?ze.uniqueSort(r):r},filter:function(e){return this.pushStack(m(this,e||[],!1))},not:function(e){return this.pushStack(m(this,e||[],!0))},is:function(e){return!!m(this,'string'==typeof e&&Be.test(e)?ze(e):e||[],!1).length}});var Me=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,Oe=ze.fn.init=function(e,t,o){var a,r;if(!e)return this;if(o=o||Ne,'string'==typeof e){if(a='<'===e[0]&&'>'===e[e.length-1]&&3<=e.length?[null,e,null]:Me.exec(e),a&&(a[1]||!t)){if(a[1]){if(t=t instanceof ze?t[0]:t,ze.merge(this,ze.parseHTML(a[1],t&&t.nodeType?t.ownerDocument||t:Ae,!0)),Fe.test(a[1])&&ze.isPlainObject(t))for(a in t)Ce(this[a])?this[a](t[a]):this.attr(a,t[a]);return this}return r=Ae.getElementById(a[2]),r&&(this[0]=r,this.length=1),this}return!t||t.jquery?(t||o).find(e):this.constructor(t).find(e)}return e.nodeType?(this[0]=e,this.length=1,this):Ce(e)?void 0===o.ready?e(ze):o.ready(e):ze.makeArray(e,this)},Ne;Oe.prototype=ze.fn,Ne=ze(Ae);var Ue=/^(?:parents|prev(?:Until|All))/,Ve={children:!0,contents:!0,next:!0,prev:!0};ze.fn.extend({has:function(e){var t=ze(e,this),o=t.length;return this.filter(function(){for(var e=0;e<o;e++)if(ze.contains(this,t[e]))return!0})},closest:function(e,t){var o=0,a=this.length,r=[],n='string'!=typeof e&&ze(e),i;if(!Be.test(e))for(;o<a;o++)for(i=this[o];i&&i!==t;i=i.parentNode)if(11>i.nodeType&&(n?-1<n.index(i):1===i.nodeType&&ze.find.matchesSelector(i,e))){r.push(i);break}return this.pushStack(1<r.length?ze.uniqueSort(r):r)},index:function(e){return e?'string'==typeof e?xe.call(ze(e),this[0]):xe.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(ze.uniqueSort(ze.merge(this.get(),ze(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),ze.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return Le(e,'parentNode')},parentsUntil:function(e,t,o){return Le(e,'parentNode',o)},next:function(e){return g(e,'nextSibling')},prev:function(e){return g(e,'previousSibling')},nextAll:function(e){return Le(e,'nextSibling')},prevAll:function(e){return Le(e,'previousSibling')},nextUntil:function(e,t,o){return Le(e,'nextSibling',o)},prevUntil:function(e,t,o){return Le(e,'previousSibling',o)},siblings:function(e){return Re((e.parentNode||{}).firstChild,e)},children:function(e){return Re(e.firstChild)},contents:function(e){return null!=e.contentDocument&&ye(e.contentDocument)?e.contentDocument:(u(e,'template')&&(e=e.content||e),ze.merge([],e.childNodes))}},function(e,t){ze.fn[e]=function(o,a){var r=ze.map(this,t,o);return'Until'!==e.slice(-5)&&(a=o),a&&'string'==typeof a&&(r=ze.filter(a,r)),1<this.length&&(!Ve[e]&&ze.uniqueSort(r),Ue.test(e)&&r.reverse()),this.pushStack(r)}});var qe=/[^\x20\t\r\n\f]+/g;ze.Callbacks=function(e){e='string'==typeof e?y(e):ze.extend({},e);var t=[],o=[],a=-1,r=function(){for(p=p||e.once,l=i=!0;o.length;a=-1)for(s=o.shift();++a<t.length;)!1===t[a].apply(s[0],s[1])&&e.stopOnFalse&&(a=t.length,s=!1);e.memory||(s=!1),i=!1,p&&(s?t=[]:t='')},n={add:function(){return t&&(s&&!i&&(a=t.length-1,o.push(s)),function o(a){ze.each(a,function(a,r){Ce(r)?(!e.unique||!n.has(r))&&t.push(r):r&&r.length&&'string'!==d(r)&&o(r)})}(arguments),s&&!i&&r()),this},remove:function(){return ze.each(arguments,function(e,o){for(var r;-1<(r=ze.inArray(o,t,r));)t.splice(r,1),r<=a&&a--}),this},has:function(e){return e?-1<ze.inArray(e,t):0<t.length},empty:function(){return t&&(t=[]),this},disable:function(){return p=o=[],t=s='',this},disabled:function(){return!t},lock:function(){return p=o=[],s||i||(t=s=''),this},locked:function(){return!!p},fireWith:function(e,t){return p||(t=t||[],t=[e,t.slice?t.slice():t],o.push(t),!i&&r()),this},fire:function(){return n.fireWith(this,arguments),this},fired:function(){return!!l}},i,s,l,p;return n},ze.extend({Deferred:function(e){var t=[['notify','progress',ze.Callbacks('memory'),ze.Callbacks('memory'),2],['resolve','done',ze.Callbacks('once memory'),ze.Callbacks('once memory'),0,'resolved'],['reject','fail',ze.Callbacks('once memory'),ze.Callbacks('once memory'),1,'rejected']],o='pending',a={state:function(){return o},always:function(){return r.done(arguments).fail(arguments),this},catch:function(e){return a.then(null,e)},pipe:function(){var e=arguments;return ze.Deferred(function(o){ze.each(t,function(t,a){var n=Ce(e[a[4]])&&e[a[4]];r[a[1]](function(){var e=n&&n.apply(this,arguments);e&&Ce(e.promise)?e.promise().progress(o.notify).done(o.resolve).fail(o.reject):o[a[0]+'With'](this,n?[e]:arguments)})}),e=null}).promise()},then:function(e,o,a){function r(t,o,a,e){return function(){var i=this,s=arguments,p=function(){var l,p;if(!(t<n)){if(l=a.apply(i,s),l===o.promise())throw new TypeError('Thenable self-resolution');p=l&&('object'==typeof l||'function'==typeof l)&&l.then,Ce(p)?e?p.call(l,r(n,o,_,e),r(n,o,f,e)):(n++,p.call(l,r(n,o,_,e),r(n,o,f,e),r(n,o,_,o.notifyWith))):(a!==_&&(i=void 0,s=[l]),(e||o.resolveWith)(i,s))}},d=e?p:function(){try{p()}catch(r){ze.Deferred.exceptionHook&&ze.Deferred.exceptionHook(r,d.stackTrace),t+1>=n&&(a!==f&&(i=void 0,s=[r]),o.rejectWith(i,s))}};t?d():(ze.Deferred.getStackHook&&(d.stackTrace=ze.Deferred.getStackHook()),l.setTimeout(d))}}var n=0;return ze.Deferred(function(n){t[0][3].add(r(0,n,Ce(a)?a:_,n.notifyWith)),t[1][3].add(r(0,n,Ce(e)?e:_)),t[2][3].add(r(0,n,Ce(o)?o:f))}).promise()},promise:function(e){return null==e?a:ze.extend(e,a)}},r={};return ze.each(t,function(e,n){var i=n[2],s=n[5];a[n[1]]=i.add,s&&i.add(function(){o=s},t[3-e][2].disable,t[3-e][3].disable,t[0][2].lock,t[0][3].lock),i.add(n[3].fire),r[n[0]]=function(){return r[n[0]+'With'](this===r?void 0:this,arguments),this},r[n[0]+'With']=i.fireWith}),a.promise(r),e&&e.call(r,r),r},when:function(e){var t=arguments.length,o=t,a=Array(o),r=_e.call(arguments),n=ze.Deferred(),i=function(e){return function(o){a[e]=this,r[e]=1<arguments.length?_e.call(arguments):o,--t||n.resolveWith(a,r)}};if(1>=t&&(h(e,n.done(i(o)).resolve,n.reject,!t),'pending'===n.state()||Ce(r[o]&&r[o].then)))return n.then();for(;o--;)h(r[o],i(o),n.reject);return n.promise()}});var je=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;ze.Deferred.exceptionHook=function(e,t){l.console&&l.console.warn&&e&&je.test(e.name)&&l.console.warn('jQuery.Deferred exception: '+e.message,e.stack,t)},ze.readyException=function(e){l.setTimeout(function(){throw e})};var Ze=ze.Deferred();ze.fn.ready=function(e){return Ze.then(e).catch(function(e){ze.readyException(e)}),this},ze.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?! --ze.readyWait:!ze.isReady)&&(ze.isReady=!0,!0!==e&&0<--ze.readyWait||Ze.resolveWith(Ae,[ze]))}}),ze.ready.then=Ze.then,'complete'!==Ae.readyState&&('loading'===Ae.readyState||Ae.documentElement.doScroll)?(Ae.addEventListener('DOMContentLoaded',x),l.addEventListener('load',x)):l.setTimeout(ze.ready);var Ge=function(e,t,o,a,r,n,s){var l=0,i=e.length,p=null==o;if('object'===d(o))for(l in r=!0,o)Ge(e,t,l,o[l],!0,n,s);else if(void 0!==a&&(r=!0,Ce(a)||(s=!0),p&&(s?(t.call(e,a),t=null):(p=t,t=function(e,t,o){return p.call(ze(e),o)})),t))for(;l<i;l++)t(e[l],o,s?a:a.call(e[l],l,t(e[l],o)));return r?e:p?t.call(e):i?t(e[0],o):n},He=/^-ms-/,We=/-([a-z])/g,Xe=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};w.uid=1,w.prototype={cache:function(e){var t=e[this.expando];return t||(t={},Xe(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,o){var a=this.cache(e),r;if('string'==typeof t)a[b(t)]=o;else for(r in t)a[b(r)]=t[r];return a},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][b(t)]},access:function(e,t,o){return void 0===t||t&&'string'==typeof t&&void 0===o?this.get(e,t):(this.set(e,t,o),void 0===o?t:o)},remove:function(e,t){var o=e[this.expando],a;if(void 0!==o){if(void 0!==t)for(Array.isArray(t)?t=t.map(b):(t=b(t),t=(t in o)?[t]:t.match(qe)||[]),a=t.length;a--;)delete o[t[a]];(void 0===t||ze.isEmptyObject(o))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!ze.isEmptyObject(t)}};var Ke=new w,Ye=new w,Je=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,$e=/[A-Z]/g;ze.extend({hasData:function(e){return Ye.hasData(e)||Ke.hasData(e)},data:function(e,t,o){return Ye.access(e,t,o)},removeData:function(e,t){Ye.remove(e,t)},_data:function(e,t,o){return Ke.access(e,t,o)},_removeData:function(e,t){Ke.remove(e,t)}}),ze.fn.extend({data:function(e,t){var o=this[0],a=o&&o.attributes,r,n,i;if(void 0===e){if(this.length&&(i=Ye.get(o),1===o.nodeType&&!Ke.get(o,'hasDataAttrs'))){for(r=a.length;r--;)a[r]&&(n=a[r].name,0===n.indexOf('data-')&&(n=b(n.slice(5)),E(o,n,i[n])));Ke.set(o,'hasDataAttrs',!0)}return i}return'object'==typeof e?this.each(function(){Ye.set(this,e)}):Ge(this,function(t){var a;return o&&void 0===t?(a=Ye.get(o,e),void 0!==a)?a:(a=E(o,e),void 0===a?void 0:a):void this.each(function(){Ye.set(this,e,t)})},null,t,1<arguments.length,null,!0)},removeData:function(e){return this.each(function(){Ye.remove(this,e)})}}),ze.extend({queue:function(e,t,o){var a;if(e)return t=(t||'fx')+'queue',a=Ke.get(e,t),o&&(!a||Array.isArray(o)?a=Ke.access(e,t,ze.makeArray(o)):a.push(o)),a||[]},dequeue:function(e,t){t=t||'fx';var o=ze.queue(e,t),a=o.length,r=o.shift(),n=ze._queueHooks(e,t),i=function(){ze.dequeue(e,t)};'inprogress'===r&&(r=o.shift(),a--),r&&('fx'===t&&o.unshift('inprogress'),delete n.stop,r.call(e,i,n)),!a&&n&&n.empty.fire()},_queueHooks:function(e,t){var o=t+'queueHooks';return Ke.get(e,o)||Ke.access(e,o,{empty:ze.Callbacks('once memory').add(function(){Ke.remove(e,[t+'queue',o])})})}}),ze.fn.extend({queue:function(e,t){var o=2;return'string'!=typeof e&&(t=e,e='fx',o--),arguments.length<o?ze.queue(this[0],e):void 0===t?this:this.each(function(){var o=ze.queue(this,e,t);ze._queueHooks(this,e),'fx'===e&&'inprogress'!==o[0]&&ze.dequeue(this,e)})},dequeue:function(e){return this.each(function(){ze.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||'fx',[])},promise:function(e,t){var o=1,a=ze.Deferred(),r=this,n=this.length,i=function(){--o||a.resolveWith(r,[r])},s;for('string'!=typeof e&&(t=e,e=void 0),e=e||'fx';n--;)s=Ke.get(r[n],e+'queueHooks'),s&&s.empty&&(o++,s.empty.add(i));return i(),a.promise(t)}});var Qe=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,et=new RegExp('^(?:([+-])=|)('+Qe+')([a-z%]*)$','i'),tt=['Top','Right','Bottom','Left'],ot=Ae.documentElement,at=function(e){return ze.contains(e.ownerDocument,e)},rt={composed:!0};ot.getRootNode&&(at=function(e){return ze.contains(e.ownerDocument,e)||e.getRootNode(rt)===e.ownerDocument});var nt=function(e,t){return e=t||e,'none'===e.style.display||''===e.style.display&&at(e)&&'none'===ze.css(e,'display')},it={};ze.fn.extend({show:function(){return I(this,!0)},hide:function(){return I(this)},toggle:function(e){return'boolean'==typeof e?e?this.show():this.hide():this.each(function(){nt(this)?ze(this).show():ze(this).hide()})}});var st=/^(?:checkbox|radio)$/i,lt=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,pt=/^$|^module$|\/(?:java|ecma)script/i;(function(){var e=Ae.createDocumentFragment(),t=e.appendChild(Ae.createElement('div')),o=Ae.createElement('input');o.setAttribute('type','radio'),o.setAttribute('checked','checked'),o.setAttribute('name','t'),t.appendChild(o),Se.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML='<textarea>x</textarea>',Se.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue,t.innerHTML='<option></option>',Se.option=!!t.lastChild})();var dt={thead:[1,'<table>','</table>'],col:[2,'<table><colgroup>','</colgroup></table>'],tr:[2,'<table><tbody>','</tbody></table>'],td:[3,'<table><tbody><tr>','</tr></tbody></table>'],_default:[0,'','']};dt.tbody=dt.tfoot=dt.colgroup=dt.caption=dt.thead,dt.th=dt.td,Se.option||(dt.optgroup=dt.option=[1,'<select multiple=\'multiple\'>','</select>']);var ct=/<|&#?\w+;/,ut=/^key/,mt=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,gt=/^([^.]*)(?:\.(.+)|)/;ze.event={global:{},add:function(o,e,a,r,n){var i=Ke.get(o),s,l,p,d,c,t,u,m,g,y,_;if(Xe(o))for(a.handler&&(s=a,a=s.handler,n=s.selector),n&&ze.find.matchesSelector(ot,n),a.guid||(a.guid=ze.guid++),(d=i.events)||(d=i.events=Object.create(null)),(l=i.handle)||(l=i.handle=function(t){return'undefined'!=typeof ze&&ze.event.triggered!==t.type?ze.event.dispatch.apply(o,arguments):void 0}),e=(e||'').match(qe)||[''],c=e.length;c--;)(p=gt.exec(e[c])||[],g=_=p[1],y=(p[2]||'').split('.').sort(),!!g)&&(u=ze.event.special[g]||{},g=(n?u.delegateType:u.bindType)||g,u=ze.event.special[g]||{},t=ze.extend({type:g,origType:_,data:r,handler:a,guid:a.guid,selector:n,needsContext:n&&ze.expr.match.needsContext.test(n),namespace:y.join('.')},s),(m=d[g])||(m=d[g]=[],m.delegateCount=0,(!u.setup||!1===u.setup.call(o,r,y,l))&&o.addEventListener&&o.addEventListener(g,l)),u.add&&(u.add.call(o,t),!t.handler.guid&&(t.handler.guid=a.guid)),n?m.splice(m.delegateCount++,0,t):m.push(t),ze.event.global[g]=!0)},remove:function(e,o,a,r,n){var i=Ke.hasData(e)&&Ke.get(e),s,l,p,d,c,t,u,m,g,y,_;if(i&&(d=i.events)){for(o=(o||'').match(qe)||[''],c=o.length;c--;){if(p=gt.exec(o[c])||[],g=_=p[1],y=(p[2]||'').split('.').sort(),!g){for(g in d)ze.event.remove(e,g+o[c],a,r,!0);continue}for(u=ze.event.special[g]||{},g=(r?u.delegateType:u.bindType)||g,m=d[g]||[],p=p[2]&&new RegExp('(^|\\.)'+y.join('\\.(?:.*\\.|)')+'(\\.|$)'),l=s=m.length;s--;)t=m[s],(n||_===t.origType)&&(!a||a.guid===t.guid)&&(!p||p.test(t.namespace))&&(!r||r===t.selector||'**'===r&&t.selector)&&(m.splice(s,1),t.selector&&m.delegateCount--,u.remove&&u.remove.call(e,t));l&&!m.length&&((!u.teardown||!1===u.teardown.call(e,y,i.handle))&&ze.removeEvent(e,g,i.handle),delete d[g])}ze.isEmptyObject(d)&&Ke.remove(e,'handle events')}},dispatch:function(e){var t=Array(arguments.length),o=ze.event.fix(e),a=(Ke.get(this,'events')||Object.create(null))[o.type]||[],r=ze.event.special[o.type]||{},n,i,s,l,p,d;for(t[0]=o,n=1;n<arguments.length;n++)t[n]=arguments[n];if(o.delegateTarget=this,!(r.preDispatch&&!1===r.preDispatch.call(this,o))){for(d=ze.event.handlers.call(this,o,a),n=0;(l=d[n++])&&!o.isPropagationStopped();)for(o.currentTarget=l.elem,i=0;(p=l.handlers[i++])&&!o.isImmediatePropagationStopped();)(!o.rnamespace||!1===p.namespace||o.rnamespace.test(p.namespace))&&(o.handleObj=p,o.data=p.data,s=((ze.event.special[p.origType]||{}).handle||p.handler).apply(l.elem,t),void 0!==s&&!1===(o.result=s)&&(o.preventDefault(),o.stopPropagation()));return r.postDispatch&&r.postDispatch.call(this,o),o.result}},handlers:function(e,t){var o=[],a=t.delegateCount,r=e.target,n,i,s,l,p;if(a&&r.nodeType&&!('click'===e.type&&1<=e.button))for(;r!==this;r=r.parentNode||this)if(1===r.nodeType&&('click'!==e.type||!0!==r.disabled)){for(l=[],p={},n=0;n<a;n++)i=t[n],s=i.selector+' ',void 0===p[s]&&(p[s]=i.needsContext?-1<ze(s,this).index(r):ze.find(s,this,null,[r]).length),p[s]&&l.push(i);l.length&&o.push({elem:r,handlers:l})}return r=this,a<t.length&&o.push({elem:r,handlers:t.slice(a)}),o},addProp:function(e,t){Object.defineProperty(ze.Event.prototype,e,{enumerable:!0,configurable:!0,get:Ce(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[ze.expando]?e:new ze.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return st.test(t.type)&&t.click&&u(t,'input')&&F(t,'click',z),!1},trigger:function(e){var t=this||e;return st.test(t.type)&&t.click&&u(t,'input')&&F(t,'click'),!0},_default:function(e){var t=e.target;return st.test(t.type)&&t.click&&u(t,'input')&&Ke.get(t,'click')||u(t,'a')}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},ze.removeEvent=function(e,t,o){e.removeEventListener&&e.removeEventListener(t,o)},ze.Event=function(e,t){return this instanceof ze.Event?void(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?z:D,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&ze.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[ze.expando]=!0):new ze.Event(e,t)},ze.Event.prototype={constructor:ze.Event,isDefaultPrevented:D,isPropagationStopped:D,isImmediatePropagationStopped:D,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=z,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=z,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=z,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},ze.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&ut.test(e.type)?null==e.charCode?e.keyCode:e.charCode:!e.which&&void 0!==t&&mt.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},ze.event.addProp),ze.each({focus:'focusin',blur:'focusout'},function(e,t){ze.event.special[e]={setup:function(){return F(this,e,L),!1},trigger:function(){return F(this,e),!0},delegateType:t}}),ze.each({mouseenter:'mouseover',mouseleave:'mouseout',pointerenter:'pointerover',pointerleave:'pointerout'},function(e,t){ze.event.special[e]={delegateType:t,bindType:t,handle:function(e){var o=this,a=e.relatedTarget,r=e.handleObj,n;return a&&(a===o||ze.contains(o,a))||(e.type=r.origType,n=r.handler.apply(this,arguments),e.type=t),n}}}),ze.fn.extend({on:function(e,t,o,a){return B(this,e,t,o,a)},one:function(e,t,o,a){return B(this,e,t,o,a,1)},off:function(e,t,o){var a,r;if(e&&e.preventDefault&&e.handleObj)return a=e.handleObj,ze(e.delegateTarget).off(a.namespace?a.origType+'.'+a.namespace:a.origType,a.selector,a.handler),this;if('object'==typeof e){for(r in e)this.off(r,t,e[r]);return this}return(!1===t||'function'==typeof t)&&(o=t,t=void 0),!1===o&&(o=D),this.each(function(){ze.event.remove(this,e,o,t)})}});var yt=/<script|<style|<link/i,_t=/checked\s*(?:[^=]|=\s*.checked.)/i,ft=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;ze.extend({htmlPrefilter:function(e){return e},clone:function(e,t,o){var a=e.cloneNode(!0),r=at(e),n,i,s,l;if(!Se.noCloneChecked&&(1===e.nodeType||11===e.nodeType)&&!ze.isXMLDoc(e))for(l=A(a),s=A(e),(n=0,i=s.length);n<i;n++)V(s[n],l[n]);if(t)if(o)for(s=s||A(e),l=l||A(a),(n=0,i=s.length);n<i;n++)U(s[n],l[n]);else U(e,a);return l=A(a,'script'),0<l.length&&k(l,!r&&A(e,'script')),a},cleanData:function(e){for(var t=ze.event.special,o=0,a,r,n;void 0!==(r=e[o]);o++)if(Xe(r)){if(a=r[Ke.expando]){if(a.events)for(n in a.events)t[n]?ze.event.remove(r,n):ze.removeEvent(r,n,a.handle);r[Ke.expando]=void 0}r[Ye.expando]&&(r[Ye.expando]=void 0)}}}),ze.fn.extend({detach:function(e){return j(this,e,!0)},remove:function(e){return j(this,e)},text:function(e){return Ge(this,function(e){return void 0===e?ze.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=e)})},null,e,arguments.length)},append:function(){return q(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=M(this,e);t.appendChild(e)}})},prepend:function(){return q(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=M(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return q(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return q(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e=0,t;null!=(t=this[e]);e++)1===t.nodeType&&(ze.cleanData(A(t,!1)),t.textContent='');return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return ze.clone(this,e,t)})},html:function(e){return Ge(this,function(e){var t=this[0]||{},o=0,a=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if('string'==typeof e&&!yt.test(e)&&!dt[(lt.exec(e)||['',''])[1].toLowerCase()]){e=ze.htmlPrefilter(e);try{for(;o<a;o++)t=this[o]||{},1===t.nodeType&&(ze.cleanData(A(t,!1)),t.innerHTML=e);t=0}catch(t){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return q(this,arguments,function(t){var o=this.parentNode;0>ze.inArray(this,e)&&(ze.cleanData(A(this)),o&&o.replaceChild(t,this))},e)}}),ze.each({appendTo:'append',prependTo:'prepend',insertBefore:'before',insertAfter:'after',replaceAll:'replaceWith'},function(e,t){ze.fn[e]=function(e){for(var o=[],a=ze(e),r=a.length-1,n=0,i;n<=r;n++)i=n===r?this:this.clone(!0),ze(a[n])[t](i),he.apply(o,i.get());return this.pushStack(o)}});var ht=new RegExp('^('+Qe+')(?!px)[a-z%]+$','i'),xt=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=l),t.getComputedStyle(e)},vt=function(e,t,o){var a={},r,n;for(n in t)a[n]=e.style[n],e.style[n]=t[n];for(n in r=o.call(e),t)e.style[n]=a[n];return r},bt=new RegExp(tt.join('|'),'i');(function(){function e(){if(a){o.style.cssText='position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0',a.style.cssText='position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%',ot.appendChild(o).appendChild(a);var e=l.getComputedStyle(a);r='1%'!==e.top,d=12===t(e.marginLeft),a.style.right='60%',s=36===t(e.right),n=36===t(e.width),a.style.position='absolute',i=12===t(a.offsetWidth/3),ot.removeChild(o),a=null}}function t(e){return Math.round(parseFloat(e))}var o=Ae.createElement('div'),a=Ae.createElement('div'),r,n,i,s,p,d;a.style&&(a.style.backgroundClip='content-box',a.cloneNode(!0).style.backgroundClip='',Se.clearCloneStyle='content-box'===a.style.backgroundClip,ze.extend(Se,{boxSizingReliable:function(){return e(),n},pixelBoxStyles:function(){return e(),s},pixelPosition:function(){return e(),r},reliableMarginLeft:function(){return e(),d},scrollboxSize:function(){return e(),i},reliableTrDimensions:function(){var e,t,o,a;return null==p&&(e=Ae.createElement('table'),t=Ae.createElement('tr'),o=Ae.createElement('div'),e.style.cssText='position:absolute;left:-11111px',t.style.height='1px',o.style.height='9px',ot.appendChild(e).appendChild(t).appendChild(o),a=l.getComputedStyle(t),p=3<parseInt(a.height),ot.removeChild(e)),p}}))})();var wt=['Webkit','Moz','ms'],Tt=Ae.createElement('div').style,Et={},St=/^(none|table(?!-c[ea]).+)/,Ct=/^--/,It={position:'absolute',visibility:'hidden',display:'block'},At={letterSpacing:'0',fontWeight:'400'};ze.extend({cssHooks:{opacity:{get:function(e,t){if(t){var o=Z(e,'opacity');return''===o?'1':o}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,o,a){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r=b(t),n=Ct.test(t),i=e.style,s,l,p;if(n||(t=W(r)),p=ze.cssHooks[t]||ze.cssHooks[r],void 0!==o){if(l=typeof o,'string'===l&&(s=et.exec(o))&&s[1]&&(o=S(e,t,s),l='number'),null==o||o!==o)return;'number'!==l||n||(o+=s&&s[3]||(ze.cssNumber[r]?'':'px')),Se.clearCloneStyle||''!==o||0!==t.indexOf('background')||(i[t]='inherit'),p&&'set'in p&&void 0===(o=p.set(e,o,a))||(n?i.setProperty(t,o):i[t]=o)}else return p&&'get'in p&&void 0!==(s=p.get(e,!1,a))?s:i[t]}},css:function(e,t,o,a){var r=b(t),n=Ct.test(t),i,s,l;return n||(t=W(r)),l=ze.cssHooks[t]||ze.cssHooks[r],l&&'get'in l&&(i=l.get(e,!0,o)),void 0===i&&(i=Z(e,t,a)),'normal'===i&&t in At&&(i=At[t]),''===o||o?(s=parseFloat(i),!0===o||isFinite(s)?s||0:i):i}}),ze.each(['height','width'],function(e,t){ze.cssHooks[t]={get:function(e,o,a){if(o)return!St.test(ze.css(e,'display'))||e.getClientRects().length&&e.getBoundingClientRect().width?Y(e,t,a):vt(e,It,function(){return Y(e,t,a)})},set:function(e,a,r){var n=xt(e),i=!Se.scrollboxSize()&&'absolute'===n.position,s=(i||r)&&'border-box'===ze.css(e,'boxSizing',!1,n),l=r?K(e,t,r,s,n):0,p;return s&&i&&(l-=o(e['offset'+t[0].toUpperCase()+t.slice(1)]-parseFloat(n[t])-K(e,t,'border',!1,n)-.5)),l&&(p=et.exec(a))&&'px'!==(p[3]||'px')&&(e.style[t]=a,a=ze.css(e,t)),X(e,a,l)}}}),ze.cssHooks.marginLeft=G(Se.reliableMarginLeft,function(e,t){if(t)return(parseFloat(Z(e,'marginLeft'))||e.getBoundingClientRect().left-vt(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+'px'}),ze.each({margin:'',padding:'',border:'Width'},function(e,t){ze.cssHooks[e+t]={expand:function(o){for(var a=0,r={},n='string'==typeof o?o.split(' '):[o];4>a;a++)r[e+tt[a]+t]=n[a]||n[a-2]||n[0];return r}},'margin'!==e&&(ze.cssHooks[e+t].set=X)}),ze.fn.extend({css:function(e,t){return Ge(this,function(e,t,o){var a={},r=0,n,i;if(Array.isArray(t)){for(n=xt(e),i=t.length;r<i;r++)a[t[r]]=ze.css(e,t[r],!1,n);return a}return void 0===o?ze.css(e,t):ze.style(e,t,o)},e,t,1<arguments.length)}}),ze.Tween=J,J.prototype={constructor:J,init:function(e,t,o,a,r,n){this.elem=e,this.prop=o,this.easing=r||ze.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=a,this.unit=n||(ze.cssNumber[o]?'':'px')},cur:function(){var e=J.propHooks[this.prop];return e&&e.get?e.get(this):J.propHooks._default.get(this)},run:function(e){var t=J.propHooks[this.prop],o;return this.pos=this.options.duration?o=ze.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):o=e,this.now=(this.end-this.start)*o+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),t&&t.set?t.set(this):J.propHooks._default.set(this),this}},J.prototype.init.prototype=J.prototype,J.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=ze.css(e.elem,e.prop,''),t&&'auto'!==t?t:0)},set:function(e){ze.fx.step[e.prop]?ze.fx.step[e.prop](e):1===e.elem.nodeType&&(ze.cssHooks[e.prop]||null!=e.elem.style[W(e.prop)])?ze.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},J.propHooks.scrollTop=J.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},ze.easing={linear:function(e){return e},swing:function(e){return .5-Math.cos(e*Math.PI)/2},_default:'swing'},ze.fx=J.prototype.init,ze.fx.step={};var kt=/^(?:toggle|show|hide)$/,Pt=/queueHooks$/,zt,Dt;ze.Animation=ze.extend(re,{tweeners:{"*":[function(e,t){var o=this.createTween(e,t);return S(o.elem,e,et.exec(t),o),o}]},tweener:function(e,t){Ce(e)?(t=e,e=['*']):e=e.match(qe);for(var o=0,a=e.length,r;o<a;o++)r=e[o],re.tweeners[r]=re.tweeners[r]||[],re.tweeners[r].unshift(t)},prefilters:[oe],prefilter:function(e,t){t?re.prefilters.unshift(e):re.prefilters.push(e)}}),ze.speed=function(e,t,o){var a=e&&'object'==typeof e?ze.extend({},e):{complete:o||!o&&t||Ce(e)&&e,duration:e,easing:o&&t||t&&!Ce(t)&&t};return ze.fx.off?a.duration=0:'number'!=typeof a.duration&&(a.duration in ze.fx.speeds?a.duration=ze.fx.speeds[a.duration]:a.duration=ze.fx.speeds._default),(null==a.queue||!0===a.queue)&&(a.queue='fx'),a.old=a.complete,a.complete=function(){Ce(a.old)&&a.old.call(this),a.queue&&ze.dequeue(this,a.queue)},a},ze.fn.extend({fadeTo:function(e,t,o,a){return this.filter(nt).css('opacity',0).show().end().animate({opacity:t},e,o,a)},animate:function(e,t,o,a){var r=ze.isEmptyObject(e),n=ze.speed(t,o,a),i=function(){var t=re(this,ze.extend({},e),n);(r||Ke.get(this,'finish'))&&t.stop(!0)};return i.finish=i,r||!1===n.queue?this.each(i):this.queue(n.queue,i)},stop:function(e,t,o){var a=function(e){var t=e.stop;delete e.stop,t(o)};return'string'!=typeof e&&(o=t,t=e,e=void 0),t&&this.queue(e||'fx',[]),this.each(function(){var t=!0,r=null!=e&&e+'queueHooks',n=ze.timers,i=Ke.get(this);if(r)i[r]&&i[r].stop&&a(i[r]);else for(r in i)i[r]&&i[r].stop&&Pt.test(r)&&a(i[r]);for(r=n.length;r--;)n[r].elem===this&&(null==e||n[r].queue===e)&&(n[r].anim.stop(o),t=!1,n.splice(r,1));(t||!o)&&ze.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||'fx'),this.each(function(){var t=Ke.get(this),o=t[e+'queue'],a=t[e+'queueHooks'],r=ze.timers,n=o?o.length:0,i;for(t.finish=!0,ze.queue(this,e,[]),a&&a.stop&&a.stop.call(this,!0),i=r.length;i--;)r[i].elem===this&&r[i].queue===e&&(r[i].anim.stop(!0),r.splice(i,1));for(i=0;i<n;i++)o[i]&&o[i].finish&&o[i].finish.call(this);delete t.finish})}}),ze.each(['toggle','show','hide'],function(e,t){var o=ze.fn[t];ze.fn[t]=function(e,a,r){return null==e||'boolean'==typeof e?o.apply(this,arguments):this.animate(ee(t,!0),e,a,r)}}),ze.each({slideDown:ee('show'),slideUp:ee('hide'),slideToggle:ee('toggle'),fadeIn:{opacity:'show'},fadeOut:{opacity:'hide'},fadeToggle:{opacity:'toggle'}},function(e,t){ze.fn[e]=function(e,o,a){return this.animate(t,e,o,a)}}),ze.timers=[],ze.fx.tick=function(){var e=0,t=ze.timers,o;for(zt=Date.now();e<t.length;e++)o=t[e],o()||t[e]!==o||t.splice(e--,1);t.length||ze.fx.stop(),zt=void 0},ze.fx.timer=function(e){ze.timers.push(e),ze.fx.start()},ze.fx.interval=13,ze.fx.start=function(){Dt||(Dt=!0,$())},ze.fx.stop=function(){Dt=null},ze.fx.speeds={slow:600,fast:200,_default:400},ze.fn.delay=function(e,t){return e=ze.fx?ze.fx.speeds[e]||e:e,t=t||'fx',this.queue(t,function(t,o){var a=l.setTimeout(t,e);o.stop=function(){l.clearTimeout(a)}})},function(){var e=Ae.createElement('input'),t=Ae.createElement('select'),o=t.appendChild(Ae.createElement('option'));e.type='checkbox',Se.checkOn=''!==e.value,Se.optSelected=o.selected,e=Ae.createElement('input'),e.value='t',e.type='radio',Se.radioValue='t'===e.value}();var Lt=ze.expr.attrHandle,Rt;ze.fn.extend({attr:function(e,t){return Ge(this,ze.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){ze.removeAttr(this,e)})}}),ze.extend({attr:function(e,t,o){var a=e.nodeType,r,n;if(3!==a&&8!==a&&2!==a)return'undefined'==typeof e.getAttribute?ze.prop(e,t,o):(1===a&&ze.isXMLDoc(e)||(n=ze.attrHooks[t.toLowerCase()]||(ze.expr.match.bool.test(t)?Rt:void 0)),void 0!==o)?null===o?void ze.removeAttr(e,t):n&&'set'in n&&void 0!==(r=n.set(e,o,t))?r:(e.setAttribute(t,o+''),o):n&&'get'in n&&null!==(r=n.get(e,t))?r:(r=ze.find.attr(e,t),null==r?void 0:r)},attrHooks:{type:{set:function(e,t){if(!Se.radioValue&&'radio'===t&&u(e,'input')){var o=e.value;return e.setAttribute('type',t),o&&(e.value=o),t}}}},removeAttr:function(e,t){var o=0,a=t&&t.match(qe),r;if(a&&1===e.nodeType)for(;r=a[o++];)e.removeAttribute(r)}}),Rt={set:function(e,t,o){return!1===t?ze.removeAttr(e,o):e.setAttribute(o,o),o}},ze.each(ze.expr.match.bool.source.match(/\w+/g),function(e,t){var o=Lt[t]||ze.find.attr;Lt[t]=function(e,t,a){var r=t.toLowerCase(),n,i;return a||(i=Lt[r],Lt[r]=n,n=null==o(e,t,a)?null:r,Lt[r]=i),n}});var Bt=/^(?:input|select|textarea|button)$/i,Ft=/^(?:a|area)$/i;ze.fn.extend({prop:function(e,t){return Ge(this,ze.prop,e,t,1<arguments.length)},removeProp:function(e){return this.each(function(){delete this[ze.propFix[e]||e]})}}),ze.extend({prop:function(e,t,o){var a=e.nodeType,r,n;if(3!==a&&8!==a&&2!==a)return 1===a&&ze.isXMLDoc(e)||(t=ze.propFix[t]||t,n=ze.propHooks[t]),void 0===o?n&&'get'in n&&null!==(r=n.get(e,t))?r:e[t]:n&&'set'in n&&void 0!==(r=n.set(e,o,t))?r:e[t]=o},propHooks:{tabIndex:{get:function(e){var t=ze.find.attr(e,'tabindex');return t?parseInt(t,10):Bt.test(e.nodeName)||Ft.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:'htmlFor',class:'className'}}),Se.optSelected||(ze.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),ze.each(['tabIndex','readOnly','maxLength','cellSpacing','cellPadding','rowSpan','colSpan','useMap','frameBorder','contentEditable'],function(){ze.propFix[this.toLowerCase()]=this}),ze.fn.extend({addClass:function(e){var t=0,o,a,r,n,i,s,l;if(Ce(e))return this.each(function(t){ze(this).addClass(e.call(this,t,ie(this)))});if(o=se(e),o.length)for(;a=this[t++];)if(n=ie(a),r=1===a.nodeType&&' '+ne(n)+' ',r){for(s=0;i=o[s++];)0>r.indexOf(' '+i+' ')&&(r+=i+' ');l=ne(r),n!==l&&a.setAttribute('class',l)}return this},removeClass:function(e){var t=0,o,a,r,n,i,s,l;if(Ce(e))return this.each(function(t){ze(this).removeClass(e.call(this,t,ie(this)))});if(!arguments.length)return this.attr('class','');if(o=se(e),o.length)for(;a=this[t++];)if(n=ie(a),r=1===a.nodeType&&' '+ne(n)+' ',r){for(s=0;i=o[s++];)for(;-1<r.indexOf(' '+i+' ');)r=r.replace(' '+i+' ',' ');l=ne(r),n!==l&&a.setAttribute('class',l)}return this},toggleClass:function(e,t){var o=typeof e,a='string'==o||Array.isArray(e);return'boolean'==typeof t&&a?t?this.addClass(e):this.removeClass(e):Ce(e)?this.each(function(o){ze(this).toggleClass(e.call(this,o,ie(this),t),t)}):this.each(function(){var t,r,n,i;if(a)for(r=0,n=ze(this),i=se(e);t=i[r++];)n.hasClass(t)?n.removeClass(t):n.addClass(t);else(void 0===e||'boolean'==o)&&(t=ie(this),t&&Ke.set(this,'__className__',t),this.setAttribute&&this.setAttribute('class',t||!1===e?'':Ke.get(this,'__className__')||''))})},hasClass:function(e){var t=0,o,a;for(o=' '+e+' ';a=this[t++];)if(1===a.nodeType&&-1<(' '+ne(ie(a))+' ').indexOf(o))return!0;return!1}});var Mt=/\r/g;ze.fn.extend({val:function(e){var t=this[0],o,a,r;return arguments.length?(r=Ce(e),this.each(function(t){var a;1!==this.nodeType||(a=r?e.call(this,t,ze(this).val()):e,null==a?a='':'number'==typeof a?a+='':Array.isArray(a)&&(a=ze.map(a,function(e){return null==e?'':e+''})),o=ze.valHooks[this.type]||ze.valHooks[this.nodeName.toLowerCase()],(!o||!('set'in o)||void 0===o.set(this,a,'value'))&&(this.value=a))})):t?(o=ze.valHooks[t.type]||ze.valHooks[t.nodeName.toLowerCase()],o&&'get'in o&&void 0!==(a=o.get(t,'value')))?a:(a=t.value,'string'==typeof a?a.replace(Mt,''):null==a?'':a):void 0}}),ze.extend({valHooks:{option:{get:function(e){var t=ze.find.attr(e,'value');return null==t?ne(ze.text(e)):t}},select:{get:function(e){var t=e.options,o=e.selectedIndex,a='select-one'===e.type,r=a?null:[],n=a?o+1:t.length,s,l,p;for(p=0>o?n:a?o:0;p<n;p++)if(l=t[p],(l.selected||p===o)&&!l.disabled&&(!l.parentNode.disabled||!u(l.parentNode,'optgroup'))){if(s=ze(l).val(),a)return s;r.push(s)}return r},set:function(e,t){for(var o=e.options,a=ze.makeArray(t),r=o.length,n,i;r--;)i=o[r],(i.selected=-1<ze.inArray(ze.valHooks.option.get(i),a))&&(n=!0);return n||(e.selectedIndex=-1),a}}}}),ze.each(['radio','checkbox'],function(){ze.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=-1<ze.inArray(ze(e).val(),t)}},Se.checkOn||(ze.valHooks[this].get=function(e){return null===e.getAttribute('value')?'on':e.value})}),Se.focusin='onfocusin'in l;var Ot=/^(?:focusinfocus|focusoutblur)$/,Nt=function(t){t.stopPropagation()};ze.extend(ze.event,{trigger:function(e,t,o,a){var r=[o||Ae],n=we.call(e,'type')?e.type:e,s=we.call(e,'namespace')?e.namespace.split('.'):[],p,i,d,c,u,m,g,y;if((i=y=d=o=o||Ae,3!==o.nodeType&&8!==o.nodeType)&&!Ot.test(n+ze.event.triggered)&&(-1<n.indexOf('.')&&(s=n.split('.'),n=s.shift(),s.sort()),u=0>n.indexOf(':')&&'on'+n,e=e[ze.expando]?e:new ze.Event(n,'object'==typeof e&&e),e.isTrigger=a?2:3,e.namespace=s.join('.'),e.rnamespace=e.namespace?new RegExp('(^|\\.)'+s.join('\\.(?:.*\\.|)')+'(\\.|$)'):null,e.result=void 0,e.target||(e.target=o),t=null==t?[e]:ze.makeArray(t,[e]),g=ze.event.special[n]||{},a||!g.trigger||!1!==g.trigger.apply(o,t))){if(!a&&!g.noBubble&&!Ie(o)){for(c=g.delegateType||n,Ot.test(c+n)||(i=i.parentNode);i;i=i.parentNode)r.push(i),d=i;d===(o.ownerDocument||Ae)&&r.push(d.defaultView||d.parentWindow||l)}for(p=0;(i=r[p++])&&!e.isPropagationStopped();)y=i,e.type=1<p?c:g.bindType||n,m=(Ke.get(i,'events')||Object.create(null))[e.type]&&Ke.get(i,'handle'),m&&m.apply(i,t),m=u&&i[u],m&&m.apply&&Xe(i)&&(e.result=m.apply(i,t),!1===e.result&&e.preventDefault());return e.type=n,a||e.isDefaultPrevented()||g._default&&!1!==g._default.apply(r.pop(),t)||!Xe(o)||!u||!Ce(o[n])||Ie(o)||(d=o[u],d&&(o[u]=null),ze.event.triggered=n,e.isPropagationStopped()&&y.addEventListener(n,Nt),o[n](),e.isPropagationStopped()&&y.removeEventListener(n,Nt),ze.event.triggered=void 0,d&&(o[u]=d)),e.result}},simulate:function(t,o,a){var r=ze.extend(new ze.Event,a,{type:t,isSimulated:!0});ze.event.trigger(r,null,o)}}),ze.fn.extend({trigger:function(e,t){return this.each(function(){ze.event.trigger(e,t,this)})},triggerHandler:function(e,t){var o=this[0];if(o)return ze.event.trigger(e,t,o,!0)}}),Se.focusin||ze.each({focus:'focusin',blur:'focusout'},function(e,t){var o=function(e){ze.event.simulate(t,e.target,ze.event.fix(e))};ze.event.special[t]={setup:function(){var a=this.ownerDocument||this.document||this,r=Ke.access(a,t);r||a.addEventListener(e,o,!0),Ke.access(a,t,(r||0)+1)},teardown:function(){var a=this.ownerDocument||this.document||this,r=Ke.access(a,t)-1;r?Ke.access(a,t,r):(a.removeEventListener(e,o,!0),Ke.remove(a,t))}}});var Ut=l.location,Vt={guid:Date.now()},qt=/\?/;ze.parseXML=function(e){var t;if(!e||'string'!=typeof e)return null;try{t=new l.DOMParser().parseFromString(e,'text/xml')}catch(o){t=void 0}return(!t||t.getElementsByTagName('parsererror').length)&&ze.error('Invalid XML: '+e),t};var jt=/\[\]$/,Zt=/\r?\n/g,Gt=/^(?:submit|button|image|reset|file)$/i,Ht=/^(?:input|select|textarea|keygen)/i;ze.param=function(e,t){var o=[],a=function(e,t){var a=Ce(t)?t():t;o[o.length]=encodeURIComponent(e)+'='+encodeURIComponent(null==a?'':a)},r;if(null==e)return'';if(Array.isArray(e)||e.jquery&&!ze.isPlainObject(e))ze.each(e,function(){a(this.name,this.value)});else for(r in e)le(r,e[r],t,a);return o.join('&')},ze.fn.extend({serialize:function(){return ze.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=ze.prop(this,'elements');return e?ze.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!ze(this).is(':disabled')&&Ht.test(this.nodeName)&&!Gt.test(e)&&(this.checked||!st.test(e))}).map(function(e,t){var o=ze(this).val();return null==o?null:Array.isArray(o)?ze.map(o,function(e){return{name:t.name,value:e.replace(Zt,'\r\n')}}):{name:t.name,value:o.replace(Zt,'\r\n')}}).get()}});var Wt=/%20/g,Xt=/#.*$/,Kt=/([?&])_=[^&]*/,Yt=/^(.*?):[ \t]*([^\r\n]*)$/mg,Jt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,$t=/^(?:GET|HEAD)$/,Qt=/^\/\//,eo={},to={},oo='*/'.concat('*'),ao=Ae.createElement('a');ao.href=Ut.href,ze.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ut.href,type:'GET',isLocal:Jt.test(Ut.protocol),global:!0,processData:!0,async:!0,contentType:'application/x-www-form-urlencoded; charset=UTF-8',accepts:{"*":oo,text:'text/plain',html:'text/html',xml:'application/xml, text/xml',json:'application/json, text/javascript'},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:'responseXML',text:'responseText',json:'responseJSON'},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":ze.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?ce(ce(e,ze.ajaxSettings),t):ce(ze.ajaxSettings,e)},ajaxPrefilter:pe(eo),ajaxTransport:pe(to),ajax:function(e,t){function o(e,t,o,i){var c=t,u,m,h,v,T;b||(b=!0,x&&l.clearTimeout(x),y=void 0,f=i||'',g.readyState=0<e?4:0,u=200<=e&&300>e||304===e,o&&(v=ue(a,g,o)),!u&&-1<ze.inArray('script',a.dataTypes)&&(a.converters['text script']=function(){}),v=me(a,v,g,u),u?(a.ifModified&&(T=g.getResponseHeader('Last-Modified'),T&&(ze.lastModified[_]=T),T=g.getResponseHeader('etag'),T&&(ze.etag[_]=T)),204===e||'HEAD'===a.type?c='nocontent':304===e?c='notmodified':(c=v.state,m=v.data,h=v.error,u=!h)):(h=c,(e||!c)&&(c='error',0>e&&(e=0))),g.status=e,g.statusText=(t||c)+'',u?s.resolveWith(r,[m,c,g]):s.rejectWith(r,[g,c,h]),g.statusCode(d),d=void 0,w&&n.trigger(u?'ajaxSuccess':'ajaxError',[g,a,u?m:h]),p.fireWith(r,[g,c]),w&&(n.trigger('ajaxComplete',[g,a]),! --ze.active&&ze.event.trigger('ajaxStop')))}'object'==typeof e&&(t=e,e=void 0),t=t||{};var a=ze.ajaxSetup({},t),r=a.context||a,n=a.context&&(r.nodeType||r.jquery)?ze(r):ze.event,s=ze.Deferred(),p=ze.Callbacks('once memory'),d=a.statusCode||{},c={},u={},m='canceled',g={readyState:0,getResponseHeader:function(e){var t;if(b){if(!h)for(h={};t=Yt.exec(f);)h[t[1].toLowerCase()+' ']=(h[t[1].toLowerCase()+' ']||[]).concat(t[2]);t=h[e.toLowerCase()+' ']}return null==t?null:t.join(', ')},getAllResponseHeaders:function(){return b?f:null},setRequestHeader:function(e,t){return null==b&&(e=u[e.toLowerCase()]=u[e.toLowerCase()]||e,c[e]=t),this},overrideMimeType:function(e){return null==b&&(a.mimeType=e),this},statusCode:function(e){if(e)if(b)g.always(e[g.status]);else for(var t in e)d[t]=[d[t],e[t]];return this},abort:function(e){var t=e||m;return y&&y.abort(t),o(0,t),this}},y,_,f,h,x,v,b,w,T,i;if(s.promise(g),a.url=((e||a.url||Ut.href)+'').replace(Qt,Ut.protocol+'//'),a.type=t.method||t.type||a.method||a.type,a.dataTypes=(a.dataType||'*').toLowerCase().match(qe)||[''],null==a.crossDomain){v=Ae.createElement('a');try{v.href=a.url,v.href=v.href,a.crossDomain=ao.protocol+'//'+ao.host!=v.protocol+'//'+v.host}catch(t){a.crossDomain=!0}}if(a.data&&a.processData&&'string'!=typeof a.data&&(a.data=ze.param(a.data,a.traditional)),de(eo,a,t,g),b)return g;for(T in w=ze.event&&a.global,w&&0==ze.active++&&ze.event.trigger('ajaxStart'),a.type=a.type.toUpperCase(),a.hasContent=!$t.test(a.type),_=a.url.replace(Xt,''),a.hasContent?a.data&&a.processData&&0===(a.contentType||'').indexOf('application/x-www-form-urlencoded')&&(a.data=a.data.replace(Wt,'+')):(i=a.url.slice(_.length),a.data&&(a.processData||'string'==typeof a.data)&&(_+=(qt.test(_)?'&':'?')+a.data,delete a.data),!1===a.cache&&(_=_.replace(Kt,'$1'),i=(qt.test(_)?'&':'?')+'_='+Vt.guid++ +i),a.url=_+i),a.ifModified&&(ze.lastModified[_]&&g.setRequestHeader('If-Modified-Since',ze.lastModified[_]),ze.etag[_]&&g.setRequestHeader('If-None-Match',ze.etag[_])),(a.data&&a.hasContent&&!1!==a.contentType||t.contentType)&&g.setRequestHeader('Content-Type',a.contentType),g.setRequestHeader('Accept',a.dataTypes[0]&&a.accepts[a.dataTypes[0]]?a.accepts[a.dataTypes[0]]+('*'===a.dataTypes[0]?'':', '+oo+'; q=0.01'):a.accepts['*']),a.headers)g.setRequestHeader(T,a.headers[T]);if(a.beforeSend&&(!1===a.beforeSend.call(r,g,a)||b))return g.abort();if(m='abort',p.add(a.complete),g.done(a.success),g.fail(a.error),y=de(to,a,t,g),!y)o(-1,'No Transport');else{if(g.readyState=1,w&&n.trigger('ajaxSend',[g,a]),b)return g;a.async&&0<a.timeout&&(x=l.setTimeout(function(){g.abort('timeout')},a.timeout));try{b=!1,y.send(c,o)}catch(t){if(b)throw t;o(-1,t)}}return g},getJSON:function(e,t,o){return ze.get(e,t,o,'json')},getScript:function(e,t){return ze.get(e,void 0,t,'script')}}),ze.each(['get','post'],function(e,t){ze[t]=function(e,o,a,r){return Ce(o)&&(r=r||a,a=o,o=void 0),ze.ajax(ze.extend({url:e,type:t,dataType:r,data:o,success:a},ze.isPlainObject(e)&&e))}}),ze.ajaxPrefilter(function(e){for(var t in e.headers)'content-type'===t.toLowerCase()&&(e.contentType=e.headers[t]||'')}),ze._evalUrl=function(e,t,o){return ze.ajax({url:e,type:'GET',dataType:'script',cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){ze.globalEval(e,t,o)}})},ze.fn.extend({wrapAll:function(e){var t;return this[0]&&(Ce(e)&&(e=e.call(this[0])),t=ze(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(e){return Ce(e)?this.each(function(t){ze(this).wrapInner(e.call(this,t))}):this.each(function(){var t=ze(this),o=t.contents();o.length?o.wrapAll(e):t.append(e)})},wrap:function(e){var t=Ce(e);return this.each(function(o){ze(this).wrapAll(t?e.call(this,o):e)})},unwrap:function(e){return this.parent(e).not('body').each(function(){ze(this).replaceWith(this.childNodes)}),this}}),ze.expr.pseudos.hidden=function(e){return!ze.expr.pseudos.visible(e)},ze.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},ze.ajaxSettings.xhr=function(){try{return new l.XMLHttpRequest}catch(t){}};var ro={0:200,1223:204},no=ze.ajaxSettings.xhr();Se.cors=!!no&&'withCredentials'in no,Se.ajax=no=!!no,ze.ajaxTransport(function(e){var t,o;if(Se.cors||no&&!e.crossDomain)return{send:function(a,r){var n=e.xhr(),s;if(n.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(s in e.xhrFields)n[s]=e.xhrFields[s];for(s in e.mimeType&&n.overrideMimeType&&n.overrideMimeType(e.mimeType),e.crossDomain||a['X-Requested-With']||(a['X-Requested-With']='XMLHttpRequest'),a)n.setRequestHeader(s,a[s]);t=function(e){return function(){t&&(t=o=n.onload=n.onerror=n.onabort=n.ontimeout=n.onreadystatechange=null,'abort'===e?n.abort():'error'===e?'number'==typeof n.status?r(n.status,n.statusText):r(0,'error'):r(ro[n.status]||n.status,n.statusText,'text'!==(n.responseType||'text')||'string'!=typeof n.responseText?{binary:n.response}:{text:n.responseText},n.getAllResponseHeaders()))}},n.onload=t(),o=n.onerror=n.ontimeout=t('error'),void 0===n.onabort?n.onreadystatechange=function(){4===n.readyState&&l.setTimeout(function(){t&&o()})}:n.onabort=o,t=t('abort');try{n.send(e.hasContent&&e.data||null)}catch(o){if(t)throw o}},abort:function(){t&&t()}}}),ze.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),ze.ajaxSetup({accepts:{script:'text/javascript, application/javascript, application/ecmascript, application/x-ecmascript'},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return ze.globalEval(e),e}}}),ze.ajaxPrefilter('script',function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type='GET')}),ze.ajaxTransport('script',function(e){if(e.crossDomain||e.scriptAttrs){var t,o;return{send:function(a,r){t=ze('<script>').attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on('load error',o=function(e){t.remove(),o=null,e&&r('error'===e.type?404:200,e.type)}),Ae.head.appendChild(t[0])},abort:function(){o&&o()}}}});var io=[],so=/(=)\?(?=&|$)|\?\?/;ze.ajaxSetup({jsonp:'callback',jsonpCallback:function(){var e=io.pop()||ze.expando+'_'+Vt.guid++;return this[e]=!0,e}}),ze.ajaxPrefilter('json jsonp',function(e,t,o){var a=!1!==e.jsonp&&(so.test(e.url)?'url':'string'==typeof e.data&&0===(e.contentType||'').indexOf('application/x-www-form-urlencoded')&&so.test(e.data)&&'data'),r,n,i;if(a||'jsonp'===e.dataTypes[0])return r=e.jsonpCallback=Ce(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(so,'$1'+r):!1!==e.jsonp&&(e.url+=(qt.test(e.url)?'&':'?')+e.jsonp+'='+r),e.converters['script json']=function(){return i||ze.error(r+' was not called'),i[0]},e.dataTypes[0]='json',n=l[r],l[r]=function(){i=arguments},o.always(function(){void 0===n?ze(l).removeProp(r):l[r]=n,e[r]&&(e.jsonpCallback=t.jsonpCallback,io.push(r)),i&&Ce(n)&&n(i[0]),i=n=void 0}),'script'}),Se.createHTMLDocument=function(){var e=Ae.implementation.createHTMLDocument('').body;return e.innerHTML='<form></form><form></form>',2===e.childNodes.length}(),ze.parseHTML=function(e,t,o){if('string'!=typeof e)return[];'boolean'==typeof t&&(o=t,t=!1);var a,r,n;return(t||(Se.createHTMLDocument?(t=Ae.implementation.createHTMLDocument(''),a=t.createElement('base'),a.href=Ae.location.href,t.head.appendChild(a)):t=Ae),r=Fe.exec(e),n=!o&&[],r)?[t.createElement(r[1])]:(r=P([e],t,n),n&&n.length&&ze(n).remove(),ze.merge([],r.childNodes))},ze.fn.load=function(e,t,o){var a=this,r=e.indexOf(' '),n,i,s;return-1<r&&(n=ne(e.slice(r)),e=e.slice(0,r)),Ce(t)?(o=t,t=void 0):t&&'object'==typeof t&&(i='POST'),0<a.length&&ze.ajax({url:e,type:i||'GET',dataType:'html',data:t}).done(function(e){s=arguments,a.html(n?ze('<div>').append(ze.parseHTML(e)).find(n):e)}).always(o&&function(e,t){a.each(function(){o.apply(this,s||[e.responseText,t,e])})}),this},ze.expr.pseudos.animated=function(e){return ze.grep(ze.timers,function(t){return e===t.elem}).length},ze.offset={setOffset:function(e,t,o){var a=ze.css(e,'position'),r=ze(e),n={},i,s,l,p,d,c,u;'static'===a&&(e.style.position='relative'),d=r.offset(),l=ze.css(e,'top'),c=ze.css(e,'left'),u=('absolute'===a||'fixed'===a)&&-1<(l+c).indexOf('auto'),u?(i=r.position(),p=i.top,s=i.left):(p=parseFloat(l)||0,s=parseFloat(c)||0),Ce(t)&&(t=t.call(e,o,ze.extend({},d))),null!=t.top&&(n.top=t.top-d.top+p),null!=t.left&&(n.left=t.left-d.left+s),'using'in t?t.using.call(e,n):('number'==typeof n.top&&(n.top+='px'),'number'==typeof n.left&&(n.left+='px'),r.css(n))}},ze.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){ze.offset.setOffset(this,e,t)});var t=this[0],o,a;if(t)return t.getClientRects().length?(o=t.getBoundingClientRect(),a=t.ownerDocument.defaultView,{top:o.top+a.pageYOffset,left:o.left+a.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var e=this[0],t={top:0,left:0},o,a,r;if('fixed'===ze.css(e,'position'))a=e.getBoundingClientRect();else{for(a=this.offset(),r=e.ownerDocument,o=e.offsetParent||r.documentElement;o&&(o===r.body||o===r.documentElement)&&'static'===ze.css(o,'position');)o=o.parentNode;o&&o!==e&&1===o.nodeType&&(t=ze(o).offset(),t.top+=ze.css(o,'borderTopWidth',!0),t.left+=ze.css(o,'borderLeftWidth',!0))}return{top:a.top-t.top-ze.css(e,'marginTop',!0),left:a.left-t.left-ze.css(e,'marginLeft',!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&'static'===ze.css(e,'position');)e=e.offsetParent;return e||ot})}}),ze.each({scrollLeft:'pageXOffset',scrollTop:'pageYOffset'},function(e,t){var o='pageYOffset'===t;ze.fn[e]=function(a){return Ge(this,function(e,a,r){var n;return Ie(e)?n=e:9===e.nodeType&&(n=e.defaultView),void 0===r?n?n[t]:e[a]:void(n?n.scrollTo(o?n.pageXOffset:r,o?r:n.pageYOffset):e[a]=r)},e,a,arguments.length)}}),ze.each(['top','left'],function(e,t){ze.cssHooks[t]=G(Se.pixelPosition,function(e,o){if(o)return o=Z(e,t),ht.test(o)?ze(e).position()[t]+'px':o})}),ze.each({Height:'height',Width:'width'},function(e,t){ze.each({padding:'inner'+e,content:t,"":'outer'+e},function(o,r){ze.fn[r]=function(n,i){var s=arguments.length&&(o||'boolean'!=typeof n),l=o||(!0===n||!0===i?'margin':'border');return Ge(this,function(t,o,n){var i;return Ie(t)?0===r.indexOf('outer')?t['inner'+e]:t.document.documentElement['client'+e]:9===t.nodeType?(i=t.documentElement,a(t.body['scroll'+e],i['scroll'+e],t.body['offset'+e],i['offset'+e],i['client'+e])):void 0===n?ze.css(t,o,l):ze.style(t,o,n,l)},t,s?n:void 0,s)}})}),ze.each(['ajaxStart','ajaxStop','ajaxComplete','ajaxError','ajaxSuccess','ajaxSend'],function(e,t){ze.fn[t]=function(e){return this.on(t,e)}}),ze.fn.extend({bind:function(e,t,o){return this.on(e,null,t,o)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,o,a){return this.on(t,e,o,a)},undelegate:function(e,t,o){return 1===arguments.length?this.off(e,'**'):this.off(t,e||'**',o)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),ze.each(['blur','focus','focusin','focusout','resize','scroll','click','dblclick','mousedown','mouseup','mousemove','mouseover','mouseout','mouseenter','mouseleave','change','select','submit','keydown','keypress','keyup','contextmenu'],function(e,t){ze.fn[t]=function(e,o){return 0<arguments.length?this.on(t,null,e,o):this.trigger(t)}});var lo=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;ze.proxy=function(e,t){var o,a,r;if('string'==typeof t&&(o=e[t],t=e,e=o),!!Ce(e))return a=_e.call(arguments,2),r=function(){return e.apply(t||this,a.concat(_e.call(arguments)))},r.guid=e.guid=e.guid||ze.guid++,r},ze.holdReady=function(e){e?ze.readyWait++:ze.ready(!0)},ze.isArray=Array.isArray,ze.parseJSON=JSON.parse,ze.nodeName=u,ze.isFunction=Ce,ze.isWindow=Ie,ze.camelCase=b,ze.type=d,ze.now=Date.now,ze.isNumeric=function(e){var t=ze.type(e);return('number'===t||'string'===t)&&!isNaN(e-parseFloat(e))},ze.trim=function(e){return null==e?'':(e+'').replace(lo,'')},n=[],i=function(){return ze}.apply(t,n),!(void 0!==i&&(e.exports=i));var po=l.jQuery,co=l.$;return ze.noConflict=function(e){return l.$===ze&&(l.$=co),e&&l.jQuery===ze&&(l.jQuery=po),ze},'undefined'==typeof s&&(l.jQuery=l.$=ze),ze})},function(e){var ea=Math.floor,ta=Math.min,B=Math.abs,Ze=Math.cos,Xe=Math.PI,m=Math.ceil,oa=Math.max,b=Math.round,d=String.fromCharCode;(function(t,o){e.exports=o()})(this,function(){'use strict';function e(e,r){if(!t)t=r;else if(!o)o=r;else{var n='var sharedChunk = {}; ('+t+')(sharedChunk); ('+o+')(sharedChunk);',i={};t(i),a=r(i),'undefined'!=typeof window&&(a.workerUrl=window.URL.createObjectURL(new Blob([n],{type:'text/javascript'})))}}var g=Math.exp,n=Math.atan,y=Math.LN10,_=Math.LN2,C=Math.pow,x=Math.log,v=Math.tan,w=Math.sin,A=Math.atan2,N=Math.sqrt,t,o,a;return e(['exports'],function(s){function t(o,t){return o(t={exports:{}},t.exports),t.exports}function e(o,t,e,a){this.cx=3*o,this.bx=3*(e-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(a-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=a,this.p2x=e,this.p2y=a}function so(o,t){this.x=o,this.y=t}function a(o,t,e,r){var n=new hd(o,t,e,r);return function(e){return n.solve(e)}}function ko(o,t,e){return ta(e,oa(t,o))}function p(o,t,e){var a=e-t,r=((o-t)%a+a)%a+t;return r===t?e:r}function ha(s){for(var t=[],e=arguments.length-1;0<e--;)t[e]=arguments[e+1];for(var r=0,n=t,i;r<n.length;r+=1)for(var a in i=n[r],i)s[a]=i[a];return s}function c(){return r++}function h(){return function o(t){return t?(t^16*Math.random()>>t/4).toString(16):'10000000-1000-4000-8000-100000000000'.replace(/[018]/g,o)}()}function op(e){return!!e&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}function u(o,a){o.forEach(function(e){a[e]&&(a[e]=a[e].bind(a))})}function sp(o,t){return-1!==o.indexOf(t,o.length-t.length)}function lp(o,t,e){var a={};for(var r in o)a[r]=t.call(e||this,o[r],r,o);return a}function pp(o,t,e){var a={};for(var r in o)t.call(e||this,o[r],r,o)&&(a[r]=o[r]);return a}function dp(e){return Array.isArray(e)?e.map(dp):'object'==typeof e&&e?lp(e,dp):e}function cp(e){i[e]||('undefined'!=typeof console&&console.warn(e),i[e]=!0)}function up(o,t,e){return(e.y-o.y)*(t.x-o.x)>(t.y-o.y)*(e.x-o.x)}function S(s){for(var t=0,e=0,r=s.length,n=r-1,i=void 0,a=void 0;e<r;n=e++)t+=((a=s[n]).x-(i=s[e]).x)*(i.y+a.y);return t}function k(){return'undefined'!=typeof WorkerGlobalScope&&'undefined'!=typeof self&&self instanceof WorkerGlobalScope}function I(o){var s={};if(o.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(e,t,o,r){var n=o||r;return s[t]=!n||n.toLowerCase(),''}),s['max-age']){var e=parseInt(s['max-age'],10);isNaN(e)?delete s['max-age']:s['max-age']=e}return s}function z(o){if(null==l){var t=o.navigator?o.navigator.userAgent:null;l=!!o.safari||t&&(/\b(iPad|iPhone|iPod)\b/.test(t)||t.match('Safari')&&!t.match('Chrome'))}return l}function E(o){try{var t=vd[o];return t.setItem('_mapbox_test_',1),t.removeItem('_mapbox_test_'),!0}catch(e){return!1}}function P(o){var t=o.createTexture();o.bindTexture(o.TEXTURE_2D,t);try{if(o.texImage2D(o.TEXTURE_2D,0,o.RGBA,o.RGBA,o.UNSIGNED_BYTE,T),o.isContextLost())return;O.supported=!0}catch(e){}o.deleteTexture(t),U=!0}function mp(e){return 0===e.indexOf('mapbox:')}function Z(e){return G.test(e)}function J(o){var t=o.match(X);if(!t)throw new Error('Unable to parse URL object');return{protocol:t[1],authority:t[2],path:t[3]||'/',params:t[4]?t[4].split('&'):[]}}function Y(o){var t=o.params.length?'?'+o.params.join('&'):'';return o.protocol+'://'+o.authority+o.path+t}function $(o){if(!o)return null;var a=o.split('.');if(!a||3!==a.length)return null;try{return JSON.parse(decodeURIComponent(vd.atob(a[1]).split('').map(function(e){return'%'+('00'+e.charCodeAt(0).toString(16)).slice(-2)}).join('')))}catch(e){return null}}function W(){vd.caches&&!yt&&(yt=vd.caches.open('mapbox-tiles'))}function lt(o){var t=o.indexOf('?');return 0>t?o:o.slice(0,t)}function pt(){return null==et&&(et=vd.OffscreenCanvas&&new vd.OffscreenCanvas(1,1).getContext('2d')&&'function'==typeof vd.createImageBitmap),et}function ft(o,t,e){e[o]&&-1!==e[o].indexOf(t)||(e[o]=e[o]||[],e[o].push(t))}function At(o,t,e){if(e&&e[o]){var a=e[o].indexOf(t);-1!==a&&e[o].splice(a,1)}}function St(o){var t=o.value;return t?[new Cd(o.key,t,'constants have been deprecated as of v8')]:[]}function gp(s){for(var t=[],e=arguments.length-1;0<e--;)t[e]=arguments[e+1];for(var r=0,n=t,i;r<n.length;r+=1)for(var a in i=n[r],i)s[a]=i[a];return s}function Mt(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}function Bt(o){if(Array.isArray(o))return o.map(Bt);if(o instanceof Object&&!(o instanceof Number||o instanceof String||o instanceof Boolean)){var t={};for(var e in o)t[e]=Bt(o[e]);return t}return Mt(o)}function Tt(o,a){return{kind:'array',itemType:o,N:a}}function Zt(o){if('array'===o.kind){var t=Zt(o.itemType);return'number'==typeof o.N?'array<'+t+', '+o.N+'>':'value'===o.itemType.kind?'array':'array<'+t+'>'}return o.kind}function Xt(o,t){if('error'===t.kind)return null;if('array'!==o.kind){if(o.kind===t.kind)return null;if('value'===o.kind)for(var e=0,a=Rd;e<a.length;e+=1)if(!Xt(a[e],t))return null}else if('array'===t.kind&&(0===t.N&&'value'===t.itemType.kind||!Xt(o.itemType,t.itemType))&&('number'!=typeof o.N||o.N===t.N))return null;return'Expected '+Zt(o)+' but found '+Zt(t)+' instead.'}function Ht(o,t){return t.some(function(t){return t.kind===o.kind})}function Yt(o,a){return a.some(function(a){return'null'===a?null===o:'array'===a?Array.isArray(o):'object'===a?o&&!Array.isArray(o)&&'object'==typeof o:a==typeof o})}function $t(o,a,i,s){return'number'==typeof o&&0<=o&&255>=o&&'number'==typeof a&&0<=a&&255>=a&&'number'==typeof i&&0<=i&&255>=i?void 0===s||'number'==typeof s&&0<=s&&1>=s?null:'Invalid rgba value ['+[o,a,i,s].join(', ')+']: \'a\' must be between 0 and 1.':'Invalid rgba value ['+('number'==typeof s?[o,a,i,s]:[o,a,i]).join(', ')+']: \'r\', \'g\', and \'b\' must be between 0 and 255.'}function ie(o){if(null===o)return!0;if('string'==typeof o)return!0;if('boolean'==typeof o)return!0;if('number'==typeof o)return!0;if(o instanceof Wt)return!0;if(o instanceof Qt)return!0;if(o instanceof ee)return!0;if(o instanceof re)return!0;if(Array.isArray(o)){for(var a=0,e=o;a<e.length;a+=1)if(!ie(e[a]))return!1;return!0}if('object'==typeof o){for(var r in o)if(!ie(o[r]))return!1;return!0}return!1}function ae(o){if(null===o)return Ft;if('string'==typeof o)return Id;if('boolean'==typeof o)return Ad;if('number'==typeof o)return Dt;if(o instanceof Wt)return kd;if(o instanceof Qt)return Dd;if(o instanceof ee)return Nt;if(o instanceof re)return Ld;if(Array.isArray(o)){for(var s=o.length,r=0,n=o,i,e;r<n.length;r+=1){if(e=ae(n[r]),i){if(i===e)continue;i=zd;break}i=e}return Tt(i||zd,s)}return Pd}function oe(o){var a=typeof o;return null===o?'':'string'==a||'number'==a||'boolean'==a?o+'':o instanceof Wt||o instanceof ee||o instanceof re?o.toString():JSON.stringify(o)}function se(o,t){o[0]=ta(o[0],t[0]),o[1]=ta(o[1],t[1]),o[2]=oa(o[2],t[0]),o[3]=oa(o[3],t[1])}function be(o,t){return!(o[0]<=t[0]||o[2]>=t[2]||o[1]<=t[1]||o[3]>=t[3])}function we(o,t){var e=(180+o[0])/360,a=(180-180/Xe*x(v(Xe/4+o[1]*Xe/360)))/360,r=C(2,t.z);return[b(8192*(e*r)),b(8192*(a*r))]}function _e(o,t,e){return t[1]>o[1]!=e[1]>o[1]&&o[0]<(e[0]-t[0])*(o[1]-t[1])/(e[1]-t[1])+t[0]}function Ae(d,t){for(var e=!1,m=0,p=t.length,c,r,n,i,a,o,s;m<p;m++)for(var u=t[m],g=0,_=u.length;g<_-1;g++){if(0==(i=(c=d)[0]-(r=u[g])[0])*(s=c[1]-(n=u[g+1])[1])-(o=c[0]-n[0])*(a=c[1]-r[1])&&0>=i*o&&0>=a*s)return!1;_e(d,u[g],u[g+1])&&(e=!e)}return e}function Se(o,t){for(var e=0;e<t.length;e++)if(Ae(o,t[e]))return!0;return!1}function ke(l,t,e,r){var n=r[0]-e[0],i=r[1]-e[1],a=(l[0]-e[0])*i-n*(l[1]-e[1]),o=(t[0]-e[0])*i-n*(t[1]-e[1]);return 0<a&&0>o||0>a&&0<o}function Ie(d,t,e){for(var r=0,n=e;r<n.length;r+=1)for(var i=n[r],a=0;a<i.length-1;++a)if(0!=(p=[(l=i[a+1])[0]-(u=i[a])[0],l[1]-u[1]])[0]*(c=[(s=t)[0]-(o=d)[0],s[1]-o[1]])[1]-p[1]*c[0]&&ke(o,s,u,l)&&ke(u,l,o,s))return!0;var o,s,u,l,p,c;return!1}function ze(o,t){for(var e=0;e<o.length;++e)if(!Ae(o[e],t))return!1;for(var a=0;a<o.length-1;++a)if(Ie(o[a],o[a+1],t))return!1;return!0}function Ce(o,t){for(var e=0;e<t.length;e++)if(ze(o,t[e]))return!0;return!1}function Ee(l,t,e){for(var r=[],n=0;n<l.length;n++){for(var i=[],a=0,o;a<l[n].length;a++)o=we(l[n][a],e),se(t,o),i.push(o);r.push(i)}return r}function Pe(o,t,e){for(var r=[],n=0,i;n<o.length;n++)i=Ee(o[n],t,e),r.push(i);return r}function Me(o,t,e,r){if(o[0]<e[0]||o[0]>e[2]){var s=.5*r,i=o[0]-e[0]>s?-r:e[0]-o[0]>s?r:0;0===i&&(i=o[0]-e[2]>s?-r:e[2]-o[0]>s?r:0),o[0]+=i}se(t,o)}function Be(d,t,e,r){for(var n=8192*C(2,r.z),i=[8192*r.x,8192*r.y],a=[],o=0,s=d;o<s.length;o+=1)for(var u=0,l=s[o];u<l.length;u+=1){var p=l[u],c=[p.x+i[0],p.y+i[1]];Me(c,t,e,n),a.push(c)}return a}function Te(_,t,e,r){for(var n=8192*C(2,r.z),a=[8192*r.x,8192*r.y],o=[],s=0,u=_,l;s<u.length;s+=1){for(var i=[],p=0,c=u[s];p<c.length;p+=1){var h=c[p],f=[h.x+a[0],h.y+a[1]];se(t,f),i.push(f)}o.push(i)}if(t[2]-t[0]<=n/2){(l=t)[0]=l[1]=1/0,l[2]=l[3]=-1/0;for(var y=0,d=o;y<d.length;y+=1)for(var m=0,x=d[y];m<x.length;m+=1)Me(x[m],t,e,n)}return o}function Ve(o){if(o instanceof ve){if('get'===o.name&&1===o.args.length)return!1;if('feature-state'===o.name)return!1;if('has'===o.name&&1===o.args.length)return!1;if('properties'===o.name||'geometry-type'===o.name||'id'===o.name)return!1;if(/^filter-/.test(o.name))return!1}if(o instanceof Ud)return!1;var a=!0;return o.eachChild(function(e){a&&!Ve(e)&&(a=!1)}),a}function De(o){if(o instanceof ve&&'feature-state'===o.name)return!1;var a=!0;return o.eachChild(function(e){a&&!De(e)&&(a=!1)}),a}function Le(o,a){if(o instanceof ve&&0<=a.indexOf(o.name))return!1;var e=!0;return o.eachChild(function(o){e&&!Le(o,a)&&(e=!1)}),e}function Re(s,t){for(var e=s.length-1,n=0,i=e,a=0,o;n<=i;)if((o=s[a=ea((n+i)/2)])<=t){if(a===e||t<s[a+1])return a;n=a+1}else{if(!(o>t))throw new Bd('Input is not a number.');i=a-1}return 0}function je(o,t,e){return o*(1-e)+t*e}function yp(e){return .008856451679035631<e?C(e,1/3):e/Ke+4/29}function Je(e){return e>6/29?e*e*e:Ke*(e-4/29)}function He(e){return 255*(.0031308>=e?12.92*e:1.055*C(e,1/2.4)-.055)}function Ye(e){return .04045>=(e/=255)?e/12.92:C((e+.055)/1.055,2.4)}function $e(o){var t=Ye(o.r),e=Ye(o.g),r=Ye(o.b),n=yp((.4124564*t+.3575761*e+.1804375*r)/.95047),i=yp((.2126729*t+.7151522*e+.072175*r)/1);return{l:116*i-16,a:500*(n-i),b:200*(i-yp((.0193339*t+.119192*e+.9503041*r)/1.08883)),alpha:o.a}}function _p(o){var t=(o.l+16)/116,e=isNaN(o.a)?t:t+o.a/500,a=isNaN(o.b)?t:t-o.b/200;return t=1*Je(t),e=.95047*Je(e),a=1.08883*Je(a),new Wt(He(3.2404542*e-1.5371385*t-.4985314*a),He(-.969266*e+1.8760108*t+.041556*a),He(.0556434*e-.2040259*t+1.0572252*a),o.alpha)}function fp(o,t,e){var a=t-o;return o+e*(180<a||-180>a?a-360*b(a/360):a)}function tr(o,t,e,r){var n=r-e,i=o-e;return 0==n?0:1===t?i/n:(C(t,i)-1)/(C(t,n)-1)}function ar(o,t){return'=='===o||'!='===o?'boolean'===t.kind||'string'===t.kind||'number'===t.kind||'null'===t.kind||'value'===t.kind:'string'===t.kind||'number'===t.kind||'value'===t.kind}function yr(o,t,e,a){return 0===a.compare(t,e)}function dr(i,t,e){var d='=='!==i&&'!='!==i;return function(){function l(o,t,e){this.type=Ad,this.lhs=o,this.rhs=t,this.collator=e,this.hasUntypedArgument='value'===o.type.kind||'value'===t.type.kind}return l.parse=function(n,t){if(3!==n.length&&4!==n.length)return t.error('Expected two or three arguments.');var e=n[0],r=t.parse(n[1],1,zd);if(!r)return null;if(!ar(e,r.type))return t.concat(1).error('"'+e+'" comparisons are not supported for type \''+Zt(r.type)+'\'.');var i=t.parse(n[2],2,zd);if(!i)return null;if(!ar(e,i.type))return t.concat(2).error('"'+e+'" comparisons are not supported for type \''+Zt(i.type)+'\'.');if(r.type.kind!==i.type.kind&&'value'!==r.type.kind&&'value'!==i.type.kind)return t.error('Cannot compare types \''+Zt(r.type)+'\' and \''+Zt(i.type)+'\'.');d&&('value'===r.type.kind&&'value'!==i.type.kind?r=new pe(i.type,[r]):'value'!==r.type.kind&&'value'===i.type.kind&&(i=new pe(r.type,[i])));var p=null;if(4===n.length){if('string'!==r.type.kind&&'string'!==i.type.kind&&'value'!==r.type.kind&&'value'!==i.type.kind)return t.error('Cannot use collator to compare non-string types.');if(!(p=t.parse(n[3],3,Dd)))return null}return new l(r,i,p)},l.prototype.evaluate=function(r){var c=this.lhs.evaluate(r),a=this.rhs.evaluate(r);if(d&&this.hasUntypedArgument){var o=ae(c),s=ae(a);if(o.kind!==s.kind||'string'!==o.kind&&'number'!==o.kind)throw new Bd('Expected arguments for "'+i+'" to be (string, string) or (number, number), but found ('+o.kind+', '+s.kind+') instead.')}if(this.collator&&!d&&this.hasUntypedArgument){var u=ae(c),l=ae(a);if('string'!==u.kind||'string'!==l.kind)return t(r,c,a)}return this.collator?e(r,c,a,this.collator.evaluate(r)):t(r,c,a)},l.prototype.eachChild=function(e){e(this.lhs),e(this.rhs),this.collator&&e(this.collator)},l.prototype.outputDefined=function(){return!0},l.prototype.serialize=function(){var o=[i];return this.eachChild(function(e){o.push(e.serialize())}),o},l}()}function mr(l,t){var e=t[0],r=t[1],n=t[2],i=t[3];e=e.evaluate(l),r=r.evaluate(l),n=n.evaluate(l);var a=i?i.evaluate(l):1,o=$t(e,r,n,a);if(o)throw new Bd(o);return new Wt(e/255*a,r/255*a,n/255*a,a)}function Ir(o,t){return o in t}function zr(o,t){var e=t[o];return void 0===e?null:e}function Cr(e){return{type:e}}function Er(e){return{result:'success',value:e}}function Pr(e){return{result:'error',value:e}}function Mr(e){return'data-driven'===e['property-type']||'cross-faded-data-driven'===e['property-type']}function Br(e){return!!e.expression&&-1<e.expression.parameters.indexOf('zoom')}function Tr(e){return!!e.expression&&e.expression.interpolated}function Vr(e){return e instanceof Number?'number':e instanceof String?'string':e instanceof Boolean?'boolean':Array.isArray(e)?'array':null===e?'null':typeof e}function Fr(e){return'object'==typeof e&&null!==e&&!Array.isArray(e)}function Dr(e){return e}function Lr(o,t,e){return void 0===o?void 0===t?void 0===e?void 0:e:t:o}function Rr(o,t,e,a,n){return Lr(typeof e===n?a[e]:void 0,o.default,t.default)}function Or(o,t,e){if('number'!==Vr(e))return Lr(o.default,t.default);var a=o.stops.length;if(1===a)return o.stops[0][1];if(e<=o.stops[0][0])return o.stops[0][1];if(e>=o.stops[a-1][0])return o.stops[a-1][1];var r=Re(o.stops.map(function(e){return e[0]}),e);return o.stops[r][1]}function Ur(d,t,e){var r=void 0===d.base?1:d.base;if('number'!==Vr(e))return Lr(d.default,t.default);var n=d.stops.length;if(1===n)return d.stops[0][1];if(e<=d.stops[0][0])return d.stops[0][1];if(e>=d.stops[n-1][0])return d.stops[n-1][1];var i=Re(d.stops.map(function(e){return e[0]}),e),a=function(o,t,e,r){var n=r-e,i=o-e;return 0==n?0:1===t?i/n:(C(t,i)-1)/(C(t,n)-1)}(e,r,d.stops[i][0],d.stops[i+1][0]),o=d.stops[i][1],s=d.stops[i+1][1],c=jd[t.type]||Dr;if(d.colorSpace&&'rgb'!==d.colorSpace){var l=Gd[d.colorSpace];c=function(o,t){return l.reverse(l.interpolate(l.forward(o),l.forward(t),a))}}return'function'==typeof o.evaluate?{evaluate:function(){for(var i=[],t=arguments.length;t--;)i[t]=arguments[t];var e=o.evaluate.apply(void 0,i),r=s.evaluate.apply(void 0,i);if(void 0!==e&&void 0!==r)return c(e,r,a)}}:c(o,s,a)}function jr(o,t,e){return'color'===t.type?e=Wt.parse(e):'formatted'===t.type?e=ee.fromString(e.toString()):'resolvedImage'===t.type?e=re.fromString(e.toString()):Vr(e)===t.type||'enum'===t.type&&t.values[e]||(e=void 0),Lr(e,o.default,t.default)}function qr(e){return Array.isArray(e)&&0<e.length&&'string'==typeof e[0]&&e[0]in lc}function Kr(o,t){var e=new qd(lc,[],t?function(o){var t={color:kd,string:Id,number:Dt,enum:Id,boolean:Ad,formatted:Nt,resolvedImage:Ld};return'array'===o.type?Tt(t[o.value]||zd,o.length):t[o.type]}(t):void 0),a=e.parse(o,void 0,void 0,void 0,t&&'string'===t.type?{typeAnnotation:'coerce'}:void 0);return a?Er(new kr(a,t)):Pr(e.errors)}function Gr(o,t){if('error'===(o=Kr(o,t)).result)return o;var e=o.value.expression,r=Ve(e);if(!r&&!Mr(t))return Pr([new Et('','data expressions not supported')]);var s=Le(e,['zoom']);if(!s&&!Br(t))return Pr([new Et('','zoom expressions not supported')]);var l=function o(t){var a=null;if(t instanceof Wd)a=o(t.result);else if(t instanceof Hd)for(var e=0,n=t.args;e<n.length&&!(a=o(n[e]));e+=1);else(t instanceof Ue||t instanceof nr)&&t.input instanceof ve&&'zoom'===t.input.name&&(a=t);return a instanceof Et||t.eachChild(function(t){var e=o(t);e instanceof Et?a=e:!a&&e?a=new Et('','"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):a&&e&&a!==e&&(a=new Et('','Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),a}(e);return l||s?l instanceof Et?Pr([l]):l instanceof nr&&!Tr(t)?Pr([new Et('','"interpolate" expressions cannot be used with this property')]):Er(l?new Zr(r?'camera':'composite',o.value,l.labels,l instanceof nr?l.interpolation:void 0):new Nr(r?'constant':'source',o.value)):Pr([new Et('','"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}function Jr(d){var t=d.key,e=d.value,m=d.valueSpec||{},n=d.objectElementValidators||{},i=d.style,g=d.styleSpec,y=[],s=Vr(e);if('object'!==s)return[new Cd(t,e,'object expected, '+s+' found')];for(var u in e){var _=u.split('.')[0],p=m[_]||m['*'],x=void 0;if(n[_])x=n[_];else if(m[_])x=Ip;else if(n['*'])x=n['*'];else{if(!m['*']){y.push(new Cd(t,e[u],'unknown property "'+u+'"'));continue}x=Ip}y=y.concat(x({key:(t?t+'.':t)+u,value:e[u],valueSpec:p,style:i,styleSpec:g,object:e,objectKey:u},e))}for(var h in m)n[h]||m[h].required&&void 0===m[h].default&&void 0===e[h]&&y.push(new Cd(t,e,'missing required property "'+h+'"'));return y}function hp(p){var t=p.value,d=p.valueSpec,r=p.style,c=p.styleSpec,m=p.key,a=p.arrayElementValidator||Ip;if('array'!==Vr(t))return[new Cd(m,t,'array expected, '+Vr(t)+' found')];if(d.length&&t.length!==d.length)return[new Cd(m,t,'array length '+d.length+' expected, length '+t.length+' found')];if(d['min-length']&&t.length<d['min-length'])return[new Cd(m,t,'array length at least '+d['min-length']+' expected, length '+t.length+' found')];var o={type:d.value,values:d.values};7>c.$version&&(o.function=d.function),'object'===Vr(d.value)&&(o=d.value);for(var g=[],u=0;u<t.length;u++)g=g.concat(a({array:t,arrayIndex:u,value:t[u],valueSpec:o,style:r,styleSpec:c,key:m+'['+u+']'}));return g}function xp(o){var t=o.key,e=o.value,a=o.valueSpec,r=Vr(e);return'number'===r&&e!=e&&(r='NaN'),'number'===r?'minimum'in a&&e<a.minimum?[new Cd(t,e,e+' is less than the minimum value '+a.minimum)]:'maximum'in a&&e>a.maximum?[new Cd(t,e,e+' is greater than the maximum value '+a.maximum)]:[]:[new Cd(t,e,'number expected, '+r+' found')]}function vp(d){function u(n){var t=[],e=n.value,a=n.key;if('array'!==Vr(e))return[new Cd(a,e,'array expected, '+Vr(e)+' found')];if(2!==e.length)return[new Cd(a,e,'array length 2 expected, length '+e.length+' found')];if(o){if('object'!==Vr(e[0]))return[new Cd(a,e,'object expected, '+Vr(e[0])+' found')];if(void 0===e[0].zoom)return[new Cd(a,e,'object stop key must have zoom')];if(void 0===e[0].value)return[new Cd(a,e,'object stop key must have value')];if(r&&r>Mt(e[0].zoom))return[new Cd(a,e[0].zoom,'stop zoom values must appear in ascending order')];Mt(e[0].zoom)!==r&&(r=Mt(e[0].zoom),x=void 0,_={}),t=t.concat(Jr({key:a+'[0]',value:e[0],valueSpec:{zoom:{}},style:n.style,styleSpec:n.styleSpec,objectElementValidators:{zoom:xp,value:m}}))}else t=t.concat(m({key:a+'[0]',value:e[0],valueSpec:{},style:n.style,styleSpec:n.styleSpec},e));return qr(Bt(e[1]))?t.concat([new Cd(a+'[1]',e[1],'expressions are not allowed in function stops.')]):t.concat(Ip({key:a+'[1]',value:e[1],valueSpec:g,style:n.style,styleSpec:n.styleSpec}))}function m(o,t){var a=Vr(o.value),r=Mt(o.value),n=null===o.value?t:o.value;if(!f)f=a;else if(a!==f)return[new Cd(o.key,n,a+' stop domain type must match previous stop domain type '+f)];if('number'!==a&&'string'!==a&&'boolean'!==a)return[new Cd(o.key,n,'stop domain value must be a number, string, or boolean')];if('number'!==a&&'categorical'!==y){var i='number expected, '+a+' found';return Mr(g)&&void 0===y&&(i+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Cd(o.key,n,i)]}return'categorical'!==y||'number'!==a||isFinite(r)&&ea(r)===r?'categorical'!==y&&'number'===a&&void 0!==x&&r<x?[new Cd(o.key,n,'stop domain values must appear in ascending order')]:(x=r,'categorical'===y&&r in _?[new Cd(o.key,n,'stop domain values must be unique')]:(_[r]=!0,[])):[new Cd(o.key,n,'integer expected, found '+r)]}var g=d.valueSpec,y=Mt(d.value.type),_={},t='categorical'!==y&&void 0===d.value.property,o='array'===Vr(d.value.stops)&&'array'===Vr(d.value.stops[0])&&'object'===Vr(d.value.stops[0][0]),a=Jr({key:d.key,value:d.value,valueSpec:d.styleSpec.function,style:d.style,styleSpec:d.styleSpec,objectElementValidators:{stops:function(o){if('identity'===y)return[new Cd(o.key,o.value,'identity function may not have a "stops" property')];var t=[],e=o.value;return t=t.concat(hp({key:o.key,value:e,valueSpec:o.valueSpec,style:o.style,styleSpec:o.styleSpec,arrayElementValidator:u})),'array'===Vr(e)&&0===e.length&&t.push(new Cd(o.key,e,'array must have at least one stop')),t},default:function(e){return Ip({key:e.key,value:e.value,valueSpec:g,style:e.style,styleSpec:e.styleSpec})}}}),f,x,r;return'identity'===y&&t&&a.push(new Cd(d.key,d.value,'missing required property "property"')),'identity'===y||d.value.stops||a.push(new Cd(d.key,d.value,'missing required property "stops"')),'exponential'===y&&d.valueSpec.expression&&!Tr(d.valueSpec)&&a.push(new Cd(d.key,d.value,'exponential functions not supported')),8<=d.styleSpec.$version&&(!t&&!Mr(d.valueSpec)?a.push(new Cd(d.key,d.value,'property functions not supported')):t&&!Br(d.valueSpec)&&a.push(new Cd(d.key,d.value,'zoom functions not supported'))),'categorical'!==y&&!o||void 0!==d.value.property||a.push(new Cd(d.key,d.value,'"property" property is required')),a}function bp(o){var t=('property'===o.expressionContext?Gr:Kr)(Bt(o.value),o.valueSpec);if('error'===t.result)return t.value.map(function(t){return new Cd(''+o.key+t.key,o.value,t.message)});var e=t.value.expression||t.value._styleExpression.expression;if('property'===o.expressionContext&&'text-font'===o.propertyKey&&!e.outputDefined())return[new Cd(o.key,o.value,'Invalid data expression for "'+o.propertyKey+'". Output values must be contained as literals within the expression.')];if('property'===o.expressionContext&&'layout'===o.propertyType&&!De(e))return[new Cd(o.key,o.value,'"feature-state" data expressions are not supported with layout properties.')];if('filter'===o.expressionContext&&!De(e))return[new Cd(o.key,o.value,'"feature-state" data expressions are not supported with filters.')];if(o.expressionContext&&0===o.expressionContext.indexOf('cluster')){if(!Le(e,['zoom','feature-state']))return[new Cd(o.key,o.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if('cluster-initial'===o.expressionContext&&!Ve(e))return[new Cd(o.key,o.value,'Feature data expressions are not supported with initial expression part of cluster properties.')]}return[]}function tn(o){var t=o.key,e=o.value,a=o.valueSpec,r=[];return Array.isArray(a.values)?-1===a.values.indexOf(Mt(e))&&r.push(new Cd(t,e,'expected one of ['+a.values.join(', ')+'], '+JSON.stringify(e)+' found')):-1===Object.keys(a.values).indexOf(Mt(e))&&r.push(new Cd(t,e,'expected one of ['+Object.keys(a.values).join(', ')+'], '+JSON.stringify(e)+' found')),r}function wp(o){if(!0===o||!1===o)return!0;if(!Array.isArray(o)||0===o.length)return!1;switch(o[0]){case'has':return 2<=o.length&&'$id'!==o[1]&&'$type'!==o[1];case'in':return 3<=o.length&&('string'!=typeof o[1]||Array.isArray(o[2]));case'!in':case'!has':case'none':return!1;case'==':case'!=':case'>':case'>=':case'<':case'<=':return 3!==o.length||Array.isArray(o[1])||Array.isArray(o[2]);case'any':case'all':for(var t=0,e=o.slice(1),a;t<e.length;t+=1)if(a=e[t],!wp(a)&&'boolean'!=typeof a)return!1;return!0;default:return!0;}}function rn(o){if(null==o)return{filter:function(){return!0},needGeometry:!1};wp(o)||(o=on(o));var a=Kr(o,Hr);if('error'===a.result)throw new Error(a.value.map(function(e){return e.key+': '+e.message}).join(', '));return{filter:function(e,t,o){return a.value.evaluate(e,t,{},o)},needGeometry:function o(t){if(!Array.isArray(t))return!1;if('within'===t[0])return!0;for(var e=1;e<t.length;e++)if(o(t[e]))return!0;return!1}(o)}}function an(o,t){return o<t?-1:o>t?1:0}function on(o){if(!o)return!0;var a=o[0],r;return 1>=o.length?'any'!==a:'=='===a?sn(o[1],o[2],'=='):'!='===a?pn(sn(o[1],o[2],'==')):'<'===a||'>'===a||'<='===a||'>='===a?sn(o[1],o[2],a):'any'===a?(r=o.slice(1),['any'].concat(r.map(on))):'all'===a?['all'].concat(o.slice(1).map(on)):'none'===a?['all'].concat(o.slice(1).map(on).map(pn)):'in'===a?un(o[1],o.slice(2)):'!in'===a?pn(un(o[1],o.slice(2))):'has'===a?ln(o[1]):'!has'===a?pn(ln(o[1])):'within'!==a||o}function sn(o,t,e){return'$type'===o?['filter-type-'+e,t]:'$id'===o?['filter-id-'+e,t]:['filter-'+e,o,t]}function un(o,a){return 0!==a.length&&('$type'===o?['filter-type-in',['literal',a]]:'$id'===o?['filter-id-in',['literal',a]]:200<a.length&&!a.some(function(e){return typeof e!=typeof a[0]})?['filter-in-large',o,['literal',a.sort(an)]]:['filter-in-small',o,['literal',a]])}function ln(e){return'$type'===e||('$id'===e?['filter-has-id']:['filter-has',e])}function pn(e){return['!',e]}function cn(e){return wp(Bt(e.value))?bp(gp({},e,{expressionContext:'filter',valueSpec:{value:'boolean'}})):function l(t){var e=t.value,r=t.key;if('array'!==Vr(e))return[new Cd(r,e,'array expected, '+Vr(e)+' found')];var n=t.styleSpec,a=[],o;if(1>e.length)return[new Cd(r,e,'filter array must have at least 1 element')];switch(a=a.concat(tn({key:r+'[0]',value:e[0],valueSpec:n.filter_operator,style:t.style,styleSpec:t.styleSpec})),Mt(e[0])){case'<':case'<=':case'>':case'>=':2<=e.length&&'$type'===Mt(e[1])&&a.push(new Cd(r,e,'"$type" cannot be use with operator "'+e[0]+'"'));case'==':case'!=':3!==e.length&&a.push(new Cd(r,e,'filter array for operator "'+e[0]+'" must have 3 elements'));case'in':case'!in':2<=e.length&&'string'!==(o=Vr(e[1]))&&a.push(new Cd(r+'[1]',e[1],'string expected, '+o+' found'));for(var i=2;i<e.length;i++)o=Vr(e[i]),'$type'===Mt(e[1])?a=a.concat(tn({key:r+'['+i+']',value:e[i],valueSpec:n.geometry_type,style:t.style,styleSpec:t.styleSpec})):'string'!==o&&'number'!==o&&'boolean'!==o&&a.push(new Cd(r+'['+i+']',e[i],'string, number, or boolean expected, '+o+' found'));break;case'any':case'all':case'none':for(var s=1;s<e.length;s++)a=a.concat(l({key:r+'['+s+']',value:e[s],style:t.style,styleSpec:t.styleSpec}));break;case'has':case'!has':o=Vr(e[1]),2===e.length?'string'!==o&&a.push(new Cd(r+'[1]',e[1],'string expected, '+o+' found')):a.push(new Cd(r,e,'filter array for "'+e[0]+'" operator must have 2 elements'));break;case'within':o=Vr(e[1]),2===e.length?'object'!==o&&a.push(new Cd(r+'[1]',e[1],'object expected, '+o+' found')):a.push(new Cd(r,e,'filter array for "'+e[0]+'" operator must have 2 elements'));}return a}(e)}function Tp(d,t){var m=d.key,g=d.style,y=d.styleSpec,_=d.value,f=d.objectKey,h=y[t+'_'+d.layerType];if(!h)return[];var x=f.match(/^(.*)-transition$/);if('paint'===t&&x&&h[x[1]]&&h[x[1]].transition)return Ip({key:m,value:_,valueSpec:y.transition,style:g,styleSpec:y});var u=d.valueSpec||h[f],v;if(!u)return[new Cd(m,_,'unknown property "'+f+'"')];if('string'===Vr(_)&&Mr(u)&&!u.tokens&&(v=/^{([^}]+)}$/.exec(_)))return[new Cd(m,_,'"'+f+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(v[1])+' }`.')];var l=[];return'symbol'===d.layerType&&('text-field'===f&&g&&!g.glyphs&&l.push(new Cd(m,_,'use of "text-field" requires a style "glyphs" property')),'text-font'===f&&Fr(Bt(_))&&'identity'===Mt(_.type)&&l.push(new Cd(m,_,'"text-font" does not support identity functions'))),l.concat(Ip({key:d.key,value:_,valueSpec:u,style:g,styleSpec:y,expressionContext:'property',propertyType:t,propertyKey:f}))}function fn(e){return Tp(e,'paint')}function yn(e){return Tp(e,'layout')}function dn(d){var m=[],e=d.value,g=d.key,t=d.style,i=d.styleSpec;e.type||e.ref||m.push(new Cd(g,e,'either "type" or "ref" is required'));var a=Mt(e.type),y=Mt(e.ref),u;if(e.id)for(var o=Mt(e.id),l=0,p;l<d.arrayIndex;l++)p=t.layers[l],Mt(p.id)===o&&m.push(new Cd(g,e.id,'duplicate layer id "'+e.id+'", previously used at line '+p.id.__line__));if('ref'in e)['type','source','source-layer','filter','layout'].forEach(function(o){o in e&&m.push(new Cd(g,e[o],'"'+o+'" is prohibited for ref layers'))}),t.layers.forEach(function(e){Mt(e.id)===y&&(u=e)}),u?u.ref?m.push(new Cd(g,e.ref,'ref cannot reference another ref layer')):a=Mt(u.type):m.push(new Cd(g,e.ref,'ref layer "'+y+'" not found'));else if('background'!==a)if(e.source){var c=t.sources&&t.sources[e.source],_=c&&Mt(c.type);c?'vector'===_&&'raster'===a?m.push(new Cd(g,e.source,'layer "'+e.id+'" requires a raster source')):'raster'===_&&'raster'!==a?m.push(new Cd(g,e.source,'layer "'+e.id+'" requires a vector source')):'vector'!==_||e['source-layer']?'raster-dem'===_&&'hillshade'!==a?m.push(new Cd(g,e.source,'raster-dem source can only be used with layer type \'hillshade\'.')):'line'!==a||!e.paint||!e.paint['line-gradient']||'geojson'===_&&c.lineMetrics||m.push(new Cd(g,e,'layer "'+e.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):m.push(new Cd(g,e,'layer "'+e.id+'" must specify a "source-layer"')):m.push(new Cd(g,e.source,'source "'+e.source+'" not found'))}else m.push(new Cd(g,e,'missing required property "source"'));return m=m.concat(Jr({key:g,value:e,valueSpec:i.layer,style:d.style,styleSpec:d.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return Ip({key:g+'.type',value:e.type,valueSpec:i.layer.type,style:d.style,styleSpec:d.styleSpec,object:e,objectKey:'type'})},filter:cn,layout:function(o){return Jr({layer:e,key:o.key,value:o.value,style:o.style,styleSpec:o.styleSpec,objectElementValidators:{"*":function(e){return yn(gp({layerType:a},e))}}})},paint:function(o){return Jr({layer:e,key:o.key,value:o.value,style:o.style,styleSpec:o.styleSpec,objectElementValidators:{"*":function(e){return fn(gp({layerType:a},e))}}})}}}))}function Ep(o){var t=o.value,e=o.key,a=Vr(t);return'string'===a?[]:[new Cd(e,t,'string expected, '+a+' found')]}function Sp(d){var t=d.value,c=d.key,m=d.styleSpec,g=d.style;if(!t.type)return[new Cd(c,t,'"type" is required')];var y=Mt(t.type),o;switch(y){case'vector':case'raster':case'raster-dem':return Jr({key:c,value:t,valueSpec:m['source_'+y.replace('-','_')],style:d.style,styleSpec:m,objectElementValidators:nn});case'geojson':if(o=Jr({key:c,value:t,valueSpec:m.source_geojson,style:g,styleSpec:m,objectElementValidators:nn}),t.cluster)for(var a in t.clusterProperties){var s=t.clusterProperties[a],u=s[0],_='string'==typeof u?[u,['accumulated'],['get',a]]:u;o.push.apply(o,bp({key:c+'.'+a+'.map',value:s[1],expressionContext:'cluster-map'})),o.push.apply(o,bp({key:c+'.'+a+'.reduce',value:_,expressionContext:'cluster-reduce'}))}return o;case'video':return Jr({key:c,value:t,valueSpec:m.source_video,style:g,styleSpec:m});case'image':return Jr({key:c,value:t,valueSpec:m.source_image,style:g,styleSpec:m});case'canvas':return[new Cd(c,null,'Please use runtime APIs to add canvas sources, rather than including them in stylesheets.','source.canvas')];default:return tn({key:c+'.type',value:t.type,valueSpec:{values:['vector','raster','raster-dem','geojson','video','image']},style:g,styleSpec:m});}}function Cp(l){var t=l.value,e=l.styleSpec,p=e.light,n=l.style,d=[],a=Vr(t);if(void 0===t)return d;if('object'!==a)return d.concat([new Cd('light',t,'object expected, '+a+' found')]);for(var o in t){var c=o.match(/^(.*)-transition$/);d=d.concat(c&&p[c[1]]&&p[c[1]].transition?Ip({key:o,value:t[o],valueSpec:e.transition,style:n,styleSpec:e}):p[o]?Ip({key:o,value:t[o],valueSpec:p[o],style:n,styleSpec:e}):[new Cd(o,t[o],'unknown property "'+o+'"')])}return d}function Ip(o){var t=o.value,e=o.valueSpec,a=o.styleSpec;return e.expression&&Fr(Mt(t))?vp(o):e.expression&&qr(Bt(t))?bp(o):e.type&&pc[e.type]?pc[e.type](o):Jr(gp({},o,{valueSpec:e.type?a[e.type]:e}))}function _n(o){var t=o.value,e=o.key,a=Ep(o);return a.length||(-1===t.indexOf('{fontstack}')&&a.push(new Cd(e,t,'"glyphs" url must include a "{fontstack}" token')),-1===t.indexOf('{range}')&&a.push(new Cd(e,t,'"glyphs" url must include a "{range}" token'))),a}function Ap(o,a){void 0===a&&(a=zt);var n=[];return n=n.concat(Ip({key:'',value:o,valueSpec:a.$root,styleSpec:a,style:o,objectElementValidators:{glyphs:_n,"*":function(){return[]}}})),o.constants&&(n=n.concat(St({key:'constants',value:o.constants,style:o,styleSpec:a}))),Sn(n)}function Sn(e){return[].concat(e).sort(function(o,t){return o.line-t.line})}function kn(o){return function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return Sn(o.apply(this,t))}}function In(o,t){var e=!1;if(t&&t.length)for(var a=0,r=t;a<r.length;a+=1)o.fire(new kt(new Error(r[a].message))),e=!0;return e}function Mn(d,t,e){var r=this.cells=[];if(d instanceof ArrayBuffer){this.arrayBuffer=d;var n=new Int32Array(this.arrayBuffer);d=n[0],this.d=(t=n[1])+2*(e=n[2]);for(var i=0;i<this.d*this.d;i++){var a=n[3+i],o=n[3+i+1];r.push(a===o?null:n.subarray(a,o))}var s=n[3+r.length+1];this.keys=n.subarray(n[3+r.length],s),this.bboxes=n.subarray(s),this.insert=this._insertReadonly}else{this.d=t+2*e;for(var c=0;c<this.d*this.d;c++)r.push([]);this.keys=[],this.bboxes=[]}this.n=t,this.extent=d,this.padding=e,this.scale=t/d,this.uid=0;var l=e/t*d;this.min=-l,this.max=d+l}function Tn(o,a,n){void 0===n&&(n={}),Object.defineProperty(a,'_classRegistryKey',{value:o,writeable:!1}),Fn[o]={klass:a,omit:n.omit||[],shallow:n.shallow||[]}}function Ln(e){return e&&'undefined'!=typeof ArrayBuffer&&(e instanceof ArrayBuffer||e.constructor&&'ArrayBuffer'===e.constructor.name)}function On(e){return Vn&&e instanceof Vn}function Un(d,c){if(null==d||'boolean'==typeof d||'number'==typeof d||'string'==typeof d||d instanceof Boolean||d instanceof Number||d instanceof String||d instanceof Date||d instanceof RegExp)return d;if(Ln(d)||On(d))return c&&c.push(d),d;if(ArrayBuffer.isView(d)){var e=d;return c&&c.push(e.buffer),e}if(d instanceof Bn)return c&&c.push(d.data.buffer),d;if(Array.isArray(d)){for(var r=[],n=0,i=d;n<i.length;n+=1)r.push(Un(i[n],c));return r}if('object'==typeof d){var a=d.constructor,o=a._classRegistryKey;if(!o)throw new Error('can\'t serialize object of unregistered class');var m=a.serialize?a.serialize(d,c):{};if(!a.serialize){for(var u in d)if(d.hasOwnProperty(u)&&!(0<=Fn[o].omit.indexOf(u))){var l=d[u];m[u]=0<=Fn[o].shallow.indexOf(u)?l:Un(l,c)}d instanceof Error&&(m.message=d.message)}if(m.$name)throw new Error('$name property is reserved for worker serialization logic.');return'Object'!==o&&(m.$name=o),m}throw new Error('can\'t serialize object of type '+typeof d)}function jn(l){if(null==l||'boolean'==typeof l||'number'==typeof l||'string'==typeof l||l instanceof Boolean||l instanceof Number||l instanceof String||l instanceof Date||l instanceof RegExp||Ln(l)||On(l)||ArrayBuffer.isView(l)||l instanceof Bn)return l;if(Array.isArray(l))return l.map(jn);if('object'==typeof l){var p=l.$name||'Object',e=Fn[p].klass;if(!e)throw new Error('can\'t deserialize unregistered class '+p);if(e.deserialize)return e.deserialize(l);for(var d=Object.create(e.prototype),n=0,i=Object.keys(l),a;n<i.length;n+=1)if(a=i[n],'$name'!==a){var o=l[a];d[a]=0<=Fn[p].shallow.indexOf(a)?o:jn(o)}return d}throw new Error('can\'t deserialize object of type '+typeof l)}function qn(o){for(var t=0,e=o;t<e.length;t+=1)if(Gn(e[t].charCodeAt(0)))return!0;return!1}function Gn(e){return 746===e||747===e||!(4352>e)&&(Nn['Bopomofo Extended'](e)||Nn.Bopomofo(e)||Nn['CJK Compatibility Forms'](e)&&!(65097<=e&&65103>=e)||Nn['CJK Compatibility Ideographs'](e)||Nn['CJK Compatibility'](e)||Nn['CJK Radicals Supplement'](e)||Nn['CJK Strokes'](e)||!(!Nn['CJK Symbols and Punctuation'](e)||12296<=e&&12305>=e||12308<=e&&12319>=e||12336===e)||Nn['CJK Unified Ideographs Extension A'](e)||Nn['CJK Unified Ideographs'](e)||Nn['Enclosed CJK Letters and Months'](e)||Nn['Hangul Compatibility Jamo'](e)||Nn['Hangul Jamo Extended-A'](e)||Nn['Hangul Jamo Extended-B'](e)||Nn['Hangul Jamo'](e)||Nn['Hangul Syllables'](e)||Nn.Hiragana(e)||Nn['Ideographic Description Characters'](e)||Nn.Kanbun(e)||Nn['Kangxi Radicals'](e)||Nn['Katakana Phonetic Extensions'](e)||Nn.Katakana(e)&&12540!==e||!(!Nn['Halfwidth and Fullwidth Forms'](e)||65288===e||65289===e||65293===e||65306<=e&&65310>=e||65339===e||65341===e||65343===e||65371<=e&&65503>=e||65507===e||65512<=e&&65519>=e)||!(!Nn['Small Form Variants'](e)||65112<=e&&65118>=e||65123<=e&&65126>=e)||Nn['Unified Canadian Aboriginal Syllabics'](e)||Nn['Unified Canadian Aboriginal Syllabics Extended'](e)||Nn['Vertical Forms'](e)||Nn['Yijing Hexagram Symbols'](e)||Nn['Yi Syllables'](e)||Nn['Yi Radicals'](e))}function Zn(e){return!(Gn(e)||function(e){return!!(Nn['Latin-1 Supplement'](e)&&(167===e||169===e||174===e||177===e||188===e||189===e||190===e||215===e||247===e)||Nn['General Punctuation'](e)&&(8214===e||8224===e||8225===e||8240===e||8241===e||8251===e||8252===e||8258===e||8263===e||8264===e||8265===e||8273===e)||Nn['Letterlike Symbols'](e)||Nn['Number Forms'](e)||Nn['Miscellaneous Technical'](e)&&(8960<=e&&8967>=e||8972<=e&&8991>=e||8996<=e&&9e3>=e||9003===e||9085<=e&&9114>=e||9150<=e&&9165>=e||9167===e||9169<=e&&9179>=e||9186<=e&&9215>=e)||Nn['Control Pictures'](e)&&9251!==e||Nn['Optical Character Recognition'](e)||Nn['Enclosed Alphanumerics'](e)||Nn['Geometric Shapes'](e)||Nn['Miscellaneous Symbols'](e)&&!(9754<=e&&9759>=e)||Nn['Miscellaneous Symbols and Arrows'](e)&&(11026<=e&&11055>=e||11088<=e&&11097>=e||11192<=e&&11243>=e)||Nn['CJK Symbols and Punctuation'](e)||Nn.Katakana(e)||Nn['Private Use Area'](e)||Nn['CJK Compatibility Forms'](e)||Nn['Small Form Variants'](e)||Nn['Halfwidth and Fullwidth Forms'](e)||8734===e||8756===e||8757===e||9984<=e&&10087>=e||10102<=e&&10131>=e||65532===e||65533===e)}(e))}function Xn(e){return 1424<=e&&2303>=e||Nn['Arabic Presentation Forms-A'](e)||Nn['Arabic Presentation Forms-B'](e)}function Jn(o,t){return!(!t&&Xn(o)||2304<=o&&3583>=o||3840<=o&&4255>=o||Nn.Khmer(o))}function Hn(o){for(var t=0,e=o;t<e.length;t+=1)if(Xn(e[t].charCodeAt(0)))return!0;return!1}function Yn(){ti.fire(new _t('pluginStateChange',{pluginStatus:$n,pluginURL:dc}))}function ei(o,s){void 0===s&&(s=1);var l=0,r=0;return{members:o.map(function(e){var t=wi[e.type].BYTES_PER_ELEMENT,n=l=ki(l,oa(s,t)),i=e.components||1;return r=oa(r,t),l+=t*i,{name:e.name,type:e.type,components:i,offset:n}}),size:ki(l,oa(r,s)),alignment:s}}function ki(o,t){return m(o/t)*t}function Ii(o,t){return 256*(o=ko(ea(o),0,255))+ko(ea(t),0,255)}function sa(o){var a=+o;return!isNaN(a)&&a<=fa?a:pa(o+'')}function da(o,t,e){var a=o[t];o[t]=o[e],o[e]=a}function ma(e){return[Ii(255*e.r,255*e.g),Ii(255*e.b,255*e.a)]}function Ia(o,t){return{"text-opacity":['opacity'],"icon-opacity":['opacity'],"text-color":['fill_color'],"icon-color":['fill_color'],"text-halo-color":['halo_color'],"icon-halo-color":['halo_color'],"text-halo-blur":['halo_blur'],"icon-halo-blur":['halo_blur'],"text-halo-width":['halo_width'],"icon-halo-width":['halo_width'],"line-gap-width":['gapwidth'],"line-pattern":['pattern_to','pattern_from','pixel_ratio_to','pixel_ratio_from'],"fill-pattern":['pattern_to','pattern_from','pixel_ratio_to','pixel_ratio_from'],"fill-extrusion-pattern":['pattern_to','pattern_from','pixel_ratio_to','pixel_ratio_from']}[o]||[o.replace(t+'-','').replace(/-/g,'_')]}function Va(o,t,e){var a=function(e){return{"line-pattern":{source:uc,composite:uc},"fill-pattern":{source:uc,composite:uc},"fill-extrusion-pattern":{source:uc,composite:uc}}[e]}(o);return a&&a[e]||{color:{source:Pi,composite:Xi},number:{source:qi,composite:Pi}}[t][e]}function Fa(l){for(var t=8192/l.extent,e=l.loadGeometry(),r=0;r<e.length;r++)for(var n=e[r],i=0;i<n.length;i++){var a=n[i],o=b(a.x*t),s=b(a.y*t);a.x=ko(o,xc,Ta),a.y=ko(s,xc,Ta),(o<a.x||o>a.x+1||s<a.y||s>a.y+1)&&cp('Geometry exceeds allowed extent, reduce your vector tile buffer size')}return e}function Ra(o,t,e,a,r){o.emplaceBack(2*t+(a+1)/2,2*e+(r+1)/2)}function Oa(o,t){for(var e=0;e<o.length;e++)if(Ha(t,o[e]))return!0;for(var a=0;a<t.length;a++)if(Ha(o,t[a]))return!0;return!!Ka(o,t)}function ja(o,t,e){return!!Ha(o,t)||!!Za(t,o,e)}function qa(s,t){if(1===s.length)return Ja(t,s[0]);for(var e=0;e<t.length;e++)for(var r=t[e],n=0;n<r.length;n++)if(Ha(s,r[n]))return!0;for(var i=0;i<s.length;i++)if(Ja(t,s[i]))return!0;for(var a=0;a<t.length;a++)if(Ka(s,t[a]))return!0;return!1}function Na(o,t,e){if(1<o.length){if(Ka(o,t))return!0;for(var a=0;a<t.length;a++)if(Za(t[a],o,e))return!0}for(var r=0;r<o.length;r++)if(Za(o[r],t,e))return!0;return!1}function Ka(o,t){if(0===o.length||0===t.length)return!1;for(var e=0;e<o.length-1;e++)for(var r=o[e],n=o[e+1],i=0;i<t.length-1;i++)if(Ga(r,n,t[i],t[i+1]))return!0;return!1}function Ga(o,t,e,a){return up(o,e,a)!==up(t,e,a)&&up(o,t,e)!==up(o,t,a)}function Za(o,t,e){var a=e*e;if(1===t.length)return o.distSqr(t[0])<a;for(var r=1;r<t.length;r++)if(Xa(o,t[r-1],t[r])<a)return!0;return!1}function Xa(o,t,e){var a=t.distSqr(e);if(0===a)return o.distSqr(t);var r=((o.x-t.x)*(e.x-t.x)+(o.y-t.y)*(e.y-t.y))/a;return o.distSqr(0>r?t:1<r?e:e.sub(t)._mult(r)._add(t))}function Ja(l,t){for(var e=!1,p=0,o,r,n;p<l.length;p++)for(var i=0,s=(o=l[p]).length-1;i<o.length;s=i++)(r=o[i]).y>t.y!=(n=o[s]).y>t.y&&t.x<(n.x-r.x)*(t.y-r.y)/(n.y-r.y)+r.x&&(e=!e);return e}function Ha(s,t){for(var e=!1,l=0,n=s.length-1;l<s.length;n=l++){var i=s[l],a=s[n];i.y>t.y!=a.y>t.y&&t.x<(a.x-i.x)*(t.y-i.y)/(a.y-i.y)+i.x&&(e=!e)}return e}function Ya(o,t,e){var r=e[0],n=e[2];if(o.x<r.x&&t.x<r.x||o.x>n.x&&t.x>n.x||o.y<r.y&&t.y<r.y||o.y>n.y&&t.y>n.y)return!1;var i=up(o,t,e[0]);return i!==up(o,t,e[1])||i!==up(o,t,e[2])||i!==up(o,t,e[3])}function $a(o,t,e){var a=t.paint.get(o).value;return'constant'===a.kind?a.value:e.programConfigurations.get(t.id).getMaxValue(o)}function Wa(e){return N(e[0]*e[0]+e[1]*e[1])}function Qa(i,t,e,r,l){if(!t[0]&&!t[1])return i;var a=xd.convert(t)._mult(l);'viewport'===e&&a._rotate(-r);for(var o=[],s=0;s<i.length;s++)o.push(i[s].sub(a));return o}function to(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function io(T,t,e){var r=t[0],n=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=t[6],l=t[7],p=t[8],c=t[9],h=t[10],f=t[11],y=t[12],d=t[13],m=t[14],v=t[15],g=e[0],x=e[1],b=e[2],w=e[3];return T[0]=g*r+x*o+b*p+w*y,T[1]=g*n+x*s+b*c+w*d,T[2]=g*i+x*u+b*h+w*m,T[3]=g*a+x*l+b*f+w*v,T[4]=(g=e[4])*r+(x=e[5])*o+(b=e[6])*p+(w=e[7])*y,T[5]=g*n+x*s+b*c+w*d,T[6]=g*i+x*u+b*h+w*m,T[7]=g*a+x*l+b*f+w*v,T[8]=(g=e[8])*r+(x=e[9])*o+(b=e[10])*p+(w=e[11])*y,T[9]=g*n+x*s+b*c+w*d,T[10]=g*i+x*u+b*h+w*m,T[11]=g*a+x*l+b*f+w*v,T[12]=(g=e[12])*r+(x=e[13])*o+(b=e[14])*p+(w=e[15])*y,T[13]=g*n+x*s+b*c+w*d,T[14]=g*i+x*u+b*h+w*m,T[15]=g*a+x*l+b*f+w*v,T}function ao(s,t,e){var r=t[0],n=t[1],i=t[2],a=t[3];return s[0]=e[0]*r+e[4]*n+e[8]*i+e[12]*a,s[1]=e[1]*r+e[5]*n+e[9]*i+e[13]*a,s[2]=e[2]*r+e[6]*n+e[10]*i+e[14]*a,s[3]=e[3]*r+e[7]*n+e[11]*i+e[15]*a,s}function uo(o,t){var e=ao([],[o.x,o.y,0,1],t);return new xd(e[0]/e[3],e[1]/e[3])}function po(o,t,e,r){var s=t.width,i=t.height;if(!r)r=new Uint8Array(s*i*e);else if(r instanceof Uint8ClampedArray)r=new Uint8Array(r.buffer);else if(r.length!==s*i*e)throw new RangeError('mismatched image size');return o.width=s,o.height=i,o.data=r,o}function ho(o,t,e){var r=t.width,s=t.height;if(r!==o.width||s!==o.height){var l=po({},{width:r,height:s},e);fo(o,l,{x:0,y:0},{x:0,y:0},{width:ta(o.width,r),height:ta(o.height,s)},e),o.width=r,o.height=s,o.data=l.data}}function fo(d,t,e,r,n,i){if(0===n.width||0===n.height)return t;if(n.width>d.width||n.height>d.height||e.x>d.width-n.width||e.y>d.height-n.height)throw new RangeError('out of range source coordinates for image copy');if(n.width>t.width||n.height>t.height||r.x>t.width-n.width||r.y>t.height-n.height)throw new RangeError('out of range destination coordinates for image copy');for(var a=d.data,o=t.data,s=0;s<n.height;s++)for(var u=((e.y+s)*d.width+e.x)*i,l=((r.y+s)*t.width+r.x)*i,p=0;p<n.width*i;p++)o[l+p]=a[u+p];return t}function yo(d){var t={},e=d.resolution||256,m=d.clips?d.clips.length:1,g=d.image||new mo({width:e,height:m}),i=function(e,r,n){t[d.evaluationKey]=n;var a=d.expression.evaluate(t);g.data[e+r+0]=ea(255*a.r/a.a),g.data[e+r+1]=ea(255*a.g/a.a),g.data[e+r+2]=ea(255*a.b/a.a),g.data[e+r+3]=ea(255*a.a)};if(d.clips)for(var a=0,o=0;a<m;++a,o+=4*e)for(var s=0,u=0;s<e;s++,u+=4){var l=s/(e-1),p=d.clips[a];i(o,u,p.start*(1-l)+p.end*l)}else for(var c=0,y=0;c<e;c++,y+=4)i(0,y,c/(e-1));return g}function xo(d,t,e){e=e||2;var r=t&&t.length,p=r?t[0]*e:d.length,c=Io(d,0,p,e,!0),m=[],g,n,i,a,o,s,u;if(!c||c.next===c.prev)return m;if(r&&(c=function(l,t,e,r){var n=[],s,i,a;for(s=0,i=t.length;s<i;s++)(a=Io(l,t[s]*r,s<i-1?t[s+1]*r:l.length,r,!1))===a.next&&(a.steiner=!0),n.push(Lo(a));for(n.sort(To),s=0;s<n.length;s++)Vo(n[s],e),e=zo(e,e.next);return e}(d,t,c,e)),d.length>80*e){g=i=d[0],n=a=d[1];for(var l=e;l<p;l+=e)(o=d[l])<g&&(g=o),(s=d[l+1])<n&&(n=s),o>i&&(i=o),s>a&&(a=s);u=0===(u=oa(i-g,a-n))?0:1/u}return Co(c,m,e,g,n,u),m}function Io(s,t,e,r,n){var i,a;if(n===0<Yo(s,t,e,r))for(i=t;i<e;i+=r)a=Xo(i,s[i],s[i+1],a);else for(i=e-r;i>=t;i-=r)a=Xo(i,s[i],s[i+1],a);return a&&jo(a,a.next)&&(Jo(a),a=a.next),a}function zo(o,a){if(!o)return o;a||(a=o);var e=o,n;do if(n=!1,e.steiner||!jo(e,e.next)&&0!==Uo(e.prev,e,e.next))e=e.next;else{if(Jo(e),(e=a=e.prev)===e.next)break;n=!0}while(n||e!==a);return a}function Co(p,t,e,r,n,i,a){if(p){!a&&i&&function(o,t,e,a){var r=o;do null===r.z&&(r.z=Do(r.x,r.y,t,e,a)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==o);r.prevZ.nextZ=null,r.prevZ=null,function(p){var t=1,l,e,r,d,i,a,o,s;do{for(e=p,p=null,i=null,a=0;e;){for(a++,r=e,o=0,l=0;l<t&&(o++,r=r.nextZ);l++);for(s=t;0<o||0<s&&r;)0!==o&&(0===s||!r||e.z<=r.z)?(d=e,e=e.nextZ,o--):(d=r,r=r.nextZ,s--),i?i.nextZ=d:p=d,d.prevZ=i,i=d;e=r}i.nextZ=null,t*=2}while(1<a)}(r)}(p,r,n,i);for(var d=p,l,s;p.prev!==p.next;)if(l=p.prev,s=p.next,i?Po(p,r,n,i):Eo(p))t.push(l.i/e),t.push(p.i/e),t.push(s.i/e),Jo(p),p=s.next,d=s.next;else if((p=s)===d){a?1===a?Co(p=Mo(zo(p),t,e),t,e,r,n,i,2):2==a&&Bo(p,t,e,r,n,i):Co(zo(p),t,e,r,n,i,1);break}}}function Eo(o){var t=o.prev,e=o,a=o.next;if(0<=Uo(t,e,a))return!1;for(var r=o.next.next;r!==o.prev;){if(Ro(t.x,t.y,e.x,e.y,a.x,a.y,r.x,r.y)&&0<=Uo(r.prev,r,r.next))return!1;r=r.next}return!0}function Po(d,t,e,r){var n=d.prev,i=d,a=d.next;if(0<=Uo(n,i,a))return!1;for(var o=n.x>i.x?n.x>a.x?n.x:a.x:i.x>a.x?i.x:a.x,s=n.y>i.y?n.y>a.y?n.y:a.y:i.y>a.y?i.y:a.y,u=Do(n.x<i.x?n.x<a.x?n.x:a.x:i.x<a.x?i.x:a.x,n.y<i.y?n.y<a.y?n.y:a.y:i.y<a.y?i.y:a.y,t,e,r),l=Do(o,s,t,e,r),p=d.prevZ,c=d.nextZ;p&&p.z>=u&&c&&c.z<=l;){if(p!==d.prev&&p!==d.next&&Ro(n.x,n.y,i.x,i.y,a.x,a.y,p.x,p.y)&&0<=Uo(p.prev,p,p.next))return!1;if(p=p.prevZ,c!==d.prev&&c!==d.next&&Ro(n.x,n.y,i.x,i.y,a.x,a.y,c.x,c.y)&&0<=Uo(c.prev,c,c.next))return!1;c=c.nextZ}for(;p&&p.z>=u;){if(p!==d.prev&&p!==d.next&&Ro(n.x,n.y,i.x,i.y,a.x,a.y,p.x,p.y)&&0<=Uo(p.prev,p,p.next))return!1;p=p.prevZ}for(;c&&c.z<=l;){if(c!==d.prev&&c!==d.next&&Ro(n.x,n.y,i.x,i.y,a.x,a.y,c.x,c.y)&&0<=Uo(c.prev,c,c.next))return!1;c=c.nextZ}return!0}function Mo(o,t,e){var r=o;do{var n=r.prev,i=r.next.next;!jo(n,i)&&qo(n,r,r.next,i)&&Go(n,i)&&Go(i,n)&&(t.push(n.i/e),t.push(r.i/e),t.push(i.i/e),Jo(r),Jo(r.next),r=o=i),r=r.next}while(r!==o);return zo(r)}function Bo(l,t,e,r,n,i){var a=l;do{for(var o=a.next.next;o!==a.prev;){if(a.i!==o.i&&Oo(a,o)){var s=Zo(a,o);return a=zo(a,a.next),s=zo(s,s.next),Co(a,t,e,r,n,i),void Co(s,t,e,r,n,i)}o=o.next}a=a.next}while(a!==l)}function To(o,t){return o.x-t.x}function Vo(o,t){if(t=function(d,t){var e=t,n=d.x,i=d.y,a=-1/0,o;do{if(i<=e.y&&i>=e.next.y&&e.next.y!==e.y){var m=e.x+(i-e.y)*(e.next.x-e.x)/(e.next.y-e.y);if(m<=n&&m>a){if(a=m,m===n){if(i===e.y)return e;if(i===e.next.y)return e.next}o=e.x<e.next.x?e:e.next}}e=e.next}while(e!==t);if(!o)return null;if(n===a)return o;var s=o,l=o.x,p=o.y,c=1/0,g;e=o;do n>=e.x&&e.x>=l&&n!==e.x&&Ro(i<p?n:a,i,l,p,i<p?a:n,i,e.x,e.y)&&(g=B(i-e.y)/(n-e.x),Go(e,d)&&(g<c||g===c&&(e.x>o.x||e.x===o.x&&Fo(o,e)))&&(o=e,c=g)),e=e.next;while(e!==s);return o}(o,t)){var e=Zo(t,o);zo(t,t.next),zo(e,e.next)}}function Fo(o,t){return 0>Uo(o.prev,o,t.prev)&&0>Uo(t.next,o,o.next)}function Do(o,t,e,a,r){return(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=32767*(o-e)*r)|o<<8))|o<<4))|o<<2))|o<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-a)*r)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Lo(o){var t=o,e=o;do(t.x<e.x||t.x===e.x&&t.y<e.y)&&(e=t),t=t.next;while(t!==o);return e}function Ro(l,t,e,r,n,i,a,o){return 0<=(n-a)*(t-o)-(l-a)*(i-o)&&0<=(l-a)*(r-o)-(e-a)*(t-o)&&0<=(e-a)*(i-o)-(n-a)*(r-o)}function Oo(o,t){return o.next.i!==t.i&&o.prev.i!==t.i&&!function(o,t){var e=o;do{if(e.i!==o.i&&e.next.i!==o.i&&e.i!==t.i&&e.next.i!==t.i&&qo(e,e.next,o,t))return!0;e=e.next}while(e!==o);return!1}(o,t)&&(Go(o,t)&&Go(t,o)&&function(o,t){var e=o,r=!1,s=(o.x+t.x)/2,i=(o.y+t.y)/2;do e.y>i!=e.next.y>i&&e.next.y!==e.y&&s<(e.next.x-e.x)*(i-e.y)/(e.next.y-e.y)+e.x&&(r=!r),e=e.next;while(e!==o);return r}(o,t)&&(Uo(o.prev,o,t.prev)||Uo(o,t.prev,t))||jo(o,t)&&0<Uo(o.prev,o,o.next)&&0<Uo(t.prev,t,t.next))}function Uo(o,t,e){return(t.y-o.y)*(e.x-t.x)-(t.x-o.x)*(e.y-t.y)}function jo(o,t){return o.x===t.x&&o.y===t.y}function qo(l,t,e,r){var n=Ko(Uo(l,t,e)),i=Ko(Uo(l,t,r)),a=Ko(Uo(e,r,l)),o=Ko(Uo(e,r,t));return n!==i&&a!==o||0===n&&No(l,e,t)||0===i&&No(l,r,t)||0===a&&No(e,l,r)||0===o&&No(e,t,r)}function No(o,t,e){return t.x<=oa(o.x,e.x)&&t.x>=ta(o.x,e.x)&&t.y<=oa(o.y,e.y)&&t.y>=ta(o.y,e.y)}function Ko(e){return 0<e?1:0>e?-1:0}function Go(o,t){return 0>Uo(o.prev,o,o.next)?0<=Uo(o,t,o.next)&&0<=Uo(o,o.prev,t):0>Uo(o,t,o.prev)||0>Uo(o,o.next,t)}function Zo(o,t){var e=new Ho(o.i,o.x,o.y),r=new Ho(t.i,t.x,t.y),n=o.next,i=t.prev;return o.next=t,t.prev=o,e.next=n,n.prev=e,r.next=e,e.prev=r,i.next=r,r.prev=i,r}function Xo(o,t,e,a){var r=new Ho(o,t,e);return a?(r.next=a.next,r.prev=a,a.next.prev=r,a.next=r):(r.prev=r,r.next=r),r}function Jo(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Ho(o,t,e){this.i=o,this.x=t,this.y=e,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Yo(s,t,e,r){for(var n=0,i=t,a=e-r;i<e;i+=r)n+=(s[a]-s[i])*(s[i+1]+s[a+1]),a=i;return n}function $o(o,t,e,a,r){!function d(t,e,r,n,i){for(;n>r;){if(600<n-r){var a=n-r+1,o=e-r+1,s=x(a),u=.5*g(2*s/3),l=.5*N(s*u*(a-u)/a)*(0>o-a/2?-1:1);d(t,e,oa(r,ea(e-o*u/a+l)),ta(n,ea(e+(a-o)*u/a+l)),i)}var p=t[e],c=r,m=n;for(Wo(t,r,e),0<i(t[n],p)&&Wo(t,r,n);c<m;){for(Wo(t,c,m),c++,m--;0>i(t[c],p);)c++;for(;0<i(t[m],p);)m--}0===i(t[r],p)?Wo(t,r,m):Wo(t,++m,n),m<=e&&(r=m+1),e<=m&&(n=m-1)}}(o,t,e||0,a||o.length-1,r||Qo)}function Wo(o,t,e){var a=o[t];o[t]=o[e],o[e]=a}function Qo(o,t){return o<t?-1:o>t?1:0}function ts(l,t){var e=l.length;if(1>=e)return[l];for(var r=[],a=0,o,n,i;a<e;a++)i=S(l[a]),0!==i&&(l[a].area=B(i),void 0==n&&(n=0>i),n===0>i?(o&&r.push(o),o=[l[a]]):o.push(l[a]));if(o&&r.push(o),1<t)for(var s=0;s<r.length;s++)r[s].length<=t||($o(r[s],t,1,r[s].length-1,es),r[s]=r[s].slice(0,t));return r}function es(o,t){return t.area-o.area}function rs(l,t,e){for(var r=e.patternDependencies,n=!1,i=0,a=t,o;i<a.length;i+=1){o=a[i].paint.get(l+'-pattern'),o.isConstant()||(n=!0);var s=o.constantOr(null);s&&(n=!0,r[s.to]=!0,r[s.from]=!0)}return n}function ns(d,t,e,r,m){for(var i=m.patternDependencies,a=0,o=t;a<o.length;a+=1){var s=o[a],u=s.paint.get(d+'-pattern').value;if('constant'!==u.kind){var l=u.evaluate({zoom:r-1},e,{},m.availableImages),g=u.evaluate({zoom:r},e,{},m.availableImages),y=u.evaluate({zoom:r+1},e,{},m.availableImages);g=g&&g.name?g.name:g,y=y&&y.name?y.name:y,i[l=l&&l.name?l.name:l]=!0,i[g]=!0,i[y]=!0,e.patterns[s.id]={min:l,mid:g,max:y}}}return e}function is(o,t,e,a,r){this.properties={},this.extent=e,this.type=0,this._pbf=o,this._geometry=-1,this._keys=a,this._values=r,o.readFields(cs,this,t)}function cs(o,t,e){1==o?t.id=e.readVarint():2==o?function(o,t){for(var e=o.readVarint()+o.pos;o.pos<e;){var a=t._keys[o.readVarint()],r=t._values[o.readVarint()];t.properties[a]=r}}(e,t):3==o?t.type=e.readVarint():4==o&&(t._geometry=e.pos)}function hs(s){for(var t=0,n=0,i=s.length,a=i-1,o,e;n<i;a=n++)t+=((e=s[a]).x-(o=s[n]).x)*(o.y+e.y);return t}function fs(o,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=o,this._keys=[],this._values=[],this._features=[],o.readFields(ds,this,t),this.length=this._features.length}function ds(o,t,e){15===o?t.version=e.readVarint():1===o?t.name=e.readString():5===o?t.extent=e.readVarint():2===o?t._features.push(e.pos):3===o?t._keys.push(e.readString()):4==o&&t._values.push(function(o){for(var t=null,e=o.readVarint()+o.pos,a;o.pos<e;)a=o.readVarint()>>3,t=1===a?o.readString():2===a?o.readFloat():3===a?o.readDouble():4===a?o.readVarint64():5===a?o.readVarint():6===a?o.readSVarint():7===a?o.readBoolean():null;return t}(e))}function ms(o,t,e){if(3===o){var a=new Cc(e,e.readVarint()+e.pos);a.length&&(t[a.name]=a)}}function vs(l,t,e,r,n,i,a,o){l.emplaceBack(t,e,2*ea(r*xs)+a,2*(n*xs),2*(i*xs),b(o))}function ws(o,t){return o.x===t.x&&(0>o.x||8192<o.x)||o.y===t.y&&(0>o.y||8192<o.y)}function As(o,t){return o.x*t.x+o.y*t.y}function Is(_,t){if(1===_.length){for(var e=0,n=t[e++],i;!i||n.equals(i);)if(!(i=t[e++]))return 1/0;for(;e<t.length;e++){var T=t[e],a=_[0],o=i.sub(n),s=T.sub(n),u=a.sub(n),l=As(o,o),p=As(o,s),c=As(s,s),h=As(u,o),f=As(u,s),y=l*c-p*p,d=(c*h-p*f)/y,m=(l*f-p*h)/y,v=n.z*(1-d-m)+i.z*d+T.z*m;if(isFinite(v))return v}return 1/0}for(var g=1/0,x=0,b=t;x<b.length;x+=1)g=ta(g,b[x].z);return g}function zs(o,t){return 0<t?t+2*o:o}function Rs(o,a,e){return o.sections.forEach(function(o){o.text=function(o,t,e){var a=t.layout.get('text-transform').evaluate(e,{});return'uppercase'===a?o=o.toLocaleUpperCase():'lowercase'===a&&(o=o.toLocaleLowerCase()),ii.applyArabicShaping&&(o=ii.applyArabicShaping(o)),o}(o.text,a,e)}),o}function Ks(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}function Hs(e){return e.type===Ks.Bytes?e.readVarint()+e.pos:e.pos+1}function $s(o,t,e){return e?4294967296*t+(o>>>0):4294967296*(t>>>0)+(o>>>0)}function Ws(o,t,e){var a=16383>=t?1:2097151>=t?2:268435455>=t?3:ea(x(t)/(7*_));e.realloc(a);for(var r=e.pos-1;r>=o;r--)e.buf[r+a]=e.buf[r]}function Qs(o,t){for(var e=0;e<o.length;e++)t.writeVarint(o[e])}function kp(o,t){for(var e=0;e<o.length;e++)t.writeSVarint(o[e])}function Pp(o,t){for(var e=0;e<o.length;e++)t.writeFloat(o[e])}function zp(o,t){for(var e=0;e<o.length;e++)t.writeDouble(o[e])}function Dp(o,t){for(var e=0;e<o.length;e++)t.writeBoolean(o[e])}function Lp(o,t){for(var e=0;e<o.length;e++)t.writeFixed32(o[e])}function Rp(o,t){for(var e=0;e<o.length;e++)t.writeSFixed32(o[e])}function Bp(o,t){for(var e=0;e<o.length;e++)t.writeFixed64(o[e])}function Fp(o,t){for(var e=0;e<o.length;e++)t.writeSFixed64(o[e])}function Mp(o,t){return(o[t]|o[t+1]<<8|o[t+2]<<16)+16777216*o[t+3]}function Op(o,t,e){o[e]=t,o[e+1]=t>>>8,o[e+2]=t>>>16,o[e+3]=t>>>24}function Np(o,t){return(o[t]|o[t+1]<<8|o[t+2]<<16)+(o[t+3]<<24)}function Up(o,t,e){1===o&&e.readMessage(Vp,t)}function Vp(l,t,e){if(3===l){var r=e.readMessage(qp,{}),n=r.width,p=r.height,d=r.left,c=r.top,m=r.advance;t.push({id:r.id,bitmap:new co({width:n+6,height:p+6},r.bitmap),metrics:{width:n,height:p,left:d,top:c,advance:m}})}}function qp(o,t,e){1===o?t.id=e.readVarint():2===o?t.bitmap=e.readBytes():3===o?t.width=e.readVarint():4===o?t.height=e.readVarint():5===o?t.left=e.readSVarint():6===o?t.top=e.readSVarint():7==o&&(t.advance=e.readVarint())}function jp(d){for(var t=0,e=0,r=0,n=d,i;r<n.length;r+=1)i=n[r],t+=i.w*i.h,e=oa(e,i.w);d.sort(function(o,t){return t.h-o.h});for(var a=[{x:0,y:0,w:oa(m(N(t/.95)),e),h:1/0}],o=0,g=0,_=0,l=d;_<l.length;_+=1)for(var p=l[_],c=a.length-1,h;0<=c;c--)if(h=a[c],!(p.w>h.w||p.h>h.h)){if(p.x=h.x,p.y=h.y,g=oa(g,p.y+p.h),o=oa(o,p.x+p.w),p.w===h.w&&p.h===h.h){var f=a.pop();c<a.length&&(a[c]=f)}else p.h===h.h?(h.x+=p.w,h.w-=p.w):p.w===h.w?(h.y+=p.h,h.h-=p.h):(a.push({x:h.x+p.w,y:h.y,w:h.w-p.w,h:p.h}),h.y+=p.h,h.h-=p.h);break}return{w:o,h:g,fill:t/(o*g)||0}}function Zp(T,t,e,r,n,i,a,o,s,u,l,p,D,h,f,y){var d=Bc.fromFeature(T,n),v;p===Lc.vertical&&d.verticalizePunctuation();var m=ii.processBidirectionalText,g=ii.processStyledBidirectionalText;if(m&&1===d.sections.length){v=[];for(var x=0,b=m(d.toString(),Kp(d,u,i,t,r,h,f));x<b.length;x+=1){var w=b[x],_=new Bc;_.text=w,_.sections=d.sections;for(var A=0;A<w.length;A++)_.sectionIndex.push(0);v.push(_)}}else if(g){v=[];for(var S=0,k=g(d.text,d.sectionIndex,Kp(d,u,i,t,r,h,f));S<k.length;S+=1){var I=k[S],z=new Bc;z.text=I[0],z.sectionIndex=I[1],z.sections=d.sections,v.push(z)}}else v=function(l,t){for(var e=[],r=l.text,n=0,i=0,a=t,o;i<a.length;i+=1)o=a[i],e.push(l.substring(n,o)),n=o;return n<r.length&&e.push(l.substring(n,r.length)),e}(d,Kp(d,u,i,t,r,h,f));var C=[],L={positionedLines:C,text:d.toString(),top:l[1],bottom:l[1],left:l[0],right:l[0],writingMode:p,iconsInText:!1,verticalizable:!1};return function(H,t,e,r,n,i,a,o,s,u,l,W){for(var c=0,Y=-17,f=0,y=0,d='right'===o?1:'left'===o?0:.5,m=0,v=0,g=n,x;v<g.length;v+=1){x=g[v],x.trim();var b=x.getMaxScale(),w=24*(b-1),_={positionedGlyphs:[],lineOffset:0};H.positionedLines[m]=_;var A=_.positionedGlyphs,S=0;if(x.length()){for(var k=0;k<x.length();k++){var I=x.getSection(k),z=x.getSectionIndex(k),$=x.getCharCode(k),Q=0,P=null,ee=null,te=null,oe=24,V=!(s===Lc.horizontal||!l&&!Gn($)||l&&(Fc[$]||(se=$,Nn.Arabic(se)||Nn['Arabic Supplement'](se)||Nn['Arabic Extended-A'](se)||Nn['Arabic Presentation Forms-A'](se)||Nn['Arabic Presentation Forms-B'](se))));if(I.imageName){var ae=r[I.imageName];if(!ae)continue;te=I.imageName,H.iconsInText=H.iconsInText||!0,ee=ae.paddedRect;var re=ae.displaySize;I.scale=24*I.scale/W,Q=w+(24-re[1]*I.scale),oe=(P={width:re[0],height:re[1],left:1,top:-3,advance:V?re[1]:re[0]}).advance;var L=V?re[0]*I.scale-24*b:re[1]*I.scale-24*b;0<L&&L>S&&(S=L)}else{var R=e[I.fontStack],O=R&&R[$];if(O&&O.rect)ee=O.rect,P=O.metrics;else{var U=t[I.fontStack],j=U&&U[$];if(!j)continue;P=j.metrics}Q=24*(b-I.scale)}V?(H.verticalizable=!0,A.push({glyph:$,imageName:te,x:c,y:Y+Q,vertical:V,scale:I.scale,fontStack:I.fontStack,sectionIndex:z,metrics:P,rect:ee}),c+=oe*I.scale+u):(A.push({glyph:$,imageName:te,x:c,y:Y+Q,vertical:V,scale:I.scale,fontStack:I.fontStack,sectionIndex:z,metrics:P,rect:ee}),c+=P.advance*I.scale+u)}0!==A.length&&(f=oa(c-u,f),Jp(A,0,A.length-1,d,S)),c=0;var ne=i*b+S;_.lineOffset=oa(S,w),Y+=ne,y=oa(ne,y),++m}else Y+=i,++m}var N=Y- -17,G=Yp(a),Z=G.horizontalAlign,ie=G.verticalAlign,se;(function(p,t,e,r,m,i,a,o,g){var u=i===a?(-r*g+.5)*a:-o*r- -17;for(var l=0,c=p;l<c.length;l+=1)for(var _=0,f=c[l].positionedGlyphs,y;_<f.length;_+=1)y=f[_],y.x+=(t-e)*m,y.y+=u})(H.positionedLines,d,Z,ie,f,y,i,N,n.length),H.top+=-ie*N,H.bottom=H.top+N,H.left+=-Z*f,H.right=H.left+f}(L,t,e,r,v,a,o,s,p,u,D,y),!function(o){for(var t=0,e=o;t<e.length;t+=1)if(0!==e[t].positionedGlyphs.length)return!1;return!0}(C)&&L}function Gp(l,t,e,r,n,i){if(t.imageName){var a=r[t.imageName];return a?24*(a.displaySize[0]*t.scale)/i+n:0}var o=e[t.fontStack],s=o&&o[l];return s?s.metrics.advance*t.scale+n:0}function Hp(o,t,e,a){var r=C(o-t,2);return a?o<t?r/2:2*r:r+B(e)*e}function Wp(o,t,e){var a=0;return 10===o&&(a-=1e4),e&&(a+=150),40!==o&&65288!==o||(a+=50),41!==t&&65289!==t||(a+=50),a}function Xp(d,m,g,r,n,i){for(var a=null,y=Hp(m,g,n,i),_=0,u=r;_<u.length;_+=1){var l=u[_],p=Hp(m-l.x,g,n,i)+l.badness;p<=y&&(a=l,y=p)}return{index:d,x:m,priorBreak:a,badness:y}}function Kp(g,_,e,r,n,i,a){if('point'!==i)return[];if(!g)return[];for(var o=[],u=function(l,t,e,r,n,i){for(var a=0,o=0,s;o<l.length();o++)s=l.getSection(o),a+=Gp(l.getCharCode(o),s,r,n,t,i);return a/oa(1,m(a/e))}(g,_,e,r,n,a),l=0<=g.text.indexOf('\u200B'),p=0,c=0,h;c<g.length();c++){var s=g.getSection(c),f=g.getCharCode(c);if(Fc[f]||(p+=Gp(f,s,r,n,_,a)),c<g.length()-1){var y=!(11904>(h=f))&&(Nn['Bopomofo Extended'](h)||Nn.Bopomofo(h)||Nn['CJK Compatibility Forms'](h)||Nn['CJK Compatibility Ideographs'](h)||Nn['CJK Compatibility'](h)||Nn['CJK Radicals Supplement'](h)||Nn['CJK Strokes'](h)||Nn['CJK Symbols and Punctuation'](h)||Nn['CJK Unified Ideographs Extension A'](h)||Nn['CJK Unified Ideographs'](h)||Nn['Enclosed CJK Letters and Months'](h)||Nn['Halfwidth and Fullwidth Forms'](h)||Nn.Hiragana(h)||Nn['Ideographic Description Characters'](h)||Nn['Kangxi Radicals'](h)||Nn['Katakana Phonetic Extensions'](h)||Nn.Katakana(h)||Nn['Vertical Forms'](h)||Nn['Yi Radicals'](h)||Nn['Yi Syllables'](h));(Mc[f]||y||s.imageName)&&o.push(Xp(c+1,p,u,o,Wp(f,g.getCharCode(c+1),y&&l),!1))}}return function o(t){return t?o(t.priorBreak).concat(t.index):[]}(Xp(g.length(),p,u,o,0,!0))}function Yp(o){var t=.5,a=.5;return'right'===o||'top-right'===o||'bottom-right'===o?t=1:'left'===o||'top-left'===o||'bottom-left'===o?t=0:void 0,'bottom'===o||'bottom-right'===o||'bottom-left'===o?a=1:'top'===o||'top-right'===o||'top-left'===o?a=0:void 0,{horizontalAlign:t,verticalAlign:a}}function Jp(l,t,e,r,n){if(r||n)for(var i=l[e],a=(l[e].x+i.metrics.advance*i.scale)*r,o=t;o<=e;o++)l[o].x-=a,l[o].y+=n}function $p(g,t,e,r,n,i){var a=g.image,_;if(a.content){var x=a.content,u=a.pixelRatio||1;_=[x[0]/u,x[1]/u,a.displaySize[0]-x[2]/u,a.displaySize[1]-x[3]/u]}var l=t.left*i,y=t.right*i,d,b,w,T;'width'===e||'both'===e?(T=n[0]+l-r[3],b=n[0]+y+r[1]):b=(T=n[0]+(l+y-a.displaySize[0])/2)+a.displaySize[0];var E=t.top*i,m=t.bottom*i;return'height'===e||'both'===e?(d=n[1]+E-r[0],w=n[1]+m+r[2]):w=(d=n[1]+(E+m-a.displaySize[1])/2)+a.displaySize[1],{image:a,top:d,right:b,bottom:w,left:T,collisionPadding:_}}function Qp(l,t){var e=t.expression;if('constant'===e.kind)return{kind:'constant',layoutSize:e.evaluate(new ai(l+1))};if('source'===e.kind)return{kind:'source'};for(var r=e.zoomStops,n=e.interpolationType,p=0;p<r.length&&r[p]<=l;)p++;for(var a=p=oa(0,p-1);a<r.length&&r[a]<l+1;)a++;a=ta(r.length-1,a);var o=r[p],d=r[a];return'composite'===e.kind?{kind:'composite',minZoom:o,maxZoom:d,interpolationType:n}:{kind:'camera',minZoom:o,maxZoom:d,minSize:e.evaluate(new ai(o)),maxSize:e.evaluate(new ai(d)),interpolationType:n}}function ed(o,t,e){var a=t.uSize,r=e.lowerSize;return'source'===o.kind?r/128:'composite'===o.kind?je(r/128,e.upperSize/128,t.uSizeT):a}function td(o,t){var e=0,s=0;if('constant'===o.kind)s=o.layoutSize;else if('source'!==o.kind){var l=o.interpolationType,i=l?ko(nr.interpolationFactor(l,t,o.minZoom,o.maxZoom),0,1):0;'camera'===o.kind?s=je(o.minSize,o.maxSize,i):e=i}return{uSizeT:e,uSize:s}}function od(d,t,e,m,n){if(void 0===t.segment)return!0;for(var i=t,a=t.segment+1,o=0;o>-e/2;){if(0>--a)return!1;o-=d[a].dist(i),i=d[a]}o+=d[a].dist(d[a+1]),a++;for(var g=[],u=0;o<e/2;){var l=d[a],p=d[a+1];if(!p)return!1;var y=d[a-1].angleTo(l)-l.angleTo(p);for(y=B((y+3*Xe)%(2*Xe)-Xe),g.push({distance:o,angleDelta:y}),u+=y;o-g[0].distance>m;)u-=g.shift().angleDelta;if(u>n)return!1;a++,o+=l.dist(p)}return!0}function ad(o){for(var t=0,e=0;e<o.length-1;e++)t+=o[e].dist(o[e+1]);return t}function rd(o,t,e){return o?.6*t*e:0}function nd(o,t){return oa(o?o.right-o.left:0,t?t.right-t.left:0)}function id(g,t,e,r,n,i){for(var a=rd(e,n,i),_=nd(e,r)*i,s=0,u=ad(g)/2,l=0;l<g.length-1;l++){var p=g[l],c=g[l+1],h=p.dist(c);if(s+h>u){var f=(u-s)/h,y=je(p.x,c.x,f),d=je(p.y,c.y,f),m=new Oc(y,d,c.angleTo(p),l);return m._round(),!a||od(g,m,_,a,t)?m:void 0}s+=h}}function sd(d,t,e,r,n,i,a,o,s){var u=rd(r,i,a),l=nd(r,n),p=l*a,c=0===d[0].x||d[0].x===s||0===d[0].y||d[0].y===s;return t-p<t/4&&(t=p+t/4),function T(t,e,r,n,i,a,o,s,u){for(var l=a/2,p=ad(t),c=0,h=e-r,f=[],y=0;y<t.length-1;y++){for(var d=t[y],m=t[y+1],v=d.dist(m),g=m.angleTo(d);h+r<c+v;){var x=((h+=r)-c)/v,b=je(d.x,m.x,x),w=je(d.y,m.y,x);if(0<=b&&b<u&&0<=w&&w<u&&0<=h-l&&h+l<=p){var _=new Oc(b,w,g,y);_._round(),n&&!od(t,_,a,n,i)||f.push(_)}}c+=v}return s||f.length||o||(f=T(t,c/2,r,n,i,a,o,!0,u)),f}(d,c?t/2*o%t:(l/2+2*i)*a*o%t,t,u,e,p,c,!1,s)}function ld(i,t,e,r,n){for(var a=[],o=0;o<i.length;o++)for(var s=i[o],d=void 0,l=0;l<s.length-1;l++){var p=s[l],c=s[l+1];p.x<t&&c.x<t||(p.x<t?p=new xd(t,p.y+(t-p.x)/(c.x-p.x)*(c.y-p.y))._round():c.x<t&&(c=new xd(t,p.y+(t-p.x)/(c.x-p.x)*(c.y-p.y))._round()),p.y<e&&c.y<e||(p.y<e?p=new xd(p.x+(e-p.y)/(c.y-p.y)*(c.x-p.x),e)._round():c.y<e&&(c=new xd(p.x+(e-p.y)/(c.y-p.y)*(c.x-p.x),e)._round()),p.x>=r&&c.x>=r||(p.x>=r?p=new xd(r,p.y+(r-p.x)/(c.x-p.x)*(c.y-p.y))._round():c.x>=r&&(c=new xd(r,p.y+(r-p.x)/(c.x-p.x)*(c.y-p.y))._round()),p.y>=n&&c.y>=n||(p.y>=n?p=new xd(p.x+(n-p.y)/(c.y-p.y)*(c.x-p.x),n)._round():c.y>=n&&(c=new xd(p.x+(n-p.y)/(c.y-p.y)*(c.x-p.x),n)._round()),d&&p.equals(d[d.length-1])||a.push(d=[p]),d.push(c)))))}return a}function pd(i,t,e,D){var n=[],N=i.image,o=N.pixelRatio,a=N.paddedRect.w-2,s=N.paddedRect.h-2,q=i.right-i.left,p=i.bottom-i.top,l=N.stretchX||[[0,a]],c=N.stretchY||[[0,s]],u=function(o,t){return o+t[1]-t[0]},Z=l.reduce(u,0),d=c.reduce(u,0),m=a-Z,y=s-d,G=0,x=Z,b=0,H=d,_=0,A=m,S=0,k=y;if(N.content&&D){var g=N.content;G=dd(l,0,g[0]),b=dd(c,0,g[1]),x=dd(l,g[0],g[2]),H=dd(c,g[1],g[3]),_=g[0]-G,S=g[1]-b,A=g[2]-g[0]-x,k=g[3]-g[1]-H}var f=function(s,n,a,c){var l=ud(s.stretch-G,x,q,i.left),u=md(s.fixed-_,A,s.stretch,Z),m=ud(n.stretch-b,H,p,i.top),y=md(n.fixed-S,k,n.stretch,d),f=ud(a.stretch-G,x,q,i.left),g=md(a.fixed-_,A,a.stretch,Z),h=ud(c.stretch-b,H,p,i.top),v=md(c.fixed-S,k,c.stretch,d),E=new xd(l,m),C=new xd(f,m),I=new xd(f,h),z=new xd(l,h),W=new xd(u/o,y/o),X=new xd(g/o,v/o),K=t*Xe/180;if(K){var D=w(K),Y=Ze(K),R=[Y,-D,D,Y];E._matMult(R),C._matMult(R),z._matMult(R),I._matMult(R)}var O=s.stretch+s.fixed,U=n.stretch+n.fixed;return{tl:E,tr:C,bl:z,br:I,tex:{x:N.paddedRect.x+1+O,y:N.paddedRect.y+1+U,w:a.stretch+a.fixed-O,h:c.stretch+c.fixed-U},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:W,pixelOffsetBR:X,minFontScaleX:A/o/q,minFontScaleY:k/o/p,isSDF:e}};if(D&&(N.stretchX||N.stretchY))for(var h=cd(l,m,Z),v=cd(c,y,d),E=0;E<h.length-1;E++)for(var C=h[E],I=h[E+1],T=0;T<v.length-1;T++)n.push(f(C,v[T],I,v[T+1]));else n.push(f({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:a+1},{fixed:0,stretch:s+1}));return n}function dd(s,t,e){for(var r=0,n=0,i=s,a;n<i.length;n+=1)a=i[n],r+=oa(t,ta(e,a[1]))-oa(t,ta(e,a[0]));return r}function cd(p,t,e){for(var d=[{fixed:-1,stretch:0}],n=0,i=p;n<i.length;n+=1){var a=i[n],o=a[0],s=a[1],c=d[d.length-1];d.push({fixed:o-c.stretch,stretch:c.stretch}),d.push({fixed:o-c.stretch,stretch:c.stretch+(s-o)})}return d.push({fixed:t+1,stretch:e}),d}function ud(o,t,e,a){return o/t*e+a}function md(o,t,e,a){return o-t*e/a}function gd(o,t){return o<t?-1:o>t?1:0}function yd(i,t,e){void 0===t&&(t=1),void 0===e&&(e=!1);for(var r=1/0,n=1/0,a=-1/0,o=-1/0,s=i[0],u=0,_;u<s.length;u++)_=s[u],(!u||_.x<r)&&(r=_.x),(!u||_.y<n)&&(n=_.y),(!u||_.x>a)&&(a=_.x),(!u||_.y>o)&&(o=_.y);var p=ta(a-r,o-n),c=p/2,h=new Vc([],_d);if(0===p)return new xd(r,n);for(var f=r;f<a;f+=p)for(var y=n;y<o;y+=p)h.push(new tl(f+c,y+c,c,i));for(var d=function(d){for(var t=0,e=0,r=0,n=d[0],i=0,a=n.length,o=a-1;i<a;o=i++){var s=n[i],c=n[o],l=s.x*c.y-c.x*s.y;e+=(s.x+c.x)*l,r+=(s.y+c.y)*l,t+=3*l}return new tl(e/t,r/t,0,d)}(i),m=h.length,x;h.length;)x=h.pop(),(x.d>d.d||!d.d)&&(d=x,e&&console.log('found best %d after %d probes',b(1e4*x.d)/1e4,m)),x.max-d.d<=t||(h.push(new tl(x.p.x-(c=x.h/2),x.p.y-c,c,i)),h.push(new tl(x.p.x+c,x.p.y-c,c,i)),h.push(new tl(x.p.x-c,x.p.y+c,c,i)),h.push(new tl(x.p.x+c,x.p.y+c,c,i)),m+=4);return e&&(console.log('num probes: '+m),console.log('best distance: '+d.d)),d.p}function _d(o,t){return t.max-o.max}function tl(o,t,e,a){this.p=new xd(o,t),this.h=e,this.d=function(d,t){for(var e=!1,c=1/0,n=0;n<t.length;n++)for(var i=t[n],a=0,o=i.length,s=o-1;a<o;s=a++){var u=i[a],l=i[s];u.y>d.y!=l.y>d.y&&d.x<(l.x-u.x)*(d.y-u.y)/(l.y-u.y)+u.x&&(e=!e),c=ta(c,Xa(d,u,l))}return(e?1:-1)*N(c)}(this.p,a),this.max=this.d+this.h*Math.SQRT2}function el(o,t){return t[1]===qc?function(o,t){var a=0,r=0;0>t&&(t=0);var n=t/1.4142135623730951;return'top-right'===o||'top-left'===o?r=n-7:'bottom-right'===o||'bottom-left'===o?r=7-n:'bottom'===o?r=7-t:'top'===o?r=t-7:void 0,'top-right'===o||'bottom-right'===o?a=-n:'top-left'===o||'bottom-left'===o?a=n:'left'===o?a=t:'right'===o?a=-t:void 0,[a,r]}(o,t[0]):function(o,t,a){var r=0,n=0;switch(t=B(t),a=B(a),o){case'top-right':case'top-left':case'top':n=a-7;break;case'bottom-right':case'bottom-left':case'bottom':n=7-a;}return'top-right'===o||'bottom-right'===o||'right'===o?r=-t:'top-left'===o||'bottom-left'===o||'left'===o?r=t:void 0,[r,n]}(o,t[0],t[1])}function nl(e){return'right'===e||'top-right'===e||'bottom-right'===e?'right':'left'===e||'top-left'===e||'bottom-left'===e?'left':'center'}function il(i,t,e,r,n,a,o,s,u,l,p,c,_,f,y){var d=function(i,t,e,r,n,a,o,s){for(var u=r.layout.get('text-rotate').evaluate(a,{})*Xe/180,l=[],p=0,c=t.positionedLines;p<c.length;p+=1)for(var h=c[p],f=0,y=h.positionedGlyphs,d;f<y.length;f+=1)if(d=y[f],d.rect){var m=d.rect||{},Z=4,g=!0,H=1,b=0,W=(n||s)&&d.vertical,_=d.metrics.advance*d.scale/2;if(s&&t.verticalizable&&(b=h.lineOffset/2-(d.imageName?-(24-d.metrics.width*d.scale)/2:24*(d.scale-1))),d.imageName){var X=o[d.imageName];g=X.sdf,Z=1/(H=X.pixelRatio)}var S=n?[d.x+_,d.y]:[0,0],Y=n?[0,0]:[d.x+_+e[0],d.y+e[1]-b],I=[0,0];W&&(I=Y,Y=[0,0]);var z=(d.metrics.left-Z)*d.scale-_+Y[0],C=(-d.metrics.top-Z)*d.scale+Y[1],E=z+m.w*d.scale/H,P=C+m.h*d.scale/H,M=new xd(z,C),J=new xd(E,C),$=new xd(z,P),Q=new xd(E,P);if(W){var ee=new xd(-_,_- -17),D=-Xe/2,L=12-_,R=new xd(22-L,-(d.imageName?L:0)),O=new(Function.prototype.bind.apply(xd,[null].concat(I)));M._rotateAround(D,ee)._add(R)._add(O),J._rotateAround(D,ee)._add(R)._add(O),$._rotateAround(D,ee)._add(R)._add(O),Q._rotateAround(D,ee)._add(R)._add(O)}if(u){var U=w(u),te=Ze(u),q=[te,-U,U,te];M._matMult(q),J._matMult(q),$._matMult(q),Q._matMult(q)}var N=new xd(0,0),oe=new xd(0,0);l.push({tl:M,tr:J,bl:$,br:Q,tex:m,writingMode:t.writingMode,glyphOffset:S,sectionIndex:d.sectionIndex,isSDF:g,pixelOffsetTL:N,pixelOffsetBR:oe,minFontScaleX:0,minFontScaleY:0})}return l}(0,e,s,n,a,o,r,i.allowVerticalPlacement),m=i.textSizeData,h=null;'source'===m.kind?32640<(h=[128*n.layout.get('text-size').evaluate(o,{})])[0]&&cp(i.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):'composite'===m.kind&&(32640<(h=[128*f.compositeTextSizes[0].evaluate(o,{},y),128*f.compositeTextSizes[1].evaluate(o,{},y)])[0]||32640<h[1])&&cp(i.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),i.addSymbols(i.text,d,h,s,a,o,l,t,u.lineStartIndex,u.lineLength,_,y);for(var g=0,x=p;g<x.length;g+=1)c[x[g]]=i.text.placedSymbolArray.length-1;return 4*d.length}function al(o){for(var t in o)return o[t];return null}function ol(s,t,e,r){var n=s.compareText;if(t in n){for(var i=n[t],a=i.length-1;0<=a;a--)if(r.dist(i[a])<e)return!0;}else n[t]=[];return n[t].push(r),!1}function sl(d,t,e,r,n,i,a,o,s,u,l,p,c){var m=o?ta(32640,b(o[0])):0,g=o?ta(32640,b(o[1])):0;d.emplaceBack(t,e,b(32*r),b(32*n),i,a,(m<<1)+(s?1:0),g,16*u,16*l,256*p,256*c)}function pl(o,t,e){o.emplaceBack(t.x,t.y,e),o.emplaceBack(t.x,t.y,e),o.emplaceBack(t.x,t.y,e),o.emplaceBack(t.x,t.y,e)}function cl(o){for(var t=0,e=o.sections;t<e.length;t+=1)if(Hn(e[t].text))return!0;return!1}function hl(o,t,e){var a=6378137*(2*Xe)/256/C(2,e);return[o*a-6378137*(2*Xe)/2,t*a-6378137*(2*Xe)/2]}function Vl(e){return Dl*Ze(e*Xe/180)}function Rl(e){return(180+e)/360}function Ol(e){return(180-180/Xe*x(v(Xe/4+e*Xe/360)))/360}function Ul(o,t){return o/Vl(t)}function jl(e){return 360/Xe*n(g((180-360*e)*Xe/180))-90}function ql(o,t,e,r,n){0>(o*=2)&&(o=-1*o-1);var i=1<<e;return(i*i*o+i*n+r).toString(36)+e.toString(36)+t.toString(36)}function Xl(o,s,e,r,n){return lp(o,function(i,t){var a=s instanceof fi?s.get(t):null;return a&&a.evaluate?a.evaluate(e,r,n):a})}function tp(l){for(var t=1/0,p=1/0,d=-1/0,c=-1/0,u=0,a=l,o;u<a.length;u+=1)o=a[u],t=ta(t,o.x),p=ta(p,o.y),d=oa(d,o.x),c=oa(c,o.y);return{minX:t,minY:p,maxX:d,maxY:c}}function ep(o,t){return t-o}var rp=Math.hypot,fd=Math.acos,hd=e;e.prototype.sampleCurveX=function(e){return((this.ax*e+this.bx)*e+this.cx)*e},e.prototype.sampleCurveY=function(e){return((this.ay*e+this.by)*e+this.cy)*e},e.prototype.sampleCurveDerivativeX=function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},e.prototype.solveCurveX=function(l,t){var e,r,n,i,a;for(void 0===t&&(t=1e-6),n=l,a=0;8>a;a++){if(i=this.sampleCurveX(n)-l,B(i)<t)return n;var o=this.sampleCurveDerivativeX(n);if(1e-6>B(o))break;n-=i/o}if((n=l)<(e=0))return e;if(n>(r=1))return r;for(;e<r;){if(i=this.sampleCurveX(n),B(i-l)<t)return n;l>i?e=n:r=n,n=.5*(r-e)+e}return n},e.prototype.solve=function(o,t){return this.sampleCurveY(this.solveCurveX(o,t))};var xd=so;so.prototype={clone:function(){return new so(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(o,t){return this.clone()._rotateAround(o,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return N(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return N(this.distSqr(e))},distSqr:function(o){var t=o.x-this.x,e=o.y-this.y;return t*t+e*e},angle:function(){return A(this.y,this.x)},angleTo:function(e){return A(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(o,t){return A(this.x*t-this.y*o,this.x*o+this.y*t)},_matMult:function(o){var t=o[2]*this.x+o[3]*this.y;return this.x=o[0]*this.x+o[1]*this.y,this.y=t,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(o){var t=Ze(o),e=w(o),a=e*this.x+t*this.y;return this.x=t*this.x-e*this.y,this.y=a,this},_rotateAround:function(o,t){var e=Ze(o),a=w(o),r=t.y+a*(this.x-t.x)+e*(this.y-t.y);return this.x=t.x+e*(this.x-t.x)-a*(this.y-t.y),this.y=r,this},_round:function(){return this.x=b(this.x),this.y=b(this.y),this}},so.convert=function(e){return e instanceof so?e:Array.isArray(e)?new so(e[0],e[1]):e};var vd='undefined'==typeof self?{}:self,o=a(.25,.1,.25,1),r=1,i={},l=null,f=vd.performance&&vd.performance.now?vd.performance.now.bind(vd.performance):Date.now.bind(Date),bd=vd.requestAnimationFrame||vd.mozRequestAnimationFrame||vd.webkitRequestAnimationFrame||vd.msRequestAnimationFrame,D=vd.cancelAnimationFrame||vd.mozCancelAnimationFrame||vd.webkitCancelAnimationFrame||vd.msCancelAnimationFrame,L={now:f,frame:function(o){var t=bd(o);return{cancel:function(){return D(t)}}},getImageData:function(o,t){void 0===t&&(t=0);var a=vd.document.createElement('canvas'),r=a.getContext('2d');if(!r)throw new Error('failed to create canvas 2d context');return a.width=o.width,a.height=o.height,r.drawImage(o,0,0,o.width,o.height),r.getImageData(-t,-t,o.width+2*t,o.height+2*t)},resolveURL:function(e){return q||(q=vd.document.createElement('a')),q.href=e,q.href},hardwareConcurrency:vd.navigator&&vd.navigator.hardwareConcurrency||4,get devicePixelRatio(){return vd.devicePixelRatio},get prefersReducedMotion(){return!!vd.matchMedia&&(null==M&&(M=vd.matchMedia('(prefers-reduced-motion: reduce)')),M.matches)}},R={API_URL:'https://api.mapbox.com',get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf('https://api.mapbox.cn')?'https://events.mapbox.cn/events/v2':0===this.API_URL.indexOf('https://api.mapbox.com')?'https://events.mapbox.com/events/v2':null:null},FEEDBACK_URL:'https://apps.mapbox.com/feedback',REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},O={supported:!1,testSupport:function(e){!U&&T&&(wd?P(e):Td=e)}},U=!1,wd=!1,q,M,Td,T;vd.document&&((T=vd.document.createElement('img')).onload=function(){Td&&P(Td),Td=null,wd=!0},T.onerror=function(){U=!0,Td=null},T.src='data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=');var V='01',Ed=function(o,t){this._transformRequestFn=o,this._customAccessToken=t,this._createSkuToken()};Ed.prototype._createSkuToken=function(){var e=function(){for(var o='',t=0;10>t;t++)o+='0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ'[ea(62*Math.random())];return{token:['1',V,o].join(''),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=e.token,this._skuTokenExpiresAt=e.tokenExpiresAt},Ed.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},Ed.prototype.transformRequest=function(o,a){return this._transformRequestFn&&this._transformRequestFn(o,a)||{url:o}},Ed.prototype.normalizeStyleURL=function(o,t){if(!mp(o))return o;var e=J(o);return e.path='/styles/v1'+e.path,this._makeAPIURL(e,this._customAccessToken||t)},Ed.prototype.normalizeGlyphsURL=function(o,t){if(!mp(o))return o;var e=J(o);return e.path='/fonts/v1'+e.path,this._makeAPIURL(e,this._customAccessToken||t)},Ed.prototype.normalizeSourceURL=function(o,t){if(!mp(o))return o;var e=J(o);return e.path='/v4/'+e.authority+'.json',e.params.push('secure'),this._makeAPIURL(e,this._customAccessToken||t)},Ed.prototype.normalizeSpriteURL=function(o,t,e,a){var r=J(o);return mp(o)?(r.path='/styles/v1'+r.path+'/sprite'+t+e,this._makeAPIURL(r,this._customAccessToken||a)):(r.path+=''+t+e,Y(r))},Ed.prototype.normalizeTileURL=function(o,t){if(this._isSkuTokenExpired()&&this._createSkuToken(),o&&!mp(o))return o;var e=J(o);e.path=e.path.replace(/(\.(png|jpg)\d*)(?=$)/,(2<=L.devicePixelRatio||512===t?'@2x':'')+(O.supported?'.webp':'$1')),e.path=e.path.replace(/^.+\/v4\//,'/'),e.path='/v4'+e.path;var a=this._customAccessToken||function(o){for(var t=0,e=o,a;t<e.length;t+=1)if(a=e[t].match(/^access_token=(.*)$/),a)return a[1];return null}(e.params)||R.ACCESS_TOKEN;return R.REQUIRE_ACCESS_TOKEN&&a&&this._skuToken&&e.params.push('sku='+this._skuToken),this._makeAPIURL(e,a)},Ed.prototype.canonicalizeTileURL=function(o,t){var e=J(o);if(!e.path.match(/(^\/v4\/)/)||!e.path.match(/\.[\w]+$/))return o;var a='mapbox://tiles/';a+=e.path.replace('/v4/','');var r=e.params;return t&&(r=r.filter(function(e){return!e.match(/^access_token=/)})),r.length&&(a+='?'+r.join('&')),a},Ed.prototype.canonicalizeTileset=function(s,t){for(var l=!!t&&mp(t),r=[],n=0,i=s.tiles||[],a;n<i.length;n+=1)a=i[n],Z(a)?r.push(this.canonicalizeTileURL(a,l)):r.push(a);return r},Ed.prototype._makeAPIURL=function(o,t){var e='See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes',a=J(R.API_URL);if(o.protocol=a.protocol,o.authority=a.authority,'/'!==a.path&&(o.path=''+a.path+o.path),!R.REQUIRE_ACCESS_TOKEN)return Y(o);if(!(t=t||R.ACCESS_TOKEN))throw new Error('An API access token is required to use Mapbox GL. '+e);if('s'===t[0])throw new Error('Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). '+e);return o.params=o.params.filter(function(e){return-1===e.indexOf('access_token')}),o.params.push('access_token='+t),Y(o)};var G=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i,X=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/,H=function(e){this.type=e,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};H.prototype.getStorageKey=function(o){var t=$(R.ACCESS_TOKEN),a;return a=t&&t.u?vd.btoa(encodeURIComponent(t.u).replace(/%([0-9A-F]{2})/g,function(o,t){return d(+('0x'+t))})):R.ACCESS_TOKEN||'',o?'mapbox.eventData.'+o+':'+a:'mapbox.eventData:'+a},H.prototype.fetchEventData=function(){var o=E('localStorage'),t=this.getStorageKey(),e=this.getStorageKey('uuid');if(o)try{var a=vd.localStorage.getItem(t);a&&(this.eventData=JSON.parse(a));var r=vd.localStorage.getItem(e);r&&(this.anonId=r)}catch(e){cp('Unable to read from LocalStorage')}},H.prototype.saveEventData=function(){var o=E('localStorage'),t=this.getStorageKey(),e=this.getStorageKey('uuid');if(o)try{vd.localStorage.setItem(e,this.anonId),1<=Object.keys(this.eventData).length&&vd.localStorage.setItem(t,JSON.stringify(this.eventData))}catch(e){cp('Unable to write to LocalStorage')}},H.prototype.processRequests=function(){},H.prototype.postEvent=function(l,t,e,r){var n=this;if(R.EVENTS_URL){var i=J(R.EVENTS_URL);i.params.push('access_token='+(r||R.ACCESS_TOKEN||''));var a={event:this.type,created:new Date(l).toISOString(),sdkIdentifier:'mapbox-gl-js',sdkVersion:'1.12.0',skuId:V,userId:this.anonId},o=t?ha(a,t):a,s={url:Y(i),headers:{"Content-Type":'text/plain'},body:JSON.stringify([o])};this.pendingRequest=bt(s,function(o){n.pendingRequest=null,e(o),n.saveEventData(),n.processRequests(r)})}},H.prototype.queueRequest=function(o,t){this.queue.push(o),this.processRequests(t)};var Q=function(o){function t(){o.call(this,'map.load'),this.success={},this.skuToken=''}return o&&(t.__proto__=o),(t.prototype=Object.create(o&&o.prototype)).constructor=t,t.prototype.postMapLoadEvent=function(o,t,a,r){this.skuToken=a,(R.EVENTS_URL&&r||R.ACCESS_TOKEN&&Array.isArray(o)&&o.some(function(e){return mp(e)||Z(e)}))&&this.queueRequest({id:t,timestamp:Date.now()},r)},t.prototype.processRequests=function(o){var a=this;if(!this.pendingRequest&&0!==this.queue.length){var e=this.queue.shift(),r=e.id,t=e.timestamp;r&&this.success[r]||(this.anonId||this.fetchEventData(),op(this.anonId)||(this.anonId=h()),this.postEvent(t,{skuToken:this.skuToken},function(e){e||r&&(a.success[r]=!0)},o))}},t}(H),rt=new(function(o){function t(t){o.call(this,'appUserTurnstile'),this._customAccessToken=t}return o&&(t.__proto__=o),(t.prototype=Object.create(o&&o.prototype)).constructor=t,t.prototype.postTurnstileEvent=function(o,t){R.EVENTS_URL&&R.ACCESS_TOKEN&&Array.isArray(o)&&o.some(function(e){return mp(e)||Z(e)})&&this.queueRequest(Date.now(),t)},t.prototype.processRequests=function(l){var p=this;if(!this.pendingRequest&&0!==this.queue.length){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var e=$(R.ACCESS_TOKEN),r=e?e.u:R.ACCESS_TOKEN,t=r!==this.eventData.tokenU;op(this.anonId)||(this.anonId=h(),t=!0);var n=this.queue.shift();if(this.eventData.lastSuccess){var a=new Date(this.eventData.lastSuccess),o=new Date(n),s=(n-this.eventData.lastSuccess)/864e5;t=t||1<=s||-1>s||a.getDate()!==o.getDate()}else t=!0;if(!t)return this.processRequests();this.postEvent(n,{"enabled.telemetry":!1},function(e){e||(p.eventData.lastSuccess=n,p.eventData.tokenU=r)},l)}},t}(H)),nt=rt.postTurnstileEvent.bind(rt),it=new Q,at=it.postMapLoadEvent.bind(it),ot=500,st=50,ut=1/0,ht={Unknown:'Unknown',Style:'Style',Source:'Source',Tile:'Tile',Glyphs:'Glyphs',SpriteImage:'SpriteImage',SpriteJSON:'SpriteJSON',Image:'Image'},yt,Sd,et;'function'==typeof Object.freeze&&Object.freeze(ht);var ct=function(o){function t(t,a,r){401===a&&Z(r)&&(t+=': you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes'),o.call(this,t),this.status=a,this.url=r,this.name=this.constructor.name,this.message=t}return o&&(t.__proto__=o),(t.prototype=Object.create(o&&o.prototype)).constructor=t,t.prototype.toString=function(){return this.name+': '+this.message+' ('+this.status+'): '+this.url},t}(Error),dt=k()?function(){return self.worker&&self.worker.referrer}:function(){return('blob:'===vd.location.protocol?vd.parent:vd).location.href},mt=function(o,t){if(!(/^file:/.test(e=o.url)||/^file:/.test(dt())&&!/^\w+:/.test(e))){if(vd.fetch&&vd.Request&&vd.AbortController&&vd.Request.prototype.hasOwnProperty('signal'))return function(o,d){var e=new vd.AbortController,c=new vd.Request(o.url,{method:o.method||'GET',body:o.body,credentials:o.credentials,headers:o.headers,referrer:dt(),signal:e.signal}),i=!1,m=!1,t=0<(a=c.url).indexOf('sku=')&&Z(a),a;'json'===o.type&&c.headers.set('Accept','application/json');var r=function(e,r,n){if(!m){if(e&&'SecurityError'!==e.message&&cp(e),r&&n)return u(r);var a=Date.now();vd.fetch(c).then(function(e){if(e.ok){var r=t?e.clone():null;return u(e,r,a)}return d(new ct(e.statusText,e.status,o.url))}).catch(function(e){20!==e.code&&d(new Error(e.message))})}},u=function(e,a,r){('arrayBuffer'===o.type?e.arrayBuffer():'json'===o.type?e.json():e.text()).then(function(o){m||(a&&r&&function(o,t,e){if(W(),yt){var a={status:t.status,statusText:t.statusText,headers:new vd.Headers};t.headers.forEach(function(o,t){return a.headers.set(t,o)});var r=I(t.headers.get('Cache-Control')||'');r['no-store']||(r['max-age']&&a.headers.set('Expires',new Date(e+1e3*r['max-age']).toUTCString()),42e4>new Date(a.headers.get('Expires')).getTime()-e||function(o,t){if(void 0==Sd)try{new Response(new ReadableStream()),Sd=!0}catch(e){Sd=!1}Sd?t(o.body):o.blob().then(t)}(t,function(t){var n=new vd.Response(t,a);W(),yt&&yt.then(function(t){return t.put(lt(o.url),n)}).catch(function(e){return cp(e.message)})}))}}(c,a,r),i=!0,d(null,o,e.headers.get('Cache-Control'),e.headers.get('Expires')))}).catch(function(e){m||d(new Error(e.message))})};return t?function(o,a){if(W(),!yt)return a(null);var e=lt(o.url);yt.then(function(o){o.match(e).then(function(t){var r=function(o){if(!o)return!1;var a=new Date(o.headers.get('Expires')||0),e=I(o.headers.get('Cache-Control')||'');return a>Date.now()&&!e['no-cache']}(t);o.delete(e),r&&o.put(e,t.clone()),a(null,t,r)}).catch(a)}).catch(a)}(c,r):r(null,null),{cancel:function(){m=!0,i||e.abort()}}}(o,t);if(k()&&self.worker&&self.worker.actor)return self.worker.actor.send('getResource',o,t,void 0,!0)}var e;return function(o,a){var e=new vd.XMLHttpRequest;for(var t in e.open(o.method||'GET',o.url,!0),'arrayBuffer'===o.type&&(e.responseType='arraybuffer'),o.headers)e.setRequestHeader(t,o.headers[t]);return'json'===o.type&&(e.responseType='text',e.setRequestHeader('Accept','application/json')),e.withCredentials='include'===o.credentials,e.onerror=function(){a(new Error(e.statusText))},e.onload=function(){if((200<=e.status&&300>e.status||0===e.status)&&null!==e.response){var t=e.response;if('json'===o.type)try{t=JSON.parse(e.response)}catch(e){return a(e)}a(null,t,e.getResponseHeader('Cache-Control'),e.getResponseHeader('Expires'))}else a(new ct(e.statusText,e.status,o.url))},e.send(o.body),{cancel:function(){return e.abort()}}}(o,t)},xt=function(o,t){return mt(ha(o,{type:'arrayBuffer'}),t)},bt=function(o,t){return mt(ha(o,{method:'POST'}),t)},wt,vt;wt=[],vt=0;var gt=function(o,s){if(O.supported&&(o.headers||(o.headers={}),o.headers.accept='image/webp,*/*'),vt>=R.MAX_PARALLEL_IMAGE_REQUESTS){var l={requestParameters:o,callback:s,cancelled:!1,cancel:function(){this.cancelled=!0}};return wt.push(l),l}vt++;var r=!1,p=function(){if(!r)for(r=!0,vt--;wt.length&&vt<R.MAX_PARALLEL_IMAGE_REQUESTS;){var e=wt.shift();e.cancelled||(e.cancel=gt(e.requestParameters,e.callback).cancel)}},i=xt(o,function(e,t,o,r){p(),e?s(e):t&&(pt()?function(o,a){var e=new vd.Blob([new Uint8Array(o)],{type:'image/png'});vd.createImageBitmap(e).then(function(e){a(null,e)}).catch(function(e){a(new Error('Could not load image because of '+e.message+'. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.'))})}(t,s):function(o,t,e,r){var n=new vd.Image,i=vd.URL;n.onload=function(){t(null,n),i.revokeObjectURL(n.src)},n.onerror=function(){return t(new Error('Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.'))};var a=new vd.Blob([new Uint8Array(o)],{type:'image/png'});n.cacheControl=e,n.expires=r,n.src=o.byteLength?i.createObjectURL(a):'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII='}(t,s,o,r))});return{cancel:function(){i.cancel(),p()}}},_t=function(o,t){void 0===t&&(t={}),ha(this,t),this.type=o},kt=function(o){function t(t,a){void 0===a&&(a={}),o.call(this,'error',ha({error:t},a))}return o&&(t.__proto__=o),(t.prototype=Object.create(o&&o.prototype)).constructor=t,t}(_t),It=function(){};It.prototype.on=function(o,t){return this._listeners=this._listeners||{},ft(o,t,this._listeners),this},It.prototype.off=function(o,t){return At(o,t,this._listeners),At(o,t,this._oneTimeListeners),this},It.prototype.once=function(o,t){return this._oneTimeListeners=this._oneTimeListeners||{},ft(o,t,this._oneTimeListeners),this},It.prototype.fire=function(l,p){'string'==typeof l&&(l=new _t(l,p||{}));var e=l.type;if(this.listens(e)){l.target=this;for(var r=0,n=this._listeners&&this._listeners[e]?this._listeners[e].slice():[];r<n.length;r+=1)n[r].call(this,l);for(var i=0,a=this._oneTimeListeners&&this._oneTimeListeners[e]?this._oneTimeListeners[e].slice():[],o;i<a.length;i+=1)o=a[i],At(e,o,this._oneTimeListeners),o.call(this,l);var s=this._eventedParent;s&&(ha(l,'function'==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),s.fire(l))}else l instanceof kt&&console.error(l.error);return this},It.prototype.listens=function(e){return this._listeners&&this._listeners[e]&&0<this._listeners[e].length||this._oneTimeListeners&&this._oneTimeListeners[e]&&0<this._oneTimeListeners[e].length||this._eventedParent&&this._eventedParent.listens(e)},It.prototype.setEventedParent=function(o,t){return this._eventedParent=o,this._eventedParentData=t,this};var zt={$version:8,$root:{version:{required:!0,type:'enum',values:[8]},name:{type:'string'},metadata:{type:'*'},center:{type:'array',value:'number'},zoom:{type:'number'},bearing:{type:'number',default:0,period:360,units:'degrees'},pitch:{type:'number',default:0,units:'degrees'},light:{type:'light'},sources:{required:!0,type:'sources'},sprite:{type:'string'},glyphs:{type:'string'},transition:{type:'transition'},layers:{required:!0,type:'array',value:'layer'}},sources:{"*":{type:'source'}},source:['source_vector','source_raster','source_raster_dem','source_geojson','source_video','source_image'],source_vector:{type:{required:!0,type:'enum',values:{vector:{}}},url:{type:'string'},tiles:{type:'array',value:'string'},bounds:{type:'array',value:'number',length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:'enum',values:{xyz:{},tms:{}},default:'xyz'},minzoom:{type:'number',default:0},maxzoom:{type:'number',default:22},attribution:{type:'string'},promoteId:{type:'promoteId'},volatile:{type:'boolean',default:!1},"*":{type:'*'}},source_raster:{type:{required:!0,type:'enum',values:{raster:{}}},url:{type:'string'},tiles:{type:'array',value:'string'},bounds:{type:'array',value:'number',length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:'number',default:0},maxzoom:{type:'number',default:22},tileSize:{type:'number',default:512,units:'pixels'},scheme:{type:'enum',values:{xyz:{},tms:{}},default:'xyz'},attribution:{type:'string'},volatile:{type:'boolean',default:!1},"*":{type:'*'}},source_raster_dem:{type:{required:!0,type:'enum',values:{"raster-dem":{}}},url:{type:'string'},tiles:{type:'array',value:'string'},bounds:{type:'array',value:'number',length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:'number',default:0},maxzoom:{type:'number',default:22},tileSize:{type:'number',default:512,units:'pixels'},attribution:{type:'string'},encoding:{type:'enum',values:{terrarium:{},mapbox:{}},default:'mapbox'},volatile:{type:'boolean',default:!1},"*":{type:'*'}},source_geojson:{type:{required:!0,type:'enum',values:{geojson:{}}},data:{type:'*'},maxzoom:{type:'number',default:18},attribution:{type:'string'},buffer:{type:'number',default:128,maximum:512,minimum:0},filter:{type:'*'},tolerance:{type:'number',default:.375},cluster:{type:'boolean',default:!1},clusterRadius:{type:'number',default:50,minimum:0},clusterMaxZoom:{type:'number'},clusterMinPoints:{type:'number'},clusterProperties:{type:'*'},lineMetrics:{type:'boolean',default:!1},generateId:{type:'boolean',default:!1},promoteId:{type:'promoteId'}},source_video:{type:{required:!0,type:'enum',values:{video:{}}},urls:{required:!0,type:'array',value:'string'},coordinates:{required:!0,type:'array',length:4,value:{type:'array',length:2,value:'number'}}},source_image:{type:{required:!0,type:'enum',values:{image:{}}},url:{required:!0,type:'string'},coordinates:{required:!0,type:'array',length:4,value:{type:'array',length:2,value:'number'}}},layer:{id:{type:'string',required:!0},type:{type:'enum',values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:'*'},source:{type:'string'},"source-layer":{type:'string'},minzoom:{type:'number',minimum:0,maximum:24},maxzoom:{type:'number',minimum:0,maximum:24},filter:{type:'filter'},layout:{type:'layout'},paint:{type:'paint'}},layout:['layout_fill','layout_line','layout_circle','layout_heatmap','layout_fill-extrusion','layout_symbol','layout_raster','layout_hillshade','layout_background'],layout_background:{visibility:{type:'enum',values:{visible:{},none:{}},default:'visible',"property-type":'constant'}},layout_fill:{"fill-sort-key":{type:'number',expression:{interpolated:!1,parameters:['zoom','feature']},"property-type":'data-driven'},visibility:{type:'enum',values:{visible:{},none:{}},default:'visible',"property-type":'constant'}},layout_circle:{"circle-sort-key":{type:'number',expression:{interpolated:!1,parameters:['zoom','feature']},"property-type":'data-driven'},visibility:{type:'enum',values:{visible:{},none:{}},default:'visible',"property-type":'constant'}},layout_heatmap:{visibility:{type:'enum',values:{visible:{},none:{}},default:'visible',"property-type":'constant'}},"layout_fill-extrusion":{visibility:{type:'enum',values:{visible:{},none:{}},default:'visible',"property-type":'constant'}},layout_line:{"line-cap":{type:'enum',values:{butt:{},round:{},square:{}},default:'butt',expression:{interpolated:!1,parameters:['zoom']},"property-type":'data-constant'},"line-join":{type:'enum',values:{bevel:{},round:{},miter:{}},default:'miter',expression:{interpolated:!1,parameters:['zoom','feature']},"property-type":'data-driven'},"line-miter-limit":{type:'number',default:2,requires:[{"line-join":'miter'}],expression:{interpolated:!0,parameters:['zoom']},"property-type":'data-constant'},"line-round-limit":{type:'number',default:1.05,requires:[{"line-join":'round'}],expression:{interpolated:!0,parameters:['zoom']},"property-type":'data-constant'},"line-sort-key":{type:'number',expression:{interpolated:!1,parameters:['zoom','feature']},"property-type":'data-driven'},visibility:{type:'enum',values:{visible:{},none:{}},default:'visible',"property-type":'constant'}},layout_symbol:{"symbol-placement":{type:'enum',values:{point:{},line:{},"line-center":{}},default:'point',expression:{interpolated:!1,parameters:['zoom']},"property-type":'data-constant'},"symbol-spacing":{type:'number',default:250,minimum:1,units:'pixels',requires:[{"symbol-placement":'line'}],expression:{interpolated:!0,parameters:['zoom']},"property-type":'data-constant'},"symbol-avoid-edges":{type:'boolean',default:!1,expression:{interpolated:!1,parameters:['zoom']},"property-type":'data-constant'},"symbol-sort-key":{type:'number',expression:{interpolated:!1,parameters:['zoom','feature']},"property-type":'data-driven'},"symbol-z-order":{type:'enum',values:{auto:{},"viewport-y":{},source:{}},default:'auto',expression:{interpolated:!1,parameters:['zoom']},"property-type":'data-constant'},"icon-allow-overlap":{type:'boolean',default:!1,requires:['icon-image'],expression:{interpolated:!1,parameters:['zoom']},"property-type":'data-constant'},"icon-ignore-placement":{type:'boolean',default:!1,requires:['icon-image'],expression:{interpolated:!1,parameters:['zoom']},"property-type":'data-constant'},"icon-optional":{type:'boolean',default:!1,requires:['icon-image','text-field'],expression:{interpolated:!1,parameters:['zoom']},"property-type":'data-constant'},"icon-rotation-alignment":{type:'enum',values:{map:{},viewport:{},auto:{}},default:'auto',requires:['icon-image'],expression:{interpolated:!1,parameters:['zoom']},"property-type":'data-constant'},"icon-size":{type:'number',default:1,minimum:0,units:'factor of the original icon size',requires:['icon-image'],expression:{interpolated:!0,parameters:['zoom','feature']},"property-type":'data-driven'},"icon-text-fit":{type:'enum',values:{none:{},width:{},height:{},both:{}},default:'none',requires:['icon-image','text-field'],expression:{interpolated:!1,parameters:['zoom']},"property-type":'data-constant'},"icon-text-fit-padding":{type:'array',value:'number',length:4,default:[0,0,0,0],units:'pixels',requires:['icon-image','text-field',{"icon-text-fit":['both','width','height']}],expression:{interpolated:!0,parameters:['zoom']},"property-type":'data-constant'},"icon-image":{type:'resolvedImage',tokens:!0,expression:{interpolated:!1,parameters:['zoom','feature']},"property-type":'data-driven'},"icon-rotate":{type:'number',default:0,period:360,units:'degrees',requires:['icon-image'],expression:{interpolated:!0,parameters:['zoom','feature']},"property-type":'data-driven'},"icon-padding":{type:'number',default:2,minimum:0,units:'pixels',requires:['icon-image'],expression:{interpolated:!0,parameters:['zoom']},"property-type":'data-constant'},"icon-keep-upright":{type:'boolean',default:!1,requires:['icon-image',{"icon-rotation-alignment":'map'},{"symbol-placement":['line','line-center']}],expression:{interpolated:!1,parameters:['zoom']},"property-type":'data-constant'},"icon-offset":{type:'array',value:'number',length:2,default:[0,0],requires:['icon-image'],expression:{interpolated:!0,parameters:['zoom','feature']},"property-type":'data-driven'},"icon-anchor":{type:'enum',values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:'center',requires:['icon-image'],expression:{interpolated:!1,parameters:['zoom','feature']},"property-type":'data-driven'},"icon-pitch-alignment":{type:'enum',values:{map:{},viewport:{},auto:{}},default:'auto',requires:['icon-image'],expression:{interpolated:!1,parameters:['zoom']},"property-type":'data-constant'},"text-pitch-alignment":{type:'enum',values:{map:{},viewport:{},auto:{}},default:'auto',requires:['text-field'],expression:{interpolated:!1,parameters:['zoom']},"property-type":'data-constant'},"text-rotation-alignment":{type:'enum',values:{map:{},viewport:{},auto:{}},default:'auto',requires:['text-field'],expression:{interpolated:!1,parameters:['zoom']},"property-type":'data-constant'},"text-field":{type:'formatted',default:'',tokens:!0,expression:{interpolated:!1,parameters:['zoom','feature']},"property-type":'data-driven'},"text-font":{type:'array',value:'string',default:['Open Sans Regular','Arial Unicode MS Regular'],requires:['text-field'],expression:{interpolated:!1,parameters:['zoom','feature']},"property-type":'data-driven'},"text-size":{type:'number',default:16,minimum:0,units:'pixels',requires:['text-field'],expression:{interpolated:!0,parameters:['zoom','feature']},"property-type":'data-driven'},"text-max-width":{type:'number',default:10,minimum:0,units:'ems',requires:['text-field'],expression:{interpolated:!0,parameters:['zoom','feature']},"property-type":'data-driven'},"text-line-height":{type:'number',default:1.2,units:'ems',requires:['text-field'],expression:{interpolated:!0,parameters:['zoom']},"property-type":'data-constant'},"text-letter-spacing":{type:'number',default:0,units:'ems',requires:['text-field'],expression:{interpolated:!0,parameters:['zoom','feature']},"property-type":'data-driven'},"text-justify":{type:'enum',values:{auto:{},left:{},center:{},right:{}},default:'center',requires:['text-field'],expression:{interpolated:!1,parameters:['zoom','feature']},"property-type":'data-driven'},"text-radial-offset":{type:'number',units:'ems',default:0,requires:['text-field'],"property-type":'data-driven',expression:{interpolated:!0,parameters:['zoom','feature']}},"text-variable-anchor":{type:'array',value:'enum',values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:['text-field',{"symbol-placement":['point']}],expression:{interpolated:!1,parameters:['zoom']},"property-type":'data-constant'},"text-anchor":{type:'enum',values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:'center',requires:['text-field',{"!":'text-variable-anchor'}],expression:{interpolated:!1,parameters:['zoom','feature']},"property-type":'data-driven'},"text-max-angle":{type:'number',default:45,units:'degrees',requires:['text-field',{"symbol-placement":['line','line-center']}],expression:{interpolated:!0,parameters:['zoom']},"property-type":'data-constant'},"text-writing-mode":{type:'array',value:'enum',values:{horizontal:{},vertical:{}},requires:['text-field',{"symbol-placement":['point']}],expression:{interpolated:!1,parameters:['zoom']},"property-type":'data-constant'},"text-rotate":{type:'number',default:0,period:360,units:'degrees',requires:['text-field'],expression:{interpolated:!0,parameters:['zoom','feature']},"property-type":'data-driven'},"text-padding":{type:'number',default:2,minimum:0,units:'pixels',requires:['text-field'],expression:{interpolated:!0,parameters:['zoom']},"property-type":'data-constant'},"text-keep-upright":{type:'boolean',default:!0,requires:['text-field',{"text-rotation-alignment":'map'},{"symbol-placement":['line','line-center']}],expression:{interpolated:!1,parameters:['zoom']},"property-type":'data-constant'},"text-transform":{type:'enum',values:{none:{},uppercase:{},lowercase:{}},default:'none',requires:['text-field'],expression:{interpolated:!1,parameters:['zoom','feature']},"property-type":'data-driven'},"text-offset":{type:'array',value:'number',units:'ems',length:2,default:[0,0],requires:['text-field',{"!":'text-radial-offset'}],expression:{interpolated:!0,parameters:['zoom','feature']},"property-type":'data-driven'},"text-allow-overlap":{type:'boolean',default:!1,requires:['text-field'],expression:{interpolated:!1,parameters:['zoom']},"property-type":'data-constant'},"text-ignore-placement":{type:'boolean',default:!1,requires:['text-field'],expression:{interpolated:!1,parameters:['zoom']},"property-type":'data-constant'},"text-optional":{type:'boolean',default:!1,requires:['text-field','icon-image'],expression:{interpolated:!1,parameters:['zoom']},"property-type":'data-constant'},visibility:{type:'enum',values:{visible:{},none:{}},default:'visible',"property-type":'constant'}},layout_raster:{visibility:{type:'enum',values:{visible:{},none:{}},default:'visible',"property-type":'constant'}},layout_hillshade:{visibility:{type:'enum',values:{visible:{},none:{}},default:'visible',"property-type":'constant'}},filter:{type:'array',value:'*'},filter_operator:{type:'enum',values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:'enum',values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:'expression'},stops:{type:'array',value:'function_stop'},base:{type:'number',default:1,minimum:0},property:{type:'string',default:'$zoom'},type:{type:'enum',values:{identity:{},exponential:{},interval:{},categorical:{}},default:'exponential'},colorSpace:{type:'enum',values:{rgb:{},lab:{},hcl:{}},default:'rgb'},default:{type:'*',required:!1}},function_stop:{type:'array',minimum:0,maximum:24,value:['number','color'],length:2},expression:{type:'array',value:'*',minimum:1},light:{anchor:{type:'enum',default:'viewport',values:{map:{},viewport:{}},"property-type":'data-constant',transition:!1,expression:{interpolated:!1,parameters:['zoom']}},position:{type:'array',default:[1.15,210,30],length:3,value:'number',"property-type":'data-constant',transition:!0,expression:{interpolated:!0,parameters:['zoom']}},color:{type:'color',"property-type":'data-constant',default:'#ffffff',expression:{interpolated:!0,parameters:['zoom']},transition:!0},intensity:{type:'number',"property-type":'data-constant',default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:['zoom']},transition:!0}},paint:['paint_fill','paint_line','paint_circle','paint_heatmap','paint_fill-extrusion','paint_symbol','paint_raster','paint_hillshade','paint_background'],paint_fill:{"fill-antialias":{type:'boolean',default:!0,expression:{interpolated:!1,parameters:['zoom']},"property-type":'data-constant'},"fill-opacity":{type:'number',default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:['zoom','feature','feature-state']},"property-type":'data-driven'},"fill-color":{type:'color',default:'#000000',transition:!0,requires:[{"!":'fill-pattern'}],expression:{interpolated:!0,parameters:['zoom','feature','feature-state']},"property-type":'data-driven'},"fill-outline-color":{type:'color',transition:!0,requires:[{"!":'fill-pattern'},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:['zoom','feature','feature-state']},"property-type":'data-driven'},"fill-translate":{type:'array',value:'number',length:2,default:[0,0],transition:!0,units:'pixels',expression:{interpolated:!0,parameters:['zoom']},"property-type":'data-constant'},"fill-translate-anchor":{type:'enum',values:{map:{},viewport:{}},default:'map',requires:['fill-translate'],expression:{interpolated:!1,parameters:['zoom']},"property-type":'data-constant'},"fill-pattern":{type:'resolvedImage',transition:!0,expression:{interpolated:!1,parameters:['zoom','feature']},"property-type":'cross-faded-data-driven'}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:'number',default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:['zoom']},"property-type":'data-constant'},"fill-extrusion-color":{type:'color',default:'#000000',transition:!0,requires:[{"!":'fill-extrusion-pattern'}],expression:{interpolated:!0,parameters:['zoom','feature','feature-state']},"property-type":'data-driven'},"fill-extrusion-translate":{type:'array',value:'number',length:2,default:[0,0],transition:!0,units:'pixels',expression:{interpolated:!0,parameters:['zoom']},"property-type":'data-constant'},"fill-extrusion-translate-anchor":{type:'enum',values:{map:{},viewport:{}},default:'map',requires:['fill-extrusion-translate'],expression:{interpolated:!1,parameters:['zoom']},"property-type":'data-constant'},"fill-extrusion-pattern":{type:'resolvedImage',transition:!0,expression:{interpolated:!1,parameters:['zoom','feature']},"property-type":'cross-faded-data-driven'},"fill-extrusion-height":{type:'number',default:0,minimum:0,units:'meters',transition:!0,expression:{interpolated:!0,parameters:['zoom','feature','feature-state']},"property-type":'data-driven'},"fill-extrusion-base":{type:'number',default:0,minimum:0,units:'meters',transition:!0,requires:['fill-extrusion-height'],expression:{interpolated:!0,parameters:['zoom','feature','feature-state']},"property-type":'data-driven'},"fill-extrusion-vertical-gradient":{type:'boolean',default:!0,transition:!1,expression:{interpolated:!1,parameters:['zoom']},"property-type":'data-constant'}},paint_line:{"line-opacity":{type:'number',default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:['zoom','feature','feature-state']},"property-type":'data-driven'},"line-color":{type:'color',default:'#000000',transition:!0,requires:[{"!":'line-pattern'}],expression:{interpolated:!0,parameters:['zoom','feature','feature-state']},"property-type":'data-driven'},"line-translate":{type:'array',value:'number',length:2,default:[0,0],transition:!0,units:'pixels',expression:{interpolated:!0,parameters:['zoom']},"property-type":'data-constant'},"line-translate-anchor":{type:'enum',values:{map:{},viewport:{}},default:'map',requires:['line-translate'],expression:{interpolated:!1,parameters:['zoom']},"property-type":'data-constant'},"line-width":{type:'number',default:1,minimum:0,transition:!0,units:'pixels',expression:{interpolated:!0,parameters:['zoom','feature','feature-state']},"property-type":'data-driven'},"line-gap-width":{type:'number',default:0,minimum:0,transition:!0,units:'pixels',expression:{interpolated:!0,parameters:['zoom','feature','feature-state']},"property-type":'data-driven'},"line-offset":{type:'number',default:0,transition:!0,units:'pixels',expression:{interpolated:!0,parameters:['zoom','feature','feature-state']},"property-type":'data-driven'},"line-blur":{type:'number',default:0,minimum:0,transition:!0,units:'pixels',expression:{interpolated:!0,parameters:['zoom','feature','feature-state']},"property-type":'data-driven'},"line-dasharray":{type:'array',value:'number',minimum:0,transition:!0,units:'line widths',requires:[{"!":'line-pattern'}],expression:{interpolated:!1,parameters:['zoom']},"property-type":'cross-faded'},"line-pattern":{type:'resolvedImage',transition:!0,expression:{interpolated:!1,parameters:['zoom','feature']},"property-type":'cross-faded-data-driven'},"line-gradient":{type:'color',transition:!1,requires:[{"!":'line-dasharray'},{"!":'line-pattern'},{source:'geojson',has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:['line-progress']},"property-type":'color-ramp'}},paint_circle:{"circle-radius":{type:'number',default:5,minimum:0,transition:!0,units:'pixels',expression:{interpolated:!0,parameters:['zoom','feature','feature-state']},"property-type":'data-driven'},"circle-color":{type:'color',default:'#000000',transition:!0,expression:{interpolated:!0,parameters:['zoom','feature','feature-state']},"property-type":'data-driven'},"circle-blur":{type:'number',default:0,transition:!0,expression:{interpolated:!0,parameters:['zoom','feature','feature-state']},"property-type":'data-driven'},"circle-opacity":{type:'number',default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:['zoom','feature','feature-state']},"property-type":'data-driven'},"circle-translate":{type:'array',value:'number',length:2,default:[0,0],transition:!0,units:'pixels',expression:{interpolated:!0,parameters:['zoom']},"property-type":'data-constant'},"circle-translate-anchor":{type:'enum',values:{map:{},viewport:{}},default:'map',requires:['circle-translate'],expression:{interpolated:!1,parameters:['zoom']},"property-type":'data-constant'},"circle-pitch-scale":{type:'enum',values:{map:{},viewport:{}},default:'map',expression:{interpolated:!1,parameters:['zoom']},"property-type":'data-constant'},"circle-pitch-alignment":{type:'enum',values:{map:{},viewport:{}},default:'viewport',expression:{interpolated:!1,parameters:['zoom']},"property-type":'data-constant'},"circle-stroke-width":{type:'number',default:0,minimum:0,transition:!0,units:'pixels',expression:{interpolated:!0,parameters:['zoom','feature','feature-state']},"property-type":'data-driven'},"circle-stroke-color":{type:'color',default:'#000000',transition:!0,expression:{interpolated:!0,parameters:['zoom','feature','feature-state']},"property-type":'data-driven'},"circle-stroke-opacity":{type:'number',default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:['zoom','feature','feature-state']},"property-type":'data-driven'}},paint_heatmap:{"heatmap-radius":{type:'number',default:30,minimum:1,transition:!0,units:'pixels',expression:{interpolated:!0,parameters:['zoom','feature','feature-state']},"property-type":'data-driven'},"heatmap-weight":{type:'number',default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:['zoom','feature','feature-state']},"property-type":'data-driven'},"heatmap-intensity":{type:'number',default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:['zoom']},"property-type":'data-constant'},"heatmap-color":{type:'color',default:['interpolate',['linear'],['heatmap-density'],0,'rgba(0, 0, 255, 0)',.1,'royalblue',.3,'cyan',.5,'lime',.7,'yellow',1,'red'],transition:!1,expression:{interpolated:!0,parameters:['heatmap-density']},"property-type":'color-ramp'},"heatmap-opacity":{type:'number',default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:['zoom']},"property-type":'data-constant'}},paint_symbol:{"icon-opacity":{type:'number',default:1,minimum:0,maximum:1,transition:!0,requires:['icon-image'],expression:{interpolated:!0,parameters:['zoom','feature','feature-state']},"property-type":'data-driven'},"icon-color":{type:'color',default:'#000000',transition:!0,requires:['icon-image'],expression:{interpolated:!0,parameters:['zoom','feature','feature-state']},"property-type":'data-driven'},"icon-halo-color":{type:'color',default:'rgba(0, 0, 0, 0)',transition:!0,requires:['icon-image'],expression:{interpolated:!0,parameters:['zoom','feature','feature-state']},"property-type":'data-driven'},"icon-halo-width":{type:'number',default:0,minimum:0,transition:!0,units:'pixels',requires:['icon-image'],expression:{interpolated:!0,parameters:['zoom','feature','feature-state']},"property-type":'data-driven'},"icon-halo-blur":{type:'number',default:0,minimum:0,transition:!0,units:'pixels',requires:['icon-image'],expression:{interpolated:!0,parameters:['zoom','feature','feature-state']},"property-type":'data-driven'},"icon-translate":{type:'array',value:'number',length:2,default:[0,0],transition:!0,units:'pixels',requires:['icon-image'],expression:{interpolated:!0,parameters:['zoom']},"property-type":'data-constant'},"icon-translate-anchor":{type:'enum',values:{map:{},viewport:{}},default:'map',requires:['icon-image','icon-translate'],expression:{interpolated:!1,parameters:['zoom']},"property-type":'data-constant'},"text-opacity":{type:'number',default:1,minimum:0,maximum:1,transition:!0,requires:['text-field'],expression:{interpolated:!0,parameters:['zoom','feature','feature-state']},"property-type":'data-driven'},"text-color":{type:'color',default:'#000000',transition:!0,overridable:!0,requires:['text-field'],expression:{interpolated:!0,parameters:['zoom','feature','feature-state']},"property-type":'data-driven'},"text-halo-color":{type:'color',default:'rgba(0, 0, 0, 0)',transition:!0,requires:['text-field'],expression:{interpolated:!0,parameters:['zoom','feature','feature-state']},"property-type":'data-driven'},"text-halo-width":{type:'number',default:0,minimum:0,transition:!0,units:'pixels',requires:['text-field'],expression:{interpolated:!0,parameters:['zoom','feature','feature-state']},"property-type":'data-driven'},"text-halo-blur":{type:'number',default:0,minimum:0,transition:!0,units:'pixels',requires:['text-field'],expression:{interpolated:!0,parameters:['zoom','feature','feature-state']},"property-type":'data-driven'},"text-translate":{type:'array',value:'number',length:2,default:[0,0],transition:!0,units:'pixels',requires:['text-field'],expression:{interpolated:!0,parameters:['zoom']},"property-type":'data-constant'},"text-translate-anchor":{type:'enum',values:{map:{},viewport:{}},default:'map',requires:['text-field','text-translate'],expression:{interpolated:!1,parameters:['zoom']},"property-type":'data-constant'}},paint_raster:{"raster-opacity":{type:'number',default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:['zoom']},"property-type":'data-constant'},"raster-hue-rotate":{type:'number',default:0,period:360,transition:!0,units:'degrees',expression:{interpolated:!0,parameters:['zoom']},"property-type":'data-constant'},"raster-brightness-min":{type:'number',default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:['zoom']},"property-type":'data-constant'},"raster-brightness-max":{type:'number',default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:['zoom']},"property-type":'data-constant'},"raster-saturation":{type:'number',default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:['zoom']},"property-type":'data-constant'},"raster-contrast":{type:'number',default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:['zoom']},"property-type":'data-constant'},"raster-resampling":{type:'enum',values:{linear:{},nearest:{}},default:'linear',expression:{interpolated:!1,parameters:['zoom']},"property-type":'data-constant'},"raster-fade-duration":{type:'number',default:300,minimum:0,transition:!1,units:'milliseconds',expression:{interpolated:!0,parameters:['zoom']},"property-type":'data-constant'}},paint_hillshade:{"hillshade-illumination-direction":{type:'number',default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:['zoom']},"property-type":'data-constant'},"hillshade-illumination-anchor":{type:'enum',values:{map:{},viewport:{}},default:'viewport',expression:{interpolated:!1,parameters:['zoom']},"property-type":'data-constant'},"hillshade-exaggeration":{type:'number',default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:['zoom']},"property-type":'data-constant'},"hillshade-shadow-color":{type:'color',default:'#000000',transition:!0,expression:{interpolated:!0,parameters:['zoom']},"property-type":'data-constant'},"hillshade-highlight-color":{type:'color',default:'#FFFFFF',transition:!0,expression:{interpolated:!0,parameters:['zoom']},"property-type":'data-constant'},"hillshade-accent-color":{type:'color',default:'#000000',transition:!0,expression:{interpolated:!0,parameters:['zoom']},"property-type":'data-constant'}},paint_background:{"background-color":{type:'color',default:'#000000',transition:!0,requires:[{"!":'background-pattern'}],expression:{interpolated:!0,parameters:['zoom']},"property-type":'data-constant'},"background-pattern":{type:'resolvedImage',transition:!0,expression:{interpolated:!1,parameters:['zoom']},"property-type":'cross-faded'},"background-opacity":{type:'number',default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:['zoom']},"property-type":'data-constant'}},transition:{duration:{type:'number',default:300,minimum:0,units:'milliseconds'},delay:{type:'number',default:0,minimum:0,units:'milliseconds'}},"property-type":{"data-driven":{type:'property-type'},"cross-faded":{type:'property-type'},"cross-faded-data-driven":{type:'property-type'},"color-ramp":{type:'property-type'},"data-constant":{type:'property-type'},constant:{type:'property-type'}},promoteId:{"*":{type:'string'}}},Cd=function(o,t,e,a){this.message=(o?o+': ':'')+e,a&&(this.identifier=a),null!=t&&t.__line__&&(this.line=t.__line__)},Et=function(o){function t(t,a){o.call(this,a),this.message=a,this.key=t}return o&&(t.__proto__=o),(t.prototype=Object.create(o&&o.prototype)).constructor=t,t}(Error),Vt=function(o,t){void 0===t&&(t=[]),this.parent=o,this.bindings={};for(var e=0,a=t,r;e<a.length;e+=1)r=a[e],this.bindings[r[0]]=r[1]};Vt.prototype.concat=function(e){return new Vt(this,e)},Vt.prototype.get=function(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(e+' not found in scope.')},Vt.prototype.has=function(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)};var Ft={kind:'null'},Dt={kind:'number'},Id={kind:'string'},Ad={kind:'boolean'},kd={kind:'color'},Pd={kind:'object'},zd={kind:'value'},Dd={kind:'collator'},Nt={kind:'formatted'},Ld={kind:'resolvedImage'},Rd=[Ft,Dt,Id,Ad,kd,Nt,Pd,Tt(zd),Ld],Jt=t(function(s,t){function e(e){return 0>(e=b(e))?0:255<e?255:e}function n(o){return e('%'===o[o.length-1]?255*(parseFloat(o)/100):parseInt(o))}function i(o){return 0>(t='%'===o[o.length-1]?parseFloat(o)/100:parseFloat(o))?0:1<t?1:t;var t}function a(o,t,e){return 0>e?e+=1:1<e&&(e-=1),1>6*e?o+6*((t-o)*e):1>2*e?t:2>3*e?o+6*((t-o)*(2/3-e)):o}var o={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};try{t.parseCSSColor=function(r){var t=r.replace(/ /g,'').toLowerCase(),s;if(t in o)return o[t].slice();if('#'===t[0])return 4===t.length?0<=(s=parseInt(t.substr(1),16))&&4095>=s?[(3840&s)>>4|(3840&s)>>8,240&s|(240&s)>>4,15&s|(15&s)<<4,1]:null:7===t.length&&0<=(s=parseInt(t.substr(1),16))&&16777215>=s?[(16711680&s)>>16,(65280&s)>>8,255&s,1]:null;var g=t.indexOf('('),u=t.indexOf(')');if(-1!==g&&u+1===t.length){var l=t.substr(0,g),p=t.substr(g+1,u-(g+1)).split(','),c=1;switch(l){case'rgba':if(4!==p.length)return null;c=i(p.pop());case'rgb':return 3===p.length?[n(p[0]),n(p[1]),n(p[2]),c]:null;case'hsla':if(4!==p.length)return null;c=i(p.pop());case'hsl':if(3!==p.length)return null;var _=(parseFloat(p[0])%360+360)%360/360,f=i(p[1]),y=i(p[2]),d=.5>=y?y*(f+1):y+f-y*f,m=2*y-d;return[e(255*a(m,d,_+1/3)),e(255*a(m,d,_)),e(255*a(m,d,_-1/3)),c];default:return null;}}return null}}catch(e){}}).parseCSSColor,Wt=function(o,t,e,a){void 0===a&&(a=1),this.r=o,this.g=t,this.b=e,this.a=a};Wt.parse=function(o){if(o){if(o instanceof Wt)return o;if('string'==typeof o){var a=Jt(o);if(a)return new Wt(a[0]/255*a[3],a[1]/255*a[3],a[2]/255*a[3],a[3])}}},Wt.prototype.toString=function(){var o=this.toArray(),t=o[1],e=o[2],a=o[3];return'rgba('+b(o[0])+','+b(t)+','+b(e)+','+a+')'},Wt.prototype.toArray=function(){var e=this.a;return 0===e?[0,0,0,0]:[255*this.r/e,255*this.g/e,255*this.b/e,e]},Wt.black=new Wt(0,0,0,1),Wt.white=new Wt(1,1,1,1),Wt.transparent=new Wt(0,0,0,0),Wt.red=new Wt(1,0,0,1);var Qt=function(o,t,e){this.sensitivity=o?t?'variant':'case':t?'accent':'base',this.locale=e,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:'search'})};Qt.prototype.compare=function(o,t){return this.collator.compare(o,t)},Qt.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var te=function(o,t,e,a,r){this.text=o,this.image=t,this.scale=e,this.fontStack=a,this.textColor=r},ee=function(e){this.sections=e};ee.fromString=function(e){return new ee([new te(e,null,null,null,null)])},ee.prototype.isEmpty=function(){return 0===this.sections.length||!this.sections.some(function(e){return 0!==e.text.length||e.image&&0!==e.image.name.length})},ee.factory=function(e){return e instanceof ee?e:ee.fromString(e)},ee.prototype.toString=function(){return 0===this.sections.length?'':this.sections.map(function(e){return e.text}).join('')},ee.prototype.serialize=function(){for(var o=['format'],t=0,e=this.sections,a;t<e.length;t+=1)if(a=e[t],a.image)o.push(['image',a.image.name]);else{o.push(a.text);var r={};a.fontStack&&(r['text-font']=['literal',a.fontStack.split(',')]),a.scale&&(r['font-scale']=a.scale),a.textColor&&(r['text-color']=['rgba'].concat(a.textColor.toArray())),o.push(r)}return o};var re=function(e){this.name=e.name,this.available=e.available};re.prototype.toString=function(){return this.name},re.fromString=function(e){return e?new re({name:e,available:!1}):null},re.prototype.serialize=function(){return['image',this.name]};var ne=function(o,t){this.type=o,this.value=t};ne.parse=function(o,t){if(2!==o.length)return t.error('\'literal\' expression requires exactly one argument, but found '+(o.length-1)+' instead.');if(!ie(o[1]))return t.error('invalid value');var e=o[1],a=ae(e),r=t.expectedType;return'array'!==a.kind||0!==a.N||!r||'array'!==r.kind||'number'==typeof r.N&&0!==r.N||(a=r),new ne(a,e)},ne.prototype.evaluate=function(){return this.value},ne.prototype.eachChild=function(){},ne.prototype.outputDefined=function(){return!0},ne.prototype.serialize=function(){return'array'===this.type.kind||'object'===this.type.kind?['literal',this.value]:this.value instanceof Wt?['rgba'].concat(this.value.toArray()):this.value instanceof ee?this.value.serialize():this.value};var Bd=function(e){this.name='ExpressionEvaluationError',this.message=e};Bd.prototype.toJSON=function(){return this.message};var le={string:Id,number:Dt,boolean:Ad,object:Pd},pe=function(o,t){this.type=o,this.args=t};pe.parse=function(p,t){if(2>p.length)return t.error('Expected at least one argument.');var e=1,n=p[0],i;if('array'===n){var r,a;if(2<p.length){var o=p[1];if('string'!=typeof o||!(o in le)||'object'===o)return t.error('The item type argument of "array" must be one of string, number, boolean',1);r=le[o],e++}else r=zd;if(3<p.length){if(null!==p[2]&&('number'!=typeof p[2]||0>p[2]||p[2]!==ea(p[2])))return t.error('The length argument to "array" must be a positive integer literal',2);a=p[2],e++}i=Tt(r,a)}else i=le[n];for(var d=[],c;e<p.length;e++){if(c=t.parse(p[e],e,zd),!c)return null;d.push(c)}return new pe(i,d)},pe.prototype.evaluate=function(o){for(var t=0,e;t<this.args.length;t++){if(e=this.args[t].evaluate(o),!Xt(this.type,ae(e)))return e;if(t===this.args.length-1)throw new Bd('Expected value to be of type '+Zt(this.type)+', but found '+Zt(ae(e))+' instead.')}return null},pe.prototype.eachChild=function(e){this.args.forEach(e)},pe.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})},pe.prototype.serialize=function(){var o=this.type,t=[o.kind];if('array'===o.kind){var e=o.itemType;if('string'===e.kind||'number'===e.kind||'boolean'===e.kind){t.push(e.kind);var a=o.N;('number'==typeof a||1<this.args.length)&&t.push(a)}}return t.concat(this.args.map(function(e){return e.serialize()}))};var Fd=function(e){this.type=Nt,this.sections=e};Fd.parse=function(d,t){if(2>d.length)return t.error('Expected at least one argument.');var e=d[1];if(!Array.isArray(e)&&'object'==typeof e)return t.error('First argument must be an image or text section.');for(var m=[],n=!1,i=1,a;i<=d.length-1;++i)if(a=d[i],n&&'object'==typeof a&&!Array.isArray(a)){n=!1;var g=null;if(a['font-scale']&&!(g=t.parse(a['font-scale'],1,Dt)))return null;var s=null;if(a['text-font']&&!(s=t.parse(a['text-font'],1,Tt(Id))))return null;var u=null;if(a['text-color']&&!(u=t.parse(a['text-color'],1,kd)))return null;var l=m[m.length-1];l.scale=g,l.font=s,l.textColor=u}else{var p=t.parse(d[i],1,zd);if(!p)return null;var y=p.type.kind;if('string'!==y&&'value'!==y&&'null'!==y&&'resolvedImage'!==y)return t.error('Formatted text type must be \'string\', \'value\', \'image\' or \'null\'.');n=!0,m.push({content:p,scale:null,font:null,textColor:null})}return new Fd(m)},Fd.prototype.evaluate=function(o){return new ee(this.sections.map(function(t){var e=t.content.evaluate(o);return ae(e)===Ld?new te('',e,null,null,null):new te(oe(e),null,t.scale?t.scale.evaluate(o):null,t.font?t.font.evaluate(o).join(','):null,t.textColor?t.textColor.evaluate(o):null)}))},Fd.prototype.eachChild=function(o){for(var t=0,e=this.sections,a;t<e.length;t+=1)a=e[t],o(a.content),a.scale&&o(a.scale),a.font&&o(a.font),a.textColor&&o(a.textColor)},Fd.prototype.outputDefined=function(){return!1},Fd.prototype.serialize=function(){for(var o=['format'],t=0,e=this.sections,a;t<e.length;t+=1){a=e[t],o.push(a.content.serialize());var r={};a.scale&&(r['font-scale']=a.scale.serialize()),a.font&&(r['text-font']=a.font.serialize()),a.textColor&&(r['text-color']=a.textColor.serialize()),o.push(r)}return o};var Md=function(e){this.type=Ld,this.input=e};Md.parse=function(o,t){if(2!==o.length)return t.error('Expected two arguments.');var e=t.parse(o[1],1,Id);return e?new Md(e):t.error('No image name provided.')},Md.prototype.evaluate=function(o){var t=this.input.evaluate(o),e=re.fromString(t);return e&&o.availableImages&&(e.available=-1<o.availableImages.indexOf(t)),e},Md.prototype.eachChild=function(e){e(this.input)},Md.prototype.outputDefined=function(){return!1},Md.prototype.serialize=function(){return['image',this.input.serialize()]};var Od={"to-boolean":Ad,"to-color":kd,"to-number":Dt,"to-string":Id},ye=function(o,t){this.type=o,this.args=t};ye.parse=function(s,t){if(2>s.length)return t.error('Expected at least one argument.');var e=s[0];if(('to-boolean'===e||'to-string'===e)&&2!==s.length)return t.error('Expected one argument.');for(var r=Od[e],n=[],i=1,a;i<s.length;i++){if(a=t.parse(s[i],i,zd),!a)return null;n.push(a)}return new ye(r,n)},ye.prototype.evaluate=function(p){if('boolean'===this.type.kind)return!!this.args[0].evaluate(p);if('color'===this.type.kind){for(var t=0,n=this.args,i,d;t<n.length;t+=1){if(d=null,(i=n[t].evaluate(p))instanceof Wt)return i;if('string'==typeof i){var r=p.parseColor(i);if(r)return r}else if(Array.isArray(i)&&!(d=3>i.length||4<i.length?'Invalid rbga value '+JSON.stringify(i)+': expected an array containing either three or four numeric values.':$t(i[0],i[1],i[2],i[3])))return new Wt(i[0]/255,i[1]/255,i[2]/255,i[3])}throw new Bd(d||'Could not parse color from value \''+('string'==typeof i?i:JSON.stringify(i)+'')+'\'')}if('number'===this.type.kind){for(var a=null,c=0,s=this.args;c<s.length;c+=1){if(null===(a=s[c].evaluate(p)))return 0;var u=+a;if(!isNaN(u))return u}throw new Bd('Could not convert '+JSON.stringify(a)+' to number.')}return'formatted'===this.type.kind?ee.fromString(oe(this.args[0].evaluate(p))):'resolvedImage'===this.type.kind?re.fromString(oe(this.args[0].evaluate(p))):oe(this.args[0].evaluate(p))},ye.prototype.eachChild=function(e){this.args.forEach(e)},ye.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})},ye.prototype.serialize=function(){if('formatted'===this.type.kind)return new Fd([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if('resolvedImage'===this.type.kind)return new Md(this.args[0]).serialize();var o=['to-'+this.type.kind];return this.eachChild(function(t){o.push(t.serialize())}),o};var Nd=['Unknown','Point','LineString','Polygon'],me=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};me.prototype.id=function(){return this.feature&&'id'in this.feature?this.feature.id:null},me.prototype.geometryType=function(){return this.feature?'number'==typeof this.feature.type?Nd[this.feature.type]:this.feature.type:null},me.prototype.geometry=function(){return this.feature&&'geometry'in this.feature?this.feature.geometry:null},me.prototype.canonicalID=function(){return this.canonical},me.prototype.properties=function(){return this.feature&&this.feature.properties||{}},me.prototype.parseColor=function(o){var t=this._parseColorCache[o];return t||(t=this._parseColorCache[o]=Wt.parse(o)),t};var ve=function(o,t,e,a){this.name=o,this.type=t,this._evaluate=e,this.args=a};ve.prototype.evaluate=function(e){return this._evaluate(e,this.args)},ve.prototype.eachChild=function(e){this.args.forEach(e)},ve.prototype.outputDefined=function(){return!1},ve.prototype.serialize=function(){return[this.name].concat(this.args.map(function(e){return e.serialize()}))},ve.parse=function(T,t){var e=T[0],n=ve.definitions[e],E;if(!n)return t.error('Unknown expression "'+e+'". If you wanted a literal array, use ["literal", [...]].',0);for(var r=Array.isArray(n)?n[0]:n.type,a=Array.isArray(n)?[[n[1],n[2]]]:n.overloads,o=a.filter(function(t){var e=t[0];return!Array.isArray(e)||e.length===T.length-1}),s=null,u=0,l=o;u<l.length;u+=1){var p=l[u],c=p[0],h=p[1];s=new qd(t.registry,t.path,null,t.scope);for(var f=[],y=!1,C=1;C<T.length;C++){var m=T[C],v=Array.isArray(c)?c[C-1]:c.type,g=s.parse(m,1+f.length,v);if(!g){y=!0;break}f.push(g)}if(!y)if(Array.isArray(c)&&c.length!==f.length)s.error('Expected '+c.length+' arguments, but found '+f.length+' instead.');else{for(var P=0;P<f.length;P++){var b=Array.isArray(c)?c[P]:c.type,w=f[P];s.concat(P+1).checkSubtype(b,w.type)}if(0===s.errors.length)return new ve(e,r,h,f)}}if(1===o.length)(E=t.errors).push.apply(E,s.errors);else{for(var _=(o.length?o:a).map(function(o){var t;return t=o[0],Array.isArray(t)?'('+t.map(Zt).join(', ')+')':'('+Zt(t.type)+'...)'}).join(' | '),A=[],S=1,k;S<T.length;S++){if(k=t.parse(T[S],1+A.length),!k)return null;A.push(Zt(k.type))}t.error('Expected arguments of type '+_+', but found ('+A.join(', ')+') instead.')}return null},ve.register=function(o,t){for(var e in ve.definitions=t,t)o[e]=ve};var ge=function(o,t,e){this.type=Dd,this.locale=e,this.caseSensitive=o,this.diacriticSensitive=t};ge.parse=function(o,t){if(2!==o.length)return t.error('Expected one argument.');var e=o[1];if('object'!=typeof e||Array.isArray(e))return t.error('Collator options argument must be an object.');var s=t.parse(void 0!==e['case-sensitive']&&e['case-sensitive'],1,Ad);if(!s)return null;var l=t.parse(void 0!==e['diacritic-sensitive']&&e['diacritic-sensitive'],1,Ad);if(!l)return null;var p=null;return e.locale&&!(p=t.parse(e.locale,1,Id))?null:new ge(s,l,p)},ge.prototype.evaluate=function(e){return new Qt(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)},ge.prototype.eachChild=function(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)},ge.prototype.outputDefined=function(){return!1},ge.prototype.serialize=function(){var e={};return e['case-sensitive']=this.caseSensitive.serialize(),e['diacritic-sensitive']=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),['collator',e]};var Ud=function(o,t){this.type=Ad,this.geojson=o,this.geometries=t};Ud.parse=function(o,t){if(2!==o.length)return t.error('\'within\' expression requires exactly one argument, but found '+(o.length-1)+' instead.');if(ie(o[1])){var e=o[1];if('FeatureCollection'===e.type){for(var r=0,n;r<e.features.length;++r)if(n=e.features[r].geometry.type,'Polygon'===n||'MultiPolygon'===n)return new Ud(e,e.features[r].geometry);}else if('Feature'===e.type){var i=e.geometry.type;if('Polygon'===i||'MultiPolygon'===i)return new Ud(e,e.geometry)}else if('Polygon'===e.type||'MultiPolygon'===e.type)return new Ud(e,e)}return t.error('\'within\' expression requires valid geojson object that contains polygon geometry type.')},Ud.prototype.evaluate=function(e){if(null!=e.geometry()&&null!=e.canonicalID()){if('Point'===e.geometryType())return function(d,t){var e=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],n=d.canonicalID();if('Polygon'===t.type){var i=Ee(t.coordinates,r,n),a=Be(d.geometry(),e,r,n);if(!be(e,r))return!1;for(var o=0,s=a;o<s.length;o+=1)if(!Ae(s[o],i))return!1}if('MultiPolygon'===t.type){var u=Pe(t.coordinates,r,n),l=Be(d.geometry(),e,r,n);if(!be(e,r))return!1;for(var p=0,c=l;p<c.length;p+=1)if(!Se(c[p],u))return!1}return!0}(e,this.geometries);if('LineString'===e.geometryType())return function(d,t){var e=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],n=d.canonicalID();if('Polygon'===t.type){var i=Ee(t.coordinates,r,n),a=Te(d.geometry(),e,r,n);if(!be(e,r))return!1;for(var o=0,s=a;o<s.length;o+=1)if(!ze(s[o],i))return!1}if('MultiPolygon'===t.type){var u=Pe(t.coordinates,r,n),l=Te(d.geometry(),e,r,n);if(!be(e,r))return!1;for(var p=0,c=l;p<c.length;p+=1)if(!Ce(c[p],u))return!1}return!0}(e,this.geometries)}return!1},Ud.prototype.eachChild=function(){},Ud.prototype.outputDefined=function(){return!0},Ud.prototype.serialize=function(){return['within',this.geojson]};var Vd=function(o,t){this.type=t.type,this.name=o,this.boundExpression=t};Vd.parse=function(o,t){if(2!==o.length||'string'!=typeof o[1])return t.error('\'var\' expression requires exactly one string literal argument.');var e=o[1];return t.scope.has(e)?new Vd(e,t.scope.get(e)):t.error('Unknown variable "'+e+'". Make sure "'+e+'" has been bound in an enclosing "let" expression before using it.',1)},Vd.prototype.evaluate=function(e){return this.boundExpression.evaluate(e)},Vd.prototype.eachChild=function(){},Vd.prototype.outputDefined=function(){return!1},Vd.prototype.serialize=function(){return['var',this.name]};var qd=function(o,t,e,a,r){void 0===t&&(t=[]),void 0===a&&(a=new Vt),void 0===r&&(r=[]),this.registry=o,this.path=t,this.key=t.map(function(e){return'['+e+']'}).join(''),this.scope=a,this.errors=r,this.expectedType=e};qd.prototype.parse=function(o,t,e,a,r){return void 0===r&&(r={}),t?this.concat(t,e,a)._parse(o,r):this._parse(o,r)},qd.prototype._parse=function(l,p){function e(o,t,e){return'assert'===e?new pe(t,[o]):'coerce'===e?new ye(t,[o]):o}if(null!==l&&'string'!=typeof l&&'boolean'!=typeof l&&'number'!=typeof l||(l=['literal',l]),Array.isArray(l)){if(0===l.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var r=l[0];if('string'!=typeof r)return this.error('Expression name must be a string, but found '+typeof r+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var d=this.registry[r];if(d){var i=d.parse(l,this);if(!i)return null;if(this.expectedType){var c=this.expectedType,o=i.type;if(('string'===c.kind||'number'===c.kind||'boolean'===c.kind||'object'===c.kind||'array'===c.kind)&&'value'===o.kind)i=e(i,c,p.typeAnnotation||'assert');else if(('color'===c.kind||'formatted'===c.kind||'resolvedImage'===c.kind)&&('value'===o.kind||'string'===o.kind))i=e(i,c,p.typeAnnotation||'coerce');else if(this.checkSubtype(c,o))return null}if(!(i instanceof ne)&&'resolvedImage'!==i.type.kind&&function o(t){if(t instanceof Vd)return o(t.boundExpression);if(t instanceof ve&&'error'===t.name)return!1;if(t instanceof ge)return!1;if(t instanceof Ud)return!1;var a=!0;return t.eachChild(function(t){a=t instanceof ye||t instanceof pe?a&&o(t):a&&t instanceof ne}),!!a&&Ve(t)&&Le(t,['zoom','heatmap-density','line-progress','accumulated','is-supported-script'])}(i)){var s=new me;try{i=new ne(i.type,i.evaluate(s))}catch(e){return this.error(e.message),null}}return i}return this.error('Unknown expression "'+r+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(void 0===l?'\'undefined\' value invalid. Use null instead.':'object'==typeof l?'Bare objects invalid. Use ["literal", {...}] instead.':'Expected an array, but found '+typeof l+' instead.')},qd.prototype.concat=function(o,a,e){var r='number'==typeof o?this.path.concat(o):this.path,n=e?this.scope.concat(e):this.scope;return new qd(this.registry,r,a||null,n,this.errors)},qd.prototype.error=function(o){for(var t=[],e=arguments.length-1;0<e--;)t[e]=arguments[e+1];var a=''+this.key+t.map(function(e){return'['+e+']'}).join('');this.errors.push(new Et(a,o))},qd.prototype.checkSubtype=function(o,t){var e=Xt(o,t);return e&&this.error(e),e};var Ue=function(s,t,e){this.type=s,this.input=t,this.labels=[],this.outputs=[];for(var r=0,n=e;r<n.length;r+=1){var i=n[r],a=i[1];this.labels.push(i[0]),this.outputs.push(a)}};Ue.parse=function(d,t){if(4>d.length-1)return t.error('Expected at least 4 arguments, but found only '+(d.length-1)+'.');if(0!=(d.length-1)%2)return t.error('Expected an even number of arguments.');var e=t.parse(d[1],1,Dt);if(!e)return null;var c=[],n=null;t.expectedType&&'value'!==t.expectedType.kind&&(n=t.expectedType);for(var i=1;i<d.length;i+=2){var a=1==i?-1/0:d[i],m=d[i+1],s=i,u=i+1;if('number'!=typeof a)return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',s);if(c.length&&c[c.length-1][0]>=a)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',s);var l=t.parse(m,u,n);if(!l)return null;n=n||l.type,c.push([a,l])}return new Ue(n,e,c)},Ue.prototype.evaluate=function(o){var t=this.labels,e=this.outputs;if(1===t.length)return e[0].evaluate(o);var a=this.input.evaluate(o);if(a<=t[0])return e[0].evaluate(o);var r=t.length;return a>=t[r-1]?e[r-1].evaluate(o):e[Re(t,a)].evaluate(o)},Ue.prototype.eachChild=function(o){o(this.input);for(var t=0,e=this.outputs;t<e.length;t+=1)o(e[t])},Ue.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})},Ue.prototype.serialize=function(){for(var o=['step',this.input.serialize()],t=0;t<this.labels.length;t++)0<t&&o.push(this.labels[t]),o.push(this.outputs[t].serialize());return o};var jd=Object.freeze({__proto__:null,number:je,color:function(o,t,e){return new Wt(je(o.r,t.r,e),je(o.g,t.g,e),je(o.b,t.b,e),je(o.a,t.a,e))},array:function(o,a,e){return o.map(function(o,t){return je(o,a[t],e)})}}),Ke=3*(6/29)*(6/29),Ge={forward:$e,reverse:_p,interpolate:function(o,t,e){return{l:je(o.l,t.l,e),a:je(o.a,t.a,e),b:je(o.b,t.b,e),alpha:je(o.alpha,t.alpha,e)}}},Zd={forward:function(o){var t=$e(o),e=t.l,s=t.a,n=t.b,i=A(n,s)*(180/Xe);return{h:0>i?i+360:i,c:N(s*s+n*n),l:e,alpha:o.a}},reverse:function(o){var t=o.h*(Xe/180),e=o.c;return _p({l:o.l,a:Ze(t)*e,b:w(t)*e,alpha:o.alpha})},interpolate:function(o,t,e){return{h:fp(o.h,t.h,e),c:je(o.c,t.c,e),l:je(o.l,t.l,e),alpha:je(o.alpha,t.alpha,e)}}},Gd=Object.freeze({__proto__:null,lab:Ge,hcl:Zd}),nr=function(l,t,e,r,n){this.type=l,this.operator=t,this.interpolation=e,this.input=r,this.labels=[],this.outputs=[];for(var i=0,a=n;i<a.length;i+=1){var o=a[i],s=o[1];this.labels.push(o[0]),this.outputs.push(s)}};nr.interpolationFactor=function(r,t,e,n){var i=0;if('exponential'===r.name)i=tr(t,r.base,e,n);else if('linear'===r.name)i=tr(t,1,e,n);else if('cubic-bezier'===r.name){var a=r.controlPoints;i=new hd(a[0],a[1],a[2],a[3]).solve(tr(t,1,e,n))}return i},nr.parse=function(m,t){var e=m[0],r=m[1],n=m[2],i=m.slice(3);if(!Array.isArray(r)||0===r.length)return t.error('Expected an interpolation type expression.',1);if('linear'===r[0])r={name:'linear'};else if('exponential'===r[0]){var a=r[1];if('number'!=typeof a)return t.error('Exponential interpolation requires a numeric base.',1,1);r={name:'exponential',base:a}}else{if('cubic-bezier'!==r[0])return t.error('Unknown interpolation type '+(r[0]+''),1,0);var g=r.slice(1);if(4!==g.length||g.some(function(e){return'number'!=typeof e||0>e||1<e}))return t.error('Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.',1);r={name:'cubic-bezier',controlPoints:g}}if(4>m.length-1)return t.error('Expected at least 4 arguments, but found only '+(m.length-1)+'.');if(0!=(m.length-1)%2)return t.error('Expected an even number of arguments.');if(!(n=t.parse(n,2,Dt)))return null;var _=[],u=null;'interpolate-hcl'===e||'interpolate-lab'===e?u=kd:t.expectedType&&'value'!==t.expectedType.kind&&(u=t.expectedType);for(var l=0;l<i.length;l+=2){var p=i[l],x=i[l+1],h=l+3,f=l+4;if('number'!=typeof p)return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',h);if(_.length&&_[_.length-1][0]>=p)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',h);var y=t.parse(x,f,u);if(!y)return null;u=u||y.type,_.push([p,y])}return'number'===u.kind||'color'===u.kind||'array'===u.kind&&'number'===u.itemType.kind&&'number'==typeof u.N?new nr(u,e,r,n,_):t.error('Type '+Zt(u)+' is not interpolatable.')},nr.prototype.evaluate=function(l){var t=this.labels,e=this.outputs;if(1===t.length)return e[0].evaluate(l);var r=this.input.evaluate(l);if(r<=t[0])return e[0].evaluate(l);var n=t.length;if(r>=t[n-1])return e[n-1].evaluate(l);var i=Re(t,r),a=nr.interpolationFactor(this.interpolation,r,t[i],t[i+1]),o=e[i].evaluate(l),s=e[i+1].evaluate(l);return'interpolate'===this.operator?jd[this.type.kind.toLowerCase()](o,s,a):'interpolate-hcl'===this.operator?Zd.reverse(Zd.interpolate(Zd.forward(o),Zd.forward(s),a)):Ge.reverse(Ge.interpolate(Ge.forward(o),Ge.forward(s),a))},nr.prototype.eachChild=function(o){o(this.input);for(var t=0,e=this.outputs;t<e.length;t+=1)o(e[t])},nr.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})},nr.prototype.serialize=function(){var o='linear'===this.interpolation.name?['linear']:'exponential'===this.interpolation.name?1===this.interpolation.base?['linear']:['exponential',this.interpolation.base]:['cubic-bezier'].concat(this.interpolation.controlPoints);for(var t=[this.operator,o,this.input.serialize()],e=0;e<this.labels.length;e++)t.push(this.labels[e],this.outputs[e].serialize());return t};var Hd=function(o,t){this.type=o,this.args=t};Hd.parse=function(l,t){if(2>l.length)return t.error('Expectected at least one argument.');var e=null,r=t.expectedType;r&&'value'!==r.kind&&(e=r);for(var n=[],i=0,a=l.slice(1),o;i<a.length;i+=1){if(o=t.parse(a[i],1+n.length,e,void 0,{typeAnnotation:'omit'}),!o)return null;e=e||o.type,n.push(o)}var p=r&&n.some(function(e){return Xt(r,e.type)});return new Hd(p?zd:e,n)},Hd.prototype.evaluate=function(o){for(var t=null,r=0,n=0,i=this.args,a;n<i.length&&(r++,(t=i[n].evaluate(o))&&t instanceof re&&!t.available&&(a||(a=t.name),t=null,r===this.args.length&&(t=a)),null===t);n+=1);return t},Hd.prototype.eachChild=function(e){this.args.forEach(e)},Hd.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})},Hd.prototype.serialize=function(){var o=['coalesce'];return this.eachChild(function(t){o.push(t.serialize())}),o};var Wd=function(o,t){this.type=t.type,this.bindings=[].concat(o),this.result=t};Wd.prototype.evaluate=function(e){return this.result.evaluate(e)},Wd.prototype.eachChild=function(o){for(var t=0,e=this.bindings;t<e.length;t+=1)o(e[t][1]);o(this.result)},Wd.parse=function(s,t){if(4>s.length)return t.error('Expected at least 3 arguments, but found '+(s.length-1)+' instead.');for(var e=[],r=1,n;r<s.length-1;r+=2){if(n=s[r],'string'!=typeof n)return t.error('Expected string, but found '+typeof n+' instead.',r);if(/[^a-zA-Z0-9_]/.test(n))return t.error('Variable names must contain only alphanumeric characters or \'_\'.',r);var l=t.parse(s[r+1],r+1);if(!l)return null;e.push([n,l])}var p=t.parse(s[s.length-1],s.length-1,t.expectedType,e);return p?new Wd(e,p):null},Wd.prototype.outputDefined=function(){return this.result.outputDefined()},Wd.prototype.serialize=function(){for(var o=['let'],t=0,e=this.bindings,a;t<e.length;t+=1)a=e[t],o.push(a[0],a[1].serialize());return o.push(this.result.serialize()),o};var Xd=function(o,t,e){this.type=o,this.index=t,this.input=e};Xd.parse=function(o,t){if(3!==o.length)return t.error('Expected 2 arguments, but found '+(o.length-1)+' instead.');var e=t.parse(o[1],1,Dt),a=t.parse(o[2],2,Tt(t.expectedType||zd));return e&&a?new Xd(a.type.itemType,e,a):null},Xd.prototype.evaluate=function(o){var t=this.index.evaluate(o),e=this.input.evaluate(o);if(0>t)throw new Bd('Array index out of bounds: '+t+' < 0.');if(t>=e.length)throw new Bd('Array index out of bounds: '+t+' > '+(e.length-1)+'.');if(t!==ea(t))throw new Bd('Array index must be an integer, but found '+t+' instead.');return e[t]},Xd.prototype.eachChild=function(e){e(this.index),e(this.input)},Xd.prototype.outputDefined=function(){return!1},Xd.prototype.serialize=function(){return['at',this.index.serialize(),this.input.serialize()]};var Kd=function(o,t){this.type=Ad,this.needle=o,this.haystack=t};Kd.parse=function(o,t){if(3!==o.length)return t.error('Expected 2 arguments, but found '+(o.length-1)+' instead.');var e=t.parse(o[1],1,zd),a=t.parse(o[2],2,zd);return e&&a?Ht(e.type,[Ad,Id,Dt,Ft,zd])?new Kd(e,a):t.error('Expected first argument to be of type boolean, string, number or null, but found '+Zt(e.type)+' instead'):null},Kd.prototype.evaluate=function(o){var t=this.needle.evaluate(o),e=this.haystack.evaluate(o);if(!e)return!1;if(!Yt(t,['boolean','string','number','null']))throw new Bd('Expected first argument to be of type boolean, string, number or null, but found '+Zt(ae(t))+' instead.');if(!Yt(e,['string','array']))throw new Bd('Expected second argument to be of type array or string, but found '+Zt(ae(e))+' instead.');return 0<=e.indexOf(t)},Kd.prototype.eachChild=function(e){e(this.needle),e(this.haystack)},Kd.prototype.outputDefined=function(){return!0},Kd.prototype.serialize=function(){return['in',this.needle.serialize(),this.haystack.serialize()]};var Yd=function(o,t,e){this.type=Dt,this.needle=o,this.haystack=t,this.fromIndex=e};Yd.parse=function(o,t){if(2>=o.length||5<=o.length)return t.error('Expected 3 or 4 arguments, but found '+(o.length-1)+' instead.');var e=t.parse(o[1],1,zd),a=t.parse(o[2],2,zd);if(!e||!a)return null;if(!Ht(e.type,[Ad,Id,Dt,Ft,zd]))return t.error('Expected first argument to be of type boolean, string, number or null, but found '+Zt(e.type)+' instead');if(4===o.length){var s=t.parse(o[3],3,Dt);return s?new Yd(e,a,s):null}return new Yd(e,a)},Yd.prototype.evaluate=function(o){var t=this.needle.evaluate(o),e=this.haystack.evaluate(o);if(!Yt(t,['boolean','string','number','null']))throw new Bd('Expected first argument to be of type boolean, string, number or null, but found '+Zt(ae(t))+' instead.');if(!Yt(e,['string','array']))throw new Bd('Expected second argument to be of type array or string, but found '+Zt(ae(e))+' instead.');if(this.fromIndex){var a=this.fromIndex.evaluate(o);return e.indexOf(t,a)}return e.indexOf(t)},Yd.prototype.eachChild=function(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)},Yd.prototype.outputDefined=function(){return!1},Yd.prototype.serialize=function(){if(null!=this.fromIndex&&void 0!==this.fromIndex){var e=this.fromIndex.serialize();return['index-of',this.needle.serialize(),this.haystack.serialize(),e]}return['index-of',this.needle.serialize(),this.haystack.serialize()]};var Jd=function(o,t,e,r,n,i){this.inputType=o,this.type=t,this.input=e,this.cases=r,this.outputs=n,this.otherwise=i};Jd.parse=function(m,t){var e=Number.MAX_SAFE_INTEGER;if(5>m.length)return t.error('Expected at least 4 arguments, but found only '+(m.length-1)+'.');if(1!=m.length%2)return t.error('Expected an even number of arguments.');var g,_;t.expectedType&&'value'!==t.expectedType.kind&&(_=t.expectedType);for(var n={},i=[],a=2;a<m.length-1;a+=2){var o=m[a],s=m[a+1];Array.isArray(o)||(o=[o]);var u=t.concat(a);if(0===o.length)return u.error('Expected at least one branch label.');for(var l=0,p=o,c;l<p.length;l+=1){if(c=p[l],'number'!=typeof c&&'string'!=typeof c)return u.error('Branch labels must be numbers or strings.');if('number'==typeof c&&B(c)>e)return u.error('Branch labels must be integers no larger than '+e+'.');if('number'==typeof c&&ea(c)!==c)return u.error('Numeric branch labels must be integer values.');if(!g)g=ae(c);else if(u.checkSubtype(g,ae(c)))return null;if(void 0!==n[c+''])return u.error('Branch labels must be unique.');n[c+'']=i.length}var x=t.parse(s,a,_);if(!x)return null;_=_||x.type,i.push(x)}var v=t.parse(m[1],1,zd);if(!v)return null;var b=t.parse(m[m.length-1],m.length-1,_);return b?'value'!==v.type.kind&&t.concat(1).checkSubtype(g,v.type)?null:new Jd(g,_,v,n,i,b):null},Jd.prototype.evaluate=function(o){var t=this.input.evaluate(o);return(ae(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(o)},Jd.prototype.eachChild=function(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)},Jd.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})&&this.otherwise.outputDefined()},Jd.prototype.serialize=function(){for(var d=this,t=['match',this.input.serialize()],e=[],r={},n=0,i=Object.keys(this.cases).sort(),a;n<i.length;n+=1)a=i[n],void 0===(p=r[this.cases[a]])?(r[this.cases[a]]=e.length,e.push([this.cases[a],[a]])):e[p][1].push(a);for(var o=function(t){return'number'===d.inputType.kind?+t:t},s=0,u=e;s<u.length;s+=1){var l=u[s],p=l[0],c=l[1];t.push(1===c.length?o(c[0]):c.map(o)),t.push(this.outputs[outputIndex$1].serialize())}return t.push(this.otherwise.serialize()),t};var $d=function(o,t,e){this.type=o,this.branches=t,this.otherwise=e};$d.parse=function(l,t){if(4>l.length)return t.error('Expected at least 3 arguments, but found only '+(l.length-1)+'.');if(0!=l.length%2)return t.error('Expected an odd number of arguments.');var e;t.expectedType&&'value'!==t.expectedType.kind&&(e=t.expectedType);for(var r=[],n=1,i;n<l.length-1;n+=2){if(i=t.parse(l[n],n,Ad),!i)return null;var p=t.parse(l[n+1],n+1,e);if(!p)return null;r.push([i,p]),e=e||p.type}var d=t.parse(l[l.length-1],l.length-1,e);return d?new $d(e,r,d):null},$d.prototype.evaluate=function(o){for(var t=0,e=this.branches;t<e.length;t+=1){var a=e[t],r=a[1];if(a[0].evaluate(o))return r.evaluate(o)}return this.otherwise.evaluate(o)},$d.prototype.eachChild=function(o){for(var t=0,e=this.branches;t<e.length;t+=1){var a=e[t],r=a[1];o(a[0]),o(r)}o(this.otherwise)},$d.prototype.outputDefined=function(){return this.branches.every(function(e){return e[1].outputDefined()})&&this.otherwise.outputDefined()},$d.prototype.serialize=function(){var o=['case'];return this.eachChild(function(t){o.push(t.serialize())}),o};var Qd=function(o,t,e,a){this.type=o,this.input=t,this.beginIndex=e,this.endIndex=a};Qd.parse=function(o,t){if(2>=o.length||5<=o.length)return t.error('Expected 3 or 4 arguments, but found '+(o.length-1)+' instead.');var e=t.parse(o[1],1,zd),a=t.parse(o[2],2,Dt);if(!e||!a)return null;if(!Ht(e.type,[Tt(zd),Id,zd]))return t.error('Expected first argument to be of type array or string, but found '+Zt(e.type)+' instead');if(4===o.length){var s=t.parse(o[3],3,Dt);return s?new Qd(e.type,e,a,s):null}return new Qd(e.type,e,a)},Qd.prototype.evaluate=function(o){var t=this.input.evaluate(o),e=this.beginIndex.evaluate(o);if(!Yt(t,['string','array']))throw new Bd('Expected first argument to be of type array or string, but found '+Zt(ae(t))+' instead.');if(this.endIndex){var a=this.endIndex.evaluate(o);return t.slice(e,a)}return t.slice(e)},Qd.prototype.eachChild=function(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)},Qd.prototype.outputDefined=function(){return!1},Qd.prototype.serialize=function(){if(null!=this.endIndex&&void 0!==this.endIndex){var e=this.endIndex.serialize();return['slice',this.input.serialize(),this.beginIndex.serialize(),e]}return['slice',this.input.serialize(),this.beginIndex.serialize()]};var ec=dr('==',function(o,t,e){return t===e},yr),tc=dr('!=',function(o,t,e){return t!==e},function(o,t,e,a){return!yr(0,t,e,a)}),oc=dr('<',function(o,t,e){return t<e},function(o,t,e,a){return 0>a.compare(t,e)}),ac=dr('>',function(o,t,e){return t>e},function(o,t,e,a){return 0<a.compare(t,e)}),rc=dr('<=',function(o,t,e){return t<=e},function(o,t,e,a){return 0>=a.compare(t,e)}),nc=dr('>=',function(o,t,e){return t>=e},function(o,t,e,a){return 0<=a.compare(t,e)}),ic=function(o,t,e,a,r){this.type=Id,this.number=o,this.locale=t,this.currency=e,this.minFractionDigits=a,this.maxFractionDigits=r};ic.parse=function(l,t){if(3!==l.length)return t.error('Expected two arguments.');var e=t.parse(l[1],1,Dt);if(!e)return null;var p=l[2];if('object'!=typeof p||Array.isArray(p))return t.error('NumberFormat options argument must be an object.');var d=null;if(p.locale&&!(d=t.parse(p.locale,1,Id)))return null;var i=null;if(p.currency&&!(i=t.parse(p.currency,1,Id)))return null;var a=null;if(p['min-fraction-digits']&&!(a=t.parse(p['min-fraction-digits'],1,Dt)))return null;var o=null;return p['max-fraction-digits']&&!(o=t.parse(p['max-fraction-digits'],1,Dt))?null:new ic(e,d,i,a,o)},ic.prototype.evaluate=function(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?'currency':'decimal',currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))},ic.prototype.eachChild=function(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)},ic.prototype.outputDefined=function(){return!1},ic.prototype.serialize=function(){var e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.minFractionDigits&&(e['min-fraction-digits']=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e['max-fraction-digits']=this.maxFractionDigits.serialize()),['number-format',this.number.serialize(),e]};var sc=function(e){this.type=Dt,this.input=e};sc.parse=function(o,t){if(2!==o.length)return t.error('Expected 1 argument, but found '+(o.length-1)+' instead.');var e=t.parse(o[1],1);return e?'array'!==e.type.kind&&'string'!==e.type.kind&&'value'!==e.type.kind?t.error('Expected argument of type string or array, but found '+Zt(e.type)+' instead.'):new sc(e):null},sc.prototype.evaluate=function(o){var t=this.input.evaluate(o);if('string'==typeof t)return t.length;if(Array.isArray(t))return t.length;throw new Bd('Expected value to be of type string or array, but found '+Zt(ae(t))+' instead.')},sc.prototype.eachChild=function(e){e(this.input)},sc.prototype.outputDefined=function(){return!1},sc.prototype.serialize=function(){var o=['length'];return this.eachChild(function(t){o.push(t.serialize())}),o};var lc={"==":ec,"!=":tc,">":ac,"<":oc,">=":nc,"<=":rc,array:pe,at:Xd,boolean:pe,case:$d,coalesce:Hd,collator:ge,format:Fd,image:Md,in:Kd,"index-of":Yd,interpolate:nr,"interpolate-hcl":nr,"interpolate-lab":nr,length:sc,let:Wd,literal:ne,match:Jd,number:pe,"number-format":ic,object:pe,slice:Qd,step:Ue,string:pe,"to-boolean":ye,"to-color":ye,"to-number":ye,"to-string":ye,var:Vd,within:Ud};ve.register(lc,{error:[{kind:'error'},[Id],function(o,t){throw new Bd(t[0].evaluate(o))}],typeof:[Id,[zd],function(o,t){return Zt(ae(t[0].evaluate(o)))}],"to-rgba":[Tt(Dt,4),[kd],function(o,t){return t[0].evaluate(o).toArray()}],rgb:[kd,[Dt,Dt,Dt],mr],rgba:[kd,[Dt,Dt,Dt,Dt],mr],has:{type:Ad,overloads:[[[Id],function(o,t){return Ir(t[0].evaluate(o),o.properties())}],[[Id,Pd],function(o,t){var e=t[1];return Ir(t[0].evaluate(o),e.evaluate(o))}]]},get:{type:zd,overloads:[[[Id],function(o,t){return zr(t[0].evaluate(o),o.properties())}],[[Id,Pd],function(o,t){var e=t[1];return zr(t[0].evaluate(o),e.evaluate(o))}]]},"feature-state":[zd,[Id],function(o,t){return zr(t[0].evaluate(o),o.featureState||{})}],properties:[Pd,[],function(e){return e.properties()}],"geometry-type":[Id,[],function(e){return e.geometryType()}],id:[zd,[],function(e){return e.id()}],zoom:[Dt,[],function(e){return e.globals.zoom}],"heatmap-density":[Dt,[],function(e){return e.globals.heatmapDensity||0}],"line-progress":[Dt,[],function(e){return e.globals.lineProgress||0}],accumulated:[zd,[],function(e){return void 0===e.globals.accumulated?null:e.globals.accumulated}],"+":[Dt,Cr(Dt),function(o,t){for(var e=0,a=0,r=t;a<r.length;a+=1)e+=r[a].evaluate(o);return e}],"*":[Dt,Cr(Dt),function(o,t){for(var e=1,a=0,r=t;a<r.length;a+=1)e*=r[a].evaluate(o);return e}],"-":{type:Dt,overloads:[[[Dt,Dt],function(o,t){var e=t[1];return t[0].evaluate(o)-e.evaluate(o)}],[[Dt],function(o,t){return-t[0].evaluate(o)}]]},"/":[Dt,[Dt,Dt],function(o,t){var e=t[1];return t[0].evaluate(o)/e.evaluate(o)}],"%":[Dt,[Dt,Dt],function(o,t){var e=t[1];return t[0].evaluate(o)%e.evaluate(o)}],ln2:[Dt,[],function(){return _}],pi:[Dt,[],function(){return Xe}],e:[Dt,[],function(){return Math.E}],"^":[Dt,[Dt,Dt],function(o,t){var e=t[1];return C(t[0].evaluate(o),e.evaluate(o))}],sqrt:[Dt,[Dt],function(o,t){return N(t[0].evaluate(o))}],log10:[Dt,[Dt],function(o,t){return x(t[0].evaluate(o))/y}],ln:[Dt,[Dt],function(o,t){return x(t[0].evaluate(o))}],log2:[Dt,[Dt],function(o,t){return x(t[0].evaluate(o))/_}],sin:[Dt,[Dt],function(o,t){return w(t[0].evaluate(o))}],cos:[Dt,[Dt],function(o,t){return Ze(t[0].evaluate(o))}],tan:[Dt,[Dt],function(o,t){return v(t[0].evaluate(o))}],asin:[Dt,[Dt],function(o,t){return Math.asin(t[0].evaluate(o))}],acos:[Dt,[Dt],function(o,t){return fd(t[0].evaluate(o))}],atan:[Dt,[Dt],function(o,t){return n(t[0].evaluate(o))}],min:[Dt,Cr(Dt),function(o,t){return ta.apply(Math,t.map(function(t){return t.evaluate(o)}))}],max:[Dt,Cr(Dt),function(o,t){return oa.apply(Math,t.map(function(t){return t.evaluate(o)}))}],abs:[Dt,[Dt],function(o,t){return B(t[0].evaluate(o))}],round:[Dt,[Dt],function(o,t){var e=t[0].evaluate(o);return 0>e?-b(-e):b(e)}],floor:[Dt,[Dt],function(o,t){return ea(t[0].evaluate(o))}],ceil:[Dt,[Dt],function(o,t){return m(t[0].evaluate(o))}],"filter-==":[Ad,[Id,zd],function(o,t){var e=t[0],a=t[1];return o.properties()[e.value]===a.value}],"filter-id-==":[Ad,[zd],function(o,t){var e=t[0];return o.id()===e.value}],"filter-type-==":[Ad,[Id],function(o,t){var e=t[0];return o.geometryType()===e.value}],"filter-<":[Ad,[Id,zd],function(o,t){var e=t[0],r=t[1],n=o.properties()[e.value],s=r.value;return typeof n==typeof s&&n<s}],"filter-id-<":[Ad,[zd],function(o,t){var e=t[0],a=o.id(),r=e.value;return typeof a==typeof r&&a<r}],"filter->":[Ad,[Id,zd],function(o,t){var e=t[0],r=t[1],n=o.properties()[e.value],s=r.value;return typeof n==typeof s&&n>s}],"filter-id->":[Ad,[zd],function(o,t){var e=t[0],a=o.id(),r=e.value;return typeof a==typeof r&&a>r}],"filter-<=":[Ad,[Id,zd],function(o,t){var e=t[0],r=t[1],n=o.properties()[e.value],s=r.value;return typeof n==typeof s&&n<=s}],"filter-id-<=":[Ad,[zd],function(o,t){var e=t[0],a=o.id(),r=e.value;return typeof a==typeof r&&a<=r}],"filter->=":[Ad,[Id,zd],function(o,t){var e=t[0],r=t[1],n=o.properties()[e.value],s=r.value;return typeof n==typeof s&&n>=s}],"filter-id->=":[Ad,[zd],function(o,t){var e=t[0],a=o.id(),r=e.value;return typeof a==typeof r&&a>=r}],"filter-has":[Ad,[zd],function(o,t){return t[0].value in o.properties()}],"filter-has-id":[Ad,[],function(e){return null!==e.id()&&void 0!==e.id()}],"filter-type-in":[Ad,[Tt(Id)],function(o,t){return 0<=t[0].value.indexOf(o.geometryType())}],"filter-id-in":[Ad,[Tt(zd)],function(o,t){return 0<=t[0].value.indexOf(o.id())}],"filter-in-small":[Ad,[Id,Tt(zd)],function(o,t){var e=t[0];return 0<=t[1].value.indexOf(o.properties()[e.value])}],"filter-in-large":[Ad,[Id,Tt(zd)],function(o,t){var e=t[0],a=t[1];return function(o,t,e,a){for(;e<=a;){var r=e+a>>1;if(t[r]===o)return!0;t[r]>o?a=r-1:e=r+1}return!1}(o.properties()[e.value],a.value,0,a.value.length-1)}],all:{type:Ad,overloads:[[[Ad,Ad],function(o,t){var e=t[1];return t[0].evaluate(o)&&e.evaluate(o)}],[Cr(Ad),function(o,t){for(var e=0,a=t;e<a.length;e+=1)if(!a[e].evaluate(o))return!1;return!0}]]},any:{type:Ad,overloads:[[[Ad,Ad],function(o,t){var e=t[1];return t[0].evaluate(o)||e.evaluate(o)}],[Cr(Ad),function(o,t){for(var e=0,a=t;e<a.length;e+=1)if(a[e].evaluate(o))return!0;return!1}]]},"!":[Ad,[Ad],function(o,t){return!t[0].evaluate(o)}],"is-supported-script":[Ad,[Id],function(o,t){var e=o.globals&&o.globals.isSupportedScript;return!e||e(t[0].evaluate(o))}],upcase:[Id,[Id],function(o,t){return t[0].evaluate(o).toUpperCase()}],downcase:[Id,[Id],function(o,t){return t[0].evaluate(o).toLowerCase()}],concat:[Id,Cr(zd),function(o,t){return t.map(function(t){return oe(t.evaluate(o))}).join('')}],"resolved-locale":[Id,[Dd],function(o,t){return t[0].evaluate(o).resolvedLocale()}]});var kr=function(o,t){this.expression=o,this._warningHistory={},this._evaluator=new me,this._defaultValue=t?function(e){return'color'===e.type&&Fr(e.default)?new Wt(0,0,0,0):'color'===e.type?Wt.parse(e.default)||null:void 0===e.default?null:e.default}(t):null,this._enumValues=t&&'enum'===t.type?t.values:null};kr.prototype.evaluateWithoutErrorHandling=function(o,t,e,r,n,i){return this._evaluator.globals=o,this._evaluator.feature=t,this._evaluator.featureState=e,this._evaluator.canonical=r,this._evaluator.availableImages=n||null,this._evaluator.formattedSection=i,this.expression.evaluate(this._evaluator)},kr.prototype.evaluate=function(s,t,e,r,n,i){this._evaluator.globals=s,this._evaluator.feature=t||null,this._evaluator.featureState=e||null,this._evaluator.canonical=r,this._evaluator.availableImages=n||null,this._evaluator.formattedSection=i||null;try{var a=this.expression.evaluate(this._evaluator);if(null==a||'number'==typeof a&&a!=a)return this._defaultValue;if(this._enumValues&&!(a in this._enumValues))throw new Bd('Expected value to be one of '+Object.keys(this._enumValues).map(function(e){return JSON.stringify(e)}).join(', ')+', but found '+JSON.stringify(a)+' instead.');return a}catch(e){return this._warningHistory[e.message]||(this._warningHistory[e.message]=!0,'undefined'!=typeof console&&console.warn(e.message)),this._defaultValue}};var Nr=function(o,t){this.kind=o,this._styleExpression=t,this.isStateDependent='constant'!==o&&!De(t.expression)};Nr.prototype.evaluateWithoutErrorHandling=function(o,t,e,r,n,i){return this._styleExpression.evaluateWithoutErrorHandling(o,t,e,r,n,i)},Nr.prototype.evaluate=function(o,t,e,r,n,i){return this._styleExpression.evaluate(o,t,e,r,n,i)};var Zr=function(o,t,e,a){this.kind=o,this.zoomStops=e,this._styleExpression=t,this.isStateDependent='camera'!==o&&!De(t.expression),this.interpolationType=a};Zr.prototype.evaluateWithoutErrorHandling=function(o,t,e,r,n,i){return this._styleExpression.evaluateWithoutErrorHandling(o,t,e,r,n,i)},Zr.prototype.evaluate=function(o,t,e,r,n,i){return this._styleExpression.evaluate(o,t,e,r,n,i)},Zr.prototype.interpolationFactor=function(o,t,e){return this.interpolationType?nr.interpolationFactor(this.interpolationType,o,t,e):0};var Xr=function(o,t){this._parameters=o,this._specification=t,gp(this,function T(E,e){var t='color'===e.type,o=E.stops&&'object'==typeof E.stops[0][0],r=o||!(o||void 0!==E.property),s=E.type||(Tr(e)?'exponential':'interval'),l,n,i;if(t&&((E=gp({},E)).stops&&(E.stops=E.stops.map(function(e){return[e[0],Wt.parse(e[1])]})),E.default=Wt.parse(E.default?E.default:e.default)),E.colorSpace&&'rgb'!==E.colorSpace&&!Gd[E.colorSpace])throw new Error('Unknown color space: '+E.colorSpace);if('exponential'===s)l=Ur;else if('interval'===s)l=Or;else if('categorical'===s){l=Rr,n=Object.create(null);for(var a=0,p=E.stops,c;a<p.length;a+=1)c=p[a],n[c[0]]=c[1];i=typeof E.stops[0][0]}else{if('identity'!==s)throw new Error('Unknown function type "'+s+'"');l=jr}if(o){for(var u={},f=[],y=0;y<E.stops.length;y++){var d=E.stops[y],m=d[0].zoom;void 0===u[m]&&(u[m]={zoom:m,type:E.type,property:E.property,default:E.default,stops:[]},f.push(m)),u[m].stops.push([d[0].value,d[1]])}for(var h=[],S=0,x=f,b;S<x.length;S+=1)b=x[S],h.push([u[b].zoom,T(u[b],e)]);var w={name:'linear'};return{kind:'composite',interpolationType:w,interpolationFactor:nr.interpolationFactor.bind(void 0,w),zoomStops:h.map(function(e){return e[0]}),evaluate:function(o,t){var a=o.zoom;return Ur({stops:h,base:E.base},e,a).evaluate(a,t)}}}if(r){var C='exponential'===s?{name:'exponential',base:void 0===E.base?1:E.base}:null;return{kind:'camera',interpolationType:C,interpolationFactor:nr.interpolationFactor.bind(void 0,C),zoomStops:E.stops.map(function(e){return e[0]}),evaluate:function(o){return l(E,e,o.zoom,n,i)}}}return{kind:'source',evaluate:function(a,t){var o=t&&t.properties?t.properties[E.property]:void 0;return void 0===o?Lr(E.default,e.default):l(E,e,o,n,i)}}}(this._parameters,this._specification))};Xr.deserialize=function(e){return new Xr(e._parameters,e._specification)},Xr.serialize=function(e){return{_parameters:e._parameters,_specification:e._specification}};var Hr={type:'boolean',default:!1,transition:!1,"property-type":'data-driven',expression:{interpolated:!1,parameters:['zoom','feature']}},nn={promoteId:function(o){var t=o.key,a=o.value;if('string'===Vr(a))return Ep({key:t,value:a});var s=[];for(var n in a)s.push.apply(s,Ep({key:t+'.'+n,value:a[n]}));return s}},pc={"*":function(){return[]},array:hp,boolean:function(o){var t=o.value,e=o.key,a=Vr(t);return'boolean'===a?[]:[new Cd(e,t,'boolean expected, '+a+' found')]},number:xp,color:function(o){var t=o.key,e=o.value,a=Vr(e);return'string'===a?null===Jt(e)?[new Cd(t,e,'color expected, "'+e+'" found')]:[]:[new Cd(t,e,'color expected, '+a+' found')]},constants:St,enum:tn,filter:cn,function:vp,layer:dn,object:Jr,source:Sp,light:Cp,string:Ep,formatted:function(e){return 0===Ep(e).length?[]:bp(e)},resolvedImage:function(e){return 0===Ep(e).length?[]:bp(e)}};Ap.source=kn(Sp),Ap.light=kn(Cp),Ap.layer=kn(dn),Ap.filter=kn(cn),Ap.paintProperty=kn(fn),Ap.layoutProperty=kn(yn);var wn=Ap,zn=wn.light,Cn=wn.paintProperty,En=wn.layoutProperty,Pn=Mn;Mn.prototype.insert=function(o,t,e,a,r){this._forEachCell(t,e,a,r,this._insertCell,this.uid++),this.keys.push(o),this.bboxes.push(t),this.bboxes.push(e),this.bboxes.push(a),this.bboxes.push(r)},Mn.prototype._insertReadonly=function(){throw'Cannot insert into a GridIndex created from an ArrayBuffer.'},Mn.prototype._insertCell=function(o,t,e,r,n,i){this.cells[n].push(i)},Mn.prototype.query=function(l,t,e,r,n){var p=this.min,a=this.max;if(l<=p&&t<=p&&a<=e&&a<=r&&!n)return Array.prototype.slice.call(this.keys);var o=[];return this._forEachCell(l,t,e,r,this._queryCell,o,{},n),o},Mn.prototype._queryCell=function(d,t,e,r,n,i,a,o){var s=this.cells[n];if(null!==s)for(var u=this.keys,l=this.bboxes,p=0,c;p<s.length;p++)if(c=s[p],void 0===a[c]){var m=4*c;(o?o(l[m+0],l[m+1],l[m+2],l[m+3]):d<=l[m+2]&&t<=l[m+3]&&e>=l[m+0]&&r>=l[m+1])?(a[c]=!0,i.push(u[c])):a[c]=!1}},Mn.prototype._forEachCell=function(d,t,e,r,n,i,a,o){for(var m=this._convertToCellCoord(d),u=this._convertToCellCoord(t),l=this._convertToCellCoord(e),p=this._convertToCellCoord(r),c=m;c<=l;c++)for(var g=u,_;g<=p;g++)if(_=this.d*g+c,(!o||o(this._convertFromCellCoord(c),this._convertFromCellCoord(g),this._convertFromCellCoord(c+1),this._convertFromCellCoord(g+1)))&&n.call(this,d,t,e,r,_,i,a,o))return},Mn.prototype._convertFromCellCoord=function(e){return(e-this.padding)/this.scale},Mn.prototype._convertToCellCoord=function(e){return oa(0,ta(this.d-1,ea(e*this.scale)+this.padding))},Mn.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var l=this.cells,t=3+this.cells.length+1+1,e=0,r=0;r<this.cells.length;r++)e+=this.cells[r].length;var n=new Int32Array(t+e+this.keys.length+this.bboxes.length);n[0]=this.extent,n[1]=this.n,n[2]=this.padding;for(var i=t,a=0,o;a<l.length;a++)o=l[a],n[3+a]=i,n.set(o,i),i+=o.length;return n[3+l.length]=i,n.set(this.keys,i),n[3+l.length+1]=i+=this.keys.length,n.set(this.bboxes,i),i+=this.bboxes.length,n.buffer};var Bn=vd.ImageData,Vn=vd.ImageBitmap,Fn={};for(var Dn in Tn('Object',Object),Pn.serialize=function(o,t){var e=o.toArrayBuffer();return t&&t.push(e),{buffer:e}},Pn.deserialize=function(e){return new Pn(e.buffer)},Tn('Grid',Pn),Tn('Color',Wt),Tn('Error',Error),Tn('ResolvedImage',re),Tn('StylePropertyFunction',Xr),Tn('StyleExpression',kr,{omit:['_evaluator']}),Tn('ZoomDependentExpression',Zr),Tn('ZoomConstantExpression',Nr),Tn('CompoundExpression',ve,{omit:['_evaluate']}),lc)lc[Dn]._classRegistryKey||Tn('Expression_'+Dn,lc[Dn]);var Rn=function(){this.first=!0};Rn.prototype.update=function(o,t){var e=ea(o);return this.first?(this.first=!1,this.lastIntegerZoom=e,this.lastIntegerZoomTime=0,this.lastZoom=o,this.lastFloorZoom=e,!0):(this.lastFloorZoom>e?(this.lastIntegerZoom=e+1,this.lastIntegerZoomTime=t):this.lastFloorZoom<e&&(this.lastIntegerZoom=e,this.lastIntegerZoomTime=t),o!==this.lastZoom&&(this.lastZoom=o,this.lastFloorZoom=e,!0))};var Nn={"Latin-1 Supplement":function(e){return 128<=e&&255>=e},Arabic:function(e){return 1536<=e&&1791>=e},"Arabic Supplement":function(e){return 1872<=e&&1919>=e},"Arabic Extended-A":function(e){return 2208<=e&&2303>=e},"Hangul Jamo":function(e){return 4352<=e&&4607>=e},"Unified Canadian Aboriginal Syllabics":function(e){return 5120<=e&&5759>=e},Khmer:function(e){return 6016<=e&&6143>=e},"Unified Canadian Aboriginal Syllabics Extended":function(e){return 6320<=e&&6399>=e},"General Punctuation":function(e){return 8192<=e&&8303>=e},"Letterlike Symbols":function(e){return 8448<=e&&8527>=e},"Number Forms":function(e){return 8528<=e&&8591>=e},"Miscellaneous Technical":function(e){return 8960<=e&&9215>=e},"Control Pictures":function(e){return 9216<=e&&9279>=e},"Optical Character Recognition":function(e){return 9280<=e&&9311>=e},"Enclosed Alphanumerics":function(e){return 9312<=e&&9471>=e},"Geometric Shapes":function(e){return 9632<=e&&9727>=e},"Miscellaneous Symbols":function(e){return 9728<=e&&9983>=e},"Miscellaneous Symbols and Arrows":function(e){return 11008<=e&&11263>=e},"CJK Radicals Supplement":function(e){return 11904<=e&&12031>=e},"Kangxi Radicals":function(e){return 12032<=e&&12255>=e},"Ideographic Description Characters":function(e){return 12272<=e&&12287>=e},"CJK Symbols and Punctuation":function(e){return 12288<=e&&12351>=e},Hiragana:function(e){return 12352<=e&&12447>=e},Katakana:function(e){return 12448<=e&&12543>=e},Bopomofo:function(e){return 12544<=e&&12591>=e},"Hangul Compatibility Jamo":function(e){return 12592<=e&&12687>=e},Kanbun:function(e){return 12688<=e&&12703>=e},"Bopomofo Extended":function(e){return 12704<=e&&12735>=e},"CJK Strokes":function(e){return 12736<=e&&12783>=e},"Katakana Phonetic Extensions":function(e){return 12784<=e&&12799>=e},"Enclosed CJK Letters and Months":function(e){return 12800<=e&&13055>=e},"CJK Compatibility":function(e){return 13056<=e&&13311>=e},"CJK Unified Ideographs Extension A":function(e){return 13312<=e&&19903>=e},"Yijing Hexagram Symbols":function(e){return 19904<=e&&19967>=e},"CJK Unified Ideographs":function(e){return 19968<=e&&40959>=e},"Yi Syllables":function(e){return 40960<=e&&42127>=e},"Yi Radicals":function(e){return 42128<=e&&42191>=e},"Hangul Jamo Extended-A":function(e){return 43360<=e&&43391>=e},"Hangul Syllables":function(e){return 44032<=e&&55215>=e},"Hangul Jamo Extended-B":function(e){return 55216<=e&&55295>=e},"Private Use Area":function(e){return 57344<=e&&63743>=e},"CJK Compatibility Ideographs":function(e){return 63744<=e&&64255>=e},"Arabic Presentation Forms-A":function(e){return 64336<=e&&65023>=e},"Vertical Forms":function(e){return 65040<=e&&65055>=e},"CJK Compatibility Forms":function(e){return 65072<=e&&65103>=e},"Small Form Variants":function(e){return 65104<=e&&65135>=e},"Arabic Presentation Forms-B":function(e){return 65136<=e&&65279>=e},"Halfwidth and Fullwidth Forms":function(e){return 65280<=e&&65519>=e}},Kn=null,$n='unavailable',dc=null,cc=function(e){e&&'string'==typeof e&&-1<e.indexOf('NetworkError')&&($n='error'),Kn&&Kn(e)},ti=new It,ri=function(){return $n},ni=function(){if('deferred'!==$n||!dc)throw new Error('rtl-text-plugin cannot be downloaded unless a pluginURL is specified');$n='loading',Yn(),dc&&xt({url:dc},function(e){e?cc(e):($n='loaded',Yn())})},ii={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return'loaded'===$n||null!=ii.applyArabicShaping},isLoading:function(){return'loading'===$n},setState:function(e){$n=e.pluginStatus,dc=e.pluginURL},isParsed:function(){return null!=ii.applyArabicShaping&&null!=ii.processBidirectionalText&&null!=ii.processStyledBidirectionalText},getPluginURL:function(){return dc}},ai=function(o,t){this.zoom=o,t?(this.now=t.now,this.fadeDuration=t.fadeDuration,this.zoomHistory=t.zoomHistory,this.transition=t.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Rn,this.transition={})};ai.prototype.isSupportedScript=function(e){return function(o,t){for(var e=0,a=o;e<a.length;e+=1)if(!Jn(a[e].charCodeAt(0),t))return!1;return!0}(e,ii.isLoaded())},ai.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:ta((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},ai.prototype.getCrossfadeParameters=function(){var o=this.zoom,t=o-ea(o),e=this.crossFadingFactor();return o>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:t+(1-t)*e}:{fromScale:.5,toScale:1,t:1-(1-e)*t}};var oi=function(o,t){this.property=o,this.value=t,this.expression=function(o,a){if(Fr(o))return new Xr(o,a);if(qr(o)){var e=Gr(o,a);if('error'===e.result)throw new Error(e.value.map(function(e){return e.key+': '+e.message}).join(', '));return e.value}var r=o;return'string'==typeof o&&'color'===a.type&&(r=Wt.parse(o)),{kind:'constant',evaluate:function(){return r}}}(void 0===t?o.specification.default:t,o.specification)};oi.prototype.isDataDriven=function(){return'source'===this.expression.kind||'composite'===this.expression.kind},oi.prototype.possiblyEvaluate=function(o,t,e){return this.property.possiblyEvaluate(this,o,t,e)};var si=function(e){this.property=e,this.value=new oi(e,void 0)};si.prototype.transitioned=function(o,t){return new li(this.property,this.value,t,ha({},o.transition,this.transition),o.now)},si.prototype.untransitioned=function(){return new li(this.property,this.value,null,{},0)};var ui=function(e){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues)};ui.prototype.getValue=function(e){return dp(this._values[e].value.value)},ui.prototype.setValue=function(o,t){this._values.hasOwnProperty(o)||(this._values[o]=new si(this._values[o].property)),this._values[o].value=new oi(this._values[o].property,null===t?void 0:dp(t))},ui.prototype.getTransition=function(e){return dp(this._values[e].transition)},ui.prototype.setTransition=function(o,t){this._values.hasOwnProperty(o)||(this._values[o]=new si(this._values[o].property)),this._values[o].transition=dp(t)||void 0},ui.prototype.serialize=function(){for(var o={},t=0,e=Object.keys(this._values);t<e.length;t+=1){var r=e[t],n=this.getValue(r);void 0!==n&&(o[r]=n);var i=this.getTransition(r);void 0!==i&&(o[r+'-transition']=i)}return o},ui.prototype.transitioned=function(o,t){for(var e=new pi(this._properties),r=0,n=Object.keys(this._values),i;r<n.length;r+=1)i=n[r],e._values[i]=this._values[i].transitioned(o,t._values[i]);return e},ui.prototype.untransitioned=function(){for(var o=new pi(this._properties),t=0,e=Object.keys(this._values),a;t<e.length;t+=1)a=e[t],o._values[a]=this._values[a].untransitioned();return o};var li=function(o,t,e,a,r){this.property=o,this.value=t,this.begin=r+a.delay||0,this.end=this.begin+a.duration||0,o.specification.transition&&(a.delay||a.duration)&&(this.prior=e)};li.prototype.possiblyEvaluate=function(s,t,e){var r=s.now||0,n=this.value.possiblyEvaluate(s,t,e),i=this.prior;if(i){if(r>this.end)return this.prior=null,n;if(this.value.isDataDriven())return this.prior=null,n;if(r<this.begin)return i.possiblyEvaluate(s,t,e);var a=(r-this.begin)/(this.end-this.begin);return this.property.interpolate(i.possiblyEvaluate(s,t,e),n,function(o){if(0>=o)return 0;if(1<=o)return 1;var t=o*o,e=t*o;return 4*(.5>o?e:3*(o-t)+e-.75)}(a))}return n};var pi=function(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)};pi.prototype.possiblyEvaluate=function(s,t,e){for(var r=new fi(this._properties),n=0,i=Object.keys(this._values),a;n<i.length;n+=1)a=i[n],r._values[a]=this._values[a].possiblyEvaluate(s,t,e);return r},pi.prototype.hasTransition=function(){for(var o=0,t=Object.keys(this._values);o<t.length;o+=1)if(this._values[t[o]].prior)return!0;return!1};var ci=function(e){this._properties=e,this._values=Object.create(e.defaultPropertyValues)};ci.prototype.getValue=function(e){return dp(this._values[e].value)},ci.prototype.setValue=function(o,t){this._values[o]=new oi(this._values[o].property,null===t?void 0:dp(t))},ci.prototype.serialize=function(){for(var o={},t=0,e=Object.keys(this._values);t<e.length;t+=1){var a=e[t],r=this.getValue(a);void 0!==r&&(o[a]=r)}return o},ci.prototype.possiblyEvaluate=function(s,t,e){for(var r=new fi(this._properties),n=0,i=Object.keys(this._values),a;n<i.length;n+=1)a=i[n],r._values[a]=this._values[a].possiblyEvaluate(s,t,e);return r};var hi=function(o,t,e){this.property=o,this.value=t,this.parameters=e};hi.prototype.isConstant=function(){return'constant'===this.value.kind},hi.prototype.constantOr=function(e){return'constant'===this.value.kind?this.value.value:e},hi.prototype.evaluate=function(o,t,e,a){return this.property.evaluate(this.value,this.parameters,o,t,e,a)};var fi=function(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)};fi.prototype.get=function(e){return this._values[e]};var yi=function(e){this.specification=e};yi.prototype.possiblyEvaluate=function(o,t){return o.expression.evaluate(t)},yi.prototype.interpolate=function(o,t,e){var a=jd[this.specification.type];return a?a(o,t,e):o};var di=function(o,t){this.specification=o,this.overrides=t};di.prototype.possiblyEvaluate=function(o,t,e,a){return new hi(this,'constant'===o.expression.kind||'camera'===o.expression.kind?{kind:'constant',value:o.expression.evaluate(t,null,{},e,a)}:o.expression,t)},di.prototype.interpolate=function(o,t,e){if('constant'!==o.value.kind||'constant'!==t.value.kind)return o;if(void 0===o.value.value||void 0===t.value.value)return new hi(this,{kind:'constant',value:void 0},o.parameters);var a=jd[this.specification.type];return a?new hi(this,{kind:'constant',value:a(o.value.value,t.value.value,e)},o.parameters):o},di.prototype.evaluate=function(o,t,e,r,n,i){return'constant'===o.kind?o.value:o.evaluate(t,e,r,n,i)};var mi=function(o){function t(){o.apply(this,arguments)}return o&&(t.__proto__=o),(t.prototype=Object.create(o&&o.prototype)).constructor=t,t.prototype.possiblyEvaluate=function(l,t,e,r){if(void 0===l.value)return new hi(this,{kind:'constant',value:void 0},t);if('constant'===l.expression.kind){var n=l.expression.evaluate(t,null,{},e,r),p='resolvedImage'===l.property.specification.type&&'string'!=typeof n?n.name:n,a=this._calculate(p,p,p,t);return new hi(this,{kind:'constant',value:a},t)}if('camera'===l.expression.kind){var d=this._calculate(l.expression.evaluate({zoom:t.zoom-1}),l.expression.evaluate({zoom:t.zoom}),l.expression.evaluate({zoom:t.zoom+1}),t);return new hi(this,{kind:'constant',value:d},t)}return new hi(this,l.expression,t)},t.prototype.evaluate=function(s,t,e,r,n,i){if('source'===s.kind){var a=s.evaluate(t,e,r,n,i);return this._calculate(a,a,a,t)}return'composite'===s.kind?this._calculate(s.evaluate({zoom:ea(t.zoom)-1},e,r),s.evaluate({zoom:ea(t.zoom)},e,r),s.evaluate({zoom:ea(t.zoom)+1},e,r),t):s.value},t.prototype._calculate=function(o,a,i,s){return s.zoom>s.zoomHistory.lastIntegerZoom?{from:o,to:a}:{from:i,to:a}},t.prototype.interpolate=function(e){return e},t}(di),vi=function(e){this.specification=e};vi.prototype.possiblyEvaluate=function(o,t,e,a){if(void 0!==o.value){if('constant'===o.expression.kind){var r=o.expression.evaluate(t,null,{},e,a);return this._calculate(r,r,r,t)}return this._calculate(o.expression.evaluate(new ai(ea(t.zoom-1),t)),o.expression.evaluate(new ai(ea(t.zoom),t)),o.expression.evaluate(new ai(ea(t.zoom+1),t)),t)}},vi.prototype._calculate=function(o,a,i,s){return s.zoom>s.zoomHistory.lastIntegerZoom?{from:o,to:a}:{from:i,to:a}},vi.prototype.interpolate=function(e){return e};var gi=function(e){this.specification=e};gi.prototype.possiblyEvaluate=function(o,t,e,a){return!!o.expression.evaluate(t,null,{},e,a)},gi.prototype.interpolate=function(){return!1};var xi=function(o){for(var t in this.properties=o,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],o){var e=o[t];e.specification.overridable&&this.overridableProperties.push(t);var a=this.defaultPropertyValues[t]=new oi(e,void 0),r=this.defaultTransitionablePropertyValues[t]=new si(e);this.defaultTransitioningPropertyValues[t]=r.untransitioned(),this.defaultPossiblyEvaluatedValues[t]=a.possiblyEvaluate({})}};Tn('DataDrivenProperty',di),Tn('DataConstantProperty',yi),Tn('CrossFadedDataDrivenProperty',mi),Tn('CrossFadedProperty',vi),Tn('ColorRampProperty',gi);var bi=function(o){function t(t,a){if(o.call(this),this.id=t.id,this.type=t.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},'custom'!==t.type&&(this.metadata=(t=t).metadata,this.minzoom=t.minzoom,this.maxzoom=t.maxzoom,'background'!==t.type&&(this.source=t.source,this.sourceLayer=t['source-layer'],this.filter=t.filter),a.layout&&(this._unevaluatedLayout=new ci(a.layout)),a.paint)){for(var r in this._transitionablePaint=new ui(a.paint),t.paint)this.setPaintProperty(r,t.paint[r],{validate:!1});for(var n in t.layout)this.setLayoutProperty(n,t.layout[n],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new fi(a.paint)}}return o&&(t.__proto__=o),(t.prototype=Object.create(o&&o.prototype)).constructor=t,t.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},t.prototype.getLayoutProperty=function(e){return'visibility'===e?this.visibility:this._unevaluatedLayout.getValue(e)},t.prototype.setLayoutProperty=function(o,t,e){void 0===e&&(e={}),null!=t&&this._validate(En,'layers.'+this.id+'.layout.'+o,o,t,e)||('visibility'===o?this.visibility=t:this._unevaluatedLayout.setValue(o,t))},t.prototype.getPaintProperty=function(e){return sp(e,'-transition')?this._transitionablePaint.getTransition(e.slice(0,-11)):this._transitionablePaint.getValue(e)},t.prototype.setPaintProperty=function(l,t,e){if(void 0===e&&(e={}),null!=t&&this._validate(Cn,'layers.'+this.id+'.paint.'+l,l,t,e))return!1;if(sp(l,'-transition'))return this._transitionablePaint.setTransition(l.slice(0,-11),t||void 0),!1;var r=this._transitionablePaint._values[l],n='cross-faded-data-driven'===r.property.specification['property-type'],i=r.value.isDataDriven(),a=r.value;this._transitionablePaint.setValue(l,t),this._handleSpecialPaintPropertyUpdate(l);var o=this._transitionablePaint._values[l].value;return o.isDataDriven()||i||n||this._handleOverridablePaintPropertyUpdate(l,a,o)},t.prototype._handleSpecialPaintPropertyUpdate=function(){},t.prototype._handleOverridablePaintPropertyUpdate=function(){return!1},t.prototype.isHidden=function(e){return!!(this.minzoom&&e<this.minzoom)||!!(this.maxzoom&&e>=this.maxzoom)||'none'===this.visibility},t.prototype.updateTransitions=function(e){this._transitioningPaint=this._transitionablePaint.transitioned(e,this._transitioningPaint)},t.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},t.prototype.recalculate=function(o,t){o.getCrossfadeParameters&&(this._crossfadeParameters=o.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(o,void 0,t)),this.paint=this._transitioningPaint.possiblyEvaluate(o,void 0,t)},t.prototype.serialize=function(){var e={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(e.layout=e.layout||{},e.layout.visibility=this.visibility),pp(e,function(o,t){return void 0!==o&&('layout'!==t||Object.keys(o).length)&&('paint'!==t||Object.keys(o).length)})},t.prototype._validate=function(o,t,a,s,l){return void 0===l&&(l={}),(!l||!1!==l.validate)&&In(this,o.call(wn,{key:t,layerType:this.type,objectKey:a,value:s,styleSpec:zt,style:{glyphs:!0,sprite:!0}}))},t.prototype.is3D=function(){return!1},t.prototype.isTileClipped=function(){return!1},t.prototype.hasOffscreenPass=function(){return!1},t.prototype.resize=function(){},t.prototype.isStateDependent=function(){for(var o in this.paint._values){var t=this.paint.get(o);if(t instanceof hi&&Mr(t.property.specification)&&('source'===t.value.kind||'composite'===t.value.kind)&&t.value.isStateDependent)return!0}return!1},t}(It),wi={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},_i=function(o,t){this._structArray=o,this._pos1=t*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},Ai=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};Ai.serialize=function(o,t){return o._trim(),t&&(o.isTransferred=!0,t.push(o.arrayBuffer)),{length:o.length,arrayBuffer:o.arrayBuffer}},Ai.deserialize=function(o){var t=Object.create(this.prototype);return t.arrayBuffer=o.arrayBuffer,t.length=o.length,t.capacity=o.arrayBuffer.byteLength/t.bytesPerElement,t._refreshViews(),t},Ai.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Ai.prototype.clear=function(){this.length=0},Ai.prototype.resize=function(e){this.reserve(e),this.length=e},Ai.prototype.reserve=function(o){if(o>this.capacity){this.capacity=oa(o,ea(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var t=this.uint8;this._refreshViews(),t&&this.uint8.set(t)}},Ai.prototype._refreshViews=function(){throw new Error('_refreshViews() must be implemented by each concrete StructArray layout')};var Si=function(o){function t(){o.apply(this,arguments)}return o&&(t.__proto__=o),(t.prototype=Object.create(o&&o.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(o,t){var e=this.length;return this.resize(e+1),this.emplace(e,o,t)},t.prototype.emplace=function(o,t,e){var a=2*o;return this.int16[a+0]=t,this.int16[a+1]=e,o},t}(Ai);Si.prototype.bytesPerElement=4,Tn('StructArrayLayout2i4',Si);var zi=function(o){function t(){o.apply(this,arguments)}return o&&(t.__proto__=o),(t.prototype=Object.create(o&&o.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(o,t,e,a){var r=this.length;return this.resize(r+1),this.emplace(r,o,t,e,a)},t.prototype.emplace=function(o,t,e,r,n){var i=4*o;return this.int16[i+0]=t,this.int16[i+1]=e,this.int16[i+2]=r,this.int16[i+3]=n,o},t}(Ai);zi.prototype.bytesPerElement=8,Tn('StructArrayLayout4i8',zi);var Ci=function(o){function t(){o.apply(this,arguments)}return o&&(t.__proto__=o),(t.prototype=Object.create(o&&o.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(s,t,e,r,n,i){var a=this.length;return this.resize(a+1),this.emplace(a,s,t,e,r,n,i)},t.prototype.emplace=function(l,t,e,r,n,i,a){var o=6*l;return this.int16[o+0]=t,this.int16[o+1]=e,this.int16[o+2]=r,this.int16[o+3]=n,this.int16[o+4]=i,this.int16[o+5]=a,l},t}(Ai);Ci.prototype.bytesPerElement=12,Tn('StructArrayLayout2i4i12',Ci);var Ei=function(o){function t(){o.apply(this,arguments)}return o&&(t.__proto__=o),(t.prototype=Object.create(o&&o.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(s,t,e,r,n,i){var a=this.length;return this.resize(a+1),this.emplace(a,s,t,e,r,n,i)},t.prototype.emplace=function(l,t,e,r,n,i,a){var o=4*l,s=8*l;return this.int16[o+0]=t,this.int16[o+1]=e,this.uint8[s+4]=r,this.uint8[s+5]=n,this.uint8[s+6]=i,this.uint8[s+7]=a,l},t}(Ai);Ei.prototype.bytesPerElement=8,Tn('StructArrayLayout2i4ub8',Ei);var Pi=function(o){function t(){o.apply(this,arguments)}return o&&(t.__proto__=o),(t.prototype=Object.create(o&&o.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(o,t){var e=this.length;return this.resize(e+1),this.emplace(e,o,t)},t.prototype.emplace=function(o,t,e){var a=2*o;return this.float32[a+0]=t,this.float32[a+1]=e,o},t}(Ai);Pi.prototype.bytesPerElement=8,Tn('StructArrayLayout2f8',Pi);var uc=function(o){function t(){o.apply(this,arguments)}return o&&(t.__proto__=o),(t.prototype=Object.create(o&&o.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(d,t,e,r,n,i,a,o,s,c){var l=this.length;return this.resize(l+1),this.emplace(l,d,t,e,r,n,i,a,o,s,c)},t.prototype.emplace=function(d,t,e,r,n,i,a,o,s,u,l){var p=10*d;return this.uint16[p+0]=t,this.uint16[p+1]=e,this.uint16[p+2]=r,this.uint16[p+3]=n,this.uint16[p+4]=i,this.uint16[p+5]=a,this.uint16[p+6]=o,this.uint16[p+7]=s,this.uint16[p+8]=u,this.uint16[p+9]=l,d},t}(Ai);uc.prototype.bytesPerElement=20,Tn('StructArrayLayout10ui20',uc);var mc=function(o){function t(){o.apply(this,arguments)}return o&&(t.__proto__=o),(t.prototype=Object.create(o&&o.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(d,t,e,r,n,i,a,o,s,u,l,p){var c=this.length;return this.resize(c+1),this.emplace(c,d,t,e,r,n,i,a,o,s,u,l,p)},t.prototype.emplace=function(d,t,e,r,n,i,a,o,s,u,l,p,c){var m=12*d;return this.int16[m+0]=t,this.int16[m+1]=e,this.int16[m+2]=r,this.int16[m+3]=n,this.uint16[m+4]=i,this.uint16[m+5]=a,this.uint16[m+6]=o,this.uint16[m+7]=s,this.int16[m+8]=u,this.int16[m+9]=l,this.int16[m+10]=p,this.int16[m+11]=c,d},t}(Ai);mc.prototype.bytesPerElement=24,Tn('StructArrayLayout4i4ui4i24',mc);var Ti=function(o){function t(){o.apply(this,arguments)}return o&&(t.__proto__=o),(t.prototype=Object.create(o&&o.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(o,t,e){var a=this.length;return this.resize(a+1),this.emplace(a,o,t,e)},t.prototype.emplace=function(o,t,e,a){var r=3*o;return this.float32[r+0]=t,this.float32[r+1]=e,this.float32[r+2]=a,o},t}(Ai);Ti.prototype.bytesPerElement=12,Tn('StructArrayLayout3f12',Ti);var Vi=function(o){function t(){o.apply(this,arguments)}return o&&(t.__proto__=o),(t.prototype=Object.create(o&&o.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(o){var t=this.length;return this.resize(t+1),this.emplace(t,o)},t.prototype.emplace=function(o,t){return this.uint32[1*o+0]=t,o},t}(Ai);Vi.prototype.bytesPerElement=4,Tn('StructArrayLayout1ul4',Vi);var Fi=function(o){function t(){o.apply(this,arguments)}return o&&(t.__proto__=o),(t.prototype=Object.create(o&&o.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(p,t,e,r,n,i,a,o,s){var d=this.length;return this.resize(d+1),this.emplace(d,p,t,e,r,n,i,a,o,s)},t.prototype.emplace=function(d,t,e,r,n,i,a,o,s,c){var l=10*d;return this.int16[l+0]=t,this.int16[l+1]=e,this.int16[l+2]=r,this.int16[l+3]=n,this.int16[l+4]=i,this.int16[l+5]=a,this.uint32[5*d+3]=o,this.uint16[l+8]=s,this.uint16[l+9]=c,d},t}(Ai);Fi.prototype.bytesPerElement=20,Tn('StructArrayLayout6i1ul2ui20',Fi);var Di=function(o){function t(){o.apply(this,arguments)}return o&&(t.__proto__=o),(t.prototype=Object.create(o&&o.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(s,t,e,r,n,i){var a=this.length;return this.resize(a+1),this.emplace(a,s,t,e,r,n,i)},t.prototype.emplace=function(l,t,e,r,n,i,a){var o=6*l;return this.int16[o+0]=t,this.int16[o+1]=e,this.int16[o+2]=r,this.int16[o+3]=n,this.int16[o+4]=i,this.int16[o+5]=a,l},t}(Ai);Di.prototype.bytesPerElement=12,Tn('StructArrayLayout2i2i2i12',Di);var Li=function(o){function t(){o.apply(this,arguments)}return o&&(t.__proto__=o),(t.prototype=Object.create(o&&o.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(o,t,e,r,n){var i=this.length;return this.resize(i+1),this.emplace(i,o,t,e,r,n)},t.prototype.emplace=function(l,t,e,r,n,i){var a=4*l,o=8*l;return this.float32[a+0]=t,this.float32[a+1]=e,this.float32[a+2]=r,this.int16[o+6]=n,this.int16[o+7]=i,l},t}(Ai);Li.prototype.bytesPerElement=16,Tn('StructArrayLayout2f1f2i16',Li);var Ri=function(o){function t(){o.apply(this,arguments)}return o&&(t.__proto__=o),(t.prototype=Object.create(o&&o.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(o,t,e,a){var r=this.length;return this.resize(r+1),this.emplace(r,o,t,e,a)},t.prototype.emplace=function(s,t,e,r,n){var i=12*s,a=3*s;return this.uint8[i+0]=t,this.uint8[i+1]=e,this.float32[a+1]=r,this.float32[a+2]=n,s},t}(Ai);Ri.prototype.bytesPerElement=12,Tn('StructArrayLayout2ub2f12',Ri);var Oi=function(o){function t(){o.apply(this,arguments)}return o&&(t.__proto__=o),(t.prototype=Object.create(o&&o.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(o,t,e){var a=this.length;return this.resize(a+1),this.emplace(a,o,t,e)},t.prototype.emplace=function(o,t,e,a){var r=3*o;return this.uint16[r+0]=t,this.uint16[r+1]=e,this.uint16[r+2]=a,o},t}(Ai);Oi.prototype.bytesPerElement=6,Tn('StructArrayLayout3ui6',Oi);var Ui=function(o){function t(){o.apply(this,arguments)}return o&&(t.__proto__=o),(t.prototype=Object.create(o&&o.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(g,t,e,r,n,i,a,o,s,u,l,p,c,_,f,y,d){var m=this.length;return this.resize(m+1),this.emplace(m,g,t,e,r,n,i,a,o,s,u,l,p,c,_,f,y,d)},t.prototype.emplace=function(_,t,e,r,n,i,a,o,s,u,l,p,c,h,f,y,d,m){var v=24*_,g=12*_,x=48*_;return this.int16[v+0]=t,this.int16[v+1]=e,this.uint16[v+2]=r,this.uint16[v+3]=n,this.uint32[g+2]=i,this.uint32[g+3]=a,this.uint32[g+4]=o,this.uint16[v+10]=s,this.uint16[v+11]=u,this.uint16[v+12]=l,this.float32[g+7]=p,this.float32[g+8]=c,this.uint8[x+36]=h,this.uint8[x+37]=f,this.uint8[x+38]=y,this.uint32[g+10]=d,this.int16[v+22]=m,_},t}(Ai);Ui.prototype.bytesPerElement=48,Tn('StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48',Ui);var ji=function(o){function t(){o.apply(this,arguments)}return o&&(t.__proto__=o),(t.prototype=Object.create(o&&o.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(T,t,e,r,n,i,a,o,s,u,l,p,c,h,f,y,d,m,v,g,x,b,w,_,E,S,A,I){var k=this.length;return this.resize(k+1),this.emplace(k,T,t,e,r,n,i,a,o,s,u,l,p,c,h,f,y,d,m,v,g,x,b,w,_,E,S,A,I)},t.prototype.emplace=function(T,t,e,r,n,i,a,o,s,u,l,p,c,h,f,y,d,m,v,g,x,b,w,_,A,S,k,I,z){var C=34*T,E=17*T;return this.int16[C+0]=t,this.int16[C+1]=e,this.int16[C+2]=r,this.int16[C+3]=n,this.int16[C+4]=i,this.int16[C+5]=a,this.int16[C+6]=o,this.int16[C+7]=s,this.uint16[C+8]=u,this.uint16[C+9]=l,this.uint16[C+10]=p,this.uint16[C+11]=c,this.uint16[C+12]=h,this.uint16[C+13]=f,this.uint16[C+14]=y,this.uint16[C+15]=d,this.uint16[C+16]=m,this.uint16[C+17]=v,this.uint16[C+18]=g,this.uint16[C+19]=x,this.uint16[C+20]=b,this.uint16[C+21]=w,this.uint16[C+22]=_,this.uint32[E+12]=A,this.float32[E+13]=S,this.float32[E+14]=k,this.float32[E+15]=I,this.float32[E+16]=z,T},t}(Ai);ji.prototype.bytesPerElement=68,Tn('StructArrayLayout8i15ui1ul4f68',ji);var qi=function(o){function t(){o.apply(this,arguments)}return o&&(t.__proto__=o),(t.prototype=Object.create(o&&o.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(o){var t=this.length;return this.resize(t+1),this.emplace(t,o)},t.prototype.emplace=function(o,t){return this.float32[1*o+0]=t,o},t}(Ai);qi.prototype.bytesPerElement=4,Tn('StructArrayLayout1f4',qi);var gc=function(o){function t(){o.apply(this,arguments)}return o&&(t.__proto__=o),(t.prototype=Object.create(o&&o.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(o,t,e){var a=this.length;return this.resize(a+1),this.emplace(a,o,t,e)},t.prototype.emplace=function(o,t,e,a){var r=3*o;return this.int16[r+0]=t,this.int16[r+1]=e,this.int16[r+2]=a,o},t}(Ai);gc.prototype.bytesPerElement=6,Tn('StructArrayLayout3i6',gc);var Ki=function(o){function t(){o.apply(this,arguments)}return o&&(t.__proto__=o),(t.prototype=Object.create(o&&o.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(o,t,e){var a=this.length;return this.resize(a+1),this.emplace(a,o,t,e)},t.prototype.emplace=function(o,t,e,a){var r=4*o;return this.uint32[2*o+0]=t,this.uint16[r+2]=e,this.uint16[r+3]=a,o},t}(Ai);Ki.prototype.bytesPerElement=8,Tn('StructArrayLayout1ul2ui8',Ki);var Gi=function(o){function t(){o.apply(this,arguments)}return o&&(t.__proto__=o),(t.prototype=Object.create(o&&o.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(o,t){var e=this.length;return this.resize(e+1),this.emplace(e,o,t)},t.prototype.emplace=function(o,t,e){var a=2*o;return this.uint16[a+0]=t,this.uint16[a+1]=e,o},t}(Ai);Gi.prototype.bytesPerElement=4,Tn('StructArrayLayout2ui4',Gi);var Zi=function(o){function t(){o.apply(this,arguments)}return o&&(t.__proto__=o),(t.prototype=Object.create(o&&o.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(o){var t=this.length;return this.resize(t+1),this.emplace(t,o)},t.prototype.emplace=function(o,t){return this.uint16[1*o+0]=t,o},t}(Ai);Zi.prototype.bytesPerElement=2,Tn('StructArrayLayout1ui2',Zi);var Xi=function(o){function t(){o.apply(this,arguments)}return o&&(t.__proto__=o),(t.prototype=Object.create(o&&o.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(o,t,e,a){var r=this.length;return this.resize(r+1),this.emplace(r,o,t,e,a)},t.prototype.emplace=function(o,t,e,r,n){var i=4*o;return this.float32[i+0]=t,this.float32[i+1]=e,this.float32[i+2]=r,this.float32[i+3]=n,o},t}(Ai);Xi.prototype.bytesPerElement=16,Tn('StructArrayLayout4f16',Xi);var yc=function(o){function t(){o.apply(this,arguments)}o&&(t.__proto__=o),(t.prototype=Object.create(o&&o.prototype)).constructor=t;var e={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return e.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},e.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},e.x1.get=function(){return this._structArray.int16[this._pos2+2]},e.y1.get=function(){return this._structArray.int16[this._pos2+3]},e.x2.get=function(){return this._structArray.int16[this._pos2+4]},e.y2.get=function(){return this._structArray.int16[this._pos2+5]},e.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},e.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},e.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},e.anchorPoint.get=function(){return new xd(this.anchorPointX,this.anchorPointY)},Object.defineProperties(t.prototype,e),t}(_i);yc.prototype.size=20;var Hi=function(o){function t(){o.apply(this,arguments)}return o&&(t.__proto__=o),(t.prototype=Object.create(o&&o.prototype)).constructor=t,t.prototype.get=function(e){return new yc(this,e)},t}(Fi);Tn('CollisionBoxArray',Hi);var Yi=function(o){function t(){o.apply(this,arguments)}o&&(t.__proto__=o),(t.prototype=Object.create(o&&o.prototype)).constructor=t;var e={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return e.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},e.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},e.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},e.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},e.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},e.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},e.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},e.segment.get=function(){return this._structArray.uint16[this._pos2+10]},e.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},e.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},e.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},e.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},e.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},e.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},e.placedOrientation.set=function(e){this._structArray.uint8[this._pos1+37]=e},e.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},e.hidden.set=function(e){this._structArray.uint8[this._pos1+38]=e},e.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},e.crossTileID.set=function(e){this._structArray.uint32[this._pos4+10]=e},e.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(t.prototype,e),t}(_i);Yi.prototype.size=48;var $i=function(o){function t(){o.apply(this,arguments)}return o&&(t.__proto__=o),(t.prototype=Object.create(o&&o.prototype)).constructor=t,t.prototype.get=function(e){return new Yi(this,e)},t}(Ui);Tn('PlacedSymbolArray',$i);var Wi=function(o){function t(){o.apply(this,arguments)}o&&(t.__proto__=o),(t.prototype=Object.create(o&&o.prototype)).constructor=t;var e={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return e.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},e.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},e.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},e.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},e.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},e.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},e.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},e.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},e.key.get=function(){return this._structArray.uint16[this._pos2+8]},e.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},e.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},e.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},e.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},e.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},e.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},e.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},e.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},e.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},e.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},e.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},e.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},e.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},e.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},e.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},e.crossTileID.set=function(e){this._structArray.uint32[this._pos4+12]=e},e.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},e.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},e.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},e.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(t.prototype,e),t}(_i);Wi.prototype.size=68;var Qi=function(o){function t(){o.apply(this,arguments)}return o&&(t.__proto__=o),(t.prototype=Object.create(o&&o.prototype)).constructor=t,t.prototype.get=function(e){return new Wi(this,e)},t}(ji);Tn('SymbolInstanceArray',Qi);var _c=function(o){function t(){o.apply(this,arguments)}return o&&(t.__proto__=o),(t.prototype=Object.create(o&&o.prototype)).constructor=t,t.prototype.getoffsetX=function(e){return this.float32[1*e+0]},t}(qi);Tn('GlyphOffsetArray',_c);var fc=function(o){function t(){o.apply(this,arguments)}return o&&(t.__proto__=o),(t.prototype=Object.create(o&&o.prototype)).constructor=t,t.prototype.getx=function(e){return this.int16[3*e+0]},t.prototype.gety=function(e){return this.int16[3*e+1]},t.prototype.gettileUnitDistanceFromAnchor=function(e){return this.int16[3*e+2]},t}(gc);Tn('SymbolLineVertexArray',fc);var ra=function(o){function t(){o.apply(this,arguments)}o&&(t.__proto__=o),(t.prototype=Object.create(o&&o.prototype)).constructor=t;var e={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return e.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},e.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},e.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(t.prototype,e),t}(_i);ra.prototype.size=8;var na=function(o){function t(){o.apply(this,arguments)}return o&&(t.__proto__=o),(t.prototype=Object.create(o&&o.prototype)).constructor=t,t.prototype.get=function(e){return new ra(this,e)},t}(Ki);Tn('FeatureIndexArray',na);var ia=ei([{name:'a_pos',components:2,type:'Int16'}],4).members,aa=function(e){void 0===e&&(e=[]),this.segments=e};aa.prototype.prepareSegment=function(o,t,e,a){var r=this.segments[this.segments.length-1];return o>aa.MAX_VERTEX_ARRAY_LENGTH&&cp('Max vertices per segment is '+aa.MAX_VERTEX_ARRAY_LENGTH+': bucket requested '+o),(!r||r.vertexLength+o>aa.MAX_VERTEX_ARRAY_LENGTH||r.sortKey!==a)&&(r={vertexOffset:t.length,primitiveOffset:e.length,vertexLength:0,primitiveLength:0},void 0!==a&&(r.sortKey=a),this.segments.push(r)),r},aa.prototype.get=function(){return this.segments},aa.prototype.destroy=function(){for(var o=0,t=this.segments,e;o<t.length;o+=1)for(var a in e=t[o],e.vaos)e.vaos[a].destroy()},aa.simpleSegment=function(o,a,i,s){return new aa([{vertexOffset:o,primitiveOffset:a,vertexLength:i,primitiveLength:s,vaos:{},sortKey:0}])},aa.MAX_VERTEX_ARRAY_LENGTH=65535,Tn('SegmentVector',aa);var hc=ei([{name:'a_pattern_from',components:4,type:'Uint16'},{name:'a_pattern_to',components:4,type:'Uint16'},{name:'a_pixel_ratio_from',components:1,type:'Uint16'},{name:'a_pixel_ratio_to',components:1,type:'Uint16'}]),ua=t(function(e){e.exports=function(p,t){var e,r,n,i,a,o,s,d;for(r=p.length-(e=3&p.length),n=t,a=3432918353,o=461845907,d=0;d<r;)s=255&p.charCodeAt(d)|(255&p.charCodeAt(++d))<<8|(255&p.charCodeAt(++d))<<16|(255&p.charCodeAt(++d))<<24,++d,n=27492+(65535&(i=4294967295&5*(65535&(n=(n^=s=4294967295&(65535&(s=(s=4294967295&(65535&s)*a+((65535&(s>>>16)*a)<<16))<<15|s>>>17))*o+((65535&(s>>>16)*o)<<16))<<13|n>>>19))+((65535&5*(n>>>16))<<16)))+((65535&58964+(i>>>16))<<16);switch(s=0,e){case 3:s^=(255&p.charCodeAt(d+2))<<16;case 2:s^=(255&p.charCodeAt(d+1))<<8;case 1:n^=s=4294967295&(65535&(s=(s=4294967295&(65535&(s^=255&p.charCodeAt(d)))*a+((65535&(s>>>16)*a)<<16))<<15|s>>>17))*o+((65535&(s>>>16)*o)<<16);}return n^=p.length,n=4294967295&2246822507*(65535&(n^=n>>>16))+((65535&2246822507*(n>>>16))<<16),n=4294967295&3266489909*(65535&(n^=n>>>13))+((65535&3266489909*(n>>>16))<<16),(n^=n>>>16)>>>0}}),la=t(function(e){e.exports=function(o,t){for(var e=o.length,n=t^e,i=0,a;4<=e;)a=1540483477*(65535&(a=255&o.charCodeAt(i)|(255&o.charCodeAt(++i))<<8|(255&o.charCodeAt(++i))<<16|(255&o.charCodeAt(++i))<<24))+((65535&1540483477*(a>>>16))<<16),n=1540483477*(65535&n)+((65535&1540483477*(n>>>16))<<16)^(a=1540483477*(65535&(a^=a>>>24))+((65535&1540483477*(a>>>16))<<16)),e-=4,++i;switch(e){case 3:n^=(255&o.charCodeAt(i+2))<<16;case 2:n^=(255&o.charCodeAt(i+1))<<8;case 1:n=1540483477*(65535&(n^=255&o.charCodeAt(i)))+((65535&1540483477*(n>>>16))<<16);}return n=1540483477*(65535&(n^=n>>>13))+((65535&1540483477*(n>>>16))<<16),(n^=n>>>15)>>>0}}),pa=ua;pa.murmur3=ua,pa.murmur2=la;var ca=function(){this.ids=[],this.positions=[],this.indexed=!1};ca.prototype.add=function(o,t,e,a){this.ids.push(sa(o)),this.positions.push(t,e,a)},ca.prototype.getPositions=function(o){for(var t=sa(o),e=0,r=this.ids.length-1,n;e<r;)n=e+r>>1,this.ids[n]>=t?r=n:e=n+1;for(var i=[];this.ids[e]===t;)i.push({index:this.positions[3*e],start:this.positions[3*e+1],end:this.positions[3*e+2]}),e++;return i},ca.serialize=function(o,t){var e=new Float64Array(o.ids),a=new Uint32Array(o.positions);return function l(t,e,r,n){for(;r<n;){for(var i=t[r+n>>1],a=r-1,o=n+1;;){do a++;while(t[a]<i);do o--;while(t[o]>i);if(a>=o)break;da(t,a,o),da(e,3*a,3*o),da(e,3*a+1,3*o+1),da(e,3*a+2,3*o+2)}o-r<n-o?(l(t,e,r,o),r=o+1):(l(t,e,o+1,n),n=o)}}(e,a,0,e.length-1),t&&t.push(e.buffer,a.buffer),{ids:e,positions:a}},ca.deserialize=function(o){var t=new ca;return t.ids=o.ids,t.positions=o.positions,t.indexed=!0,t};var fa=9007199254740991;Tn('FeaturePositionMap',ca);var ya=function(o,t){this.gl=o.gl,this.location=t},va=function(o){function t(t,a){o.call(this,t,a),this.current=0}return o&&(t.__proto__=o),(t.prototype=Object.create(o&&o.prototype)).constructor=t,t.prototype.set=function(e){this.current!==e&&(this.current=e,this.gl.uniform1i(this.location,e))},t}(ya),ga=function(o){function t(t,a){o.call(this,t,a),this.current=0}return o&&(t.__proto__=o),(t.prototype=Object.create(o&&o.prototype)).constructor=t,t.prototype.set=function(e){this.current!==e&&(this.current=e,this.gl.uniform1f(this.location,e))},t}(ya),xa=function(o){function t(t,a){o.call(this,t,a),this.current=[0,0]}return o&&(t.__proto__=o),(t.prototype=Object.create(o&&o.prototype)).constructor=t,t.prototype.set=function(e){e[0]===this.current[0]&&e[1]===this.current[1]||(this.current=e,this.gl.uniform2f(this.location,e[0],e[1]))},t}(ya),ba=function(o){function t(t,a){o.call(this,t,a),this.current=[0,0,0]}return o&&(t.__proto__=o),(t.prototype=Object.create(o&&o.prototype)).constructor=t,t.prototype.set=function(e){e[0]===this.current[0]&&e[1]===this.current[1]&&e[2]===this.current[2]||(this.current=e,this.gl.uniform3f(this.location,e[0],e[1],e[2]))},t}(ya),wa=function(o){function t(t,a){o.call(this,t,a),this.current=[0,0,0,0]}return o&&(t.__proto__=o),(t.prototype=Object.create(o&&o.prototype)).constructor=t,t.prototype.set=function(e){e[0]===this.current[0]&&e[1]===this.current[1]&&e[2]===this.current[2]&&e[3]===this.current[3]||(this.current=e,this.gl.uniform4f(this.location,e[0],e[1],e[2],e[3]))},t}(ya),_a=function(o){function t(t,a){o.call(this,t,a),this.current=Wt.transparent}return o&&(t.__proto__=o),(t.prototype=Object.create(o&&o.prototype)).constructor=t,t.prototype.set=function(e){e.r===this.current.r&&e.g===this.current.g&&e.b===this.current.b&&e.a===this.current.a||(this.current=e,this.gl.uniform4f(this.location,e.r,e.g,e.b,e.a))},t}(ya),Aa=new Float32Array(16),Sa=function(o){function t(t,a){o.call(this,t,a),this.current=Aa}return o&&(t.__proto__=o),(t.prototype=Object.create(o&&o.prototype)).constructor=t,t.prototype.set=function(o){if(o[12]!==this.current[12]||o[0]!==this.current[0])return this.current=o,void this.gl.uniformMatrix4fv(this.location,!1,o);for(var t=1;16>t;t++)if(o[t]!==this.current[t]){this.current=o,this.gl.uniformMatrix4fv(this.location,!1,o);break}},t}(ya),ka=function(o,t,e){this.value=o,this.uniformNames=t.map(function(e){return'u_'+e}),this.type=e};ka.prototype.setUniform=function(o,t,e){o.set(e.constantOr(this.value))},ka.prototype.getBinding=function(o,t){return'color'===this.type?new _a(o,t):new ga(o,t)};var za=function(o,t){this.uniformNames=t.map(function(e){return'u_'+e}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};za.prototype.setConstantPatternPositions=function(o,t){this.pixelRatioFrom=t.pixelRatio,this.pixelRatioTo=o.pixelRatio,this.patternFrom=t.tlbr,this.patternTo=o.tlbr},za.prototype.setUniform=function(o,t,e,a){var r='u_pattern_to'===a?this.patternTo:'u_pattern_from'===a?this.patternFrom:'u_pixel_ratio_to'===a?this.pixelRatioTo:'u_pixel_ratio_from'===a?this.pixelRatioFrom:null;r&&o.set(r)},za.prototype.getBinding=function(o,t,e){return'u_pattern'===e.substr(0,9)?new wa(o,t):new ga(o,t)};var Ca=function(o,t,e,a){this.expression=o,this.type=e,this.maxValue=0,this.paintVertexAttributes=t.map(function(o){return{name:'a_'+o,type:'Float32',components:'color'===e?2:1,offset:0}}),this.paintVertexArray=new a};Ca.prototype.populatePaintArray=function(s,t,e,r,n){var i=this.paintVertexArray.length,a=this.expression.evaluate(new ai(0),t,{},r,[],n);this.paintVertexArray.resize(s),this._setPaintValue(i,s,a)},Ca.prototype.updatePaintArray=function(o,t,e,a){var r=this.expression.evaluate({zoom:0},e,a);this._setPaintValue(o,t,r)},Ca.prototype._setPaintValue=function(o,t,e){if('color'===this.type)for(var r=ma(e),n=o;n<t;n++)this.paintVertexArray.emplace(n,r[0],r[1]);else{for(var i=o;i<t;i++)this.paintVertexArray.emplace(i,e);this.maxValue=oa(this.maxValue,B(e))}},Ca.prototype.upload=function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Ca.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var Ea=function(o,t,e,r,n,i){this.expression=o,this.uniformNames=t.map(function(e){return'u_'+e+'_t'}),this.type=e,this.useIntegerZoom=r,this.zoom=n,this.maxValue=0,this.paintVertexAttributes=t.map(function(o){return{name:'a_'+o,type:'Float32',components:'color'===e?4:2,offset:0}}),this.paintVertexArray=new i};Ea.prototype.populatePaintArray=function(l,t,e,r,n){var i=this.expression.evaluate(new ai(this.zoom),t,{},r,[],n),a=this.expression.evaluate(new ai(this.zoom+1),t,{},r,[],n),o=this.paintVertexArray.length;this.paintVertexArray.resize(l),this._setPaintValue(o,l,i,a)},Ea.prototype.updatePaintArray=function(o,t,e,r){var n=this.expression.evaluate({zoom:this.zoom},e,r),i=this.expression.evaluate({zoom:this.zoom+1},e,r);this._setPaintValue(o,t,n,i)},Ea.prototype._setPaintValue=function(l,t,e,r){if('color'===this.type)for(var n=ma(e),i=ma(r),a=l;a<t;a++)this.paintVertexArray.emplace(a,n[0],n[1],i[0],i[1]);else{for(var o=l;o<t;o++)this.paintVertexArray.emplace(o,e,r);this.maxValue=oa(this.maxValue,B(e),B(r))}},Ea.prototype.upload=function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Ea.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Ea.prototype.setUniform=function(o,t){var e=this.useIntegerZoom?ea(t.zoom):t.zoom,a=ko(this.expression.interpolationFactor(e,this.zoom,this.zoom+1),0,1);o.set(a)},Ea.prototype.getBinding=function(o,t){return new ga(o,t)};var Pa=function(o,t,e,r,n,i){this.expression=o,this.type=t,this.useIntegerZoom=e,this.zoom=r,this.layerId=i,this.zoomInPaintVertexArray=new n,this.zoomOutPaintVertexArray=new n};Pa.prototype.populatePaintArray=function(o,t,e){var a=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(o),this.zoomOutPaintVertexArray.resize(o),this._setPaintValues(a,o,t.patterns&&t.patterns[this.layerId],e)},Pa.prototype.updatePaintArray=function(o,t,e,a,r){this._setPaintValues(o,t,e.patterns&&e.patterns[this.layerId],r)},Pa.prototype._setPaintValues=function(l,t,e,r){if(r&&e){var n=r[e.min],i=r[e.mid],a=r[e.max];if(n&&i&&a)for(var o=l;o<t;o++)this.zoomInPaintVertexArray.emplace(o,i.tl[0],i.tl[1],i.br[0],i.br[1],n.tl[0],n.tl[1],n.br[0],n.br[1],i.pixelRatio,n.pixelRatio),this.zoomOutPaintVertexArray.emplace(o,i.tl[0],i.tl[1],i.br[0],i.br[1],a.tl[0],a.tl[1],a.br[0],a.br[1],i.pixelRatio,a.pixelRatio)}},Pa.prototype.upload=function(e){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=e.createVertexBuffer(this.zoomInPaintVertexArray,hc.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=e.createVertexBuffer(this.zoomOutPaintVertexArray,hc.members,this.expression.isStateDependent))},Pa.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var Ma=function(d,t,e){this.binders={},this._buffers=[];var r=[];for(var n in d.paint._values)if(e(n)){var i=d.paint.get(n);if(i instanceof hi&&Mr(i.property.specification)){var a=Ia(n,d.type),o=i.value,s=i.property.specification.type,u=i.property.useIntegerZoom,l=i.property.specification['property-type'],p='cross-faded'===l||'cross-faded-data-driven'===l;if('constant'===o.kind)this.binders[n]=p?new za(o.value,a):new ka(o.value,a,s),r.push('/u_'+n);else if('source'===o.kind||p){var c=Va(n,s,'source');this.binders[n]=p?new Pa(o,s,u,t,c,d.id):new Ca(o,a,s,c),r.push('/a_'+n)}else{var m=Va(n,s,'composite');this.binders[n]=new Ea(o,a,s,u,t,m),r.push('/z_'+n)}}}this.cacheKey=r.sort().join('')};Ma.prototype.getMaxValue=function(o){var t=this.binders[o];return t instanceof Ca||t instanceof Ea?t.maxValue:0},Ma.prototype.populatePaintArrays=function(s,t,e,r,n){for(var i in this.binders){var a=this.binders[i];(a instanceof Ca||a instanceof Ea||a instanceof Pa)&&a.populatePaintArray(s,t,e,r,n)}},Ma.prototype.setConstantPatternPositions=function(o,t){for(var e in this.binders){var a=this.binders[e];a instanceof za&&a.setConstantPatternPositions(o,t)}},Ma.prototype.updatePaintArrays=function(d,t,e,r,n){var i=!1;for(var a in d)for(var o=0,s=t.getPositions(a);o<s.length;o+=1){var u=s[o],l=e.feature(u.index);for(var p in this.binders){var c=this.binders[p];if((c instanceof Ca||c instanceof Ea||c instanceof Pa)&&!0===c.expression.isStateDependent){var m=r.paint.get(p);c.expression=m.value,c.updatePaintArray(u.start,u.end,l,d[a],n),i=!0}}}return i},Ma.prototype.defines=function(){var o=[];for(var t in this.binders){var e=this.binders[t];(e instanceof ka||e instanceof za)&&o.push.apply(o,e.uniformNames.map(function(e){return'#define HAS_UNIFORM_'+e}))}return o},Ma.prototype.getBinderAttributes=function(){var o=[];for(var t in this.binders){var e=this.binders[t];if(e instanceof Ca||e instanceof Ea)for(var a=0;a<e.paintVertexAttributes.length;a++)o.push(e.paintVertexAttributes[a].name);else if(e instanceof Pa)for(var r=0;r<hc.members.length;r++)o.push(hc.members[r].name)}return o},Ma.prototype.getBinderUniforms=function(){var o=[];for(var t in this.binders){var e=this.binders[t];if(e instanceof ka||e instanceof za||e instanceof Ea)for(var a=0,r=e.uniformNames;a<r.length;a+=1)o.push(r[a])}return o},Ma.prototype.getPaintVertexBuffers=function(){return this._buffers},Ma.prototype.getUniforms=function(l,t){var e=[];for(var r in this.binders){var p=this.binders[r];if(p instanceof ka||p instanceof za||p instanceof Ea)for(var i=0,a=p.uniformNames,o;i<a.length;i+=1)if(o=a[i],t[o]){var d=p.getBinding(l,t[o],o);e.push({name:o,property:r,binding:d})}}return e},Ma.prototype.setUniforms=function(l,t,e,r){for(var n=0,i=t;n<i.length;n+=1){var a=i[n],o=a.name,s=a.property;this.binders[s].setUniform(a.binding,r,e.get(s),o)}},Ma.prototype.updatePaintBuffers=function(o){for(var t in this._buffers=[],this.binders){var e=this.binders[t];if(o&&e instanceof Pa){var a=2===o.fromScale?e.zoomInPaintVertexBuffer:e.zoomOutPaintVertexBuffer;a&&this._buffers.push(a)}else(e instanceof Ca||e instanceof Ea)&&e.paintVertexBuffer&&this._buffers.push(e.paintVertexBuffer)}},Ma.prototype.upload=function(o){for(var t in this.binders){var e=this.binders[t];(e instanceof Ca||e instanceof Ea||e instanceof Pa)&&e.upload(o)}this.updatePaintBuffers()},Ma.prototype.destroy=function(){for(var o in this.binders){var t=this.binders[o];(t instanceof Ca||t instanceof Ea||t instanceof Pa)&&t.destroy()}};var Ba=function(o,t,e){void 0===e&&(e=function(){return!0}),this.programConfigurations={};for(var r=0,n=o,i;r<n.length;r+=1)i=n[r],this.programConfigurations[i.id]=new Ma(i,t,e);this.needsUpload=!1,this._featureMap=new ca,this._bufferOffset=0};Ba.prototype.populatePaintArrays=function(s,t,e,r,n,i){for(var a in this.programConfigurations)this.programConfigurations[a].populatePaintArrays(s,t,r,n,i);void 0!==t.id&&this._featureMap.add(t.id,e,this._bufferOffset,s),this._bufferOffset=s,this.needsUpload=!0},Ba.prototype.updatePaintArrays=function(s,t,e,r){for(var n=0,i=e,a;n<i.length;n+=1)a=i[n],this.needsUpload=this.programConfigurations[a.id].updatePaintArrays(s,this._featureMap,t,a,r)||this.needsUpload},Ba.prototype.get=function(e){return this.programConfigurations[e]},Ba.prototype.upload=function(o){if(this.needsUpload){for(var t in this.programConfigurations)this.programConfigurations[t].upload(o);this.needsUpload=!1}},Ba.prototype.destroy=function(){for(var e in this.programConfigurations)this.programConfigurations[e].destroy()},Tn('ConstantBinder',ka),Tn('CrossFadedConstantBinder',za),Tn('SourceExpressionBinder',Ca),Tn('CrossFadedCompositeBinder',Pa),Tn('CompositeExpressionBinder',Ea),Tn('ProgramConfiguration',Ma,{omit:['_buffers']}),Tn('ProgramConfigurationSet',Ba);var Ta=16383,xc=-Ta-1,La=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(e){return e.id}),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new Si,this.indexArray=new Oi,this.segments=new aa,this.programConfigurations=new Ba(e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter(function(e){return e.isStateDependent()}).map(function(e){return e.id})};La.prototype.populate=function(T,t,e){var r=this.layers[0],n=[],i=null;'circle'===r.type&&(i=r.layout.get('circle-sort-key'));for(var a=0,o=T;a<o.length;a+=1){var s=o[a],u=s.feature,l=s.id,E=s.index,S=s.sourceLayerIndex,C=this.layers[0]._featureFilter.needGeometry,f={type:u.type,id:l,properties:u.properties,geometry:C?Fa(u):[]};if(this.layers[0]._featureFilter.filter(new ai(this.zoom),f,e)){C||(f.geometry=Fa(u));var y=i?i.evaluate(f,{},e):void 0;n.push({id:l,properties:u.properties,type:u.type,sourceLayerIndex:S,index:E,geometry:f.geometry,patterns:{},sortKey:y})}}i&&n.sort(function(o,t){return o.sortKey-t.sortKey});for(var I=0,m=n;I<m.length;I+=1){var v=m[I],g=v.geometry,x=v.index,b=v.sourceLayerIndex,w=T[x].feature;this.addFeature(v,g,x,e),t.featureIndex.insert(w,g,x,b,this.index)}},La.prototype.update=function(o,t,e){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,t,this.stateDependentLayers,e)},La.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},La.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},La.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,ia),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},La.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},La.prototype.addFeature=function(d,t,e,r){for(var n=0,i=t;n<i.length;n+=1)for(var a=0,o=i[n];a<o.length;a+=1){var s=o[a],u=s.x,l=s.y;if(!(0>u||8192<=u||0>l||8192<=l)){var p=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,d.sortKey),c=p.vertexLength;Ra(this.layoutVertexArray,u,l,-1,-1),Ra(this.layoutVertexArray,u,l,1,-1),Ra(this.layoutVertexArray,u,l,1,1),Ra(this.layoutVertexArray,u,l,-1,1),this.indexArray.emplaceBack(c,c+1,c+2),this.indexArray.emplaceBack(c,c+3,c+2),p.vertexLength+=4,p.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,d,e,{},r)},Tn('CircleBucket',La,{omit:['layers']});var Ua=new xi({"circle-sort-key":new di(zt.layout_circle['circle-sort-key'])}),vc={paint:new xi({"circle-radius":new di(zt.paint_circle['circle-radius']),"circle-color":new di(zt.paint_circle['circle-color']),"circle-blur":new di(zt.paint_circle['circle-blur']),"circle-opacity":new di(zt.paint_circle['circle-opacity']),"circle-translate":new yi(zt.paint_circle['circle-translate']),"circle-translate-anchor":new yi(zt.paint_circle['circle-translate-anchor']),"circle-pitch-scale":new yi(zt.paint_circle['circle-pitch-scale']),"circle-pitch-alignment":new yi(zt.paint_circle['circle-pitch-alignment']),"circle-stroke-width":new di(zt.paint_circle['circle-stroke-width']),"circle-stroke-color":new di(zt.paint_circle['circle-stroke-color']),"circle-stroke-opacity":new di(zt.paint_circle['circle-stroke-opacity'])}),layout:Ua},ro='undefined'==typeof Float32Array?Array:Float32Array;rp||(rp=function(){for(var o=arguments,t=0,e=arguments.length;e--;)t+=o[e]*o[e];return N(t)});var no;no=new ro(3),ro!=Float32Array&&(no[0]=0,no[1]=0,no[2]=0),function(){var e=new ro(4);ro!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0)}();var oo=(function(){var e=new ro(2);ro!=Float32Array&&(e[0]=0,e[1]=0)}(),function(o){function t(t){o.call(this,t,vc)}return o&&(t.__proto__=o),(t.prototype=Object.create(o&&o.prototype)).constructor=t,t.prototype.createBucket=function(e){return new La(e)},t.prototype.queryRadius=function(o){var t=o;return $a('circle-radius',this,t)+$a('circle-stroke-width',this,t)+Wa(this.paint.get('circle-translate'))},t.prototype.queryIntersectsFeature=function(_,t,e,r,n,i,a,o){for(var s=Qa(_,this.paint.get('circle-translate'),this.paint.get('circle-translate-anchor'),i.angle,a),u=this.paint.get('circle-radius').evaluate(t,e)+this.paint.get('circle-stroke-width').evaluate(t,e),l='map'===this.paint.get('circle-pitch-alignment'),p=l?s:function(o,a){return o.map(function(e){return uo(e,a)})}(s,o),c=l?u*a:u,h=0,f=r;h<f.length;h+=1)for(var y=0,d=f[h];y<d.length;y+=1){var m=d[y],v=l?m:uo(m,o),g=c,x=ao([],[m.x,m.y,0,1],o);if('viewport'===this.paint.get('circle-pitch-scale')&&'map'===this.paint.get('circle-pitch-alignment')?g*=x[3]/i.cameraToCenterDistance:'map'===this.paint.get('circle-pitch-scale')&&'viewport'===this.paint.get('circle-pitch-alignment')&&(g*=i.cameraToCenterDistance/x[3]),ja(p,v,g))return!0}return!1},t}(bi)),bc=function(o){function t(){o.apply(this,arguments)}return o&&(t.__proto__=o),(t.prototype=Object.create(o&&o.prototype)).constructor=t,t}(La);Tn('HeatmapBucket',bc,{omit:['layers']});var co=function(o,t){po(this,o,1,t)};co.prototype.resize=function(e){ho(this,e,1)},co.prototype.clone=function(){return new co({width:this.width,height:this.height},new Uint8Array(this.data))},co.copy=function(o,t,e,a,r){fo(o,t,e,a,r,1)};var mo=function(o,t){po(this,o,4,t)};mo.prototype.resize=function(e){ho(this,e,4)},mo.prototype.replace=function(o,t){t?this.data.set(o):this.data=o instanceof Uint8ClampedArray?new Uint8Array(o.buffer):o},mo.prototype.clone=function(){return new mo({width:this.width,height:this.height},new Uint8Array(this.data))},mo.copy=function(o,t,e,a,r){fo(o,t,e,a,r,4)},Tn('AlphaImage',co),Tn('RGBAImage',mo);var vo={paint:new xi({"heatmap-radius":new di(zt.paint_heatmap['heatmap-radius']),"heatmap-weight":new di(zt.paint_heatmap['heatmap-weight']),"heatmap-intensity":new yi(zt.paint_heatmap['heatmap-intensity']),"heatmap-color":new gi(zt.paint_heatmap['heatmap-color']),"heatmap-opacity":new yi(zt.paint_heatmap['heatmap-opacity'])})},go=function(o){function t(t){o.call(this,t,vo),this._updateColorRamp()}return o&&(t.__proto__=o),(t.prototype=Object.create(o&&o.prototype)).constructor=t,t.prototype.createBucket=function(e){return new bc(e)},t.prototype._handleSpecialPaintPropertyUpdate=function(e){'heatmap-color'===e&&this._updateColorRamp()},t.prototype._updateColorRamp=function(){this.colorRamp=yo({expression:this._transitionablePaint._values['heatmap-color'].value.expression,evaluationKey:'heatmapDensity',image:this.colorRamp}),this.colorRampTexture=null},t.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},t.prototype.queryRadius=function(){return 0},t.prototype.queryIntersectsFeature=function(){return!1},t.prototype.hasOffscreenPass=function(){return 0!==this.paint.get('heatmap-opacity')&&'none'!==this.visibility},t}(bi),wc={paint:new xi({"hillshade-illumination-direction":new yi(zt.paint_hillshade['hillshade-illumination-direction']),"hillshade-illumination-anchor":new yi(zt.paint_hillshade['hillshade-illumination-anchor']),"hillshade-exaggeration":new yi(zt.paint_hillshade['hillshade-exaggeration']),"hillshade-shadow-color":new yi(zt.paint_hillshade['hillshade-shadow-color']),"hillshade-highlight-color":new yi(zt.paint_hillshade['hillshade-highlight-color']),"hillshade-accent-color":new yi(zt.paint_hillshade['hillshade-accent-color'])})},wo=function(o){function t(t){o.call(this,t,wc)}return o&&(t.__proto__=o),(t.prototype=Object.create(o&&o.prototype)).constructor=t,t.prototype.hasOffscreenPass=function(){return 0!==this.paint.get('hillshade-exaggeration')&&'none'!==this.visibility},t}(bi),Tc=ei([{name:'a_pos',components:2,type:'Int16'}],4).members,Ao=xo;xo.deviation=function(d,t,e,r){var n=t&&t.length,i=B(Yo(d,0,n?t[0]*e:d.length,e));if(n)for(var a=0,o=t.length;a<o;a++)i-=B(Yo(d,t[a]*e,a<o-1?t[a+1]*e:d.length,e));var s=0;for(a=0;a<r.length;a+=3){var u=r[a]*e,l=r[a+1]*e,p=r[a+2]*e;s+=B((d[u]-d[p])*(d[l+1]-d[u+1])-(d[u]-d[l])*(d[p+1]-d[u+1]))}return 0===i&&0===s?0:B((s-i)/i)},xo.flatten=function(s){for(var t=s[0][0].length,l={vertices:[],holes:[],dimensions:t},r=0,n=0;n<s.length;n++){for(var i=0;i<s[n].length;i++)for(var a=0;a<t;a++)l.vertices.push(s[n][i][a]);0<n&&l.holes.push(r+=s[n-1].length)}return l},Ao.default=xo;var So=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(e){return e.id}),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Si,this.indexArray=new Oi,this.indexArray2=new Gi,this.programConfigurations=new Ba(e.layers,e.zoom),this.segments=new aa,this.segments2=new aa,this.stateDependentLayerIds=this.layers.filter(function(e){return e.isStateDependent()}).map(function(e){return e.id})};So.prototype.populate=function(_,t,e){this.hasPattern=rs('fill',this.layers,t);for(var r=this.layers[0].layout.get('fill-sort-key'),n=[],i=0,a=_;i<a.length;i+=1){var o=a[i],s=o.feature,u=o.id,T=o.index,E=o.sourceLayerIndex,S=this.layers[0]._featureFilter.needGeometry,h={type:s.type,id:u,properties:s.properties,geometry:S?Fa(s):[]};if(this.layers[0]._featureFilter.filter(new ai(this.zoom),h,e)){S||(h.geometry=Fa(s));var f=r?r.evaluate(h,{},e,t.availableImages):void 0;n.push({id:u,properties:s.properties,type:s.type,sourceLayerIndex:E,index:T,geometry:h.geometry,patterns:{},sortKey:f})}}r&&n.sort(function(o,t){return o.sortKey-t.sortKey});for(var C=0,d=n;C<d.length;C+=1){var m=d[C],v=m.geometry,g=m.index,x=m.sourceLayerIndex;if(this.hasPattern){var b=ns('fill',this.layers,m,this.zoom,t);this.patternFeatures.push(b)}else this.addFeature(m,v,g,e,{});t.featureIndex.insert(_[g].feature,v,g,x,this.index)}},So.prototype.update=function(o,t,e){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,t,this.stateDependentLayers,e)},So.prototype.addFeatures=function(o,t,e){for(var r=0,n=this.patternFeatures,i;r<n.length;r+=1)i=n[r],this.addFeature(i,i.geometry,i.index,t,e)},So.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},So.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},So.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Tc),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0},So.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},So.prototype.addFeature=function(T,t,e,r,n){for(var i=0,a=ts(t,500);i<a.length;i+=1){for(var o=a[i],s=0,u=0,l=o;u<l.length;u+=1)s+=l[u].length;for(var p=this.segments.prepareSegment(s,this.layoutVertexArray,this.indexArray),c=p.vertexLength,h=[],f=[],y=0,d=o,m;y<d.length;y+=1)if(m=d[y],0!==m.length){m!==o[0]&&f.push(h.length/2);var v=this.segments2.prepareSegment(m.length,this.layoutVertexArray,this.indexArray2),g=v.vertexLength;this.layoutVertexArray.emplaceBack(m[0].x,m[0].y),this.indexArray2.emplaceBack(g+m.length-1,g),h.push(m[0].x),h.push(m[0].y);for(var x=1;x<m.length;x++)this.layoutVertexArray.emplaceBack(m[x].x,m[x].y),this.indexArray2.emplaceBack(g+x-1,g+x),h.push(m[x].x),h.push(m[x].y);v.vertexLength+=m.length,v.primitiveLength+=m.length}for(var b=Ao(h,f),w=0;w<b.length;w+=3)this.indexArray.emplaceBack(c+b[w],c+b[w+1],c+b[w+2]);p.vertexLength+=s,p.primitiveLength+=b.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,T,e,n,r)},Tn('FillBucket',So,{omit:['layers','patternFeatures']});var as=new xi({"fill-sort-key":new di(zt.layout_fill['fill-sort-key'])}),Ec={paint:new xi({"fill-antialias":new yi(zt.paint_fill['fill-antialias']),"fill-opacity":new di(zt.paint_fill['fill-opacity']),"fill-color":new di(zt.paint_fill['fill-color']),"fill-outline-color":new di(zt.paint_fill['fill-outline-color']),"fill-translate":new yi(zt.paint_fill['fill-translate']),"fill-translate-anchor":new yi(zt.paint_fill['fill-translate-anchor']),"fill-pattern":new mi(zt.paint_fill['fill-pattern'])}),layout:as},ss=function(o){function t(t){o.call(this,t,Ec)}return o&&(t.__proto__=o),(t.prototype=Object.create(o&&o.prototype)).constructor=t,t.prototype.recalculate=function(t,e){o.prototype.recalculate.call(this,t,e);var a=this.paint._values['fill-outline-color'];'constant'===a.value.kind&&void 0===a.value.value&&(this.paint._values['fill-outline-color']=this.paint._values['fill-color'])},t.prototype.createBucket=function(e){return new So(e)},t.prototype.queryRadius=function(){return Wa(this.paint.get('fill-translate'))},t.prototype.queryIntersectsFeature=function(s,t,e,r,n,i,a){return qa(Qa(s,this.paint.get('fill-translate'),this.paint.get('fill-translate-anchor'),i.angle,a),r)},t.prototype.isTileClipped=function(){return!0},t}(bi),Sc=ei([{name:'a_pos',components:2,type:'Int16'},{name:'a_normal_ed',components:4,type:'Int16'}],4).members,ls=is;is.types=['Unknown','Point','LineString','Polygon'],is.prototype.loadGeometry=function(){var i=this._pbf;i.pos=this._geometry;for(var t=i.readVarint()+i.pos,r=1,n=0,a=0,o=0,s=[],p;i.pos<t;){if(0>=n){var e=i.readVarint();r=7&e,n=e>>3}if(n--,1==r||2==r)a+=i.readSVarint(),o+=i.readSVarint(),1==r&&(p&&s.push(p),p=[]),p.push(new xd(a,o));else{if(7!=r)throw new Error('unknown command '+r);p&&p.push(p[0].clone())}}return p&&s.push(p),s},is.prototype.bbox=function(){var d=this._pbf;d.pos=this._geometry;for(var t=d.readVarint()+d.pos,e=1,r=0,n=0,i=0,a=1/0,o=-1/0,s=1/0,c=-1/0;d.pos<t;){if(0>=r){var l=d.readVarint();e=7&l,r=l>>3}if(r--,1==e||2==e)(n+=d.readSVarint())<a&&(a=n),n>o&&(o=n),(i+=d.readSVarint())<s&&(s=i),i>c&&(c=i);else if(7!=e)throw new Error('unknown command '+e)}return[a,s,o,c]},is.prototype.toGeoJSON=function(d,t,e){function r(i){for(var t=0,e;t<i.length;t++)e=i[t],i[t]=[360*(e.x+a)/p-180,360/Xe*n(g((180-360*(e.y+o)/p)*Xe/180))-90]}var p=this.extent*C(2,e),a=this.extent*d,o=this.extent*t,s=this.loadGeometry(),m=is.types[this.type],y,_;switch(this.type){case 1:var i=[];for(y=0;y<s.length;y++)i[y]=s[y][0];r(s=i);break;case 2:for(y=0;y<s.length;y++)r(s[y]);break;case 3:for(s=function(s){var t=s.length;if(1>=t)return[s];for(var e=[],i=0,a,r,n;i<t;i++)n=hs(s[i]),0!==n&&(void 0==r&&(r=0>n),r===0>n?(a&&e.push(a),a=[s[i]]):a.push(s[i]));return a&&e.push(a),e}(s),y=0;y<s.length;y++)for(_=0;_<s[y].length;_++)r(s[y][_]);}1===s.length?s=s[0]:m='Multi'+m;var c={type:'Feature',geometry:{type:m,coordinates:s},properties:this.properties};return'id'in this&&(c.id=this.id),c};var Cc=fs;fs.prototype.feature=function(o){if(0>o||o>=this._features.length)throw new Error('feature index out of bounds');this._pbf.pos=this._features[o];var t=this._pbf.readVarint()+this._pbf.pos;return new ls(this._pbf,t,this.extent,this._keys,this._values)};var Ic={VectorTile:function(o,t){this.layers=o.readFields(ms,{},t)},VectorTileFeature:ls,VectorTileLayer:Cc},gs=Ic.VectorTileFeature.types,xs=8192,bs=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(e){return e.id}),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new Ci,this.indexArray=new Oi,this.programConfigurations=new Ba(e.layers,e.zoom),this.segments=new aa,this.stateDependentLayerIds=this.layers.filter(function(e){return e.isStateDependent()}).map(function(e){return e.id})};bs.prototype.populate=function(d,t,e){this.features=[],this.hasPattern=rs('fill-extrusion',this.layers,t);for(var r=0,n=d;r<n.length;r+=1){var i=n[r],a=i.feature,o=i.id,m=i.index,g=i.sourceLayerIndex,y=this.layers[0]._featureFilter.needGeometry,p={type:a.type,id:o,properties:a.properties,geometry:y?Fa(a):[]};if(this.layers[0]._featureFilter.filter(new ai(this.zoom),p,e)){var c={id:o,sourceLayerIndex:g,index:m,geometry:y?p.geometry:Fa(a),properties:a.properties,type:a.type,patterns:{}};this.hasPattern?this.features.push(ns('fill-extrusion',this.layers,c,this.zoom,t)):this.addFeature(c,c.geometry,m,e,{}),t.featureIndex.insert(a,c.geometry,m,g,this.index,!0)}}},bs.prototype.addFeatures=function(o,t,e){for(var r=0,n=this.features,i;r<n.length;r+=1)i=n[r],this.addFeature(i,i.geometry,i.index,t,e)},bs.prototype.update=function(o,t,e){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,t,this.stateDependentLayers,e)},bs.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},bs.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},bs.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Sc),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},bs.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},bs.prototype.addFeature=function(T,t,e,r,n){for(var i=0,a=ts(t,500);i<a.length;i+=1){for(var o=a[i],s=0,u=0,l=o;u<l.length;u+=1)s+=l[u].length;for(var p=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),c=0,h=o,f;c<h.length;c+=1)if(f=h[c],0!==f.length&&!((D=f).every(function(e){return 0>e.x})||D.every(function(e){return 8192<e.x})||D.every(function(e){return 0>e.y})||D.every(function(e){return 8192<e.y})))for(var y=0,d=0,m;d<f.length;d++)if(m=f[d],1<=d){var v=f[d-1];if(!ws(m,v)){p.vertexLength+4>aa.MAX_VERTEX_ARRAY_LENGTH&&(p=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var g=m.sub(v)._perp()._unit(),x=v.dist(m);32768<y+x&&(y=0),vs(this.layoutVertexArray,m.x,m.y,g.x,g.y,0,0,y),vs(this.layoutVertexArray,m.x,m.y,g.x,g.y,0,1,y),vs(this.layoutVertexArray,v.x,v.y,g.x,g.y,0,0,y+=x),vs(this.layoutVertexArray,v.x,v.y,g.x,g.y,0,1,y);var b=p.vertexLength;this.indexArray.emplaceBack(b,b+2,b+1),this.indexArray.emplaceBack(b+1,b+2,b+3),p.vertexLength+=4,p.primitiveLength+=2}}if(p.vertexLength+s>aa.MAX_VERTEX_ARRAY_LENGTH&&(p=this.segments.prepareSegment(s,this.layoutVertexArray,this.indexArray)),'Polygon'===gs[T.type]){for(var w=[],_=[],A=p.vertexLength,S=0,k=o,I;S<k.length;S+=1)if(I=k[S],0!==I.length){I!==o[0]&&_.push(w.length/2);for(var z=0,C;z<I.length;z++)C=I[z],vs(this.layoutVertexArray,C.x,C.y,0,0,1,1,0),w.push(C.x),w.push(C.y)}for(var E=Ao(w,_),P=0;P<E.length;P+=3)this.indexArray.emplaceBack(A+E[P],A+E[P+2],A+E[P+1]);p.primitiveLength+=E.length/3,p.vertexLength+=s}}var D;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,T,e,n,r)},Tn('FillExtrusionBucket',bs,{omit:['layers','features']});var _s={paint:new xi({"fill-extrusion-opacity":new yi(zt['paint_fill-extrusion']['fill-extrusion-opacity']),"fill-extrusion-color":new di(zt['paint_fill-extrusion']['fill-extrusion-color']),"fill-extrusion-translate":new yi(zt['paint_fill-extrusion']['fill-extrusion-translate']),"fill-extrusion-translate-anchor":new yi(zt['paint_fill-extrusion']['fill-extrusion-translate-anchor']),"fill-extrusion-pattern":new mi(zt['paint_fill-extrusion']['fill-extrusion-pattern']),"fill-extrusion-height":new di(zt['paint_fill-extrusion']['fill-extrusion-height']),"fill-extrusion-base":new di(zt['paint_fill-extrusion']['fill-extrusion-base']),"fill-extrusion-vertical-gradient":new yi(zt['paint_fill-extrusion']['fill-extrusion-vertical-gradient'])})},Ss=function(o){function t(t){o.call(this,t,_s)}return o&&(t.__proto__=o),(t.prototype=Object.create(o&&o.prototype)).constructor=t,t.prototype.createBucket=function(e){return new bs(e)},t.prototype.queryRadius=function(){return Wa(this.paint.get('fill-extrusion-translate'))},t.prototype.is3D=function(){return!0},t.prototype.queryIntersectsFeature=function(i,t,e,r,n,a,o,s){var d=Qa(i,this.paint.get('fill-extrusion-translate'),this.paint.get('fill-extrusion-translate-anchor'),a.angle,o),l=this.paint.get('fill-extrusion-height').evaluate(t,e),p=this.paint.get('fill-extrusion-base').evaluate(t,e),c=function(r,t){for(var e=[],a=0,o=r;a<o.length;a+=1){var n=o[a],i=[n.x,n.y,0,1];ao(i,i,t),e.push(new xd(i[0]/i[3],i[1]/i[3]))}return e}(d,s),u=function(i,t,e,r){for(var n=[],a=[],o=r[8]*t,s=r[9]*t,u=r[10]*t,l=r[11]*t,p=r[8]*e,c=r[9]*e,h=r[10]*e,f=r[11]*e,y=0,d=i;y<d.length;y+=1){for(var m=[],v=[],g=0,x=d[y];g<x.length;g+=1){var b=x[g],w=b.x,_=b.y,C=r[0]*w+r[4]*_+r[12],S=r[1]*w+r[5]*_+r[13],A=r[2]*w+r[6]*_+r[14],I=r[3]*w+r[7]*_+r[15],k=I+l,E=I+f,T=new xd((C+o)/k,(S+s)/k);T.z=(A+u)/k,m.push(T);var P=new xd((C+p)/E,(S+c)/E);P.z=(A+h)/E,v.push(P)}n.push(m),a.push(v)}return[n,a]}(r,p,l,s);return function(p,t,e){var r=1/0;qa(e,t)&&(r=Is(e,t[0]));for(var n=0;n<t.length;n++)for(var i=t[n],a=p[n],o=0;o<i.length-1;o++){var s=i[o],d=[s,i[o+1],a[o+1],a[o],s];Oa(e,d)&&(r=ta(r,Is(e,d)))}return r!==1/0&&r}(u[0],u[1],c)},t}(bi),Ac=ei([{name:'a_pos_normal',components:2,type:'Int16'},{name:'a_data',components:4,type:'Uint8'}],4).members,Cs=ei([{name:'a_uv_x',components:1,type:'Float32'},{name:'a_split_index',components:1,type:'Float32'}]).members,Es=Ic.VectorTileFeature.types,Ps=Ze(37.5*(Xe/180)),Ms=32768,Bs=function(o){var a=this;this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(function(e){return e.id}),this.index=o.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(function(e){a.gradients[e.id]={}}),this.layoutVertexArray=new Ei,this.layoutVertexArray2=new Pi,this.indexArray=new Oi,this.programConfigurations=new Ba(o.layers,o.zoom),this.segments=new aa,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(function(e){return e.isStateDependent()}).map(function(e){return e.id})};Bs.prototype.populate=function(_,t,e){this.hasPattern=rs('line',this.layers,t);for(var r=this.layers[0].layout.get('line-sort-key'),n=[],i=0,a=_;i<a.length;i+=1){var o=a[i],s=o.feature,u=o.id,T=o.index,E=o.sourceLayerIndex,S=this.layers[0]._featureFilter.needGeometry,h={type:s.type,id:u,properties:s.properties,geometry:S?Fa(s):[]};if(this.layers[0]._featureFilter.filter(new ai(this.zoom),h,e)){S||(h.geometry=Fa(s));var f=r?r.evaluate(h,{},e):void 0;n.push({id:u,properties:s.properties,type:s.type,sourceLayerIndex:E,index:T,geometry:h.geometry,patterns:{},sortKey:f})}}r&&n.sort(function(o,t){return o.sortKey-t.sortKey});for(var C=0,d=n;C<d.length;C+=1){var m=d[C],v=m.geometry,g=m.index,x=m.sourceLayerIndex;if(this.hasPattern){var b=ns('line',this.layers,m,this.zoom,t);this.patternFeatures.push(b)}else this.addFeature(m,v,g,e,{});t.featureIndex.insert(_[g].feature,v,g,x,this.index)}},Bs.prototype.update=function(o,t,e){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,t,this.stateDependentLayers,e)},Bs.prototype.addFeatures=function(o,t,e){for(var r=0,n=this.patternFeatures,i;r<n.length;r+=1)i=n[r],this.addFeature(i,i.geometry,i.index,t,e)},Bs.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Bs.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Bs.prototype.upload=function(e){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,Cs)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Ac),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},Bs.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Bs.prototype.lineFeatureClips=function(e){if(e.properties&&e.properties.hasOwnProperty('mapbox_clip_start')&&e.properties.hasOwnProperty('mapbox_clip_end'))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}},Bs.prototype.addFeature=function(d,t,e,r,n){var i=this.layers[0].layout,a=i.get('line-join').evaluate(d,{}),o=i.get('line-cap'),s=i.get('line-miter-limit'),u=i.get('line-round-limit');this.lineClips=this.lineFeatureClips(d);for(var l=0,p=t;l<p.length;l+=1)this.addLine(p[l],d,a,o,s,u);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,d,e,n,r)},Bs.prototype.addLine=function(q,t,e,r,n,i){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var a=0;a<q.length-1;a++)this.totalDistance+=q[a].dist(q[a+1]);this.updateScaledDistance(),this.maxLineLength=oa(this.maxLineLength,this.totalDistance)}for(var o='Polygon'===Es[t.type],s=q.length;2<=s&&q[s-1].equals(q[s-2]);)s--;for(var u=0;u<s-1&&q[u].equals(q[u+1]);)u++;if(!(s<(o?3:2))){'bevel'===e&&(n=1.05);var l=16>=this.overscaling?122880/(512*this.overscaling):0,c=this.segments.prepareSegment(10*s,this.layoutVertexArray,this.indexArray),h,p,f,y,d;this.e1=this.e2=-1,o&&(d=q[u].sub(h=q[s-2])._unit()._perp());for(var m=u;m<s;m++)if(!(f=m===s-1?o?q[u+1]:void 0:q[m+1])||!q[m].equals(f)){d&&(y=d),h&&(p=h),h=q[m],d=f?f.sub(h)._unit()._perp():y;var v=(y=y||d).add(d);0===v.x&&0===v.y||v._unit();var g=y.x*d.x+y.y*d.y,x=v.x*d.x+v.y*d.y,j=0==x?1/0:1/x,w=2*N(2-2*x),_=x<Ps&&p&&f,A=0<y.x*d.y-y.y*d.x;if(_&&m>u){var S=h.dist(p);if(S>2*l){var k=h.sub(h.sub(p)._mult(l/S)._round());this.updateDistance(p,k),this.addCurrentVertex(k,y,0,0,c),p=k}}var I=p&&f,z=I?e:o?'butt':r;if(I&&'round'===z&&(j<i?z='miter':2>=j&&(z='fakeround')),'miter'===z&&j>n&&(z='bevel'),'bevel'===z&&(2<j&&(z='flipbevel'),j<n&&(z='miter')),p&&this.updateDistance(p,h),'miter'===z)v._mult(j),this.addCurrentVertex(h,v,0,0,c);else if('flipbevel'===z){if(100<j)v=d.mult(-1);else{var C=j*y.add(d).mag()/y.sub(d).mag();v._perp()._mult(C*(A?-1:1))}this.addCurrentVertex(h,v,0,0,c),this.addCurrentVertex(h,v.mult(-1),0,0,c)}else if('bevel'===z||'fakeround'===z){var E=-N(j*j-1),P=A?E:0,Z=A?0:E;if(p&&this.addCurrentVertex(h,y,P,Z,c),'fakeround'===z)for(var G=b(180*w/Xe/20),T=1,V;T<G;T++){if(V=T/G,.5!==V){var F=V-.5;V+=V*F*(V-1)*((1.0904+g*(g*(3.55645-1.43519*g)-3.2452))*F*F+(.848013+g*(.215638*g-1.06021)))}var D=d.sub(y)._mult(V)._add(y)._unit()._mult(A?-1:1);this.addHalfVertex(h,D.x,D.y,!1,A,0,c)}f&&this.addCurrentVertex(h,d,-P,-Z,c)}else if('butt'===z)this.addCurrentVertex(h,v,0,0,c);else if('square'===z){var L=p?1:-1;this.addCurrentVertex(h,v,L,L,c)}else'round'==z&&(p&&(this.addCurrentVertex(h,y,0,0,c),this.addCurrentVertex(h,y,1,1,c,!0)),f&&(this.addCurrentVertex(h,d,-1,-1,c,!0),this.addCurrentVertex(h,d,0,0,c)));if(_&&m<s-1){var R=h.dist(f);if(R>2*l){var O=h.add(f.sub(h)._mult(l/R)._round());this.updateDistance(h,O),this.addCurrentVertex(O,d,0,0,c),h=O}}}}},Bs.prototype.addCurrentVertex=function(l,t,e,r,p,i){void 0===i&&(i=!1);var a=t.y*r-t.x,o=-t.y-t.x*r;this.addHalfVertex(l,t.x+t.y*e,t.y-t.x*e,i,!1,e,p),this.addHalfVertex(l,a,o,i,!0,-r,p),this.distance>Ms/2&&0===this.totalDistance&&(this.distance=0,this.addCurrentVertex(l,t,e,r,p,i))},Bs.prototype.addHalfVertex=function(l,t,e,r,n,i,a){var o=.5*(this.lineClips?this.scaledDistance*(Ms-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((l.x<<1)+(r?1:0),(l.y<<1)+(n?1:0),b(63*t)+128,b(63*e)+128,1+(0===i?0:0>i?-1:1)|(63&o)<<2,o>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);var s=a.vertexLength++;0<=this.e1&&0<=this.e2&&(this.indexArray.emplaceBack(this.e1,this.e2,s),a.primitiveLength++),n?this.e2=s:this.e1=s},Bs.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},Bs.prototype.updateDistance=function(o,t){this.distance+=o.dist(t),this.updateScaledDistance()},Tn('LineBucket',Bs,{omit:['layers','patternFeatures']});var Ts=new xi({"line-cap":new yi(zt.layout_line['line-cap']),"line-join":new di(zt.layout_line['line-join']),"line-miter-limit":new yi(zt.layout_line['line-miter-limit']),"line-round-limit":new yi(zt.layout_line['line-round-limit']),"line-sort-key":new di(zt.layout_line['line-sort-key'])}),kc={paint:new xi({"line-opacity":new di(zt.paint_line['line-opacity']),"line-color":new di(zt.paint_line['line-color']),"line-translate":new yi(zt.paint_line['line-translate']),"line-translate-anchor":new yi(zt.paint_line['line-translate-anchor']),"line-width":new di(zt.paint_line['line-width']),"line-gap-width":new di(zt.paint_line['line-gap-width']),"line-offset":new di(zt.paint_line['line-offset']),"line-blur":new di(zt.paint_line['line-blur']),"line-dasharray":new vi(zt.paint_line['line-dasharray']),"line-pattern":new mi(zt.paint_line['line-pattern']),"line-gradient":new gi(zt.paint_line['line-gradient'])}),layout:Ts},Fs=new(function(o){function t(){o.apply(this,arguments)}return o&&(t.__proto__=o),(t.prototype=Object.create(o&&o.prototype)).constructor=t,t.prototype.possiblyEvaluate=function(t,e){return e=new ai(ea(e.zoom),{now:e.now,fadeDuration:e.fadeDuration,zoomHistory:e.zoomHistory,transition:e.transition}),o.prototype.possiblyEvaluate.call(this,t,e)},t.prototype.evaluate=function(t,e,a,r){return e=ha({},e,{zoom:ea(e.zoom)}),o.prototype.evaluate.call(this,t,e,a,r)},t}(di))(kc.paint.properties['line-width'].specification);Fs.useIntegerZoom=!0;var Ds=function(o){function t(t){o.call(this,t,kc),this.gradientVersion=0}return o&&(t.__proto__=o),(t.prototype=Object.create(o&&o.prototype)).constructor=t,t.prototype._handleSpecialPaintPropertyUpdate=function(e){'line-gradient'===e&&(this.stepInterpolant=this._transitionablePaint._values['line-gradient'].value.expression._styleExpression.expression instanceof Ue,this.gradientVersion=(this.gradientVersion+1)%9007199254740991)},t.prototype.gradientExpression=function(){return this._transitionablePaint._values['line-gradient'].value.expression},t.prototype.recalculate=function(t,e){o.prototype.recalculate.call(this,t,e),this.paint._values['line-floorwidth']=Fs.possiblyEvaluate(this._transitioningPaint._values['line-width'].value,t)},t.prototype.createBucket=function(e){return new Bs(e)},t.prototype.queryRadius=function(o){var t=o,e=zs($a('line-width',this,t),$a('line-gap-width',this,t)),a=$a('line-offset',this,t);return e/2+B(a)+Wa(this.paint.get('line-translate'))},t.prototype.queryIntersectsFeature=function(i,t,e,r,n,a,o){var s=Qa(i,this.paint.get('line-translate'),this.paint.get('line-translate-anchor'),a.angle,o),d=o/2*zs(this.paint.get('line-width').evaluate(t,e),this.paint.get('line-gap-width').evaluate(t,e)),l=this.paint.get('line-offset').evaluate(t,e);return l&&(r=function(i,t){for(var e=[],r=new xd(0,0),n=0;n<i.length;n++){for(var a=i[n],o=[],s=0;s<a.length;s++){var d=a[s],l=a[s+1],p=0===s?r:d.sub(a[s-1])._unit()._perp(),c=s===a.length-1?r:l.sub(d)._unit()._perp(),u=p._add(c)._unit();u._mult(1/(u.x*c.x+u.y*c.y)),o.push(u._mult(t)._add(d))}e.push(o)}return e}(r,l*o)),function(o,t,e){for(var r=0,n;r<t.length;r++){if(n=t[r],3<=o.length)for(var i=0;i<n.length;i++)if(Ha(o,n[i]))return!0;if(Na(o,n,e))return!0}return!1}(s,r,d)},t.prototype.isTileClipped=function(){return!0},t}(bi),Pc=ei([{name:'a_pos_offset',components:4,type:'Int16'},{name:'a_data',components:4,type:'Uint16'},{name:'a_pixeloffset',components:4,type:'Int16'}],4),Os=ei([{name:'a_projected_pos',components:3,type:'Float32'}],4),Us=(ei([{name:'a_fade_opacity',components:1,type:'Uint32'}],4),ei([{name:'a_placed',components:2,type:'Uint8'},{name:'a_shift',components:2,type:'Float32'}])),js=(ei([{type:'Int16',name:'anchorPointX'},{type:'Int16',name:'anchorPointY'},{type:'Int16',name:'x1'},{type:'Int16',name:'y1'},{type:'Int16',name:'x2'},{type:'Int16',name:'y2'},{type:'Uint32',name:'featureIndex'},{type:'Uint16',name:'sourceLayerIndex'},{type:'Uint16',name:'bucketIndex'}]),ei([{name:'a_pos',components:2,type:'Int16'},{name:'a_anchor_pos',components:2,type:'Int16'},{name:'a_extrude',components:2,type:'Int16'}],4)),qs=ei([{name:'a_pos',components:2,type:'Float32'},{name:'a_radius',components:1,type:'Float32'},{name:'a_flags',components:2,type:'Int16'}],4);ei([{name:'triangle',components:3,type:'Uint16'}]),ei([{type:'Int16',name:'anchorX'},{type:'Int16',name:'anchorY'},{type:'Uint16',name:'glyphStartIndex'},{type:'Uint16',name:'numGlyphs'},{type:'Uint32',name:'vertexStartIndex'},{type:'Uint32',name:'lineStartIndex'},{type:'Uint32',name:'lineLength'},{type:'Uint16',name:'segment'},{type:'Uint16',name:'lowerSize'},{type:'Uint16',name:'upperSize'},{type:'Float32',name:'lineOffsetX'},{type:'Float32',name:'lineOffsetY'},{type:'Uint8',name:'writingMode'},{type:'Uint8',name:'placedOrientation'},{type:'Uint8',name:'hidden'},{type:'Uint32',name:'crossTileID'},{type:'Int16',name:'associatedIconIndex'}]),ei([{type:'Int16',name:'anchorX'},{type:'Int16',name:'anchorY'},{type:'Int16',name:'rightJustifiedTextSymbolIndex'},{type:'Int16',name:'centerJustifiedTextSymbolIndex'},{type:'Int16',name:'leftJustifiedTextSymbolIndex'},{type:'Int16',name:'verticalPlacedTextSymbolIndex'},{type:'Int16',name:'placedIconSymbolIndex'},{type:'Int16',name:'verticalPlacedIconSymbolIndex'},{type:'Uint16',name:'key'},{type:'Uint16',name:'textBoxStartIndex'},{type:'Uint16',name:'textBoxEndIndex'},{type:'Uint16',name:'verticalTextBoxStartIndex'},{type:'Uint16',name:'verticalTextBoxEndIndex'},{type:'Uint16',name:'iconBoxStartIndex'},{type:'Uint16',name:'iconBoxEndIndex'},{type:'Uint16',name:'verticalIconBoxStartIndex'},{type:'Uint16',name:'verticalIconBoxEndIndex'},{type:'Uint16',name:'featureIndex'},{type:'Uint16',name:'numHorizontalGlyphVertices'},{type:'Uint16',name:'numVerticalGlyphVertices'},{type:'Uint16',name:'numIconVertices'},{type:'Uint16',name:'numVerticalIconVertices'},{type:'Uint16',name:'useRuntimeCollisionCircles'},{type:'Uint32',name:'crossTileID'},{type:'Float32',name:'textBoxScale'},{type:'Float32',components:2,name:'textOffset'},{type:'Float32',name:'collisionCircleDiameter'}]),ei([{type:'Float32',name:'offsetX'}]),ei([{type:'Int16',name:'x'},{type:'Int16',name:'y'},{type:'Int16',name:'tileUnitDistanceFromAnchor'}]);var Ns={"!":'\uFE15',"#":'\uFF03',$:'\uFF04',"%":'\uFF05',"&":'\uFF06',"(":'\uFE35',")":'\uFE36',"*":'\uFF0A',"+":'\uFF0B',",":'\uFE10',"-":'\uFE32',".":'\u30FB',"/":'\uFF0F',":":'\uFE13',";":'\uFE14',"<":'\uFE3F',"=":'\uFF1D',">":'\uFE40',"?":'\uFE16',"@":'\uFF20',"[":'\uFE47',"\\":'\uFF3C',"]":'\uFE48',"^":'\uFF3E',_:'\uFE33',"`":'\uFF40',"{":'\uFE37',"|":'\u2015',"}":'\uFE38',"~":'\uFF5E',"":'\uFFE0',"":'\uFFE1',"":'\uFFE5',"":'\uFFE4',"":'\uFFE2',"":'\uFFE3',"":'\uFE32',"":'\uFE31',"":'\uFE43',"":'\uFE44',"":'\uFE41',"":'\uFE42',"":'\uFE19',"":'\u30FB',"":'\uFFE6',"":'\uFE11',"":'\uFE12',"":'\uFE3F',"":'\uFE40',"":'\uFE3D',"":'\uFE3E',"":'\uFE41',"":'\uFE42',"":'\uFE43',"":'\uFE44',"":'\uFE3B',"":'\uFE3C',"":'\uFE39',"":'\uFE3A',"":'\uFE17',"":'\uFE18',"":'\uFE15',"":'\uFE35',"":'\uFE36',"":'\uFE10',"":'\uFE32',"":'\u30FB',"":'\uFE13',"":'\uFE14',"":'\uFE3F',"":'\uFE40',"":'\uFE16',"":'\uFE47',"":'\uFE48',"":'\uFE33',"":'\uFE37',"":'\u2015',"":'\uFE38',"":'\uFE35',"":'\uFE36',"":'\uFE12',"":'\uFE41',"":'\uFE42'},Gs=function(d,t,e,r,n){var i=8*n-r-1,s=(1<<i)-1,u=s>>1,l=-7,m=e?n-1:0,c=e?-1:1,g=d[t+m],y,a;for(m+=c,y=g&(1<<-l)-1,g>>=-l,l+=i;0<l;y=256*y+d[t+m],m+=c,l-=8);for(a=y&(1<<-l)-1,y>>=-l,l+=r;0<l;a=256*a+d[t+m],m+=c,l-=8);if(0===y)y=1-u;else{if(y===s)return a?NaN:1/0*(g?-1:1);a+=C(2,r),y-=u}return(g?-1:1)*a*C(2,y-r)},Zs=function(m,t,e,r,n,i){var a=8*i-n-1,l=(1<<a)-1,p=l>>1,c=23===n?5.960464477539063e-8-6.617444900424222e-24:0,g=r?0:i-1,f=r?1:-1,y=0>t||0===t&&0>1/t?1:0,d,h,s;for(t=B(t),isNaN(t)||t===1/0?(h=isNaN(t)?1:0,d=l):(d=ea(x(t)/_),1>t*(s=C(2,-d))&&(d--,s*=2),2<=(t+=1<=d+p?c/s:c*C(2,1-p))*s&&(d++,s/=2),d+p>=l?(h=0,d=l):1<=d+p?(h=(t*s-1)*C(2,n),d+=p):(h=t*C(2,p-1)*C(2,n),d=0));8<=n;m[e+g]=255&h,g+=f,h/=256,n-=8);for(d=d<<n|h,a+=n;0<a;m[e+g]=255&d,g+=f,d/=256,a-=8);m[e+g-f]|=128*y},Xs=Ks;Ks.Varint=0,Ks.Fixed64=1,Ks.Bytes=2,Ks.Fixed32=5;var Js='undefined'==typeof TextDecoder?null:new TextDecoder('utf8');Ks.prototype={destroy:function(){this.buf=null},readFields:function(o,t,e){for(e=e||this.length;this.pos<e;){var r=this.readVarint(),n=this.pos;this.type=7&r,o(r>>3,t,this),this.pos===n&&this.skip(r)}return t},readMessage:function(o,t){return this.readFields(o,t,this.readVarint()+this.pos)},readFixed32:function(){var e=Mp(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=Np(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=Mp(this.buf,this.pos)+4294967296*Mp(this.buf,this.pos+4);return this.pos+=8,e},readSFixed64:function(){var e=Mp(this.buf,this.pos)+4294967296*Np(this.buf,this.pos+4);return this.pos+=8,e},readFloat:function(){var e=Gs(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=Gs(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(o){var t=this.buf,a,e;return a=127&(e=t[this.pos++]),128>e?a:(a|=(127&(e=t[this.pos++]))<<7,128>e?a:(a|=(127&(e=t[this.pos++]))<<14,128>e?a:(a|=(127&(e=t[this.pos++]))<<21,128>e?a:function(o,t,e){var r=e.buf,a,n;if(a=(112&(n=r[e.pos++]))>>4,128>n)return $s(o,a,t);if(a|=(127&(n=r[e.pos++]))<<3,128>n)return $s(o,a,t);if(a|=(127&(n=r[e.pos++]))<<10,128>n)return $s(o,a,t);if(a|=(127&(n=r[e.pos++]))<<17,128>n)return $s(o,a,t);if(a|=(127&(n=r[e.pos++]))<<24,128>n)return $s(o,a,t);if(a|=(1&(n=r[e.pos++]))<<31,128>n)return $s(o,a,t);throw new Error('Expected varint not more than 10 bytes')}(a|=(15&(e=t[this.pos]))<<28,o,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return 1==e%2?(e+1)/-2:e/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var o=this.readVarint()+this.pos,t=this.pos;return this.pos=o,12<=o-t&&Js?function(o,t,e){return Js.decode(o.subarray(t,e))}(this.buf,t,o):function(c,t,e){for(var r='',n=t;n<e;){var i=c[n],u=null,l=239<i?4:223<i?3:191<i?2:1,p,a,o;if(n+l>e)break;1==l?128>i&&(u=i):2==l?128==(192&(p=c[n+1]))&&127>=(u=(31&i)<<6|63&p)&&(u=null):3==l?(a=c[n+2],128==(192&(p=c[n+1]))&&128==(192&a)&&(2047>=(u=(15&i)<<12|(63&p)<<6|63&a)||55296<=u&&57343>=u)&&(u=null)):4==l&&(a=c[n+2],o=c[n+3],128==(192&(p=c[n+1]))&&128==(192&a)&&128==(192&o)&&(65535>=(u=(15&i)<<18|(63&p)<<12|(63&a)<<6|63&o)||1114112<=u)&&(u=null)),null===u?(u=65533,l=1):65535<u&&(u-=65536,r+=d(55296|1023&u>>>10),u=56320|1023&u),r+=d(u),n+=l}return r}(this.buf,t,o)},readBytes:function(){var o=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,o);return this.pos=o,t},readPackedVarint:function(o,t){if(this.type!==Ks.Bytes)return o.push(this.readVarint(t));var e=Hs(this);for(o=o||[];this.pos<e;)o.push(this.readVarint(t));return o},readPackedSVarint:function(o){if(this.type!==Ks.Bytes)return o.push(this.readSVarint());var t=Hs(this);for(o=o||[];this.pos<t;)o.push(this.readSVarint());return o},readPackedBoolean:function(o){if(this.type!==Ks.Bytes)return o.push(this.readBoolean());var t=Hs(this);for(o=o||[];this.pos<t;)o.push(this.readBoolean());return o},readPackedFloat:function(o){if(this.type!==Ks.Bytes)return o.push(this.readFloat());var t=Hs(this);for(o=o||[];this.pos<t;)o.push(this.readFloat());return o},readPackedDouble:function(o){if(this.type!==Ks.Bytes)return o.push(this.readDouble());var t=Hs(this);for(o=o||[];this.pos<t;)o.push(this.readDouble());return o},readPackedFixed32:function(o){if(this.type!==Ks.Bytes)return o.push(this.readFixed32());var t=Hs(this);for(o=o||[];this.pos<t;)o.push(this.readFixed32());return o},readPackedSFixed32:function(o){if(this.type!==Ks.Bytes)return o.push(this.readSFixed32());var t=Hs(this);for(o=o||[];this.pos<t;)o.push(this.readSFixed32());return o},readPackedFixed64:function(o){if(this.type!==Ks.Bytes)return o.push(this.readFixed64());var t=Hs(this);for(o=o||[];this.pos<t;)o.push(this.readFixed64());return o},readPackedSFixed64:function(o){if(this.type!==Ks.Bytes)return o.push(this.readSFixed64());var t=Hs(this);for(o=o||[];this.pos<t;)o.push(this.readSFixed64());return o},skip:function(o){var t=7&o;if(t===Ks.Varint)for(;127<this.buf[this.pos++];);else if(t===Ks.Bytes)this.pos=this.readVarint()+this.pos;else if(t===Ks.Fixed32)this.pos+=4;else{if(t!==Ks.Fixed64)throw new Error('Unimplemented type: '+t);this.pos+=8}},writeTag:function(o,t){this.writeVarint(o<<3|t)},realloc:function(o){for(var t=this.length||16;t<this.pos+o;)t*=2;if(t!==this.length){var e=new Uint8Array(t);e.set(this.buf),this.buf=e,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),Op(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),Op(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),Op(this.buf,-1&e,this.pos),Op(this.buf,ea(e*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),Op(this.buf,-1&e,this.pos),Op(this.buf,ea(e*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(e){268435455<(e=+e||0)||0>e?function(o,a){var e,r;if(0<=o?(e=0|o%4294967296,r=0|o/4294967296):(r=~(-o/4294967296),4294967295^(e=~(-o%4294967296))?e=0|e+1:(e=0,r=0|r+1)),0x10000000000000000<=o||-0x10000000000000000>o)throw new Error('Given varint doesn\'t fit into 10 bytes');a.realloc(10),function(o,t,e){e.buf[e.pos++]=128|127&o,o>>>=7,e.buf[e.pos++]=128|127&o,o>>>=7,e.buf[e.pos++]=128|127&o,o>>>=7,e.buf[e.pos++]=128|127&o,e.buf[e.pos]=127&(o>>>=7)}(e,0,a),function(o,t){var e=(7&o)<<4;t.buf[t.pos++]|=e|((o>>>=3)?128:0),o&&(t.buf[t.pos++]=127&o|((o>>>=7)?128:0),o&&(t.buf[t.pos++]=127&o|((o>>>=7)?128:0),o&&(t.buf[t.pos++]=127&o|((o>>>=7)?128:0),o&&(t.buf[t.pos++]=127&o|((o>>>=7)?128:0),o&&(t.buf[t.pos++]=127&o)))))}(r,a)}(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(127<e?128:0),127>=e||(this.buf[this.pos++]=127&(e>>>=7)|(127<e?128:0),127>=e||(this.buf[this.pos++]=127&(e>>>=7)|(127<e?128:0),127>=e||(this.buf[this.pos++]=127&e>>>7))))},writeSVarint:function(e){this.writeVarint(0>e?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(!!e)},writeString:function(o){o+='',this.realloc(4*o.length),this.pos++;var t=this.pos;this.pos=function(o,t,e){for(var r=0,a,n;r<t.length;r++){if(55295<(a=t.charCodeAt(r))&&57344>a){if(!n){56319<a||r+1===t.length?(o[e++]=239,o[e++]=191,o[e++]=189):n=a;continue}if(56320>a){o[e++]=239,o[e++]=191,o[e++]=189,n=a;continue}a=65536|(n-55296<<10|a-56320),n=null}else n&&(o[e++]=239,o[e++]=191,o[e++]=189,n=null);128>a?o[e++]=a:(2048>a?o[e++]=192|a>>6:(65536>a?o[e++]=224|a>>12:(o[e++]=240|a>>18,o[e++]=128|63&a>>12),o[e++]=128|63&a>>6),o[e++]=128|63&a)}return e}(this.buf,o,this.pos);var e=this.pos-t;128<=e&&Ws(t,e,this),this.pos=t-1,this.writeVarint(e),this.pos+=e},writeFloat:function(e){this.realloc(4),Zs(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),Zs(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(o){var t=o.length;this.writeVarint(t),this.realloc(t);for(var e=0;e<t;e++)this.buf[this.pos++]=o[e]},writeRawMessage:function(o,t){this.pos++;var e=this.pos;o(t,this);var a=this.pos-e;128<=a&&Ws(e,a,this),this.pos=e-1,this.writeVarint(a),this.pos+=a},writeMessage:function(o,t,e){this.writeTag(o,Ks.Bytes),this.writeRawMessage(t,e)},writePackedVarint:function(o,t){t.length&&this.writeMessage(o,Qs,t)},writePackedSVarint:function(o,t){t.length&&this.writeMessage(o,kp,t)},writePackedBoolean:function(o,t){t.length&&this.writeMessage(o,Dp,t)},writePackedFloat:function(o,t){t.length&&this.writeMessage(o,Pp,t)},writePackedDouble:function(o,t){t.length&&this.writeMessage(o,zp,t)},writePackedFixed32:function(o,t){t.length&&this.writeMessage(o,Lp,t)},writePackedSFixed32:function(o,t){t.length&&this.writeMessage(o,Rp,t)},writePackedFixed64:function(o,t){t.length&&this.writeMessage(o,Bp,t)},writePackedSFixed64:function(o,t){t.length&&this.writeMessage(o,Fp,t)},writeBytesField:function(o,t){this.writeTag(o,Ks.Bytes),this.writeBytes(t)},writeFixed32Field:function(o,t){this.writeTag(o,Ks.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(o,t){this.writeTag(o,Ks.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(o,t){this.writeTag(o,Ks.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(o,t){this.writeTag(o,Ks.Fixed64),this.writeSFixed64(t)},writeVarintField:function(o,t){this.writeTag(o,Ks.Varint),this.writeVarint(t)},writeSVarintField:function(o,t){this.writeTag(o,Ks.Varint),this.writeSVarint(t)},writeStringField:function(o,t){this.writeTag(o,Ks.Bytes),this.writeString(t)},writeFloatField:function(o,t){this.writeTag(o,Ks.Fixed32),this.writeFloat(t)},writeDoubleField:function(o,t){this.writeTag(o,Ks.Fixed64),this.writeDouble(t)},writeBooleanField:function(o,t){this.writeVarintField(o,!!t)}};var Ys=function(s,t){var e=t.pixelRatio,r=t.version,n=t.stretchX,i=t.stretchY,a=t.content;this.paddedRect=s,this.pixelRatio=e,this.stretchX=n,this.stretchY=i,this.content=a,this.version=r},zc={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};zc.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},zc.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},zc.tlbr.get=function(){return this.tl.concat(this.br)},zc.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(Ys.prototype,zc);var Dc=function(g,t){var e={},r={};this.haveRenderCallbacks=[];var n=[];this.addImages(g,e,n),this.addImages(t,r,n);var i=jp(n),a=new mo({width:i.w||1,height:i.h||1});for(var o in g){var s=g[o],u=e[o].paddedRect;mo.copy(s.data,a,{x:0,y:0},{x:u.x+1,y:u.y+1},s.data)}for(var l in t){var p=t[l],c=r[l].paddedRect,_=c.x+1,h=c.y+1,x=p.data.width,v=p.data.height;mo.copy(p.data,a,{x:0,y:0},{x:_,y:h},p.data),mo.copy(p.data,a,{x:0,y:v-1},{x:_,y:h-1},{width:x,height:1}),mo.copy(p.data,a,{x:0,y:0},{x:_,y:h+v},{width:x,height:1}),mo.copy(p.data,a,{x:x-1,y:0},{x:_-1,y:h},{width:1,height:v}),mo.copy(p.data,a,{x:0,y:0},{x:_+x,y:h},{width:1,height:v})}this.image=a,this.iconPositions=e,this.patternPositions=r};Dc.prototype.addImages=function(o,t,e){for(var r in o){var n=o[r],i={x:0,y:0,w:n.data.width+2,h:n.data.height+2};e.push(i),t[r]=new Ys(i,n),n.hasRenderCallback&&this.haveRenderCallbacks.push(r)}},Dc.prototype.patchUpdatedImages=function(o,t){for(var e in o.dispatchRenderCallbacks(this.haveRenderCallbacks),o.updatedImages)this.patchUpdatedImage(this.iconPositions[e],o.getImage(e),t),this.patchUpdatedImage(this.patternPositions[e],o.getImage(e),t)},Dc.prototype.patchUpdatedImage=function(o,t,e){if(o&&t&&o.version!==t.version){o.version=t.version;var a=o.tl;e.update(t.data,void 0,{x:a[0],y:a[1]})}},Tn('ImagePosition',Ys),Tn('ImageAtlas',Dc);var Lc={horizontal:1,vertical:2,horizontalOnly:3},Rc=function(){this.scale=1,this.fontStack='',this.imageName=null};Rc.forText=function(o,t){var e=new Rc;return e.scale=o||1,e.fontStack=t,e},Rc.forImage=function(o){var t=new Rc;return t.imageName=o,t};var Bc=function(){this.text='',this.sectionIndex=[],this.sections=[],this.imageSectionID=null};Bc.fromFeature=function(o,t){for(var e=new Bc,a=0,r;a<o.sections.length;a++)r=o.sections[a],r.image?e.addImageSection(r):e.addTextSection(r,t);return e},Bc.prototype.length=function(){return this.text.length},Bc.prototype.getSection=function(e){return this.sections[this.sectionIndex[e]]},Bc.prototype.getSectionIndex=function(e){return this.sectionIndex[e]},Bc.prototype.getCharCode=function(e){return this.text.charCodeAt(e)},Bc.prototype.verticalizePunctuation=function(){this.text=function(o){for(var t='',e=0;e<o.length;e++){var a=o.charCodeAt(e+1)||null,r=o.charCodeAt(e-1)||null;t+=a&&Zn(a)&&!Ns[o[e+1]]||r&&Zn(r)&&!Ns[o[e-1]]||!Ns[o[e]]?o[e]:Ns[o[e]]}return t}(this.text)},Bc.prototype.trim=function(){for(var o=0,t=0;t<this.text.length&&Fc[this.text.charCodeAt(t)];t++)o++;for(var e=this.text.length,a=this.text.length-1;0<=a&&a>=o&&Fc[this.text.charCodeAt(a)];a--)e--;this.text=this.text.substring(o,e),this.sectionIndex=this.sectionIndex.slice(o,e)},Bc.prototype.substring=function(o,t){var e=new Bc;return e.text=this.text.substring(o,t),e.sectionIndex=this.sectionIndex.slice(o,t),e.sections=this.sections,e},Bc.prototype.toString=function(){return this.text},Bc.prototype.getMaxScale=function(){var o=this;return this.sectionIndex.reduce(function(t,e){return oa(t,o.sections[e].scale)},0)},Bc.prototype.addTextSection=function(o,t){this.text+=o.text,this.sections.push(Rc.forText(o.scale,o.fontStack||t));for(var e=this.sections.length-1,a=0;a<o.text.length;++a)this.sectionIndex.push(e)},Bc.prototype.addImageSection=function(o){var t=o.image?o.image.name:'';if(0!==t.length){var e=this.getNextImageSectionCharCode();e?(this.text+=d(e),this.sections.push(Rc.forImage(t)),this.sectionIndex.push(this.sections.length-1)):cp('Reached maximum number of images 6401')}else cp('Can\'t add FormattedSection with an empty image.')},Bc.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?63743<=this.imageSectionID?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var Fc={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Mc={};Mc[10]=!0,Mc[32]=!0,Mc[38]=!0,Mc[40]=!0,Mc[41]=!0,Mc[43]=!0,Mc[45]=!0,Mc[47]=!0,Mc[173]=!0,Mc[183]=!0,Mc[8203]=!0,Mc[8208]=!0,Mc[8211]=!0,Mc[8231]=!0;var Oc=function(o){function t(t,a,r,n){o.call(this,t,a),this.angle=r,void 0!==n&&(this.segment=n)}return o&&(t.__proto__=o),(t.prototype=Object.create(o&&o.prototype)).constructor=t,t.prototype.clone=function(){return new t(this.x,this.y,this.angle,this.segment)},t}(xd);Tn('Anchor',Oc);var Nc=Object.freeze({__proto__:null,getSizeData:Qp,evaluateSizeForFeature:ed,evaluateSizeForZoom:td,SIZE_PACK_FACTOR:128}),Uc=function(i,t,e,r,n,a,o,s,u,l){if(this.boxStartIndex=i.length,u){var p=a.top,c=a.bottom,h=a.collisionPadding;h&&(p-=h[1],c+=h[3]);var f=c-p;0<f&&(f=oa(10,f),this.circleDiameter=f)}else{var y=a.top*o-s,d=a.bottom*o+s,m=a.left*o-s,v=a.right*o+s,g=a.collisionPadding;if(g&&(m-=g[0]*o,y-=g[1]*o,v+=g[2]*o,d+=g[3]*o),l){var x=new xd(m,y),b=new xd(v,y),w=new xd(m,d),_=new xd(v,d),T=l*Xe/180;x._rotate(T),b._rotate(T),w._rotate(T),_._rotate(T),m=ta(x.x,b.x,w.x,_.x),v=oa(x.x,b.x,w.x,_.x),y=ta(x.y,b.y,w.y,_.y),d=oa(x.y,b.y,w.y,_.y)}i.emplaceBack(t.x,t.y,m,y,v,d,e,r,n)}this.boxEndIndex=i.length},Vc=function(o,t){if(void 0===o&&(o=[]),void 0===t&&(t=gd),this.data=o,this.length=this.data.length,this.compare=t,0<this.length)for(var e=(this.length>>1)-1;0<=e;e--)this._down(e)};Vc.prototype.push=function(e){this.data.push(e),this.length++,this._up(this.length-1)},Vc.prototype.pop=function(){if(0!==this.length){var o=this.data[0],t=this.data.pop();return this.length--,0<this.length&&(this.data[0]=t,this._down(0)),o}},Vc.prototype.peek=function(){return this.data[0]},Vc.prototype._up=function(o){for(var t=this.data,e=this.compare,r=t[o];0<o;){var n=o-1>>1,i=t[n];if(0<=e(r,i))break;t[o]=i,o=n}t[o]=r},Vc.prototype._down=function(l){for(var t=this.data,e=this.compare,r=this.length>>1,n=t[l];l<r;){var i=1+(l<<1),a=t[i],o=i+1;if(o<this.length&&0>e(t[o],a)&&(i=o,a=t[o]),0<=e(a,n))break;t[l]=a,l=i}t[l]=n};var qc=Number.POSITIVE_INFINITY,rl=Ic.VectorTileFeature.types,ul=[{name:'a_fade_opacity',components:1,type:'Uint8',offset:0}],ll=function(e){this.layoutVertexArray=new mc,this.indexArray=new Oi,this.programConfigurations=e,this.segments=new aa,this.dynamicLayoutVertexArray=new Ti,this.opacityVertexArray=new Vi,this.placedSymbolArray=new $i};ll.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length},ll.prototype.upload=function(o,t,e,a){this.isEmpty()||(e&&(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,Pc.members),this.indexBuffer=o.createIndexBuffer(this.indexArray,t),this.dynamicLayoutVertexBuffer=o.createVertexBuffer(this.dynamicLayoutVertexArray,Os.members,!0),this.opacityVertexBuffer=o.createVertexBuffer(this.opacityVertexArray,ul,!0),this.opacityVertexBuffer.itemSize=1),(e||a)&&this.programConfigurations.upload(o))},ll.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},Tn('SymbolBuffers',ll);var fl=function(o,t,e){this.layoutVertexArray=new o,this.layoutAttributes=t,this.indexArray=new e,this.segments=new aa,this.collisionVertexArray=new Ri};fl.prototype.upload=function(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,Us.members,!0)},fl.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},Tn('CollisionBuffers',fl);var yl=function(o){this.collisionBoxArray=o.collisionBoxArray,this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(function(e){return e.id}),this.index=o.index,this.pixelRatio=o.pixelRatio,this.sourceLayerIndex=o.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=to([]),this.placementViewportMatrix=to([]);var t=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Qp(this.zoom,t['text-size']),this.iconSizeData=Qp(this.zoom,t['icon-size']);var e=this.layers[0].layout,a=e.get('symbol-sort-key'),r=e.get('symbol-z-order');this.sortFeaturesByKey='viewport-y'!==r&&void 0!==a.constantOr(1),this.sortFeaturesByY=('viewport-y'===r||'auto'===r&&!this.sortFeaturesByKey)&&(e.get('text-allow-overlap')||e.get('icon-allow-overlap')||e.get('text-ignore-placement')||e.get('icon-ignore-placement')),'point'===e.get('symbol-placement')&&(this.writingModes=e.get('text-writing-mode').map(function(e){return Lc[e]})),this.stateDependentLayerIds=this.layers.filter(function(e){return e.isStateDependent()}).map(function(e){return e.id}),this.sourceID=o.sourceID};yl.prototype.createArrays=function(){this.text=new ll(new Ba(this.layers,this.zoom,function(e){return /^text/.test(e)})),this.icon=new ll(new Ba(this.layers,this.zoom,function(e){return /^icon/.test(e)})),this.glyphOffsetArray=new _c,this.lineVertexArray=new fc,this.symbolInstances=new Qi},yl.prototype.calculateGlyphDependencies=function(s,t,e,r,n){for(var i=0;i<s.length;i++)if(t[s.charCodeAt(i)]=!0,(e||r)&&n){var a=Ns[s.charAt(i)];a&&(t[a.charCodeAt(0)]=!0)}},yl.prototype.populate=function(O,t,e){var r=this.layers[0],n=r.layout,i=n.get('text-font'),a=n.get('text-field'),o=n.get('icon-image'),s=('constant'!==a.value.kind||a.value.value instanceof ee&&!a.value.value.isEmpty()||0<a.value.value.toString().length)&&('constant'!==i.value.kind||0<i.value.value.length),u='constant'!==o.value.kind||!!o.value.value||0<Object.keys(o.parameters).length,l=n.get('symbol-sort-key');if(this.features=[],s||u){for(var p=t.iconDependencies,c=t.glyphDependencies,h=t.availableImages,f=new ai(this.zoom),y=0,d=O;y<d.length;y+=1){var m=d[y],v=m.feature,g=m.id,N=m.index,U=m.sourceLayerIndex,q=r._featureFilter.needGeometry,_={type:v.type,id:g,properties:v.properties,geometry:q?Fa(v):[]};if(r._featureFilter.filter(f,_,e)){q||(_.geometry=Fa(v));var A=void 0;if(s){var j=r.getValueAndResolveTokens('text-field',_,e,h),k=ee.factory(j);cl(k)&&(this.hasRTLText=!0),(!this.hasRTLText||'unavailable'===ri()||this.hasRTLText&&ii.isParsed())&&(A=Rs(k,r,_))}var I=void 0;if(u){var Z=r.getValueAndResolveTokens('icon-image',_,e,h);I=Z instanceof re?Z:re.fromString(Z)}if(A||I){var C=this.sortFeaturesByKey?l.evaluate(_,{},e):void 0,G={id:g,text:A,icon:I,index:N,sourceLayerIndex:U,geometry:Fa(v),properties:v.properties,type:rl[v.type],sortKey:C};if(this.features.push(G),I&&(p[I.name]=!0),A){var P=i.evaluate(_,{},e).join(','),M='map'===n.get('text-rotation-alignment')&&'point'!==n.get('symbol-placement');this.allowVerticalPlacement=this.writingModes&&0<=this.writingModes.indexOf(Lc.vertical);for(var B=0,T=A.sections,V;B<T.length;B+=1)if(V=T[B],V.image)p[V.image.name]=!0;else{var F=qn(A.toString()),D=V.fontStack||P,L=c[D]=c[D]||{};this.calculateGlyphDependencies(V.text,L,M,this.allowVerticalPlacement,F)}}}}}'line'===n.get('symbol-placement')&&(this.features=function(g){function t(t){x.push(g[t]),r++}function a(o,t,e){var r=_[o];return delete _[o],_[t]=r,x[r].geometry[0].pop(),x[r].geometry[0]=x[r].geometry[0].concat(e[0]),r}function o(e,t,o){var r=u[t];return delete u[t],u[e]=r,x[r].geometry[0].shift(),x[r].geometry[0]=o[0].concat(x[r].geometry[0]),r}function s(o,t,e){var a=e?t[0][t[0].length-1]:t[0][0];return o+':'+a.x+':'+a.y}for(var u={},_={},x=[],r=0,e=0;e<g.length;e++){var n=g[e],i=n.geometry,l=n.text?n.text.toString():null;if(l){var p=s(l,i),c=s(l,i,!0);if(p in _&&c in u&&_[p]!==u[c]){var y=o(p,c,i),d=a(p,c,x[y].geometry);delete u[p],delete _[c],_[s(l,x[d].geometry,!0)]=d,x[y].geometry=null}else p in _?a(p,c,i):c in u?o(p,c,i):(t(e),u[p]=r-1,_[c]=r-1)}else t(e)}return x.filter(function(e){return e.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(o,t){return o.sortKey-t.sortKey})}},yl.prototype.update=function(o,t,e){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(o,t,this.layers,e),this.icon.programConfigurations.updatePaintArrays(o,t,this.layers,e))},yl.prototype.isEmpty=function(){return 0===this.symbolInstances.length&&!this.hasRTLText},yl.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},yl.prototype.upload=function(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},yl.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},yl.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},yl.prototype.addToLineVertexArray=function(p,t){var e=this.lineVertexArray.length;if(void 0!==p.segment){for(var d=p.dist(t[p.segment+1]),c=p.dist(t[p.segment]),m={},a=p.segment+1;a<t.length;a++)m[a]={x:t[a].x,y:t[a].y,tileUnitDistanceFromAnchor:d},a<t.length-1&&(d+=t[a+1].dist(t[a]));for(var o=p.segment||0;0<=o;o--)m[o]={x:t[o].x,y:t[o].y,tileUnitDistanceFromAnchor:c},0<o&&(c+=t[o-1].dist(t[o]));for(var s=0,u;s<t.length;s++)u=m[s],this.lineVertexArray.emplaceBack(u.x,u.y,u.tileUnitDistanceFromAnchor)}return{lineStartIndex:e,lineLength:this.lineVertexArray.length-e}},yl.prototype.addSymbols=function(D,t,e,r,n,i,a,o,s,u,l,p){for(var c=D.indexArray,h=D.layoutVertexArray,f=D.segments.prepareSegment(4*t.length,h,c,i.sortKey),y=this.glyphOffsetArray.length,d=f.vertexLength,m=this.allowVerticalPlacement&&a===Lc.vertical?Xe/2:0,v=i.text&&i.text.sections,g=0;g<t.length;g++){var x=t[g],b=x.tl,w=x.tr,_=x.bl,A=x.br,S=x.tex,k=x.pixelOffsetTL,I=x.pixelOffsetBR,z=x.minFontScaleX,C=x.minFontScaleY,E=x.glyphOffset,P=x.isSDF,L=x.sectionIndex,R=f.vertexLength,T=E[1];sl(h,o.x,o.y,b.x,T+b.y,S.x,S.y,e,P,k.x,k.y,z,C),sl(h,o.x,o.y,w.x,T+w.y,S.x+S.w,S.y,e,P,I.x,k.y,z,C),sl(h,o.x,o.y,_.x,T+_.y,S.x,S.y+S.h,e,P,k.x,I.y,z,C),sl(h,o.x,o.y,A.x,T+A.y,S.x+S.w,S.y+S.h,e,P,I.x,I.y,z,C),pl(D.dynamicLayoutVertexArray,o,m),c.emplaceBack(R,R+1,R+2),c.emplaceBack(R+1,R+2,R+3),f.vertexLength+=4,f.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(E[0]),g!==t.length-1&&L===t[g+1].sectionIndex||D.programConfigurations.populatePaintArrays(h.length,i,i.index,{},p,v&&v[L])}D.placedSymbolArray.emplaceBack(o.x,o.y,y,this.glyphOffsetArray.length-y,d,s,u,o.segment,e?e[0]:0,e?e[1]:0,r[0],r[1],a,0,!1,0,l)},yl.prototype._addCollisionDebugVertex=function(o,t,e,r,n,i){return t.emplaceBack(0,0),o.emplaceBack(e.x,e.y,r,n,b(i.x),b(i.y))},yl.prototype.addCollisionDebugVertices=function(i,t,e,r,n,a,o){var s=n.segments.prepareSegment(4,n.layoutVertexArray,n.indexArray),d=s.vertexLength,l=n.layoutVertexArray,p=n.collisionVertexArray,c=o.anchorX,u=o.anchorY;this._addCollisionDebugVertex(l,p,a,c,u,new xd(i,t)),this._addCollisionDebugVertex(l,p,a,c,u,new xd(e,t)),this._addCollisionDebugVertex(l,p,a,c,u,new xd(e,r)),this._addCollisionDebugVertex(l,p,a,c,u,new xd(i,r)),s.vertexLength+=4;var m=n.indexArray;m.emplaceBack(d,d+1),m.emplaceBack(d+1,d+2),m.emplaceBack(d+2,d+3),m.emplaceBack(d+3,d),s.primitiveLength+=4},yl.prototype.addDebugCollisionBoxes=function(o,t,e,r){for(var n=o,i;n<t;n++)i=this.collisionBoxArray.get(n),this.addCollisionDebugVertices(i.x1,i.y1,i.x2,i.y2,r?this.textCollisionBox:this.iconCollisionBox,i.anchorPoint,e)},yl.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new fl(Di,js.members,Gi),this.iconCollisionBox=new fl(Di,js.members,Gi);for(var o=0,t;o<this.symbolInstances.length;o++)t=this.symbolInstances.get(o),this.addDebugCollisionBoxes(t.textBoxStartIndex,t.textBoxEndIndex,t,!0),this.addDebugCollisionBoxes(t.verticalTextBoxStartIndex,t.verticalTextBoxEndIndex,t,!0),this.addDebugCollisionBoxes(t.iconBoxStartIndex,t.iconBoxEndIndex,t,!1),this.addDebugCollisionBoxes(t.verticalIconBoxStartIndex,t.verticalIconBoxEndIndex,t,!1)},yl.prototype._deserializeCollisionBoxesForSymbol=function(g,t,e,r,n,i,a,o,s){for(var u={},l=t,p;l<e;l++){p=g.get(l),u.textBox={x1:p.x1,y1:p.y1,x2:p.x2,y2:p.y2,anchorPointX:p.anchorPointX,anchorPointY:p.anchorPointY},u.textFeatureIndex=p.featureIndex;break}for(var c=r,_;c<n;c++){_=g.get(c),u.verticalTextBox={x1:_.x1,y1:_.y1,x2:_.x2,y2:_.y2,anchorPointX:_.anchorPointX,anchorPointY:_.anchorPointY},u.verticalTextFeatureIndex=_.featureIndex;break}for(var f=i,y;f<a;f++){y=g.get(f),u.iconBox={x1:y.x1,y1:y.y1,x2:y.x2,y2:y.y2,anchorPointX:y.anchorPointX,anchorPointY:y.anchorPointY},u.iconFeatureIndex=y.featureIndex;break}for(var d=o,m;d<s;d++){m=g.get(d),u.verticalIconBox={x1:m.x1,y1:m.y1,x2:m.x2,y2:m.y2,anchorPointX:m.anchorPointX,anchorPointY:m.anchorPointY},u.verticalIconFeatureIndex=m.featureIndex;break}return u},yl.prototype.deserializeCollisionBoxes=function(o){this.collisionArrays=[];for(var t=0,e;t<this.symbolInstances.length;t++)e=this.symbolInstances.get(t),this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(o,e.textBoxStartIndex,e.textBoxEndIndex,e.verticalTextBoxStartIndex,e.verticalTextBoxEndIndex,e.iconBoxStartIndex,e.iconBoxEndIndex,e.verticalIconBoxStartIndex,e.verticalIconBoxEndIndex))},yl.prototype.hasTextData=function(){return 0<this.text.segments.get().length},yl.prototype.hasIconData=function(){return 0<this.icon.segments.get().length},yl.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},yl.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&0<this.textCollisionBox.segments.get().length},yl.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&0<this.iconCollisionBox.segments.get().length},yl.prototype.addIndicesForPlacedSymbol=function(o,t){for(var e=o.placedSymbolArray.get(t),a=e.vertexStartIndex+4*e.numGlyphs,r=e.vertexStartIndex;r<a;r+=4)o.indexArray.emplaceBack(r,r+1,r+2),o.indexArray.emplaceBack(r+1,r+2,r+3)},yl.prototype.getSortedSymbolIndexes=function(l){if(this.sortedAngle===l&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;for(var t=w(l),e=Ze(l),r=[],n=[],i=[],a=0;a<this.symbolInstances.length;++a){i.push(a);var o=this.symbolInstances.get(a);r.push(0|b(t*o.anchorX+e*o.anchorY)),n.push(o.featureIndex)}return i.sort(function(o,t){return r[o]-r[t]||n[t]-n[o]}),i},yl.prototype.addToSortKeyRanges=function(o,a){var n=this.sortKeyRanges[this.sortKeyRanges.length-1];n&&n.sortKey===a?n.symbolInstanceEnd=o+1:this.sortKeyRanges.push({sortKey:a,symbolInstanceStart:o,symbolInstanceEnd:o+1})},yl.prototype.sortFeatures=function(o){var a=this;if(this.sortFeaturesByY&&this.sortedAngle!==o&&!(1<this.text.segments.get().length||1<this.icon.segments.get().length)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(o),this.sortedAngle=o,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var e=0,t=this.symbolInstanceIndexes,r;e<t.length;e+=1)r=this.symbolInstances.get(t[e]),this.featureSortOrder.push(r.featureIndex),[r.rightJustifiedTextSymbolIndex,r.centerJustifiedTextSymbolIndex,r.leftJustifiedTextSymbolIndex].forEach(function(e,t,o){0<=e&&o.indexOf(e)===t&&a.addIndicesForPlacedSymbol(a.text,e)}),0<=r.verticalPlacedTextSymbolIndex&&this.addIndicesForPlacedSymbol(this.text,r.verticalPlacedTextSymbolIndex),0<=r.placedIconSymbolIndex&&this.addIndicesForPlacedSymbol(this.icon,r.placedIconSymbolIndex),0<=r.verticalPlacedIconSymbolIndex&&this.addIndicesForPlacedSymbol(this.icon,r.verticalPlacedIconSymbolIndex);this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},Tn('SymbolBucket',yl,{omit:['layers','collisionBoxArray','features','compareText']}),yl.MAX_GLYPHS=65535,yl.addDynamicAttributes=pl;var dl=new xi({"symbol-placement":new yi(zt.layout_symbol['symbol-placement']),"symbol-spacing":new yi(zt.layout_symbol['symbol-spacing']),"symbol-avoid-edges":new yi(zt.layout_symbol['symbol-avoid-edges']),"symbol-sort-key":new di(zt.layout_symbol['symbol-sort-key']),"symbol-z-order":new yi(zt.layout_symbol['symbol-z-order']),"icon-allow-overlap":new yi(zt.layout_symbol['icon-allow-overlap']),"icon-ignore-placement":new yi(zt.layout_symbol['icon-ignore-placement']),"icon-optional":new yi(zt.layout_symbol['icon-optional']),"icon-rotation-alignment":new yi(zt.layout_symbol['icon-rotation-alignment']),"icon-size":new di(zt.layout_symbol['icon-size']),"icon-text-fit":new yi(zt.layout_symbol['icon-text-fit']),"icon-text-fit-padding":new yi(zt.layout_symbol['icon-text-fit-padding']),"icon-image":new di(zt.layout_symbol['icon-image']),"icon-rotate":new di(zt.layout_symbol['icon-rotate']),"icon-padding":new yi(zt.layout_symbol['icon-padding']),"icon-keep-upright":new yi(zt.layout_symbol['icon-keep-upright']),"icon-offset":new di(zt.layout_symbol['icon-offset']),"icon-anchor":new di(zt.layout_symbol['icon-anchor']),"icon-pitch-alignment":new yi(zt.layout_symbol['icon-pitch-alignment']),"text-pitch-alignment":new yi(zt.layout_symbol['text-pitch-alignment']),"text-rotation-alignment":new yi(zt.layout_symbol['text-rotation-alignment']),"text-field":new di(zt.layout_symbol['text-field']),"text-font":new di(zt.layout_symbol['text-font']),"text-size":new di(zt.layout_symbol['text-size']),"text-max-width":new di(zt.layout_symbol['text-max-width']),"text-line-height":new yi(zt.layout_symbol['text-line-height']),"text-letter-spacing":new di(zt.layout_symbol['text-letter-spacing']),"text-justify":new di(zt.layout_symbol['text-justify']),"text-radial-offset":new di(zt.layout_symbol['text-radial-offset']),"text-variable-anchor":new yi(zt.layout_symbol['text-variable-anchor']),"text-anchor":new di(zt.layout_symbol['text-anchor']),"text-max-angle":new yi(zt.layout_symbol['text-max-angle']),"text-writing-mode":new yi(zt.layout_symbol['text-writing-mode']),"text-rotate":new di(zt.layout_symbol['text-rotate']),"text-padding":new yi(zt.layout_symbol['text-padding']),"text-keep-upright":new yi(zt.layout_symbol['text-keep-upright']),"text-transform":new di(zt.layout_symbol['text-transform']),"text-offset":new di(zt.layout_symbol['text-offset']),"text-allow-overlap":new yi(zt.layout_symbol['text-allow-overlap']),"text-ignore-placement":new yi(zt.layout_symbol['text-ignore-placement']),"text-optional":new yi(zt.layout_symbol['text-optional'])}),jc={paint:new xi({"icon-opacity":new di(zt.paint_symbol['icon-opacity']),"icon-color":new di(zt.paint_symbol['icon-color']),"icon-halo-color":new di(zt.paint_symbol['icon-halo-color']),"icon-halo-width":new di(zt.paint_symbol['icon-halo-width']),"icon-halo-blur":new di(zt.paint_symbol['icon-halo-blur']),"icon-translate":new yi(zt.paint_symbol['icon-translate']),"icon-translate-anchor":new yi(zt.paint_symbol['icon-translate-anchor']),"text-opacity":new di(zt.paint_symbol['text-opacity']),"text-color":new di(zt.paint_symbol['text-color'],{runtimeType:kd,getOverride:function(e){return e.textColor},hasOverride:function(e){return!!e.textColor}}),"text-halo-color":new di(zt.paint_symbol['text-halo-color']),"text-halo-width":new di(zt.paint_symbol['text-halo-width']),"text-halo-blur":new di(zt.paint_symbol['text-halo-blur']),"text-translate":new yi(zt.paint_symbol['text-translate']),"text-translate-anchor":new yi(zt.paint_symbol['text-translate-anchor'])}),layout:dl},vl=function(e){this.type=e.property.overrides?e.property.overrides.runtimeType:Ft,this.defaultValue=e};vl.prototype.evaluate=function(o){if(o.formattedSection){var t=this.defaultValue.property.overrides;if(t&&t.hasOverride(o.formattedSection))return t.getOverride(o.formattedSection)}return o.feature&&o.featureState?this.defaultValue.evaluate(o.feature,o.featureState):this.defaultValue.property.specification.default},vl.prototype.eachChild=function(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)},vl.prototype.outputDefined=function(){return!1},vl.prototype.serialize=function(){return null},Tn('FormatSectionOverride',vl,{omit:['defaultValue']});var gl=function(l){function p(t){l.call(this,t,jc)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.recalculate=function(t,e){if(l.prototype.recalculate.call(this,t,e),'auto'===this.layout.get('icon-rotation-alignment')&&(this.layout._values['icon-rotation-alignment']='point'===this.layout.get('symbol-placement')?'viewport':'map'),'auto'===this.layout.get('text-rotation-alignment')&&(this.layout._values['text-rotation-alignment']='point'===this.layout.get('symbol-placement')?'viewport':'map'),'auto'===this.layout.get('text-pitch-alignment')&&(this.layout._values['text-pitch-alignment']=this.layout.get('text-rotation-alignment')),'auto'===this.layout.get('icon-pitch-alignment')&&(this.layout._values['icon-pitch-alignment']=this.layout.get('icon-rotation-alignment')),'point'===this.layout.get('symbol-placement')){var r=this.layout.get('text-writing-mode');if(r){for(var n=[],i=0,a=r,o;i<a.length;i+=1)o=a[i],0>n.indexOf(o)&&n.push(o);this.layout._values['text-writing-mode']=n}else this.layout._values['text-writing-mode']=['horizontal']}this._setPaintOverrides()},p.prototype.getValueAndResolveTokens=function(o,t,e,r){var n=this.layout.get(o).evaluate(t,{},e,r),s=this._unevaluatedLayout._values[o];return s.isDataDriven()||qr(s.value)||!n?n:function(o,t){return t.replace(/{([^{}]+)}/g,function(t,e){return e in o?o[e]+'':''})}(t.properties,n)},p.prototype.createBucket=function(e){return new yl(e)},p.prototype.queryRadius=function(){return 0},p.prototype.queryIntersectsFeature=function(){return!1},p.prototype._setPaintOverrides=function(){for(var e=0,t=jc.paint.overridableProperties,r;e<t.length;e+=1)if(r=t[e],p.hasPaintOverride(this.layout,r)){var n=this.paint.get(r),a=new vl(n),o=new kr(a,n.property.specification),s;s='constant'===n.value.kind||'source'===n.value.kind?new Nr('source',o):new Zr('composite',o,n.value.zoomStops,n.value._interpolationType),this.paint._values[r]=new hi(n.property,s,n.parameters)}},p.prototype._handleOverridablePaintPropertyUpdate=function(e,t,o){return!(!this.layout||t.isDataDriven()||o.isDataDriven())&&p.hasPaintOverride(this.layout,e)},p.hasPaintOverride=function(l,t){var e=l.get('text-field'),p=jc.paint.properties[t],n=!1,r=function(o){for(var t=0,e=o;t<e.length;t+=1)if(p.overrides&&p.overrides.hasOverride(e[t]))return void(n=!0)};if('constant'===e.value.kind&&e.value.value instanceof ee)r(e.value.value.sections);else if('source'===e.value.kind){var a=function(e){n||(e instanceof ne&&ae(e.value)===Nt?r(e.value.sections):e instanceof Fd?r(e.sections):e.eachChild(a))},o=e.value;o._styleExpression&&a(o._styleExpression.expression)}return n},p}(bi),Zc={paint:new xi({"background-color":new yi(zt.paint_background['background-color']),"background-pattern":new vi(zt.paint_background['background-pattern']),"background-opacity":new yi(zt.paint_background['background-opacity'])})},bl=function(o){function t(t){o.call(this,t,Zc)}return o&&(t.__proto__=o),(t.prototype=Object.create(o&&o.prototype)).constructor=t,t}(bi),Gc={paint:new xi({"raster-opacity":new yi(zt.paint_raster['raster-opacity']),"raster-hue-rotate":new yi(zt.paint_raster['raster-hue-rotate']),"raster-brightness-min":new yi(zt.paint_raster['raster-brightness-min']),"raster-brightness-max":new yi(zt.paint_raster['raster-brightness-max']),"raster-saturation":new yi(zt.paint_raster['raster-saturation']),"raster-contrast":new yi(zt.paint_raster['raster-contrast']),"raster-resampling":new yi(zt.paint_raster['raster-resampling']),"raster-fade-duration":new yi(zt.paint_raster['raster-fade-duration'])})},_l=function(o){function t(t){o.call(this,t,Gc)}return o&&(t.__proto__=o),(t.prototype=Object.create(o&&o.prototype)).constructor=t,t}(bi),Hc=function(o){function t(t){o.call(this,t,{}),this.implementation=t}return o&&(t.__proto__=o),(t.prototype=Object.create(o&&o.prototype)).constructor=t,t.prototype.is3D=function(){return'3d'===this.implementation.renderingMode},t.prototype.hasOffscreenPass=function(){return void 0!==this.implementation.prerender},t.prototype.recalculate=function(){},t.prototype.updateTransitions=function(){},t.prototype.hasTransition=function(){},t.prototype.serialize=function(){},t.prototype.onAdd=function(e){this.implementation.onAdd&&this.implementation.onAdd(e,e.painter.context.gl)},t.prototype.onRemove=function(e){this.implementation.onRemove&&this.implementation.onRemove(e,e.painter.context.gl)},t}(bi),Sl={circle:oo,heatmap:go,hillshade:wo,fill:ss,"fill-extrusion":Ss,line:Ds,symbol:gl,background:bl,raster:_l},kl=vd.HTMLImageElement,Il=vd.HTMLCanvasElement,zl=vd.HTMLVideoElement,Cl=vd.ImageData,El=vd.ImageBitmap,Pl=function(o,t,e,a){this.context=o,this.format=e,this.texture=o.gl.createTexture(),this.update(t,a)};Pl.prototype.update=function(d,t,c){var r=d.width,n=d.height,i=!(this.size&&this.size[0]===r&&this.size[1]===n||c),a=this.context,o=a.gl;if(this.useMipmap=!!(t&&t.useMipmap),o.bindTexture(o.TEXTURE_2D,this.texture),a.pixelStoreUnpackFlipY.set(!1),a.pixelStoreUnpack.set(1),a.pixelStoreUnpackPremultiplyAlpha.set(this.format===o.RGBA&&(!t||!1!==t.premultiply)),i)this.size=[r,n],d instanceof kl||d instanceof Il||d instanceof zl||d instanceof Cl||El&&d instanceof El?o.texImage2D(o.TEXTURE_2D,0,this.format,this.format,o.UNSIGNED_BYTE,d):o.texImage2D(o.TEXTURE_2D,0,this.format,r,n,0,this.format,o.UNSIGNED_BYTE,d.data);else{var s=c||{x:0,y:0},u=s.x,l=s.y;d instanceof kl||d instanceof Il||d instanceof zl||d instanceof Cl||El&&d instanceof El?o.texSubImage2D(o.TEXTURE_2D,0,u,l,o.RGBA,o.UNSIGNED_BYTE,d):o.texSubImage2D(o.TEXTURE_2D,0,u,l,r,n,o.RGBA,o.UNSIGNED_BYTE,d.data)}this.useMipmap&&this.isSizePowerOfTwo()&&o.generateMipmap(o.TEXTURE_2D)},Pl.prototype.bind=function(o,t,e){var a=this.context.gl;a.bindTexture(a.TEXTURE_2D,this.texture),e!==a.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(e=a.LINEAR),o!==this.filter&&(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,o),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,e||o),this.filter=o),t!==this.wrap&&(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,t),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,t),this.wrap=t)},Pl.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&0==x(this.size[0])/_%1},Pl.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var Ml=function(o){var t=this;this._callback=o,this._triggered=!1,'undefined'!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){t._triggered=!1,t._callback()})};Ml.prototype.trigger=function(){var e=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){e._triggered=!1,e._callback()},0))},Ml.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Bl=function(o,t,e){this.target=o,this.parent=t,this.mapId=e,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},u(['receive','process'],this),this.invoker=new Ml(this.process),this.target.addEventListener('message',this.receive,!1),this.globalScope=k()?o:vd};Bl.prototype.send=function(l,p,e,d,c){var u=this;void 0===c&&(c=!1);var a=b(1e18*Math.random()).toString(36).substring(0,10);e&&(this.callbacks[a]=e);var m=z(this.globalScope)?void 0:[];return this.target.postMessage({id:a,type:l,hasCallback:!!e,targetMapId:d,mustQueue:c,sourceMapId:this.mapId,data:Un(p,m)},m),{cancel:function(){e&&delete u.callbacks[a],u.target.postMessage({id:a,type:'<cancel>',targetMapId:d,sourceMapId:u.mapId})}}},Bl.prototype.receive=function(o){var t=o.data,e=t.id;if(e&&(!t.targetMapId||this.mapId===t.targetMapId))if('<cancel>'===t.type){delete this.tasks[e];var a=this.cancelCallbacks[e];delete this.cancelCallbacks[e],a&&a()}else k()||t.mustQueue?(this.tasks[e]=t,this.taskQueue.push(e),this.invoker.trigger()):this.processTask(e,t)},Bl.prototype.process=function(){if(this.taskQueue.length){var o=this.taskQueue.shift(),t=this.tasks[o];delete this.tasks[o],this.taskQueue.length&&this.invoker.trigger(),t&&this.processTask(o,t)}},Bl.prototype.processTask=function(p,d){var c=this;if('<response>'===d.type){var e=this.callbacks[p];delete this.callbacks[p],e&&(d.error?e(jn(d.error)):e(null,jn(d.data)))}else{var r=!1,m=z(this.globalScope)?void 0:[],a=d.hasCallback?function(o,e){r=!0,delete c.cancelCallbacks[p],c.target.postMessage({id:p,type:'<response>',sourceMapId:c.mapId,error:o?Un(o):null,data:Un(e,m)},m)}:function(){r=!0},o=null,n=jn(d.data);if(this.parent[d.type])o=this.parent[d.type](d.sourceMapId,n,a);else if(this.parent.getWorkerSource){var s=d.type.split('.');o=this.parent.getWorkerSource(d.sourceMapId,s[0],n.source)[s[1]](n,a)}else a(new Error('Could not find function '+d.type));!r&&o&&o.cancel&&(this.cancelCallbacks[p]=o.cancel)}},Bl.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener('message',this.receive,!1)};var Tl=function(o,t){o&&(t?this.setSouthWest(o).setNorthEast(t):4===o.length?this.setSouthWest([o[0],o[1]]).setNorthEast([o[2],o[3]]):this.setSouthWest(o[0]).setNorthEast(o[1]))};Tl.prototype.setNorthEast=function(e){return this._ne=e instanceof Fl?new Fl(e.lng,e.lat):Fl.convert(e),this},Tl.prototype.setSouthWest=function(e){return this._sw=e instanceof Fl?new Fl(e.lng,e.lat):Fl.convert(e),this},Tl.prototype.extend=function(o){var t=this._sw,a=this._ne,n,e;if(o instanceof Fl)n=o,e=o;else{if(!(o instanceof Tl))return Array.isArray(o)?4===o.length||o.every(Array.isArray)?this.extend(Tl.convert(o)):this.extend(Fl.convert(o)):this;if(e=o._ne,!(n=o._sw)||!e)return this}return t||a?(t.lng=ta(n.lng,t.lng),t.lat=ta(n.lat,t.lat),a.lng=oa(e.lng,a.lng),a.lat=oa(e.lat,a.lat)):(this._sw=new Fl(n.lng,n.lat),this._ne=new Fl(e.lng,e.lat)),this},Tl.prototype.getCenter=function(){return new Fl((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},Tl.prototype.getSouthWest=function(){return this._sw},Tl.prototype.getNorthEast=function(){return this._ne},Tl.prototype.getNorthWest=function(){return new Fl(this.getWest(),this.getNorth())},Tl.prototype.getSouthEast=function(){return new Fl(this.getEast(),this.getSouth())},Tl.prototype.getWest=function(){return this._sw.lng},Tl.prototype.getSouth=function(){return this._sw.lat},Tl.prototype.getEast=function(){return this._ne.lng},Tl.prototype.getNorth=function(){return this._ne.lat},Tl.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},Tl.prototype.toString=function(){return'LngLatBounds('+this._sw.toString()+', '+this._ne.toString()+')'},Tl.prototype.isEmpty=function(){return!(this._sw&&this._ne)},Tl.prototype.contains=function(o){var t=Fl.convert(o),e=t.lng,a=t.lat,r=this._sw.lng<=e&&e<=this._ne.lng;return this._sw.lng>this._ne.lng&&(r=this._sw.lng>=e&&e>=this._ne.lng),this._sw.lat<=a&&a<=this._ne.lat&&r},Tl.convert=function(e){return!e||e instanceof Tl?e:new Tl(e)};var Fl=function(o,a){if(isNaN(o)||isNaN(a))throw new Error('Invalid LngLat object: ('+o+', '+a+')');if(this.lng=+o,this.lat=+a,90<this.lat||-90>this.lat)throw new Error('Invalid LngLat latitude value: must be between -90 and 90')};Fl.prototype.wrap=function(){return new Fl(p(this.lng,-180,180),this.lat)},Fl.prototype.toArray=function(){return[this.lng,this.lat]},Fl.prototype.toString=function(){return'LngLat('+this.lng+', '+this.lat+')'},Fl.prototype.distanceTo=function(o){var t=Xe/180,e=this.lat*t,a=o.lat*t,r=w(e)*w(a)+Ze(e)*Ze(a)*Ze((o.lng-this.lng)*t);return 6371008.8*fd(ta(r,1))},Fl.prototype.toBounds=function(o){void 0===o&&(o=0);var t=360*o/40075017,e=t/Ze(Xe/180*this.lat);return new Tl(new Fl(this.lng-e,this.lat-t),new Fl(this.lng+e,this.lat+t))},Fl.convert=function(e){if(e instanceof Fl)return e;if(Array.isArray(e)&&(2===e.length||3===e.length))return new Fl(+e[0],+e[1]);if(!Array.isArray(e)&&'object'==typeof e&&null!==e)return new Fl(+('lng'in e?e.lng:e.lon),+e.lat);throw new Error('`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]')};var Dl=6371008.8*(2*Xe),Ll=function(o,a,n){void 0===n&&(n=0),this.x=+o,this.y=+a,this.z=+n};Ll.fromLngLat=function(o,t){void 0===t&&(t=0);var e=Fl.convert(o);return new Ll(Rl(e.lng),Ol(e.lat),Ul(t,e.lat))},Ll.prototype.toLngLat=function(){return new Fl(360*this.x-180,jl(this.y))},Ll.prototype.toAltitude=function(){return this.z*Vl(jl(this.y))},Ll.prototype.meterInMercatorCoordinateUnits=function(){return 1/Dl*(e=jl(this.y),1/Ze(e*Xe/180));var e};var Nl=function(o,t,e){this.z=o,this.x=t,this.y=e,this.key=ql(0,o,o,t,e)};Nl.prototype.equals=function(e){return this.z===e.z&&this.x===e.x&&this.y===e.y},Nl.prototype.url=function(l,t){var e=(r=this.y,n=this.z,i=hl(256*(p=this.x),256*(r=C(2,n)-r-1),n),a=hl(256*(p+1),256*(r+1),n),i[0]+','+i[1]+','+a[0]+','+a[1]),s=function(o,t,e){for(var r='',i=o,a;0<i;i--)r+=(t&(a=1<<i-1)?1:0)+(e&a?2:0);return r}(this.z,this.x,this.y),p,r,n,i,a;return l[(this.x+this.y)%l.length].replace('{prefix}',(this.x%16).toString(16)+(this.y%16).toString(16)).replace('{z}',this.z+'').replace('{x}',this.x+'').replace('{y}',('tms'===t?C(2,this.z)-this.y-1:this.y)+'').replace('{quadkey}',s).replace('{bbox-epsg-3857}',e)},Nl.prototype.getTilePoint=function(o){var t=C(2,this.z);return new xd(8192*(o.x*t-this.x),8192*(o.y*t-this.y))},Nl.prototype.toString=function(){return this.z+'/'+this.x+'/'+this.y};var Kl=function(o,t){this.wrap=o,this.canonical=t,this.key=ql(o,t.z,t.z,t.x,t.y)},Gl=function(o,t,e,a,r){this.overscaledZ=o,this.wrap=t,this.canonical=new Nl(e,+a,+r),this.key=ql(t,o,e,a,r)};Gl.prototype.equals=function(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)},Gl.prototype.scaledTo=function(o){var t=this.canonical.z-o;return o>this.canonical.z?new Gl(o,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Gl(o,this.wrap,o,this.canonical.x>>t,this.canonical.y>>t)},Gl.prototype.calculateScaledKey=function(o,t){var a=this.canonical.z-o;return o>this.canonical.z?ql(this.wrap*+t,o,this.canonical.z,this.canonical.x,this.canonical.y):ql(this.wrap*+t,o,o,this.canonical.x>>a,this.canonical.y>>a)},Gl.prototype.isChildOf=function(o){if(o.wrap!==this.wrap)return!1;var t=this.canonical.z-o.canonical.z;return 0===o.overscaledZ||o.overscaledZ<this.overscaledZ&&o.canonical.x===this.canonical.x>>t&&o.canonical.y===this.canonical.y>>t},Gl.prototype.children=function(o){if(this.overscaledZ>=o)return[new Gl(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var t=this.canonical.z+1,e=2*this.canonical.x,a=2*this.canonical.y;return[new Gl(t,this.wrap,t,e,a),new Gl(t,this.wrap,t,e+1,a),new Gl(t,this.wrap,t,e,a+1),new Gl(t,this.wrap,t,e+1,a+1)]},Gl.prototype.isLessThan=function(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))},Gl.prototype.wrapped=function(){return new Gl(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},Gl.prototype.unwrapTo=function(e){return new Gl(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)},Gl.prototype.overscaleFactor=function(){return C(2,this.overscaledZ-this.canonical.z)},Gl.prototype.toUnwrapped=function(){return new Kl(this.wrap,this.canonical)},Gl.prototype.toString=function(){return this.overscaledZ+'/'+this.canonical.x+'/'+this.canonical.y},Gl.prototype.getTilePoint=function(e){return this.canonical.getTilePoint(new Ll(e.x-this.wrap,e.y))},Tn('CanonicalTileID',Nl),Tn('OverscaledTileID',Gl,{omit:['posMatrix']});var Zl=function(o,t,e){if(this.uid=o,t.height!==t.width)throw new RangeError('DEM tiles must be square');if(e&&'mapbox'!==e&&'terrarium'!==e)return cp('"'+e+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=t.height;var a=this.dim=t.height-2;this.data=new Uint32Array(t.data.buffer),this.encoding=e||'mapbox';for(var r=0;r<a;r++)this.data[this._idx(-1,r)]=this.data[this._idx(0,r)],this.data[this._idx(a,r)]=this.data[this._idx(a-1,r)],this.data[this._idx(r,-1)]=this.data[this._idx(r,0)],this.data[this._idx(r,a)]=this.data[this._idx(r,a-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(a,-1)]=this.data[this._idx(a-1,0)],this.data[this._idx(-1,a)]=this.data[this._idx(0,a-1)],this.data[this._idx(a,a)]=this.data[this._idx(a-1,a-1)]};Zl.prototype.get=function(o,t){var e=new Uint8Array(this.data.buffer),a=4*this._idx(o,t);return('terrarium'===this.encoding?this._unpackTerrarium:this._unpackMapbox)(e[a],e[a+1],e[a+2])},Zl.prototype.getUnpackVector=function(){return'terrarium'===this.encoding?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},Zl.prototype._idx=function(o,t){if(-1>o||o>=this.dim+1||-1>t||t>=this.dim+1)throw new RangeError('out of range source coordinates for DEM data');return(t+1)*this.stride+(o+1)},Zl.prototype._unpackMapbox=function(o,t,e){return(256*(256*o)+256*t+e)/10-1e4},Zl.prototype._unpackTerrarium=function(o,t,e){return 256*o+t+e/256-32768},Zl.prototype.getPixels=function(){return new mo({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},Zl.prototype.backfillBorder=function(d,t,c){if(this.dim!==d.dim)throw new Error('dem dimension mismatch');var m=t*this.dim,n=t*this.dim+this.dim,i=c*this.dim,a=c*this.dim+this.dim;-1===t?m=n-1:1===t?n=m+1:void 0,-1===c?i=a-1:1===c?a=i+1:void 0;for(var o=-t*this.dim,s=-c*this.dim,u=i;u<a;u++)for(var l=m;l<n;l++)this.data[this._idx(l,u)]=d.data[this._idx(l+o,u+s)]},Tn('DEMData',Zl);var Jl=function(o){this._stringToNumber={},this._numberToString=[];for(var t=0,e;t<o.length;t++)e=o[t],this._stringToNumber[e]=t,this._numberToString[t]=e};Jl.prototype.encode=function(e){return this._stringToNumber[e]},Jl.prototype.decode=function(e){return this._numberToString[e]};var Hl=function(o,t,e,a,r){this.type='Feature',this._vectorTileFeature=o,o._z=t,o._x=e,o._y=a,this.properties=o.properties,this.id=r},Yl={geometry:{configurable:!0}};Yl.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},Yl.geometry.set=function(e){this._geometry=e},Hl.prototype.toJSON=function(){var o={geometry:this.geometry};for(var t in this)'_geometry'!==t&&'_vectorTileFeature'!==t&&(o[t]=this[t]);return o},Object.defineProperties(Hl.prototype,Yl);var $l=function(){this.state={},this.stateChanges={},this.deletedStates={}};$l.prototype.updateState=function(s,t,e){var r=t+'';if(this.stateChanges[s]=this.stateChanges[s]||{},this.stateChanges[s][r]=this.stateChanges[s][r]||{},ha(this.stateChanges[s][r],e),null===this.deletedStates[s])for(var n in this.deletedStates[s]={},this.state[s])n!==r&&(this.deletedStates[s][n]=null);else if(this.deletedStates[s]&&null===this.deletedStates[s][r])for(var i in this.deletedStates[s][r]={},this.state[s][r])e[i]||(this.deletedStates[s][r][i]=null);else for(var a in e)this.deletedStates[s]&&this.deletedStates[s][r]&&null===this.deletedStates[s][r][a]&&delete this.deletedStates[s][r][a]},$l.prototype.removeFeatureState=function(o,t,e){if(null!==this.deletedStates[o]){var a=t+'';if(this.deletedStates[o]=this.deletedStates[o]||{},e&&void 0!==t)null!==this.deletedStates[o][a]&&(this.deletedStates[o][a]=this.deletedStates[o][a]||{},this.deletedStates[o][a][e]=null);else if(void 0===t)this.deletedStates[o]=null;else if(this.stateChanges[o]&&this.stateChanges[o][a])for(e in this.deletedStates[o][a]={},this.stateChanges[o][a])this.deletedStates[o][a][e]=null;else this.deletedStates[o][a]=null}},$l.prototype.getState=function(o,t){var e=t+'',r=ha({},(this.state[o]||{})[e],(this.stateChanges[o]||{})[e]);if(null===this.deletedStates[o])return{};if(this.deletedStates[o]){var n=this.deletedStates[o][t];if(null===n)return{};for(var i in n)delete r[i]}return r},$l.prototype.initializeTileState=function(o,t){o.setFeatureState(this.state,t)},$l.prototype.coalesceChanges=function(d,t){var e={};for(var r in this.stateChanges){this.state[r]=this.state[r]||{};var n={};for(var i in this.stateChanges[r])this.state[r][i]||(this.state[r][i]={}),ha(this.state[r][i],this.stateChanges[r][i]),n[i]=this.state[r][i];e[r]=n}for(var a in this.deletedStates){this.state[a]=this.state[a]||{};var o={};if(null===this.deletedStates[a])for(var s in this.state[a])o[s]={},this.state[a][s]={};else for(var u in this.deletedStates[a]){if(null===this.deletedStates[a][u])this.state[a][u]={};else for(var l=0,p=Object.keys(this.deletedStates[a][u]);l<p.length;l+=1)delete this.state[a][u][p[l]];o[u]=this.state[a][u]}e[a]=e[a]||{},ha(e[a],o)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(e).length)for(var c in d)d[c].setFeatureState(e,t)};var Wl=function(o,t){this.tileID=o,this.x=o.canonical.x,this.y=o.canonical.y,this.z=o.canonical.z,this.grid=new Pn(8192,16,0),this.grid3D=new Pn(8192,16,0),this.featureIndexArray=new na,this.promoteId=t};Wl.prototype.insert=function(d,t,e,r,n,i){var a=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(e,r,n);for(var o=i?this.grid3D:this.grid,s=0;s<t.length;s++){for(var u=t[s],l=[1/0,1/0,-1/0,-1/0],p=0,c;p<u.length;p++)c=u[p],l[0]=ta(l[0],c.x),l[1]=ta(l[1],c.y),l[2]=oa(l[2],c.x),l[3]=oa(l[3],c.y);8192>l[0]&&8192>l[1]&&0<=l[2]&&0<=l[3]&&o.insert(a,l[0],l[1],l[2],l[3])}},Wl.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new Ic.VectorTile(new Xs(this.rawTileData)).layers,this.sourceLayerCoder=new Jl(this.vtLayers?Object.keys(this.vtLayers).sort():['_geojsonTileLayer'])),this.vtLayers},Wl.prototype.query=function(i,t,e,r){var _=this;this.loadVTLayers();for(var a=i.params||{},o=8192/i.tileSize/i.scale,n=rn(a.filter),s=i.queryGeometry,l=i.queryPadding*o,p=tp(s),u=this.grid.query(p.minX-l,p.minY-l,p.maxX+l,p.maxY+l),c=tp(i.cameraQueryGeometry),f=this.grid3D.query(c.minX-l,c.minY-l,c.maxX+l,c.maxY+l,function(t,e,o,r){return function(i,t,e,r,n){for(var a=0,o=i,s;a<o.length;a+=1)if(s=o[a],t<=s.x&&e<=s.y&&r>=s.x&&n>=s.y)return!0;var d=[new xd(t,e),new xd(t,n),new xd(r,n),new xd(r,e)];if(2<i.length)for(var l=0,p=d;l<p.length;l+=1)if(Ha(i,p[l]))return!0;for(var c=0;c<i.length-1;c++)if(Ya(i[c],i[c+1],d))return!0;return!1}(i.cameraQueryGeometry,t-l,e-l,o+l,r+l)}),y=0,d=f;y<d.length;y+=1)u.push(d[y]);u.sort(ep);for(var m={},g=function(l){var d=u[l];if(d!==x){x=d;var p=_.featureIndexArray.get(d),c=null;_.loadMatchingFeature(m,p.bucketIndex,p.sourceLayerIndex,p.featureIndex,n,a.layers,a.availableImages,t,e,r,function(t,e,a){return c||(c=Fa(t)),e.queryIntersectsFeature(s,t,a,c,_.z,i.transform,o,i.pixelPosMatrix)})}},h=0,x;h<u.length;h++)g(h);return m},Wl.prototype.loadMatchingFeature=function(T,t,e,r,E,i,S,o,s,u,l){var C=this.bucketLayerIDs[t];if(!i||function(o,t){for(var e=0;e<o.length;e++)if(0<=t.indexOf(o[e]))return!0;return!1}(i,C)){var c=this.sourceLayerCoder.decode(e),h=this.vtLayers[c].feature(r);if(E.filter(new ai(this.tileID.overscaledZ),h))for(var f=this.getId(h,c),y=0,d;y<C.length;y++)if(d=C[y],!(i&&0>i.indexOf(d))){var m=o[d];if(m){var v={};void 0!==f&&u&&(v=u.getState(m.sourceLayer||'_geojsonTileLayer',f));var g=s[d];g.paint=Xl(g.paint,m.paint,h,v,S),g.layout=Xl(g.layout,m.layout,h,v,S);var x=!l||l(h,m,v);if(x){var I=new Hl(h,this.z,this.x,this.y,f);I.layer=g;var A=T[d];void 0===A&&(A=T[d]=[]),A.push({featureIndex:r,feature:I,intersectionZ:x})}}}}},Wl.prototype.lookupSymbolFeatures=function(d,t,e,r,n,i,a,o){var s={};this.loadVTLayers();for(var u=rn(n),l=0,p=d;l<p.length;l+=1)this.loadMatchingFeature(s,e,r,p[l],u,i,a,o,t);return s},Wl.prototype.hasLayer=function(o){for(var t=0,e=this.bucketLayerIDs;t<e.length;t+=1)for(var a=0,r=e[t];a<r.length;a+=1)if(o===r[a])return!0;return!1},Wl.prototype.getId=function(o,t){var e=o.id;return this.promoteId&&'boolean'==typeof(e=o.properties['string'==typeof this.promoteId?this.promoteId:this.promoteId[t]])&&(e=+e),e},Tn('FeatureIndex',Wl,{omit:['rawTileData','sourceLayerCoder']});var Ql=function(o,t){this.tileID=o,this.uid=c(),this.uses=0,this.tileSize=t,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state='loading'};Ql.prototype.registerFadeDuration=function(o){var t=o+this.timeAdded;t<L.now()||this.fadeEndTime&&t<this.fadeEndTime||(this.fadeEndTime=t)},Ql.prototype.wasRequested=function(){return'errored'===this.state||'loaded'===this.state||'reloading'===this.state},Ql.prototype.loadVectorData=function(l,t,e){if(this.hasData()&&this.unloadVectorData(),this.state='loaded',l){for(var p in l.featureIndex&&(this.latestFeatureIndex=l.featureIndex,l.rawTileData?(this.latestRawTileData=l.rawTileData,this.latestFeatureIndex.rawTileData=l.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=l.collisionBoxArray,this.buckets=function(o,s){var l={};if(!s)return l;for(var t=function(){var e=i[r],a=e.layerIds.map(function(e){return s.getLayer(e)}).filter(Boolean);if(0!==a.length){e.layers=a,e.stateDependentLayerIds&&(e.stateDependentLayers=e.stateDependentLayerIds.map(function(o){return a.filter(function(t){return t.id===o})[0]}));for(var t=0,o=a;t<o.length;t+=1)l[o[t].id]=e}},r=0,i=o;r<i.length;r+=1)t();return l}(l.buckets,t.style),this.hasSymbolBuckets=!1,this.buckets){var n=this.buckets[p];if(n instanceof yl){if(this.hasSymbolBuckets=!0,!e)break;n.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var i in this.buckets){var a=this.buckets[i];if(a instanceof yl&&a.hasRTLText){this.hasRTLText=!0,ii.isLoading()||ii.isLoaded()||'deferred'!==ri()||ni();break}}for(var o in this.queryPadding=0,this.buckets){var s=this.buckets[o];this.queryPadding=oa(this.queryPadding,t.style.getLayer(o).queryRadius(s))}l.imageAtlas&&(this.imageAtlas=l.imageAtlas),l.glyphAtlasImage&&(this.glyphAtlasImage=l.glyphAtlasImage)}else this.collisionBoxArray=new Hi},Ql.prototype.unloadVectorData=function(){for(var e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state='unloaded'},Ql.prototype.getBucket=function(e){return this.buckets[e.id]},Ql.prototype.upload=function(o){for(var t in this.buckets){var e=this.buckets[t];e.uploadPending()&&e.upload(o)}var a=o.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Pl(o,this.imageAtlas.image,a.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Pl(o,this.glyphAtlasImage,a.ALPHA),this.glyphAtlasImage=null)},Ql.prototype.prepare=function(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)},Ql.prototype.queryRenderedFeatures=function(p,t,e,r,d,c,m,g,y,u){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:r,cameraQueryGeometry:d,scale:c,tileSize:this.tileSize,pixelPosMatrix:u,transform:g,params:m,queryPadding:this.queryPadding*y},p,t,e):{}},Ql.prototype.querySourceFeatures=function(m,t){var e=this.latestFeatureIndex;if(e&&e.rawTileData){var r=e.loadVTLayers(),n=t?t.sourceLayer:'',i=r._geojsonTileLayer||r[n];if(i)for(var a=rn(t&&t.filter),o=this.tileID.canonical,s=o.z,g=o.x,_=o.y,x={z:s,x:g,y:_},c=0,h;c<i.length;c++)if(h=i.feature(c),a.filter(new ai(this.tileID.overscaledZ),h)){var f=e.getId(h,n),y=new Hl(h,s,g,_,f);y.tile=x,m.push(y)}}},Ql.prototype.hasData=function(){return'loaded'===this.state||'reloading'===this.state||'expired'===this.state},Ql.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},Ql.prototype.setExpiryData=function(o){var t=this.expirationTime;if(o.cacheControl){var s=I(o.cacheControl);s['max-age']&&(this.expirationTime=Date.now()+1e3*s['max-age'])}else o.expires&&(this.expirationTime=new Date(o.expires).getTime());if(this.expirationTime){var r=Date.now(),n=!1;if(this.expirationTime>r)n=!1;else if(!t)n=!0;else if(this.expirationTime<t)n=!0;else{var i=this.expirationTime-t;i?this.expirationTime=r+oa(i,3e4):n=!0}n?(this.expiredRequestCount++,this.state='expired'):this.expiredRequestCount=0}},Ql.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<ta(this.expiredRequestCount-1,31)):ta(this.expirationTime-new Date().getTime(),2147483647)},Ql.prototype.setFeatureState=function(l,t){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(l).length){var e=this.latestFeatureIndex.loadVTLayers();for(var r in this.buckets)if(t.style.hasLayer(r)){var n=this.buckets[r],i=n.layers[0].sourceLayer||'_geojsonTileLayer',a=e[i],o=l[i];if(a&&o&&0!==Object.keys(o).length){n.update(o,a,this.imageAtlas&&this.imageAtlas.patternPositions||{});var s=t&&t.style&&t.style.getLayer(r);s&&(this.queryPadding=oa(this.queryPadding,s.queryRadius(n)))}}}},Ql.prototype.holdingForFade=function(){return void 0!==this.symbolFadeHoldUntil},Ql.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<L.now()},Ql.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},Ql.prototype.setHoldDuration=function(e){this.symbolFadeHoldUntil=L.now()+e},Ql.prototype.setDependencies=function(o,t){for(var e={},a=0,r=t;a<r.length;a+=1)e[r[a]]=!0;this.dependencies[o]=e},Ql.prototype.hasDependency=function(s,t){for(var e=0,r=s,n;e<r.length;e+=1)if(n=this.dependencies[r[e]],n)for(var i=0,a=t;i<a.length;i+=1)if(n[a[i]])return!0;return!1};var np=vd.performance,ip=function(e){this._marks={start:[e.url,'start'].join('#'),end:[e.url,'end'].join('#'),measure:e.url.toString()},np.mark(this._marks.start)};ip.prototype.finish=function(){np.mark(this._marks.end);var e=np.getEntriesByName(this._marks.measure);return 0===e.length&&(np.measure(this._marks.measure,this._marks.start,this._marks.end),e=np.getEntriesByName(this._marks.measure),np.clearMarks(this._marks.start),np.clearMarks(this._marks.end),np.clearMeasures(this._marks.measure)),e},s.Actor=Bl,s.AlphaImage=co,s.CanonicalTileID=Nl,s.CollisionBoxArray=Hi,s.Color=Wt,s.DEMData=Zl,s.DataConstantProperty=yi,s.DictionaryCoder=Jl,s.EXTENT=8192,s.ErrorEvent=kt,s.EvaluationParameters=ai,s.Event=_t,s.Evented=It,s.FeatureIndex=Wl,s.FillBucket=So,s.FillExtrusionBucket=bs,s.ImageAtlas=Dc,s.ImagePosition=Ys,s.LineBucket=Bs,s.LngLat=Fl,s.LngLatBounds=Tl,s.MercatorCoordinate=Ll,s.ONE_EM=24,s.OverscaledTileID=Gl,s.Point=xd,s.Point$1=xd,s.Properties=xi,s.Protobuf=Xs,s.RGBAImage=mo,s.RequestManager=Ed,s.RequestPerformance=ip,s.ResourceType=ht,s.SegmentVector=aa,s.SourceFeatureState=$l,s.StructArrayLayout1ui2=Zi,s.StructArrayLayout2f1f2i16=Li,s.StructArrayLayout2i4=Si,s.StructArrayLayout3ui6=Oi,s.StructArrayLayout4i8=zi,s.SymbolBucket=yl,s.Texture=Pl,s.Tile=Ql,s.Transitionable=ui,s.Uniform1f=ga,s.Uniform1i=va,s.Uniform2f=xa,s.Uniform3f=ba,s.Uniform4f=wa,s.UniformColor=_a,s.UniformMatrix4f=Sa,s.UnwrappedTileID=Kl,s.ValidationError=Cd,s.WritingMode=Lc,s.ZoomHistory=Rn,s.add=function(o,t,e){return o[0]=t[0]+e[0],o[1]=t[1]+e[1],o[2]=t[2]+e[2],o},s.addDynamicAttributes=pl,s.asyncAll=function(o,s,l){if(!o.length)return l(null,[]);var r=o.length,n=Array(o.length),i=null;o.forEach(function(e,a){s(e,function(o,t){o&&(i=o),n[a]=t,0==--r&&l(i,n)})})},s.bezier=a,s.bindAll=u,s.browser=L,s.cacheEntryPossiblyAdded=function(e){++ut>st&&(e.getActor().send('enforceCacheSizeLimit',ot),ut=0)},s.clamp=ko,s.clearTileCache=function(o){var t=vd.caches.delete('mapbox-tiles');o&&t.catch(o).then(function(){return o()})},s.clipLine=ld,s.clone=function(o){var t=new ro(16);return t[0]=o[0],t[1]=o[1],t[2]=o[2],t[3]=o[3],t[4]=o[4],t[5]=o[5],t[6]=o[6],t[7]=o[7],t[8]=o[8],t[9]=o[9],t[10]=o[10],t[11]=o[11],t[12]=o[12],t[13]=o[13],t[14]=o[14],t[15]=o[15],t},s.clone$1=dp,s.clone$2=function(o){var t=new ro(3);return t[0]=o[0],t[1]=o[1],t[2]=o[2],t},s.collisionCircleLayout=qs,s.config=R,s.create=function(){var e=new ro(16);return ro!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},s.create$1=function(){var e=new ro(9);return ro!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e},s.create$2=function(){var e=new ro(4);return ro!=Float32Array&&(e[1]=0,e[2]=0),e[0]=1,e[3]=1,e},s.createCommonjsModule=t,s.createExpression=Kr,s.createLayout=ei,s.createStyleLayer=function(e){return'custom'===e.type?new Hc(e):new Sl[e.type](e)},s.cross=function(l,t,e){var r=t[0],n=t[1],i=t[2],a=e[0],o=e[1],s=e[2];return l[0]=n*s-i*o,l[1]=i*a-r*s,l[2]=r*o-n*a,l},s.deepEqual=function o(t,a){if(Array.isArray(t)){if(!Array.isArray(a)||t.length!==a.length)return!1;for(var s=0;s<t.length;s++)if(!o(t[s],a[s]))return!1;return!0}if('object'==typeof t&&null!==t&&null!==a){if('object'!=typeof a)return!1;if(Object.keys(t).length!==Object.keys(a).length)return!1;for(var n in t)if(!o(t[n],a[n]))return!1;return!0}return t===a},s.dot=function(o,t){return o[0]*t[0]+o[1]*t[1]+o[2]*t[2]},s.dot$1=function(o,t){return o[0]*t[0]+o[1]*t[1]+o[2]*t[2]+o[3]*t[3]},s.ease=o,s.emitValidationErrors=In,s.endsWith=sp,s.enforceCacheSizeLimit=function(o){W(),yt&&yt.then(function(t){t.keys().then(function(e){for(var a=0;a<e.length-o;a++)t.delete(e[a])})})},s.evaluateSizeForFeature=ed,s.evaluateSizeForZoom=td,s.evaluateVariableOffset=el,s.evented=ti,s.extend=ha,s.featureFilter=rn,s.filterObject=pp,s.fromRotation=function(o,t){var e=w(t),a=Ze(t);return o[0]=a,o[1]=e,o[2]=0,o[3]=-e,o[4]=a,o[5]=0,o[6]=0,o[7]=0,o[8]=1,o},s.getAnchorAlignment=Yp,s.getAnchorJustification=nl,s.getArrayBuffer=xt,s.getImage=gt,s.getJSON=function(o,t){return mt(ha(o,{type:'json'}),t)},s.getRTLTextPluginStatus=ri,s.getReferrer=dt,s.getVideo=function(o,t){var e=vd.document.createElement('video'),i,r;e.muted=!0,e.onloadstart=function(){t(null,e)};for(var n=0,a;n<o.length;n++)a=vd.document.createElement('source'),i=o[n],r=void 0,(r=vd.document.createElement('a')).href=i,(r.protocol!==vd.document.location.protocol||r.host!==vd.document.location.host)&&(e.crossOrigin='Anonymous'),a.src=o[n],e.appendChild(a);return{cancel:function(){}}},s.identity=to,s.invert=function(T,t){var e=t[0],r=t[1],n=t[2],i=t[3],a=t[4],o=t[5],s=t[6],u=t[7],l=t[8],p=t[9],c=t[10],h=t[11],f=t[12],y=t[13],d=t[14],m=t[15],v=e*o-r*a,g=e*s-n*a,x=e*u-i*a,b=r*s-n*o,w=r*u-i*o,_=n*u-i*s,A=l*y-p*f,S=l*d-c*f,k=l*m-h*f,I=p*d-c*y,z=p*m-h*y,C=c*m-h*d,E=v*C-g*z+x*I+b*k-w*S+_*A;return E?(T[0]=(o*C-s*z+u*I)*(E=1/E),T[1]=(n*z-r*C-i*I)*E,T[2]=(y*_-d*w+m*b)*E,T[3]=(c*w-p*_-h*b)*E,T[4]=(s*k-a*C-u*S)*E,T[5]=(e*C-n*k+i*S)*E,T[6]=(d*x-f*_-m*g)*E,T[7]=(l*_-c*x+h*g)*E,T[8]=(a*z-o*k+u*A)*E,T[9]=(r*k-e*z-i*A)*E,T[10]=(f*w-y*x+m*v)*E,T[11]=(p*x-l*w-h*v)*E,T[12]=(o*S-a*I-s*A)*E,T[13]=(e*I-r*S+n*A)*E,T[14]=(y*g-f*b-d*v)*E,T[15]=(l*b-p*g+c*v)*E,T):null},s.isChar=Nn,s.isMapboxURL=mp,s.keysDifference=function(o,t){var e=[];for(var a in o)a in t||e.push(a);return e},s.makeRequest=mt,s.mapObject=lp,s.mercatorXfromLng=Rl,s.mercatorYfromLat=Ol,s.mercatorZfromAltitude=Ul,s.mul=io,s.multiply=io,s.mvt=Ic,s.nextPowerOfTwo=function(e){return 1>=e?1:C(2,m(x(e)/_))},s.normalize=function(o,t){var e=t[0],r=t[1],n=t[2],i=e*e+r*r+n*n;return 0<i&&(i=1/N(i)),o[0]=t[0]*i,o[1]=t[1]*i,o[2]=t[2]*i,o},s.number=je,s.offscreenCanvasSupported=pt,s.ortho=function(p,t,e,r,n,i,a){var o=1/(t-e),s=1/(r-n),d=1/(i-a);return p[0]=-2*o,p[1]=0,p[2]=0,p[3]=0,p[4]=0,p[5]=-2*s,p[6]=0,p[7]=0,p[8]=0,p[9]=0,p[10]=2*d,p[11]=0,p[12]=(t+e)*o,p[13]=(n+r)*s,p[14]=(a+i)*d,p[15]=1,p},s.parseGlyphPBF=function(e){return new Xs(e).readFields(Up,[])},s.pbf=Xs,s.performSymbolLayout=function(A,t,e,r,n,i,N){A.createArrays(),A.tilePixelRatio=8192/(512*A.overscaling),A.compareText={},A.iconsNeedLinear=!1;var o=A.layers[0].layout,a=A.layers[0]._unevaluatedLayout._values,s={};if('composite'===A.textSizeData.kind){var l=A.textSizeData,p=l.maxZoom;s.compositeTextSizes=[a['text-size'].possiblyEvaluate(new ai(l.minZoom),N),a['text-size'].possiblyEvaluate(new ai(p),N)]}if('composite'===A.iconSizeData.kind){var c=A.iconSizeData,u=c.maxZoom;s.compositeIconSizes=[a['icon-size'].possiblyEvaluate(new ai(c.minZoom),N),a['icon-size'].possiblyEvaluate(new ai(u),N)]}s.layoutTextSize=a['text-size'].possiblyEvaluate(new ai(A.zoom+1),N),s.layoutIconSize=a['icon-size'].possiblyEvaluate(new ai(A.zoom+1),N),s.textMaxSize=a['text-size'].possiblyEvaluate(new ai(18));for(var h=24*o.get('text-line-height'),y='map'===o.get('text-rotation-alignment')&&'point'!==o.get('symbol-placement'),T=o.get('text-keep-upright'),m=o.get('text-size'),_=function(){var i=x[v],a=o.get('text-font').evaluate(i,{},N).join(','),l=m.evaluate(i,{},N),p=s.layoutTextSize.evaluate(i,{},N),c=s.layoutIconSize.evaluate(i,{},N),u={horizontal:{},vertical:void 0},f=i.text,g=[0,0];if(f){var b=f.toString(),_=24*o.get('text-letter-spacing').evaluate(i,{},N),w=function(o){for(var t=0,e=o;t<e.length;t+=1)if(a=e[t].charCodeAt(0),Nn.Arabic(a)||Nn['Arabic Supplement'](a)||Nn['Arabic Extended-A'](a)||Nn['Arabic Presentation Forms-A'](a)||Nn['Arabic Presentation Forms-B'](a))return!1;var a;return!0}(b)?_:0,S=o.get('text-anchor').evaluate(i,{},N),I=o.get('text-variable-anchor');if(!I){var k=o.get('text-radial-offset').evaluate(i,{},N);g=k?el(S,[24*k,qc]):o.get('text-offset').evaluate(i,{},N).map(function(e){return 24*e})}var C=y?'center':o.get('text-justify').evaluate(i,{},N),E=o.get('symbol-placement'),P='point'===E?24*o.get('text-max-width').evaluate(i,{},N):0,M=function(){A.allowVerticalPlacement&&qn(b)&&(u.vertical=Zp(f,t,e,n,a,P,h,S,'left',w,g,Lc.vertical,!0,E,p,l))};if(!y&&I){for(var B='auto'===C?I.map(function(e){return nl(e)}):[C],Z=!1,V=0,F;V<B.length;V++)if(F=B[V],!u.horizontal[F])if(Z)u.horizontal[F]=u.horizontal[0];else{var D=Zp(f,t,e,n,a,P,h,'center',F,w,g,Lc.horizontal,!1,E,p,l);D&&(u.horizontal[F]=D,Z=1===D.positionedLines.length)}M()}else{'auto'===C&&(C=nl(S));var L=Zp(f,t,e,n,a,P,h,S,C,w,g,Lc.horizontal,!1,E,p,l);L&&(u.horizontal[C]=L),M(),qn(b)&&y&&T&&(u.vertical=Zp(f,t,e,n,a,P,h,S,C,w,g,Lc.vertical,!1,E,p,l))}}var R=!1,U;if(i.icon&&i.icon.name){var O=r[i.icon.name];O&&(U=function(o,s,e){var r=Yp(e),n=s[0]-o.displaySize[0]*r.horizontalAlign,l=s[1]-o.displaySize[1]*r.verticalAlign;return{image:o,top:l,bottom:l+o.displaySize[1],left:n,right:n+o.displaySize[0]}}(n[i.icon.name],o.get('icon-offset').evaluate(i,{},N),o.get('icon-anchor').evaluate(i,{},N)),R=O.sdf,void 0===A.sdfIcons?A.sdfIcons=O.sdf:A.sdfIcons!==O.sdf&&cp('Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer'),(O.pixelRatio!==A.pixelRatio||0!==o.get('icon-rotate').constantOr(1))&&(A.iconsNeedLinear=!0))}var j=al(u.horizontal)||u.vertical;A.iconsInText=!!j&&j.iconsInText,(j||U)&&function(C,t,e,r,n,i,a,o,A,u,l){var s=i.textMaxSize.evaluate(t,{});void 0===s&&(s=a);var p=C.layers[0].layout,f=p.get('icon-offset').evaluate(t,{},l),c=al(e.horizontal),d=a/24,m=C.tilePixelRatio*d,y=C.tilePixelRatio*s/24,g=C.tilePixelRatio*o,x=C.tilePixelRatio*p.get('symbol-spacing'),v=p.get('text-padding')*C.tilePixelRatio,b=p.get('icon-padding')*C.tilePixelRatio,_=p.get('text-max-angle')/180*Xe,w='map'===p.get('text-rotation-alignment')&&'point'!==p.get('symbol-placement'),S='map'===p.get('icon-rotation-alignment')&&'point'!==p.get('symbol-placement'),I=p.get('symbol-placement'),k=p.get('icon-text-fit'),E;r&&'none'!==k&&(C.allowVerticalPlacement&&e.vertical&&(E=$p(r,e.vertical,k,p.get('icon-text-fit-padding'),f,d)),c&&(r=$p(r,c,k,p.get('icon-text-fit-padding'),f,d)));var h=function(o,s){0>s.x||8192<=s.x||0>s.y||8192<=s.y||function(A,t,e,r,n,i,a,o,s,u,l,p,c,h,f,y,d,m,v,g,x,b,w,_,S){var k=A.addToLineVertexArray(t,e),M=0,B=0,T=0,V=0,F=-1,D=-1,L={},R=pa(''),O=0,U=0,j,I,ee,C,E;if(void 0===o._unevaluatedLayout.getValue('text-radial-offset')?(O=(j=o.layout.get('text-offset').evaluate(x,{},_).map(function(e){return 24*e}))[0],U=j[1]):(O=24*o.layout.get('text-radial-offset').evaluate(x,{},_),U=qc),A.allowVerticalPlacement&&r.vertical){var P=o.layout.get('text-rotate').evaluate(x,{},_)+90;C=new Uc(s,t,u,l,p,r.vertical,c,h,f,P),a&&(E=new Uc(s,t,u,l,p,a,d,m,f,P))}if(n){var q=o.layout.get('icon-rotate').evaluate(x,{}),N='none'!==o.layout.get('icon-text-fit'),K=pd(n,q,w,N),G=a?pd(a,q,w,N):void 0;ee=new Uc(s,t,u,l,p,n,d,m,!1,q),M=4*K.length;var Z=A.iconSizeData,X=null;'source'===Z.kind?32640<(X=[128*o.layout.get('icon-size').evaluate(x,{})])[0]&&cp(A.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):'composite'===Z.kind&&(32640<(X=[128*b.compositeIconSizes[0].evaluate(x,{},_),128*b.compositeIconSizes[1].evaluate(x,{},_)])[0]||32640<X[1])&&cp(A.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),A.addSymbols(A.icon,K,X,g,v,x,!1,t,k.lineStartIndex,k.lineLength,-1,_),F=A.icon.placedSymbolArray.length-1,G&&(B=4*G.length,A.addSymbols(A.icon,G,X,g,v,x,Lc.vertical,t,k.lineStartIndex,k.lineLength,-1,_),D=A.icon.placedSymbolArray.length-1)}for(var J in r.horizontal){var H=r.horizontal[J];if(!I){R=pa(H.text);var Y=o.layout.get('text-rotate').evaluate(x,{},_);I=new Uc(s,t,u,l,p,H,c,h,f,Y)}var $=1===H.positionedLines.length;if(T+=il(A,t,H,i,o,f,x,y,k,r.vertical?Lc.horizontal:Lc.horizontalOnly,$?Object.keys(r.horizontal):[J],L,F,b,_),$)break}r.vertical&&(V+=il(A,t,r.vertical,i,o,f,x,y,k,Lc.vertical,['vertical'],L,D,b,_));var W=I?I.boxStartIndex:A.collisionBoxArray.length,Q=I?I.boxEndIndex:A.collisionBoxArray.length,te=C?C.boxStartIndex:A.collisionBoxArray.length,oe=C?C.boxEndIndex:A.collisionBoxArray.length,ae=ee?ee.boxStartIndex:A.collisionBoxArray.length,re=ee?ee.boxEndIndex:A.collisionBoxArray.length,ne=E?E.boxStartIndex:A.collisionBoxArray.length,ie=E?E.boxEndIndex:A.collisionBoxArray.length,se=-1,le=function(o,t){return o&&o.circleDiameter?oa(o.circleDiameter,t):t};se=le(I,se),se=le(C,se),se=le(ee,se);var pe=-1<(se=le(E,se))?1:0;pe&&(se*=S/24),A.glyphOffsetArray.length>=yl.MAX_GLYPHS&&cp('Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907'),void 0!==x.sortKey&&A.addToSortKeyRanges(A.symbolInstances.length,x.sortKey),A.symbolInstances.emplaceBack(t.x,t.y,0<=L.right?L.right:-1,0<=L.center?L.center:-1,0<=L.left?L.left:-1,L.vertical||-1,F,D,R,W,Q,te,oe,ae,re,ne,ie,u,T,V,M,B,pe,0,c,O,U,se)}(C,s,o,e,r,n,E,C.layers[0],C.collisionBoxArray,t.index,t.sourceLayerIndex,C.index,m,v,w,A,g,b,S,f,t,i,u,l,a)};if('line'===I)for(var P=0,z=ld(t.geometry,0,0,8192,8192);P<z.length;P+=1)for(var B=z[P],T=0,M=sd(B,x,_,e.vertical||c,r,24,y,C.overscaling,8192),F;T<M.length;T+=1)F=M[T],c&&ol(C,c.text,x/2,F)||h(B,F);else if('line-center'===I){for(var D=0,L=t.geometry,R;D<L.length;D+=1)if(R=L[D],1<R.length){var O=id(R,_,e.vertical||c,r,24,y);O&&h(R,O)}}else if('Polygon'===t.type)for(var U=0,V=ts(t.geometry,0);U<V.length;U+=1){var q=V[U],N=yd(q,16);h(q[0],new Oc(N.x,N.y,0))}else if('LineString'===t.type)for(var j=0,G=t.geometry,Z;j<G.length;j+=1)Z=G[j],h(Z,new Oc(Z[0].x,Z[0].y,0));else if('Point'===t.type)for(var X=0,K=t.geometry;X<K.length;X+=1)for(var H=0,Y=K[X],J;H<Y.length;H+=1)J=Y[H],h([J],new Oc(J.x,J.y,0))}(A,i,u,U,r,s,p,c,g,R,N)},v=0,x=A.features;v<x.length;v+=1)_();i&&A.generateCollisionDebugBuffers()},s.perspective=function(s,t,e,r,n){var i=1/v(t/2),o;return s[0]=i/e,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=i,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[11]=-1,s[12]=0,s[13]=0,s[15]=0,null!=n&&n!==1/0?(s[10]=(n+r)*(o=1/(r-n)),s[14]=2*n*r*o):(s[10]=-1,s[14]=-2*r),s},s.pick=function(o,t){for(var e={},a=0,r;a<t.length;a++)r=t[a],r in o&&(e[r]=o[r]);return e},s.plugin=ii,s.polygonIntersectsPolygon=Oa,s.postMapLoadEvent=at,s.postTurnstileEvent=nt,s.potpack=jp,s.refProperties=['type','source','source-layer','minzoom','maxzoom','filter','layout'],s.register=Tn,s.registerForPluginStateChange=function(e){return e({pluginStatus:$n,pluginURL:dc}),ti.on('pluginStateChange',e),e},s.renderColorRamp=yo,s.rotate=function(l,t,e){var r=t[0],n=t[1],i=t[2],a=t[3],o=w(e),p=Ze(e);return l[0]=r*p+i*o,l[1]=n*p+a*o,l[2]=r*-o+i*p,l[3]=n*-o+a*p,l},s.rotateX=function(d,t,e){var r=w(e),n=Ze(e),i=t[4],a=t[5],o=t[6],s=t[7],u=t[8],l=t[9],p=t[10],c=t[11];return t!==d&&(d[0]=t[0],d[1]=t[1],d[2]=t[2],d[3]=t[3],d[12]=t[12],d[13]=t[13],d[14]=t[14],d[15]=t[15]),d[4]=i*n+u*r,d[5]=a*n+l*r,d[6]=o*n+p*r,d[7]=s*n+c*r,d[8]=u*n-i*r,d[9]=l*n-a*r,d[10]=p*n-o*r,d[11]=c*n-s*r,d},s.rotateZ=function(d,t,e){var r=w(e),n=Ze(e),i=t[0],a=t[1],o=t[2],s=t[3],u=t[4],l=t[5],p=t[6],c=t[7];return t!==d&&(d[8]=t[8],d[9]=t[9],d[10]=t[10],d[11]=t[11],d[12]=t[12],d[13]=t[13],d[14]=t[14],d[15]=t[15]),d[0]=i*n+u*r,d[1]=a*n+l*r,d[2]=o*n+p*r,d[3]=s*n+c*r,d[4]=u*n-i*r,d[5]=l*n-a*r,d[6]=p*n-o*r,d[7]=c*n-s*r,d},s.scale=function(o,t,e){var r=e[0],n=e[1],i=e[2];return o[0]=t[0]*r,o[1]=t[1]*r,o[2]=t[2]*r,o[3]=t[3]*r,o[4]=t[4]*n,o[5]=t[5]*n,o[6]=t[6]*n,o[7]=t[7]*n,o[8]=t[8]*i,o[9]=t[9]*i,o[10]=t[10]*i,o[11]=t[11]*i,o[12]=t[12],o[13]=t[13],o[14]=t[14],o[15]=t[15],o},s.scale$1=function(o,t,e){return o[0]=t[0]*e,o[1]=t[1]*e,o[2]=t[2]*e,o[3]=t[3]*e,o},s.scale$2=function(o,t,e){return o[0]=t[0]*e,o[1]=t[1]*e,o[2]=t[2]*e,o},s.setCacheLimits=function(o,t){ot=o,st=t},s.setRTLTextPlugin=function(o,t,e){if(void 0===e&&(e=!1),'deferred'===$n||'loading'===$n||'loaded'===$n)throw new Error('setRTLTextPlugin cannot be called multiple times.');dc=L.resolveURL(o),$n='deferred',Kn=t,Yn(),e||ni()},s.sphericalToCartesian=function(o){var t=o[0],e=o[1],a=o[2];return e+=90,e*=Xe/180,a*=Xe/180,{x:t*Ze(e)*w(a),y:t*w(e)*w(a),z:t*Ze(a)}},s.sqrLen=function(o){var t=o[0],e=o[1];return t*t+e*e},s.styleSpec=zt,s.sub=function(o,t,e){return o[0]=t[0]-e[0],o[1]=t[1]-e[1],o[2]=t[2]-e[2],o},s.symbolSize=Nc,s.transformMat3=function(o,t,e){var r=t[0],n=t[1],i=t[2];return o[0]=r*e[0]+n*e[3]+i*e[6],o[1]=r*e[1]+n*e[4]+i*e[7],o[2]=r*e[2]+n*e[5]+i*e[8],o},s.transformMat4=ao,s.translate=function(g,t,e){var r=e[0],d=e[1],m=e[2],_,n,i,a,o,s,u,l,p,c,h,f;return t===g?(g[12]=t[0]*r+t[4]*d+t[8]*m+t[12],g[13]=t[1]*r+t[5]*d+t[9]*m+t[13],g[14]=t[2]*r+t[6]*d+t[10]*m+t[14],g[15]=t[3]*r+t[7]*d+t[11]*m+t[15]):(n=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=t[6],l=t[7],p=t[8],c=t[9],h=t[10],f=t[11],g[0]=_=t[0],g[1]=n,g[2]=i,g[3]=a,g[4]=o,g[5]=s,g[6]=u,g[7]=l,g[8]=p,g[9]=c,g[10]=h,g[11]=f,g[12]=_*r+o*d+p*m+t[12],g[13]=n*r+s*d+c*m+t[13],g[14]=i*r+u*d+h*m+t[14],g[15]=a*r+l*d+f*m+t[15]),g},s.triggerPluginCompletionEvent=cc,s.uniqueId=c,s.validateCustomStyleLayer=function(o){var t=[],e=o.id;return void 0===e&&t.push({message:'layers.'+e+': missing required property "id"'}),void 0===o.render&&t.push({message:'layers.'+e+': missing required method "render"'}),o.renderingMode&&'2d'!==o.renderingMode&&'3d'!==o.renderingMode&&t.push({message:'layers.'+e+': property "renderingMode" must be either "2d" or "3d"'}),t},s.validateLight=zn,s.validateStyle=wn,s.values=function(o){var t=[];for(var e in o)t.push(o[e]);return t},s.vectorTile=Ic,s.version='1.12.0',s.warnOnce=cp,s.webpSupported=O,s.window=vd,s.wrap=p}),e(['./shared'],function(_e){function S(t){var p=typeof t;if('number'==p||'boolean'==p||'string'==p||null==t)return JSON.stringify(t);if(Array.isArray(t)){for(var r='[',i=0,o=t;i<o.length;i+=1)r+=S(o[i])+',';return r+']'}for(var n=Object.keys(t).sort(),s='{',a=0;a<n.length;a++)s+=JSON.stringify(n[a])+':'+S(t[n[a]])+',';return s+'}'}function be(e){for(var t='',a=0,o=_e.refProperties;a<o.length;a+=1)t+='/'+S(e[o[a]]);return t}function e(e,t,a){for(var r=new _e.EvaluationParameters(t),o=0,n=e;o<n.length;o+=1)n[o].recalculate(r,a)}function s(e,a){var t=_e.getArrayBuffer(e.request,function(e,t,r,s){e?a(e):t&&a(null,{vectorTile:new _e.vectorTile.VectorTile(new _e.pbf(t)),rawData:t,cacheControl:r,expires:s})});return function(){t.cancel(),a()}}function a(o,e){if(0!==o.length){c(o[0],e);for(var a=1;a<o.length;a++)c(o[a],!e)}}function c(a,e){for(var s=0,r=0,i=a.length,o=i-1;r<i;o=r++)s+=(a[r][0]-a[o][0])*(a[o][1]+a[r][1]);0<=s!=!!e&&a.reverse()}function t(o,e){this.options=e||{},this.features=o,this.length=o.length}function r(o,e){this.id='number'==typeof o.id?o.id:void 0,this.type=o.type,this.rawGeometry=1===o.type?[o.geometry]:o.geometry,this.properties=o.tags,this.extent=e||4096}function p(e){var t=new _e.pbf;return function(o,e){for(var t in o.layers)e.writeMessage(3,y,o.layers[t])}(e,t),t.finish()}function y(a,e){var t;e.writeVarintField(15,a.version||1),e.writeStringField(1,a.name||''),e.writeVarintField(5,a.extent||4096);var r={keys:[],values:[],keycache:{},valuecache:{}};for(t=0;t<a.length;t++)r.feature=a.feature(t),e.writeMessage(2,I,r);var i=r.keys;for(t=0;t<i.length;t++)e.writeStringField(3,i[t]);var o=r.values;for(t=0;t<o.length;t++)e.writeMessage(4,T,o[t])}function I(o,e){var t=o.feature;void 0!==t.id&&e.writeVarintField(1,t.id),e.writeMessage(2,M,o),e.writeVarintField(3,t.type),e.writeMessage(4,P,t)}function M(d,e){var t=d.feature,r=d.keys,i=d.values,o=d.keycache,n=d.valuecache;for(var s in t.properties){var a=o[s];void 0===a&&(r.push(s),o[s]=a=r.length-1),e.writeVarint(a);var l=t.properties[s],m=typeof l;'string'!=m&&'boolean'!=m&&'number'!=m&&(l=JSON.stringify(l));var g=m+':'+l,c=n[g];void 0===c&&(i.push(l),n[g]=c=i.length-1),e.writeVarint(c)}}function _(o,e){return(e<<3)+(7&o)}function k(t){return t<<1^t>>31}function P(d,e){for(var t=d.loadGeometry(),r=d.type,i=0,o=0,n=t.length,s=0;s<n;s++){var a=t[s],l=1;1===r&&(l=a.length),e.writeVarint(_(1,l));for(var u=3===r?a.length-1:a.length,m=0;m<u;m++){1===m&&1!==r&&e.writeVarint(_(2,u-1));var c=a[m].x-i,p=a[m].y-o;e.writeVarint(k(c)),e.writeVarint(k(p)),i+=c,o+=p}3===r&&e.writeVarint(_(7,1))}}function T(o,a){var t=typeof o;'string'==t?a.writeStringField(1,o):'boolean'==t?a.writeBooleanField(7,o):'number'==t&&(0==o%1?0>o?a.writeSVarintField(6,o):a.writeVarintField(5,o):a.writeDoubleField(3,o))}function Te(o,e,t,a){D(o,t,a),D(e,2*t,2*a),D(e,2*t+1,2*a+1)}function D(o,e,t){var a=o[e];o[e]=o[t],o[t]=a}function L(a,e,t,r){var i=a-t,o=e-r;return i*i+o*o}function z(a,n,s,l,p){return{x:a,y:n,zoom:1/0,id:s,parentId:-1,numPoints:l,properties:p}}function Z(o,e){var a=o.geometry.coordinates,r=a[1];return{x:G(a[0]),y:Y(r),zoom:1/0,index:e,parentId:-1}}function A(o){return{type:'Feature',id:o.id,properties:Ee(o),geometry:{type:'Point',coordinates:[(a=o.x,360*(a-.5)),(e=o.y,t=(180-360*e)*Xe/180,360*n(g(t))/Xe-90)]}};var e,t,a}function Ee(o){var e=o.numPoints,a=1e4<=e?b(e/1e3)+'k':1e3<=e?b(e/100)/10+'k':e;return j(j({},o.properties),{cluster:!0,cluster_id:o.id,point_count:e,point_count_abbreviated:a})}function G(t){return t/360+.5}function Y(o){var e=w(o*Xe/180),t=.5-.25*x((1+e)/(1-e))/Xe;return 0>t?0:1<t?1:t}function j(o,e){for(var t in e)o[t]=e[t];return o}function V(t){return t.x}function X(t){return t.y}function W(p,e,t,r,i,o){var n=i-t,s=o-r;if(0!=n||0!=s){var a=((p-t)*n+(e-r)*s)/(n*n+s*s);1<a?(t=i,r=o):0<a&&(t+=n*a,r+=s*a)}return(n=p-t)*n+(s=e-r)*s}function R(a,e,n,s){var l={id:void 0===a?null:a,type:e,geometry:n,tags:s,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(a){var e=a.geometry,t=a.type;if('Point'===t||'MultiPoint'===t||'LineString'===t)q(a,e);else if('Polygon'===t||'MultiLineString'===t)for(var r=0;r<e.length;r++)q(a,e[r]);else if('MultiPolygon'===t)for(r=0;r<e.length;r++)for(var n=0;n<e[r].length;n++)q(a,e[r][n])}(l),l}function q(o,e){for(var t=0;t<e.length;t+=3)o.minX=ta(o.minX,e[t]),o.minY=ta(o.minY,e[t+1]),o.maxX=oa(o.maxX,e[t]),o.maxY=oa(o.maxY,e[t+1])}function U(p,e,t,r){if(e.geometry){var i=e.geometry.coordinates,o=e.geometry.type,n=C(t.tolerance/((1<<t.maxZoom)*t.extent),2),s=[],a=e.id;if(t.promoteId?a=e.properties[t.promoteId]:t.generateId&&(a=r||0),'Point'===o)$(i,s);else if('MultiPoint'===o)for(var d=0;d<i.length;d++)$(i[d],s);else if('LineString'===o)H(i,s,n,!1);else if('MultiLineString'===o){if(t.lineMetrics){for(d=0;d<i.length;d++)H(i[d],s=[],n,!1),p.push(R(a,'LineString',s,e.properties));return}K(i,s,n,!1)}else if('Polygon'===o)K(i,s,n,!0);else{if('MultiPolygon'!==o){if('GeometryCollection'===o){for(d=0;d<e.geometry.geometries.length;d++)U(p,{id:a,geometry:e.geometry.geometries[d],properties:e.properties},t,r);return}throw new Error('Input data is not a valid GeoJSON object.')}for(d=0;d<i.length;d++){var c=[];K(i[d],c,n,!0),s.push(c)}}p.push(R(a,o,s,e.properties))}}function $(o,e){e.push(Q(o[0])),e.push(ee(o[1])),e.push(0)}function H(p,e,t,r){for(var i=0,s=0,a,o;s<p.length;s++){var n=Q(p[s][0]),l=ee(p[s][1]);e.push(n),e.push(l),e.push(0),0<s&&(i+=r?(a*l-n*o)/2:N(C(n-a,2)+C(l-o,2))),a=n,o=l}var d=e.length-3;e[2]=1,function a(e,t,r,i){for(var o=i,s=r-t,l=e[t],u=e[t+1],m=e[r],c=e[r+1],p=t+3,y,n;p<r;p+=3)if(n=W(e[p],e[p+1],l,u,m,c),n>o)y=p,o=n;else if(n===o){var d=B(p-(r-t>>1));d<s&&(y=p,s=d)}o>i&&(3<y-t&&a(e,t,y,i),e[y+2]=o,3<r-y&&a(e,y,r,i))}(e,0,d,t),e[d+2]=1,e.size=B(i),e.start=0,e.end=e.size}function K(a,e,t,r){for(var i=0,o;i<a.length;i++)o=[],H(a[i],o,t,r),e.push(o)}function Q(t){return t/360+.5}function ee(o){var e=w(o*Xe/180),t=.5-.25*x((1+e)/(1-e))/Xe;return 0>t?0:1<t?1:t}function te(y,e,t,r,i,o,n,s){if(r/=e,o>=(t/=e)&&n<r)return y;if(n<t||o>=r)return null;for(var a=[],l=0;l<y.length;l++){var u=y[l],_=u.geometry,c=u.type,p=0===i?u.minX:u.minY,f=0===i?u.maxX:u.maxY;if(p>=t&&f<r)a.push(u);else if(!(f<t||p>=r)){var d=[];if('Point'===c||'MultiPoint'===c)re(_,d,t,r,i);else if('LineString'===c)ie(_,d,t,r,i,!1,s.lineMetrics);else if('MultiLineString'===c)ne(_,d,t,r,i,!1);else if('Polygon'===c)ne(_,d,t,r,i,!0);else if('MultiPolygon'===c)for(var g=0,h;g<_.length;g++)h=[],ne(_[g],h,t,r,i,!0),h.length&&d.push(h);if(d.length){if(s.lineMetrics&&'LineString'===c){for(g=0;g<d.length;g++)a.push(R(u.id,c,d[g],u.tags));continue}'LineString'!==c&&'MultiLineString'!==c||(1===d.length?(c='LineString',d=d[0]):c='MultiLineString'),'Point'!==c&&'MultiPoint'!==c||(c=3===d.length?'Point':'MultiPoint'),a.push(R(u.id,c,d,u.tags))}}}return a.length?a:null}function re(a,e,t,r,i){for(var o=0,n;o<a.length;o+=3)n=a[o+i],n>=t&&n<=r&&(e.push(a[o]),e.push(a[o+1]),e.push(a[o+2]))}function ie(_,e,t,r,i,o,b){for(var s=oe(_),u=0===i?ae:le,h=_.start,c=0,p,a;c<_.length-3;c+=3){var l=_[c],f=_[c+1],d=_[c+2],g=_[c+3],v=_[c+4],m=0===i?l:f,y=0===i?g:v,x=!1;b&&(p=N(C(l-g,2)+C(f-v,2))),m<t?y>t&&(a=u(s,l,f,g,v,t),b&&(s.start=h+p*a)):m>r?y<r&&(a=u(s,l,f,g,v,r),b&&(s.start=h+p*a)):se(s,l,f,d),y<t&&m>=t&&(a=u(s,l,f,g,v,t),x=!0),y>r&&m<=r&&(a=u(s,l,f,g,v,r),x=!0),!o&&x&&(b&&(s.end=h+p*a),e.push(s),s=oe(_)),b&&(h+=p)}var w=_.length-3;l=_[w],f=_[w+1],d=_[w+2],(m=0===i?l:f)>=t&&m<=r&&se(s,l,f,d),w=s.length-3,o&&3<=w&&(s[w]!==s[0]||s[w+1]!==s[1])&&se(s,s[0],s[1],s[2]),s.length&&e.push(s)}function oe(o){var e=[];return e.size=o.size,e.start=o.start,e.end=o.end,e}function ne(a,e,t,r,i,o){for(var n=0;n<a.length;n++)ie(a[n],e,t,r,i,o,!1)}function se(o,e,t,a){o.push(e),o.push(t),o.push(a)}function ae(a,e,t,r,i,o){var n=(o-e)/(r-e);return a.push(o),a.push(t+(i-t)*n),a.push(1),n}function le(a,e,t,r,i,o){var n=(o-t)/(i-t);return a.push(e+(r-e)*n),a.push(o),a.push(1),n}function ue(p,e){for(var t=[],r=0;r<p.length;r++){var i=p[r],n=i.type,s;if('Point'===n||'MultiPoint'===n||'LineString'===n)s=he(i.geometry,e);else if('MultiLineString'===n||'Polygon'===n){s=[];for(var o=0;o<i.geometry.length;o++)s.push(he(i.geometry[o],e))}else if('MultiPolygon'===n)for(s=[],o=0;o<i.geometry.length;o++){for(var a=[],l=0;l<i.geometry[o].length;l++)a.push(he(i.geometry[o][l],e));s.push(a)}t.push(R(i.id,n,s,i.tags))}return t}function he(o,e){var t=[];t.size=o.size,void 0!==o.start&&(t.start=o.start,t.end=o.end);for(var a=0;a<o.length;a+=3)t.push(o[a]+e,o[a+1],o[a+2]);return t}function ce(p,e){if(p.transformed)return p;var t=1<<p.z,n=p.x,s=p.y,a,r,i;for(a=0;a<p.features.length;a++){var o=p.features[a],l=o.geometry,d=o.type;if(o.geometry=[],1===d)for(r=0;r<l.length;r+=2)o.geometry.push(pe(l[r],l[r+1],e,t,n,s));else for(r=0;r<l.length;r++){var u=[];for(i=0;i<l[r].length;i+=2)u.push(pe(l[r][i],l[r][i+1],e,t,n,s));o.geometry.push(u)}}return p.transformed=!0,p}function pe(a,e,t,r,i,o){return[b(t*(a*r-i)),b(t*(e*r-o))]}function fe(p,e,d,m,g){for(var o=e===g.maxZoom?0:g.tolerance/((1<<e)*g.extent),n={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:d,y:m,z:e,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},s=0;s<p.length;s++){n.numFeatures++,de(n,p[s],o,g);var a=p[s].minX,l=p[s].minY,u=p[s].maxX,y=p[s].maxY;a<n.minX&&(n.minX=a),l<n.minY&&(n.minY=l),u>n.maxX&&(n.maxX=u),y>n.maxY&&(n.maxY=y)}return n}function de(d,e,t,r){var i=e.geometry,o=e.type,n=[];if('Point'===o||'MultiPoint'===o)for(var m=0;m<i.length;m+=3)n.push(i[m]),n.push(i[m+1]),d.numPoints++,d.numSimplified++;else if('LineString'===o)ge(n,i,d,t,!1,!1);else if('MultiLineString'===o||'Polygon'===o)for(m=0;m<i.length;m++)ge(n,i[m],d,t,'Polygon'===o,0==m);else if('MultiPolygon'===o)for(var a=0,l;a<i.length;a++)for(l=i[a],m=0;m<l.length;m++)ge(n,l[m],d,t,!0,0==m);if(n.length){var u=e.tags||null;if('LineString'===o&&r.lineMetrics){for(var g in u={},e.tags)u[g]=e.tags[g];u.mapbox_clip_start=i.start/i.size,u.mapbox_clip_end=i.end/i.size}var c={geometry:n,type:'Polygon'===o||'MultiPolygon'===o?3:'LineString'===o||'MultiLineString'===o?2:1,tags:u};null!==e.id&&(c.id=e.id),d.features.push(c)}}function ge(p,e,t,r,i,o){var n=r*r;if(0<r&&e.size<(i?n:r))t.numPoints+=e.length/3;else{for(var s=[],a=0;a<e.length;a+=3)(0==r||e[a+2]>n)&&(t.numSimplified++,s.push(e[a]),s.push(e[a+1])),t.numPoints++;i&&function(l,e){for(var t=0,r=0,i=l.length,o=i-2;r<i;o=r,r+=2)t+=(l[r]-l[o])*(l[r+1]+l[o+1]);if(0<t===e)for(r=0,i=l.length;r<i/2;r+=2){var n=l[r],s=l[r+1];l[r]=l[i-2-r],l[r+1]=l[i-1-r],l[i-2-r]=n,l[i-1-r]=s}}(s,o),p.push(s)}}function ve(o,e){var t=(e=this.options=function(o,e){for(var t in e)o[t]=e[t];return o}(Object.create(this.options),e)).debug;if(t&&console.time('preprocess data'),0>e.maxZoom||24<e.maxZoom)throw new Error('maxZoom should be in the 0-24 range');if(e.promoteId&&e.generateId)throw new Error('promoteId and generateId cannot be used together.');var a=function(o,a){var t=[];if('FeatureCollection'===o.type)for(var r=0;r<o.features.length;r++)U(t,o.features[r],a,r);else U(t,'Feature'===o.type?o:{geometry:o},a);return t}(o,e);this.tiles={},this.tileCoords=[],t&&(console.timeEnd('preprocess data'),console.log('index: maxZoom: %d, maxPoints: %d',e.indexMaxZoom,e.indexMaxPoints),console.time('generate tiles'),this.stats={},this.total=0),(a=function(a,e){var t=e.buffer/e.extent,s=a,i=te(a,1,-1-t,t,0,-1,2,e),o=te(a,1,1-t,2+t,0,-1,2,e);return(i||o)&&(s=te(a,1,-t,1+t,0,-1,2,e)||[],i&&(s=ue(i,1).concat(s)),o&&(s=s.concat(ue(o,-1)))),s}(a,e)).length&&this.splitTile(a,0,0,0),t&&(a.length&&console.log('features: %d, points: %d',this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd('generate tiles'),console.log('tiles generated:',this.total,JSON.stringify(this.stats)))}function me(o,e,t){return 32*((1<<o)*t+e)+o}function ye(a,e){var t=a.tileID.canonical;if(!this._geoJSONIndex)return e(null,null);var r=this._geoJSONIndex.getTile(t.z,t.x,t.y);if(!r)return e(null,null);var s=new d(r.features),l=m(s);0===l.byteOffset&&l.byteLength===l.buffer.byteLength||(l=new Uint8Array(l)),e(null,{vectorTile:s,rawData:l.buffer})}var xe=function(t){this.keyCache={},t&&this.replace(t)};xe.prototype.replace=function(t){this._layerConfigs={},this._layers={},this.update(t,[])},xe.prototype.update=function(e,t){for(var r=this,o=0,n=e,i;o<n.length;o+=1){i=n[o],this._layerConfigs[i.id]=i;var a=this._layers[i.id]=_e.createStyleLayer(i);a._featureFilter=_e.featureFilter(a.filter),this.keyCache[i.id]&&delete this.keyCache[i.id]}for(var s=0,l=t,u;s<l.length;s+=1)u=l[s],delete this.keyCache[u],delete this._layerConfigs[u],delete this._layers[u];this.familiesBySource={};for(var c=0,p=function(r,e){for(var t={},i=0,o;i<r.length;i++){o=e&&e[r[i].id]||be(r[i]),e&&(e[r[i].id]=o);var n=t[o];n||(n=t[o]=[]),n.push(r[i])}var s=[];for(var a in t)s.push(t[a]);return s}(_e.values(this._layerConfigs),this.keyCache);c<p.length;c+=1){var _=p[c].map(function(t){return r._layers[t.id]}),d=_[0];if('none'!==d.visibility){var g=d.source||'',f=this.familiesBySource[g];f||(f=this.familiesBySource[g]={});var m=d.sourceLayer||'_geojsonTileLayer',y=f[m];y||(y=f[m]=[]),y.push(_)}}};var Ce=function(e){var t={},r=[];for(var i in e){var o=e[i],n=t[i]={};for(var s in o){var m=o[+s];if(m&&0!==m.bitmap.width&&0!==m.bitmap.height){var l={x:0,y:0,w:m.bitmap.width+2,h:m.bitmap.height+2};r.push(l),n[s]={rect:l,metrics:m.metrics}}}}var y=_e.potpack(r),_=new _e.AlphaImage({width:y.w||1,height:y.h||1});for(var c in e){var p=e[c];for(var f in p){var h=p[+f];if(h&&0!==h.bitmap.width&&0!==h.bitmap.height){var g=t[c][f].rect;_e.AlphaImage.copy(h.bitmap,_,{x:0,y:0},{x:g.x+1,y:g.y+1},h.bitmap)}}}this.image=_,this.positions=t};_e.register('GlyphAtlas',Ce);var Ie=function(e){this.tileID=new _e.OverscaledTileID(e.tileID.overscaledZ,e.tileID.wrap,e.tileID.canonical.z,e.tileID.canonical.x,e.tileID.canonical.y),this.uid=e.uid,this.zoom=e.zoom,this.pixelRatio=e.pixelRatio,this.tileSize=e.tileSize,this.source=e.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=e.showCollisionBoxes,this.collectResourceTiming=!!e.collectResourceTiming,this.returnDependencies=!!e.returnDependencies,this.promoteId=e.promoteId};Ie.prototype.parse=function(o,t,s,r,E){function a(){if(m)return E(m);if(c&&p&&f){var o=new Ce(c),t=new _e.ImageAtlas(p,f);for(var a in A){var n=A[a];n instanceof _e.SymbolBucket?(e(n.layers,this.zoom,s),_e.performSymbolLayout(n,c,o.positions,p,t.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):n.hasPattern&&(n instanceof _e.LineBucket||n instanceof _e.FillBucket||n instanceof _e.FillExtrusionBucket)&&(e(n.layers,this.zoom,s),n.addFeatures(g,this.tileID.canonical,t.patternPositions))}this.status='done',E(null,{buckets:_e.values(A).filter(function(t){return!t.isEmpty()}),featureIndex:u,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:o.image,imageAtlas:t,glyphMap:this.returnDependencies?c:null,iconMap:this.returnDependencies?p:null,glyphPositions:this.returnDependencies?o.positions:null})}}var n=this;this.status='parsing',this.data=o,this.collisionBoxArray=new _e.CollisionBoxArray;var l=new _e.DictionaryCoder(Object.keys(o.layers).sort()),u=new _e.FeatureIndex(this.tileID,this.promoteId);u.bucketLayerIDs=[];var A={},g={featureIndex:u,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:s},v=t.familiesBySource[this.source],m,c,p,f;for(var d in v){var y=o.layers[d];if(y){1===y.version&&_e.warnOnce('Vector tile source "'+this.source+'" layer "'+d+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var x=l.encode(d),z=[],S=0;S<y.length;S++){var R=y.feature(S),B=u.getId(R,d);z.push({feature:R,id:B,index:S,sourceLayerIndex:x})}for(var F=0,_=v[d];F<_.length;F+=1){var k=_[F],O=k[0];O.minzoom&&this.zoom<ea(O.minzoom)||O.maxzoom&&this.zoom>=O.maxzoom||'none'!==O.visibility&&(e(k,this.zoom,s),(A[O.id]=O.createBucket({index:u.bucketLayerIDs.length,layers:k,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:x,sourceID:this.source})).populate(z,g,this.tileID.canonical),u.bucketLayerIDs.push(k.map(function(t){return t.id})))}}}var T=_e.mapObject(g.glyphDependencies,function(t){return Object.keys(t).map(Number)});Object.keys(T).length?r.send('getGlyphs',{uid:this.uid,stacks:T},function(o,e){m||(m=o,c=e,a.call(n))}):c={};var N=Object.keys(g.iconDependencies);N.length?r.send('getImages',{icons:N,source:this.source,tileID:this.tileID,type:'icons'},function(o,e){m||(m=o,p=e,a.call(n))}):p={};var U=Object.keys(g.patternDependencies);U.length?r.send('getImages',{icons:U,source:this.source,tileID:this.tileID,type:'patterns'},function(o,e){m||(m=o,f=e,a.call(n))}):f={},a.call(this)};var o=function(o,e,t,a){this.actor=o,this.layerIndex=e,this.availableImages=t,this.loadVectorData=a||s,this.loading={},this.loaded={}};o.prototype.loadTile=function(e,p){var r=this,i=e.uid;this.loading||(this.loading={});var o=!!(e&&e.request&&e.request.collectResourceTiming)&&new _e.RequestPerformance(e.request),s=this.loading[i]=new Ie(e);s.abort=this.loadVectorData(e,function(e,t){if(delete r.loading[i],e||!t)return s.status='done',r.loaded[i]=s,p(e);var a=t.rawData,l={};t.expires&&(l.expires=t.expires),t.cacheControl&&(l.cacheControl=t.cacheControl);var d={};if(o){var u=o.finish();u&&(d.resourceTiming=JSON.parse(JSON.stringify(u)))}s.vectorTile=t.vectorTile,s.parse(t.vectorTile,r.layerIndex,r.availableImages,r.actor,function(e,t){return e||!t?p(e):void p(null,_e.extend({rawTileData:a.slice(0)},t,l,d))}),r.loaded=r.loaded||{},r.loaded[i]=s})},o.prototype.reloadTile=function(l,p){var t=this,e=this.loaded,r=l.uid,d=this;if(e&&e[r]){var n=e[r];n.showCollisionBoxes=l.showCollisionBoxes;var o=function(a,e){var r=n.reloadCallback;r&&(delete n.reloadCallback,n.parse(n.vectorTile,d.layerIndex,t.availableImages,d.actor,r)),p(a,e)};'parsing'===n.status?n.reloadCallback=o:'done'===n.status&&(n.vectorTile?n.parse(n.vectorTile,this.layerIndex,this.availableImages,this.actor,o):o())}},o.prototype.abortTile=function(o,e){var t=this.loading,a=o.uid;t&&t[a]&&t[a].abort&&(t[a].abort(),delete t[a]),e()},o.prototype.removeTile=function(o,e){var t=this.loaded,a=o.uid;t&&t[a]&&delete t[a],e()};var Ae=_e.window.ImageBitmap,i=function(){this.loaded={}};i.prototype.loadTile=function(e,t){var r=e.uid,i=e.encoding,o=e.rawImageData,n=Ae&&o instanceof Ae?this.getImageData(o):o,s=new _e.DEMData(r,n,i);this.loaded=this.loaded||{},this.loaded[r]=s,t(null,s)},i.prototype.getImageData=function(e){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(e.width,e.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext('2d')),this.offscreenCanvas.width=e.width,this.offscreenCanvas.height=e.height,this.offscreenCanvasContext.drawImage(e,0,0,e.width,e.height);var t=this.offscreenCanvasContext.getImageData(-1,-1,e.width+2,e.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new _e.RGBAImage({width:t.width,height:t.height},t.data)},i.prototype.removeTile=function(o){var e=this.loaded,t=o.uid;e&&e[t]&&delete e[t]};var u=_e.vectorTile.VectorTileFeature.prototype.toGeoJSON,f=function(e){this._feature=e,this.extent=_e.EXTENT,this.type=e.type,this.properties=e.tags,'id'in e&&!isNaN(e.id)&&(this.id=parseInt(e.id,10))};f.prototype.loadGeometry=function(){if(1===this._feature.type){for(var e=[],t=0,r=this._feature.geometry,i;t<r.length;t+=1)i=r[t],e.push([new _e.Point$1(i[0],i[1])]);return e}for(var o=[],n=0,s=this._feature.geometry;n<s.length;n+=1){for(var a=[],l=0,p=s[n],d;l<p.length;l+=1)d=p[l],a.push(new _e.Point$1(d[0],d[1]));o.push(a)}return o},f.prototype.toGeoJSON=function(o,e,t){return u.call(this,o,e,t)};var d=function(e){this.layers={_geojsonTileLayer:this},this.name='_geojsonTileLayer',this.extent=_e.EXTENT,this.length=e.length,this._features=e};d.prototype.feature=function(t){return new f(this._features[t])};var h=_e.vectorTile.VectorTileFeature,v=t;t.prototype.feature=function(t){return new r(this.features[t],this.options.extent)},r.prototype.loadGeometry=function(){var e=this.rawGeometry;this.geometry=[];for(var t=0;t<e.length;t++){for(var a=e[t],r=[],o=0;o<a.length;o++)r.push(new _e.Point$1(a[o][0],a[o][1]));this.geometry.push(r)}return this.geometry},r.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var p=this.geometry,e=1/0,t=-1/0,r=1/0,i=-1/0,o=0;o<p.length;o++)for(var n=p[o],s=0,a;s<n.length;s++)a=n[s],e=ta(e,a.x),t=oa(t,a.x),r=ta(r,a.y),i=oa(i,a.y);return[e,r,t,i]},r.prototype.toGeoJSON=h.prototype.toGeoJSON;var m=p;m.fromVectorTileJs=p,m.fromGeojsonVt=function(o,e){e=e||{};var t={};for(var a in o)t[a]=new v(o[a].features,e),t[a].name=a,t[a].version=e.version,t[a].extent=e.extent;return p({layers:t})},m.GeoJSONWrapper=v;var ke=function(t){return t[0]},O=function(t){return t[1]},E=function(p,e,t,r,i){void 0===e&&(e=ke),void 0===t&&(t=O),void 0===r&&(r=64),void 0===i&&(i=Float64Array),this.nodeSize=r,this.points=p;for(var o=65536>p.length?Uint16Array:Uint32Array,n=this.ids=new o(p.length),s=this.coords=new i(2*p.length),a=0;a<p.length;a++)n[a]=a,s[2*a]=e(p[a]),s[2*a+1]=t(p[a]);!function l(e,t,r,i,o,n){if(!(o-i<=r)){var s=i+o>>1;!function m(e,t,r,i,o,n){for(;o>i;){if(600<o-i){var s=o-i+1,a=r-i+1,l=x(s),u=.5*g(2*l/3),y=.5*N(l*u*(s-u)/s)*(0>a-s/2?-1:1);m(e,t,r,oa(i,ea(r-a*u/s+y)),ta(o,ea(r+(s-a)*u/s+y)),n)}var c=t[2*r+n],p=i,_=o;for(Te(e,t,i,r),t[2*o+n]>c&&Te(e,t,i,o);p<_;){for(Te(e,t,p,_),p++,_--;t[2*p+n]<c;)p++;for(;t[2*_+n]>c;)_--}t[2*i+n]===c?Te(e,t,i,_):Te(e,t,++_,o),_<=r&&(i=_+1),r<=_&&(o=_-1)}}(e,t,s,i,o,n%2),l(e,t,r,i,s-1,n+1),l(e,t,r,s+1,o,n+1)}}(n,s,r,0,n.length-1,0)};E.prototype.range=function(o,e,t,a){return function(m,e,t,r,i,o,n){for(var s=[0,m.length-1,0],u=[],y,a;s.length;){var l=s.pop(),c=s.pop(),p=s.pop();if(c-p<=n)for(var _=p;_<=c;_++)a=e[2*_+1],(y=e[2*_])>=t&&y<=i&&a>=r&&a<=o&&u.push(m[_]);else{var d=ea((p+c)/2);a=e[2*d+1],(y=e[2*d])>=t&&y<=i&&a>=r&&a<=o&&u.push(m[d]);var g=(l+1)%2;(0===l?t<=y:r<=a)&&(s.push(p),s.push(d-1),s.push(g)),(0===l?i>=y:o>=a)&&(s.push(d+1),s.push(c),s.push(g))}}return u}(this.ids,this.coords,o,e,t,a,this.nodeSize)},E.prototype.within=function(o,e,t){return function(m,e,t,r,i,o){for(var n=[0,m.length-1,0],s=[],a=i*i;n.length;){var l=n.pop(),u=n.pop(),y=n.pop();if(u-y<=o)for(var c=y;c<=u;c++)L(e[2*c],e[2*c+1],t,r)<=a&&s.push(m[c]);else{var p=ea((y+u)/2),_=e[2*p],d=e[2*p+1];L(_,d,t,r)<=a&&s.push(m[p]);var g=(l+1)%2;(0===l?t-i<=_:r-i<=d)&&(n.push(y),n.push(p-1),n.push(g)),(0===l?t+i>=_:r+i>=d)&&(n.push(p+1),n.push(u),n.push(g))}}return s}(this.ids,this.coords,o,e,t,this.nodeSize)};var F={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(t){return t}},Pe=function(t){this.options=j(Object.create(F),t),this.trees=Array(this.options.maxZoom+1)};Pe.prototype.load=function(p){var e=this.options,t=e.log,r=e.minZoom,i=e.maxZoom,o=e.nodeSize;t&&console.time('total time');var n='prepare '+p.length+' points';t&&console.time(n),this.points=p;for(var s=[],a=0;a<p.length;a++)p[a].geometry&&s.push(Z(p[a],a));this.trees[i+1]=new E(s,V,X,o,Float32Array),t&&console.timeEnd(n);for(var l=i,d;l>=r;l--)d=+Date.now(),s=this._cluster(s,l),this.trees[l]=new E(s,V,X,o,Float32Array),t&&console.log('z%d: %d clusters in %dms',l,s.length,+Date.now()-d);return t&&console.timeEnd('total time'),this},Pe.prototype.getClusters=function(d,e){var t=((d[0]+180)%360+360)%360-180,r=oa(-90,ta(90,d[1])),i=180===d[2]?180:((d[2]+180)%360+360)%360-180,o=oa(-90,ta(90,d[3]));if(360<=d[2]-d[0])t=-180,i=180;else if(t>i){var n=this.getClusters([t,r,180,o],e),s=this.getClusters([-180,r,i,o],e);return n.concat(s)}for(var a=this.trees[this._limitZoom(e)],l=[],u=0,m=a.range(G(t),Y(o),G(i),Y(r)),c;u<m.length;u+=1)c=a.points[m[u]],l.push(c.numPoints?A(c):this.points[c.index]);return l},Pe.prototype.getChildren=function(p){var e=this._getOriginId(p),t=this._getOriginZoom(p),r='No cluster with the specified id.',i=this.trees[t];if(!i)throw new Error(r);var d=i.points[e];if(!d)throw new Error(r);for(var c=this.options.radius/(this.options.extent*C(2,t-1)),s=[],a=0,l=i.within(d.x,d.y,c),u;a<l.length;a+=1)u=i.points[l[a]],u.parentId===p&&s.push(u.numPoints?A(u):this.points[u.index]);if(0===s.length)throw new Error(r);return s},Pe.prototype.getLeaves=function(o,e,t){var a=[];return this._appendLeaves(a,o,e=e||10,t=t||0,0),a},Pe.prototype.getTile=function(p,e,t){var r=this.trees[this._limitZoom(p)],i=C(2,p),o=this.options,n=o.radius/o.extent,s=(t-n)/i,a=(t+1+n)/i,l={features:[]};return this._addTileFeatures(r.range((e-n)/i,s,(e+1+n)/i,a),r.points,e,t,i,l),0===e&&this._addTileFeatures(r.range(1-n/i,s,1,a),r.points,i,t,i,l),e===i-1&&this._addTileFeatures(r.range(0,s,n/i,a),r.points,-1,t,i,l),l.features.length?l:null},Pe.prototype.getClusterExpansionZoom=function(o){for(var e=this._getOriginZoom(o)-1,t;e<=this.options.maxZoom&&(t=this.getChildren(o),e++,1===t.length);)o=t[0].properties.cluster_id;return e},Pe.prototype._appendLeaves=function(p,e,t,r,i){for(var o=0,n=this.getChildren(e);o<n.length;o+=1){var s=n[o],a=s.properties;if(a&&a.cluster?i+a.point_count<=r?i+=a.point_count:i=this._appendLeaves(p,a.cluster_id,t,r,i):i<r?i++:p.push(s),p.length===t)break}return i},Pe.prototype._addTileFeatures=function(p,e,t,r,i,o){for(var n=0,s=p;n<s.length;n+=1){var a=e[s[n]],l=a.numPoints,d={type:1,geometry:[[b(this.options.extent*(a.x*i-t)),b(this.options.extent*(a.y*i-r))]],tags:l?Ee(a):this.points[a.index].properties},u=void 0;l?u=a.id:this.options.generateId?u=a.index:this.points[a.index].id&&(u=this.points[a.index].id),void 0!==u&&(d.id=u),o.features.push(d)}},Pe.prototype._limitZoom=function(t){return oa(this.options.minZoom,ta(+t,this.options.maxZoom+1))},Pe.prototype._cluster=function(T,e){for(var t=[],r=this.options,i=r.reduce,o=r.minPoints,n=r.radius/(r.extent*C(2,e)),s=0,a;s<T.length;s++)if(a=T[s],!(a.zoom<=e)){a.zoom=e;for(var l=this.trees[e+1],u=l.within(a.x,a.y,n),h=a.numPoints||1,c=h,p=0,f=u,d;p<f.length;p+=1)d=l.points[f[p]],d.zoom>e&&(c+=d.numPoints||1);if(c>=o){for(var g=a.x*h,v=a.y*h,m=i&&1<h?this._map(a,!0):null,y=(s<<5)+(e+1)+this.points.length,x=0,w=u,E;x<w.length;x+=1)if(E=l.points[w[x]],!(E.zoom<=e)){E.zoom=e;var S=E.numPoints||1;g+=E.x*S,v+=E.y*S,E.parentId=y,i&&(m||(m=this._map(a,!0)),i(m,this._map(E)))}a.parentId=y,t.push(z(g/c,v/c,y,c,m))}else if(t.push(a),1<c)for(var I=0,b=u,_;I<b.length;I+=1)_=l.points[b[I]],_.zoom<=e||(_.zoom=e,t.push(_))}return t},Pe.prototype._getOriginId=function(t){return t-this.points.length>>5},Pe.prototype._getOriginZoom=function(t){return(t-this.points.length)%32},Pe.prototype._map=function(o,e){if(o.numPoints)return e?j({},o.properties):o.properties;var t=this.points[o.index].properties,a=this.options.map(t);return e&&a===t?j({},a):a},ve.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},ve.prototype.splitTile=function(_,e,T,E,C,o,n){for(var s=[_,e,T,E],a=this.options,l=a.debug;s.length;){E=s.pop(),T=s.pop(),e=s.pop(),_=s.pop();var u=1<<e,h=me(e,T,E),c=this.tiles[h];if(!c&&(1<l&&console.time('creation'),c=this.tiles[h]=fe(_,e,T,E,a),this.tileCoords.push({z:e,x:T,y:E}),l)){1<l&&(console.log('tile z%d-%d-%d (features: %d, points: %d, simplified: %d)',e,T,E,c.numFeatures,c.numPoints,c.numSimplified),console.timeEnd('creation'));var A='z'+e;this.stats[A]=(this.stats[A]||0)+1,this.total++}if(c.source=_,C){if(e===a.maxZoom||e===C)continue;var f=1<<C-e;if(T!==ea(o/f)||E!==ea(n/f))continue}else if(e===a.indexMaxZoom||c.numPoints<=a.indexMaxPoints)continue;if(c.source=null,0!==_.length){1<l&&console.time('clipping');var d=.5*a.buffer/a.extent,S=.5-d,I=.5+d,k=1+d,b,g,v,m,y,x;b=g=v=m=null,y=te(_,u,T-d,T+I,0,c.minX,c.maxX,a),x=te(_,u,T+S,T+k,0,c.minX,c.maxX,a),_=null,y&&(b=te(y,u,E-d,E+I,1,c.minY,c.maxY,a),g=te(y,u,E+S,E+k,1,c.minY,c.maxY,a),y=null),x&&(v=te(x,u,E-d,E+I,1,c.minY,c.maxY,a),m=te(x,u,E+S,E+k,1,c.minY,c.maxY,a),x=null),1<l&&console.timeEnd('clipping'),s.push(b||[],e+1,2*T,2*E),s.push(g||[],e+1,2*T,2*E+1),s.push(v||[],e+1,2*T+1,2*E),s.push(m||[],e+1,2*T+1,2*E+1)}}},ve.prototype.getTile=function(p,e,t){var r=this.options,i=r.extent,o=r.debug;if(0>p||24<p)return null;var n=1<<p,s=me(p,e=(e%n+n)%n,t);if(this.tiles[s])return ce(this.tiles[s],i);1<o&&console.log('drilling down to z%d-%d-%d',p,e,t);for(var a=p,d=e,u=t,c;!c&&0<a;)a--,d=ea(d/2),u=ea(u/2),c=this.tiles[me(a,d,u)];return c&&c.source?(1<o&&console.log('found parent tile z%d-%d-%d',a,d,u),1<o&&console.time('drilling down'),this.splitTile(c.source,a,d,u,p,e,t),1<o&&console.timeEnd('drilling down'),this.tiles[s]?ce(this.tiles[s],i):null):null};var J=function(n){function e(t,e,a,i){n.call(this,t,e,a,ye),i&&(this.loadGeoJSON=i)}return n&&(e.__proto__=n),(e.prototype=Object.create(n&&n.prototype)).constructor=e,e.prototype.loadData=function(o,e){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=e,this._pendingLoadDataParams=o,this._state&&'Idle'!==this._state?this._state='NeedsLoadData':(this._state='Coalescing',this._loadData())},e.prototype._loadData=function(){var e=this;if(this._pendingCallback&&this._pendingLoadDataParams){var t=this._pendingCallback,r=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var i=!!(r&&r.request&&r.request.collectResourceTiming)&&new _e.RequestPerformance(r.request);this.loadGeoJSON(r,function(o,n){if(o||!n)return t(o);if('object'!=typeof n)return t(new Error('Input data given to \''+r.source+'\' is not a valid GeoJSON object.'));!function n(e,t){var r=e&&e.type,o;if('FeatureCollection'===r)for(o=0;o<e.features.length;o++)n(e.features[o],t);else if('GeometryCollection'===r)for(o=0;o<e.geometries.length;o++)n(e.geometries[o],t);else if('Feature'===r)n(e.geometry,t);else if('Polygon'===r)a(e.coordinates,t);else if('MultiPolygon'===r)for(o=0;o<e.coordinates.length;o++)a(e.coordinates[o],t);return e}(n,!0);try{if(r.filter){var p=_e.createExpression(r.filter,{type:'boolean',"property-type":'data-driven',overridable:!1,transition:!1});if('error'===p.result)throw new Error(p.value.map(function(t){return t.key+': '+t.message}).join(', '));var d=n.features.filter(function(t){return p.value.evaluate({zoom:0},t)});n={type:'FeatureCollection',features:d}}e._geoJSONIndex=r.cluster?new Pe(function(e){var t=e.superclusterOptions,m=e.clusterProperties;if(!m||!t)return t;for(var y={},_={},x={accumulated:null,zoom:0},s={properties:null},a=Object.keys(m),o=0,n=a;o<n.length;o+=1){var l=n[o],c=m[l],p=c[0],u=_e.createExpression(c[1]),d=_e.createExpression('string'==typeof p?[p,['accumulated'],['get',l]]:p);y[l]=u.value,_[l]=d.value}return t.map=function(o){s.properties=o;for(var e={},t=0,r=a,i;t<r.length;t+=1)i=r[t],e[i]=y[i].evaluate(x,s);return e},t.reduce=function(n,e){s.properties=e;for(var t=0,r=a,i;t<r.length;t+=1)i=r[t],x.accumulated=n[i],n[i]=_[i].evaluate(x,s)},t}(r)).load(n.features):function(o,e){return new ve(o,e)}(n,r.geojsonVtOptions)}catch(e){return t(e)}e.loaded={};var c={};if(i){var u=i.finish();u&&(c.resourceTiming={},c.resourceTiming[r.source]=JSON.parse(JSON.stringify(u)))}t(null,c)})}},e.prototype.coalesce=function(){'Coalescing'===this._state?this._state='Idle':'NeedsLoadData'===this._state&&(this._state='Coalescing',this._loadData())},e.prototype.reloadTile=function(t,e){var o=this.loaded;return o&&o[t.uid]?n.prototype.reloadTile.call(this,t,e):this.loadTile(t,e)},e.prototype.loadGeoJSON=function(e,t){if(e.request)_e.getJSON(e.request,t);else{if('string'!=typeof e.data)return t(new Error('Input data given to \''+e.source+'\' is not a valid GeoJSON object.'));try{return t(null,JSON.parse(e.data))}catch(o){return t(new Error('Input data given to \''+e.source+'\' is not a valid GeoJSON object.'))}}},e.prototype.removeSource=function(o,e){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),e()},e.prototype.getClusterExpansionZoom=function(o,a){try{a(null,this._geoJSONIndex.getClusterExpansionZoom(o.clusterId))}catch(t){a(t)}},e.prototype.getClusterChildren=function(o,a){try{a(null,this._geoJSONIndex.getChildren(o.clusterId))}catch(t){a(t)}},e.prototype.getClusterLeaves=function(o,a){try{a(null,this._geoJSONIndex.getLeaves(o.clusterId,o.limit,o.offset))}catch(t){a(t)}},e}(o),ze=function(e){var a=this;this.self=e,this.actor=new _e.Actor(e,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:o,geojson:J},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(o,e){if(a.workerSourceTypes[o])throw new Error('Worker source with name "'+o+'" already registered.');a.workerSourceTypes[o]=e},this.self.registerRTLTextPlugin=function(e){if(_e.plugin.isParsed())throw new Error('RTL text plugin already registered.');_e.plugin.applyArabicShaping=e.applyArabicShaping,_e.plugin.processBidirectionalText=e.processBidirectionalText,_e.plugin.processStyledBidirectionalText=e.processStyledBidirectionalText}};return ze.prototype.setReferrer=function(o,e){this.referrer=e},ze.prototype.setImages=function(a,e,t){for(var r in this.availableImages[a]=e,this.workerSources[a]){var i=this.workerSources[a][r];for(var o in i)i[o].availableImages=e}t()},ze.prototype.setLayers=function(o,e,t){this.getLayerIndex(o).replace(e),t()},ze.prototype.updateLayers=function(o,e,t){this.getLayerIndex(o).update(e.layers,e.removedIds),t()},ze.prototype.loadTile=function(o,e,t){this.getWorkerSource(o,e.type,e.source).loadTile(e,t)},ze.prototype.loadDEMTile=function(o,e,t){this.getDEMWorkerSource(o,e.source).loadTile(e,t)},ze.prototype.reloadTile=function(o,e,t){this.getWorkerSource(o,e.type,e.source).reloadTile(e,t)},ze.prototype.abortTile=function(o,e,t){this.getWorkerSource(o,e.type,e.source).abortTile(e,t)},ze.prototype.removeTile=function(o,e,t){this.getWorkerSource(o,e.type,e.source).removeTile(e,t)},ze.prototype.removeDEMTile=function(o,e){this.getDEMWorkerSource(o,e.source).removeTile(e)},ze.prototype.removeSource=function(o,e,t){if(this.workerSources[o]&&this.workerSources[o][e.type]&&this.workerSources[o][e.type][e.source]){var a=this.workerSources[o][e.type][e.source];delete this.workerSources[o][e.type][e.source],void 0===a.removeSource?t():a.removeSource(e,t)}},ze.prototype.loadWorkerSource=function(o,e,t){try{this.self.importScripts(e.url),t()}catch(o){t(o.toString())}},ze.prototype.syncRTLPluginState=function(e,t,a){try{_e.plugin.setState(t);var r=_e.plugin.getPluginURL();if(_e.plugin.isLoaded()&&!_e.plugin.isParsed()&&null!=r){this.self.importScripts(r);var o=_e.plugin.isParsed();a(o?void 0:new Error('RTL Text Plugin failed to import scripts from '+r),o)}}catch(t){a(t.toString())}},ze.prototype.getAvailableImages=function(o){var e=this.availableImages[o];return e||(e=[]),e},ze.prototype.getLayerIndex=function(o){var e=this.layerIndexes[o];return e||(e=this.layerIndexes[o]=new xe),e},ze.prototype.getWorkerSource=function(a,e,t){var n=this;return this.workerSources[a]||(this.workerSources[a]={}),this.workerSources[a][e]||(this.workerSources[a][e]={}),this.workerSources[a][e][t]||(this.workerSources[a][e][t]=new this.workerSourceTypes[e]({send:function(e,t,r){n.actor.send(e,t,r,a)}},this.getLayerIndex(a),this.getAvailableImages(a))),this.workerSources[a][e][t]},ze.prototype.getDEMWorkerSource=function(o,e){return this.demWorkerSources[o]||(this.demWorkerSources[o]={}),this.demWorkerSources[o][e]||(this.demWorkerSources[o][e]=new i),this.demWorkerSources[o][e]},ze.prototype.enforceCacheSizeLimit=function(e,t){_e.enforceCacheSizeLimit(t)},'undefined'!=typeof WorkerGlobalScope&&'undefined'!=typeof self&&self instanceof WorkerGlobalScope&&(self.worker=new ze(self)),ze}),e(['./shared'],function(aa){function t(a){if(!i)return a[0];for(var t=0;t<a.length;t++)if(a[t]in i)return a[t];return a[0]}function ra(o){var t=o.userImage;return!!(t&&t.render&&t.render())&&(o.data.replace(new Uint8Array(t.data.buffer)),!0)}function r(s,t,e,i,o,r){this.fontSize=s||24,this.buffer=void 0===t?3:t,this.cutoff=i||.25,this.fontFamily=o||'sans-serif',this.fontWeight=r||'normal',this.radius=e||8;var a=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement('canvas'),this.canvas.width=this.canvas.height=a,this.ctx=this.canvas.getContext('2d'),this.ctx.font=this.fontWeight+' '+this.fontSize+'px '+this.fontFamily,this.ctx.textBaseline='middle',this.ctx.fillStyle='black',this.gridOuter=new Float64Array(a*a),this.gridInner=new Float64Array(a*a),this.f=new Float64Array(a),this.d=new Float64Array(a),this.z=new Float64Array(a+1),this.v=new Int16Array(a),this.middle=b(a/2*(0<=navigator.userAgent.indexOf('Gecko/')?1.2:1))}function h(p,t,e,i,o,r,a){for(var n=0;n<t;n++){for(var s=0;s<e;s++)i[s]=p[s*t+n];for(na(i,o,r,a,e),s=0;s<e;s++)p[s*t+n]=o[s]}for(s=0;s<e;s++){for(n=0;n<t;n++)i[n]=p[s*t+n];for(na(i,o,r,a,t),n=0;n<t;n++)p[s*t+n]=N(o[n])}}function na(l,t,e,i,o){e[0]=0,i[0]=-Aa,i[1]=+Aa;for(var r=1,a=0;r<o;r++){for(var n=(l[r]+r*r-(l[e[a]]+e[a]*e[a]))/(2*r-2*e[a]);n<=i[a];)a--,n=(l[r]+r*r-(l[e[a]]+e[a]*e[a]))/(2*r-2*e[a]);e[++a]=r,i[a]=n,i[a+1]=+Aa}for(r=0,a=0;r<o;r++){for(;i[a+1]<r;)a++;t[r]=(r-e[a])*(r-e[a])+l[e[a]]}}function ia(t,e,i){var o=function(o,r){if(o)return i(o);if(r){var a=aa.pick(aa.extend(r,t),['tiles','minzoom','maxzoom','attribution','mapbox_logo','bounds','scheme','tileSize','encoding']);r.vector_layers&&(a.vectorLayers=r.vector_layers,a.vectorLayerIds=a.vectorLayers.map(function(e){return e.id})),a.tiles=e.canonicalizeTileset(a,t.url),i(null,a)}};return t.url?aa.getJSON(e.transformRequest(e.normalizeSourceURL(t.url),aa.ResourceType.Source),o):aa.browser.frame(function(){return o(null,t)})}function I(t,e){var a=aa.identity([]);return aa.translate(a,a,[1,1,0]),aa.scale(a,a,[.5*t.width,.5*t.height,1]),aa.multiply(a,a,t.calculatePosMatrix(e.toUnwrapped()))}function sa(m,t,e,i,o,r){var a=function(l,t,e){if(l){for(var i=0,o=l,r;i<o.length;i+=1)if(r=t[o[i]],r&&r.source===e&&'fill-extrusion'===r.type)return!0;}else for(var a in t){var n=t[a];if(n.source===e&&'fill-extrusion'===n.type)return!0}return!1}(o&&o.layers,t,m.id),n=r.maxPitchScaleFactor(),s=m.tilesIn(i,n,a);s.sort(O);for(var l=[],c=0,u=s,g;c<u.length;c+=1)g=u[c],l.push({wrappedTileID:g.tileID.wrapped().key,queryResults:g.tile.queryRenderedFeatures(t,e,m._state,g.queryGeometry,g.cameraQueryGeometry,g.scale,o,r,n,I(m.transform,g.tileID))});var p=function(m){for(var t={},e={},i=0,o=m;i<o.length;i+=1){var r=o[i],a=r.queryResults,n=r.wrappedTileID,s=e[n]=e[n]||{};for(var l in a)for(var c=a[l],u=s[l]=s[l]||{},g=t[l]=t[l]||[],p=0,d=c,y;p<d.length;p+=1)y=d[p],u[y.featureIndex]||(u[y.featureIndex]=!0,g.push(y))}return t}(l);for(var d in p)p[d].forEach(function(t){var e=t.feature,a=m.getFeatureState(e.layer['source-layer'],e.id);e.source=e.layer.source,e.layer['source-layer']&&(e.sourceLayer=e.layer['source-layer']),e.state=a});return p}function O(a,t){var e=a.tileID,r=t.tileID;return e.overscaledZ-r.overscaledZ||e.canonical.y-r.canonical.y||e.wrap-r.wrap||e.canonical.x-r.canonical.x}function F(a,t){var e=B(2*a.wrap)-+(0>a.wrap),r=B(2*t.wrap)-+(0>t.wrap);return a.overscaledZ-t.overscaledZ||r-e||t.canonical.y-a.canonical.y||t.canonical.x-a.canonical.x}function Mt(e){return'raster'===e||'image'===e||'video'===e}function Lt(){return new aa.window.Worker(Nn.workerUrl)}function At(){return Ot||(Ot=new Rt),Ot}function Ft(t,e){var a={};for(var o in t)'ref'!==o&&(a[o]=t[o]);return aa.refProperties.forEach(function(o){o in e&&(a[o]=e[o])}),a}function Ut(a){a=a.slice();for(var t=Object.create(null),e=0;e<a.length;e++)t[a[e].id]=a[e];for(var r=0;r<a.length;r++)'ref'in a[r]&&(a[r]=Ft(a[r],t[a[r].ref]));return a}function Nt(o,t,e){e.push({command:Bt.addSource,args:[o,t[o]]})}function qt(o,t,e){t.push({command:Bt.removeSource,args:[o]}),e[o]=!0}function jt(a,t,e,r){qt(a,e,r),Nt(a,t,e)}function Vt(t,e,a){for(var o in t[a])if(t[a].hasOwnProperty(o)&&'data'!==o&&!aa.deepEqual(t[a][o],e[a][o]))return!1;for(o in e[a])if(e[a].hasOwnProperty(o)&&'data'!==o&&!aa.deepEqual(t[a][o],e[a][o]))return!1;return!0}function Gt(t,e,i,o,r,a){for(var l in e=e||{},t=t||{})t.hasOwnProperty(l)&&(aa.deepEqual(t[l],e[l])||i.push({command:a,args:[o,l,e[l],r]}));for(l in e)e.hasOwnProperty(l)&&!t.hasOwnProperty(l)&&(aa.deepEqual(t[l],e[l])||i.push({command:a,args:[o,l,e[l],r]}))}function Wt(e){return e.id}function Xt(o,t){return o[t.id]=t,o}function Ht(t,e,i,o,r){var a=aa.create();return e?(aa.scale(a,a,[1/r,1/r,1]),i||aa.rotateZ(a,a,o.angle)):aa.multiply(a,o.labelPlaneMatrix,t),a}function Jt(t,e,i,o,r){if(e){var a=aa.clone(t);return aa.scale(a,a,[r,r,1]),i||aa.rotateZ(a,a,-o.angle),a}return o.glCoordMatrix}function Qt(t,e){var a=[t.x,t.y,0,1];ce(a,a,e);var o=a[3];return{point:new aa.Point(a[0]/o,a[1]/o),signedDistanceFromCamera:o}}function $t(o,t){return .5+.5*(o/t)}function te(a,t){var e=a[0]/a[3],r=a[1]/a[3];return e>=-t[0]&&e<=t[0]&&r>=-t[1]&&r<=t[1]}function ee(t,e,i,o,r,a,n,s){var l=o?t.textSizeData:t.iconSizeData,c=aa.evaluateSizeForZoom(l,i.transform.zoom),u=[2*(256/i.width)+1,2*(256/i.height)+1],h=o?t.text.dynamicLayoutVertexArray:t.icon.dynamicLayoutVertexArray;h.clear();for(var p=t.lineVertexArray,d=o?t.text.placedSymbolArray:t.icon.placedSymbolArray,_=i.transform.width/i.transform.height,f=!1,S=0,g;S<d.length;S++)if(g=d.get(S),g.hidden||g.writingMode===aa.WritingMode.vertical&&!f)se(g.numGlyphs,h);else{f=!1;var v=[g.anchorX,g.anchorY,0,1];if(aa.transformMat4(v,v,e),te(v,u)){var y=$t(i.transform.cameraToCenterDistance,v[3]),x=aa.evaluateSizeForFeature(l,c,g),b=n?x/y:x*y,w=new aa.Point(g.anchorX,g.anchorY),T=Qt(w,r).point,E={},C=re(g,b,!1,s,e,r,a,t.glyphOffsetArray,p,h,T,w,E,_);f=C.useVertical,(C.notEnoughRoom||f||C.needsFlipping&&re(g,b,!0,s,e,r,a,t.glyphOffsetArray,p,h,T,w,E,_).notEnoughRoom)&&se(g.numGlyphs,h)}else se(g.numGlyphs,h)}o?t.text.dynamicLayoutVertexBuffer.updateData(h):t.icon.dynamicLayoutVertexBuffer.updateData(h)}function ie(y,t,e,i,o,r,a,n,s,l,c){var u=n.glyphStartIndex+n.numGlyphs,h=n.lineStartIndex,p=n.lineStartIndex+n.lineLength,d=t.getoffsetX(n.glyphStartIndex),_=t.getoffsetX(u-1),f=ne(y*d,e,i,o,r,a,n.segment,h,p,s,l,c);if(!f)return null;var x=ne(y*_,e,i,o,r,a,n.segment,h,p,s,l,c);return x?{first:f,last:x}:null}function oe(t,e,a,o){return t===aa.WritingMode.horizontal&&B(a.y-e.y)>B(a.x-e.x)*o?{useVertical:!0}:(t===aa.WritingMode.vertical?e.y<a.y:e.x>a.x)?{needsFlipping:!0}:null}function re(t,e,i,F,r,a,n,s,l,c,u,h,p,d){var _=e/24,m=t.lineOffsetX*_,g=t.lineOffsetY*_,v;if(1<t.numGlyphs){var f=t.glyphStartIndex+t.numGlyphs,y=t.lineStartIndex,x=t.lineStartIndex+t.lineLength,b=ie(_,s,m,g,i,u,h,t,l,a,p);if(!b)return{notEnoughRoom:!0};var O=Qt(b.first.point,n).point,T=Qt(b.last.point,n).point;if(F&&!i){var E=oe(t.writingMode,O,T,d);if(E)return E}v=[b.first];for(var I=t.glyphStartIndex+1;I<f-1;I++)v.push(ne(_*s.getoffsetX(I),m,g,i,u,h,t.segment,y,x,l,a,p));v.push(b.last)}else{if(F&&!i){var P=Qt(h,r).point,S=t.lineStartIndex+t.segment+1,C=new aa.Point(l.getx(S),l.gety(S)),z=Qt(C,r),D=0<z.signedDistanceFromCamera?z.point:ae(h,C,P,1,r),M=oe(t.writingMode,P,D,d);if(M)return M}var L=ne(_*s.getoffsetX(t.glyphStartIndex),m,g,i,u,h,t.segment,t.lineStartIndex,t.lineStartIndex+t.lineLength,l,a,p);if(!L)return{notEnoughRoom:!0};v=[L]}for(var N=0,R=v,k;N<R.length;N+=1)k=R[N],aa.addDynamicAttributes(c,k.point,k.angle);return{}}function ae(s,t,e,i,o){var r=Qt(s.add(s.sub(t)._unit()),o).point,a=e.sub(r);return e.add(a._mult(i/a.mag()))}function ne(t,e,i,o,r,a,n,s,l,c,u,h){var p=o?t-e:t+e,d=0<p?1:-1,_=0;o&&(d*=-1,_=Xe),0>d&&(_+=Xe);for(var f=0<d?s+n:s+n+1,m=r,g=r,v=0,y=0,x=B(p),b=[];v+y<=x;){if((f+=d)<s||f>=l)return null;if(g=m,b.push(m),void 0===(m=h[f])){var k=new aa.Point(c.getx(f),c.gety(f)),T=Qt(k,u);if(0<T.signedDistanceFromCamera)m=h[f]=T.point;else{var E=f-d;m=ae(0==v?a:new aa.Point(c.getx(E),c.gety(E)),k,g,x-v+1,u)}}v+=y,y=g.dist(m)}var I=(x-v)/y,P=m.sub(g),S=P.mult(I)._add(g);S._add(P._unit()._perp()._mult(i*d));var D=_+A(m.y-g.y,m.x-g.x);return b.push(S),{point:S,angle:D,path:b}}function se(a,t){for(var e=0,r;e<a;e++)r=t.length,t.resize(r+4),t.float32.set(Yt,3*r)}function ce(a,t,e){var n=t[0],o=t[1];return a[0]=e[0]*n+e[4]*o+e[12],a[1]=e[1]*n+e[5]*o+e[13],a[3]=e[3]*n+e[7]*o+e[15],a}function ue(t,e,a){return e*(aa.EXTENT/(t.tileSize*C(2,a-t.tileID.overscaledZ)))}function pe(t,e,i,o,r){var a=aa.getAnchorAlignment(t),n=-(a.horizontalAlign-.5)*e,s=-(a.verticalAlign-.5)*i,l=aa.evaluateVariableOffset(t,o);return new aa.Point(n+l[0]*r,s+l[1]*r)}function ye(t,e,i,o,r,a){var m=t.x1,s=t.x2,l=t.y1,c=t.y2,u=t.anchorPointX,g=t.anchorPointY,y=new aa.Point(e,i);return o&&y._rotate(r?a:-a),{x1:m+y.x,y1:l+y.y,x2:s+y.x,y2:c+y.y,anchorPointX:u,anchorPointY:g}}function xe(a,t,e,n,o){a.emplaceBack(t?1:0,e?1:0,n||0,o||0),a.emplaceBack(t?1:0,e?1:0,n||0,o||0),a.emplaceBack(t?1:0,e?1:0,n||0,o||0),a.emplaceBack(t?1:0,e?1:0,n||0,o||0)}function we(o){if(0===o.opacity&&!o.placed)return 0;if(1===o.opacity&&o.placed)return 4294967295;var t=o.placed?1:0,e=ea(127*o.opacity);return e*be+t*Te+e*Ee+t*Ie+e*Pe+t*Se+e*Ce+t}function De(l,t){var e=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,i=t.match(/attribute ([\w]+) ([\w]+)/g),p=l.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),r=t.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),a=r?r.concat(p):p,d={};return{fragmentSource:l=l.replace(e,function(a,t,e,n,o){return d[o]=!0,'define'===t?'\n#ifndef HAS_UNIFORM_u_'+o+'\nvarying '+e+' '+n+' '+o+';\n#else\nuniform '+e+' '+n+' u_'+o+';\n#endif\n':'\n#ifdef HAS_UNIFORM_u_'+o+'\n    '+e+' '+n+' '+o+' = u_'+o+';\n#endif\n'}),vertexSource:t=t.replace(e,function(s,t,e,i,o){var r='float'===i?'vec2':'vec4',a=o.match(/color/)?'color':r;return d[o]?'define'===t?'\n#ifndef HAS_UNIFORM_u_'+o+'\nuniform lowp float u_'+o+'_t;\nattribute '+e+' '+r+' a_'+o+';\nvarying '+e+' '+i+' '+o+';\n#else\nuniform '+e+' '+i+' u_'+o+';\n#endif\n':'vec4'==a?'\n#ifndef HAS_UNIFORM_u_'+o+'\n    '+o+' = a_'+o+';\n#else\n    '+e+' '+i+' '+o+' = u_'+o+';\n#endif\n':'\n#ifndef HAS_UNIFORM_u_'+o+'\n    '+o+' = unpack_mix_'+a+'(a_'+o+', u_'+o+'_t);\n#else\n    '+e+' '+i+' '+o+' = u_'+o+';\n#endif\n':'define'===t?'\n#ifndef HAS_UNIFORM_u_'+o+'\nuniform lowp float u_'+o+'_t;\nattribute '+e+' '+r+' a_'+o+';\n#else\nuniform '+e+' '+i+' u_'+o+';\n#endif\n':'vec4'==a?'\n#ifndef HAS_UNIFORM_u_'+o+'\n    '+e+' '+i+' '+o+' = a_'+o+';\n#else\n    '+e+' '+i+' '+o+' = u_'+o+';\n#endif\n':'\n#ifndef HAS_UNIFORM_u_'+o+'\n    '+e+' '+i+' '+o+' = unpack_mix_'+a+'(a_'+o+', u_'+o+'_t);\n#else\n    '+e+' '+i+' '+o+' = u_'+o+';\n#endif\n'}),staticAttributes:i,staticUniforms:a}}function la(a){for(var t=[],e=0;e<a.length;e++)if(null!==a[e]){var r=a[e].split(' ');t.push(r.pop())}return t}function pa(l,t,e){var i=1/ue(e,1,t.transform.tileZoom),o=C(2,e.tileID.overscaledZ),r=e.tileSize*C(2,t.transform.tileZoom)/o,a=r*(e.tileID.canonical.x+e.tileID.wrap*o),n=r*e.tileID.canonical.y;return{u_image:0,u_texsize:e.imageAtlasTexture.size,u_scale:[i,l.fromScale,l.toScale],u_fade:l.t,u_pixel_coord_upper:[a>>16,n>>16],u_pixel_coord_lower:[65535&a,65535&n]}}function da(o,t){return 1/ue(o,1,t.tileZoom)}function ca(o,t,e){return o.translatePosMatrix(t.tileID.posMatrix,t,e.paint.get('line-translate'),e.paint.get('line-translate-anchor'))}function ua(o){o*=Xe/180;var t=w(o),e=Ze(o);return[(2*e+1)/3,(-1.7320508075688772*t-e+1)/3,(1.7320508075688772*t-e+1)/3]}function ma(t,e,i,o,r,a,n){for(var s=t.context,l=s.gl,c=t.useProgram('collisionBox'),u=[],h=0,p=0,V=0;V<o.length;V++){var _=o[V],f=e.getTile(_),m=f.getBucket(i);if(m){var g=_.posMatrix;0===r[0]&&0===r[1]||(g=t.translatePosMatrix(_.posMatrix,f,r,a));var v=n?m.textCollisionBox:m.iconCollisionBox,y=m.collisionCircleArray;if(0<y.length){var q=aa.create(),j=g;aa.mul(q,m.placementInvProjMatrix,t.transform.glCoordMatrix),aa.mul(q,q,m.placementViewportMatrix),u.push({circleArray:y,circleOffset:p,transform:j,invTransform:q}),p=h+=y.length/4}v&&c.draw(s,l.LINES,Et.disabled,It.disabled,t.colorModeForRenderPass(),St.disabled,mn(g,t.transform,f),i.id,v.layoutVertexBuffer,v.indexBuffer,v.segments,null,t.transform.zoom,null,null,v.collisionVertexBuffer)}}if(n&&u.length){var Z=t.useProgram('collisionCircle'),T=new aa.StructArrayLayout2f1f2i16;T.resize(4*h),T._trim();for(var E=0,I=0,P=u;I<P.length;I+=1)for(var S=P[I],C=0;C<S.circleArray.length/4;C++){var z=4*C,D=S.circleArray[z+0],M=S.circleArray[z+1],L=S.circleArray[z+2],A=S.circleArray[z+3];T.emplace(E++,D,M,L,A,0),T.emplace(E++,D,M,L,A,1),T.emplace(E++,D,M,L,A,2),T.emplace(E++,D,M,L,A,3)}(!yo||yo.length<2*h)&&(yo=function(t){var e=2*t,n=new aa.StructArrayLayout3ui6;n.resize(e),n._trim();for(var o=0,r;o<e;o++)r=6*o,n.uint16[r+0]=4*o+0,n.uint16[r+1]=4*o+1,n.uint16[r+2]=4*o+2,n.uint16[r+3]=4*o+2,n.uint16[r+4]=4*o+3,n.uint16[r+5]=4*o+0;return n}(h));for(var R=s.createIndexBuffer(yo,!0),k=s.createVertexBuffer(T,aa.collisionCircleLayout.members,!0),B=0,O=u;B<O.length;B+=1){var F=O[B],U=gn(F.transform,F.invTransform,t.transform);Z.draw(s,l.TRIANGLES,Et.disabled,It.disabled,t.colorModeForRenderPass(),St.disabled,U,i.id,k,R,aa.SegmentVector.simpleSegment(0,2*F.circleOffset,F.circleArray.length,F.circleArray.length/2),null,t.transform.zoom,null,null,null)}k.destroy(),R.destroy()}}function ga(t,e,i,o,r,a){var n=aa.getAnchorAlignment(t),s=-(n.horizontalAlign-.5)*e,l=-(n.verticalAlign-.5)*i,p=aa.evaluateVariableOffset(t,o);return new aa.Point((s/r+p[0])*a,(l/r+p[1])*a)}function ya(t,e,i,o,r,a,n,s,l,c,u){var h=t.text.placedSymbolArray,p=t.text.dynamicLayoutVertexArray,d=t.icon.dynamicLayoutVertexArray,_={};p.clear();for(var f=0;f<h.length;f++){var m=h.get(f),g=m.hidden||!m.crossTileID||t.allowVerticalPlacement&&!m.placedOrientation?null:o[m.crossTileID];if(g){var v=new aa.Point(m.anchorX,m.anchorY),y=Qt(v,i?s:n),x=$t(a.cameraToCenterDistance,y.signedDistanceFromCamera),b=r.evaluateSizeForFeature(t.textSizeData,c,m)*x/aa.ONE_EM;i&&(b*=t.tilePixelRatio/l);for(var w=ga(g.anchor,g.width,g.height,g.textOffset,g.textBoxScale,b),T=i?Qt(v.add(w),n).point:y.point.add(e?w.rotate(-a.angle):w),A=t.allowVerticalPlacement&&m.placedOrientation===aa.WritingMode.vertical?Xe/2:0,k=0;k<m.numGlyphs;k++)aa.addDynamicAttributes(p,T,A);u&&0<=m.associatedIconIndex&&(_[m.associatedIconIndex]={shiftedAnchor:T,angle:A})}else se(m.numGlyphs,p)}if(u){d.clear();for(var P=t.icon.placedSymbolArray,S=0,C;S<P.length;S++)if(C=P.get(S),C.hidden)se(C.numGlyphs,d);else{var z=_[S];if(z)for(var D=0;D<C.numGlyphs;D++)aa.addDynamicAttributes(d,z.shiftedAnchor,z.angle);else se(C.numGlyphs,d)}t.icon.dynamicLayoutVertexBuffer.updateData(d)}t.text.dynamicLayoutVertexBuffer.updateData(p)}function _a(o,t,e){return e.iconsInText&&t?'symbolTextAndIcon':o?'symbolSDF':'symbolIcon'}function to(t,e,i,o,r,a,n,s,l,c,u,h){for(var p=t.context,d=p.gl,_=t.transform,f='map'===s,m='map'===l,te=f&&'point'!==i.layout.get('symbol-placement'),oe=f&&!m&&!te,y=void 0!==i.layout.get('symbol-sort-key').constantOr(1),x=t.depthModeForSublayer(0,Et.ReadOnly),b=i.layout.get('text-variable-anchor'),w=[],T=0,E=o;T<E.length;T+=1){var I=E[T],P=e.getTile(I),S=P.getBucket(i);if(S){var C=r?S.text:S.icon;if(C&&C.segments.get().length){var ae=C.programConfigurations.get(i.id),D=r||S.sdfIcons,re=r?S.textSizeData:S.iconSizeData,L=m||0!==_.pitch,A=t.useProgram(_a(D,r,S),ae),ne=aa.evaluateSizeForZoom(re,_.zoom),k=void 0,B=[0,0],O=void 0,ie=void 0,se=null,le=void 0;if(r)O=P.glyphAtlasTexture,ie=d.LINEAR,k=P.glyphAtlasTexture.size,S.iconsInText&&(B=P.imageAtlasTexture.size,se=P.imageAtlasTexture,le=L||t.options.rotating||t.options.zooming||'composite'===re.kind||'camera'===re.kind?d.LINEAR:d.NEAREST);else{var pe=1!==i.layout.get('icon-size').constantOr(0)||S.iconsNeedLinear;O=P.imageAtlasTexture,ie=D||t.options.rotating||t.options.zooming||pe||L?d.LINEAR:d.NEAREST,k=P.imageAtlasTexture.size}var q=ue(P,1,t.transform.zoom),j=Ht(I.posMatrix,m,f,t.transform,q),V=Jt(I.posMatrix,m,f,t.transform,q),G=b&&S.hasTextData(),W='none'!==i.layout.get('icon-text-fit')&&G&&S.hasIconData();te&&ee(S,I.posMatrix,t,r,j,V,m,c);var X=t.translatePosMatrix(I.posMatrix,P,a,n),H=te||r&&b||W?kn:j,K=t.translatePosMatrix(V,P,a,n,!0),Y=D&&0!==i.paint.get(r?'text-halo-width':'icon-halo-width').constantOr(1),de={program:A,buffers:C,uniformValues:D?S.iconsInText?Sn(re.kind,ne,oe,m,t,X,H,K,k,B):En(re.kind,ne,oe,m,t,X,H,K,r,k,!0):Tn(re.kind,ne,oe,m,t,X,H,K,r,k),atlasTexture:O,atlasTextureIcon:se,atlasInterpolation:ie,atlasInterpolationIcon:le,isSDF:D,hasHalo:Y};if(y)for(var ce=0,$=C.segments.get(),me;ce<$.length;ce+=1)me=$[ce],w.push({segments:new aa.SegmentVector([me]),sortKey:me.sortKey,state:de});else w.push({segments:C.segments,sortKey:0,state:de})}}}y&&w.sort(function(o,t){return o.sortKey-t.sortKey});for(var ge=0,ye=w;ge<ye.length;ge+=1){var _e=ye[ge],fe=_e.state;if(p.activeTexture.set(d.TEXTURE0),fe.atlasTexture.bind(fe.atlasInterpolation,d.CLAMP_TO_EDGE),fe.atlasTextureIcon&&(p.activeTexture.set(d.TEXTURE1),fe.atlasTextureIcon&&fe.atlasTextureIcon.bind(fe.atlasInterpolationIcon,d.CLAMP_TO_EDGE)),fe.isSDF){var he=fe.uniformValues;fe.hasHalo&&(he.u_is_halo=1,eo(fe.buffers,_e.segments,i,t,fe.program,x,u,h,he)),he.u_is_halo=0}eo(fe.buffers,_e.segments,i,t,fe.program,x,u,h,fe.uniformValues)}}function eo(p,t,e,i,o,r,a,n,s){var l=i.context;o.draw(l,l.gl.TRIANGLES,r,a,n,St.disabled,s,e.id,p.layoutVertexBuffer,p.indexBuffer,t,e.paint,i.transform.zoom,p.programConfigurations.get(e.id),p.dynamicLayoutVertexBuffer,p.opacityVertexBuffer)}function io(A,t,e,i,o,r,a){var n=A.context.gl,p=e.paint.get('fill-pattern'),d=p&&p.constantOr(1),k=e.getCrossfadeParameters(),f,s,l,c,u;a?(s=d&&!e.getPaintProperty('fill-outline-color')?'fillOutlinePattern':'fillOutline',f=n.LINES):(s=d?'fillPattern':'fill',f=n.TRIANGLES);for(var h=0,m=i;h<m.length;h+=1){var g=m[h],v=t.getTile(g);if(!d||v.patternsLoaded()){var y=v.getBucket(e);if(y){var x=y.programConfigurations.get(e.id),b=A.useProgram(s,x);d&&(A.context.activeTexture.set(n.TEXTURE0),v.imageAtlasTexture.bind(n.LINEAR,n.CLAMP_TO_EDGE),x.updatePaintBuffers(k));var w=p.constantOr(null);if(w&&v.imageAtlas){var T=v.imageAtlas,E=T.patternPositions[w.to.toString()],I=T.patternPositions[w.from.toString()];E&&I&&x.setConstantPatternPositions(E,I)}var P=A.translatePosMatrix(g.posMatrix,v,e.paint.get('fill-translate'),e.paint.get('fill-translate-anchor'));if(a){c=y.indexBuffer2,u=y.segments2;var S=[n.drawingBufferWidth,n.drawingBufferHeight];l='fillOutlinePattern'===s&&d?cn(P,A,k,v,S):dn(P,S)}else c=y.indexBuffer,u=y.segments,l=d?pn(P,A,k,v):ln(P);b.draw(A.context,f,o,A.stencilModeForClipping(g),r,St.disabled,l,e.id,y.layoutVertexBuffer,c,u,e.paint,A.transform.zoom,x)}}}}function oo(S,t,e,i,o,r,a){for(var n=S.context,s=n.gl,l=e.paint.get('fill-extrusion-pattern'),c=l.constantOr(1),u=e.getCrossfadeParameters(),h=e.paint.get('fill-extrusion-opacity'),p=0,d=i;p<d.length;p+=1){var _=d[p],f=t.getTile(_),m=f.getBucket(e);if(m){var g=m.programConfigurations.get(e.id),v=S.useProgram(c?'fillExtrusionPattern':'fillExtrusion',g);c&&(S.context.activeTexture.set(s.TEXTURE0),f.imageAtlasTexture.bind(s.LINEAR,s.CLAMP_TO_EDGE),g.updatePaintBuffers(u));var y=l.constantOr(null);if(y&&f.imageAtlas){var x=f.imageAtlas,b=x.patternPositions[y.to.toString()],w=x.patternPositions[y.from.toString()];b&&w&&g.setConstantPatternPositions(b,w)}var T=S.translatePosMatrix(_.posMatrix,f,e.paint.get('fill-extrusion-translate'),e.paint.get('fill-extrusion-translate-anchor')),E=e.paint.get('fill-extrusion-vertical-gradient'),C=c?sn(T,S,E,h,_,u,f):nn(T,S,E,h);v.draw(n,n.gl.TRIANGLES,o,r,a,St.backCCW,C,e.id,m.layoutVertexBuffer,m.indexBuffer,m.segments,e.paint,S.transform.zoom,g)}}}function ro(t,e,i,o,r,a){var n=t.context,s=n.gl,l=e.fbo;if(l){var p=t.useProgram('hillshade');n.activeTexture.set(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,l.colorAttachment.get());var d=function(t,e,i){var o=i.paint.get('hillshade-shadow-color'),p=i.paint.get('hillshade-highlight-color'),d=i.paint.get('hillshade-accent-color'),m=i.paint.get('hillshade-illumination-direction')*(Xe/180);'viewport'===i.paint.get('hillshade-illumination-anchor')&&(m-=t.transform.angle);var s=!t.options.moving,g,l,c;return{u_matrix:t.transform.calculatePosMatrix(e.tileID.toUnwrapped(),s),u_image:0,u_latrange:(g=e.tileID,l=C(2,g.canonical.z),c=g.canonical.y,[new aa.MercatorCoordinate(0,c/l).toLngLat().lat,new aa.MercatorCoordinate(0,(c+1)/l).toLngLat().lat]),u_light:[i.paint.get('hillshade-exaggeration'),m],u_shadow:o,u_highlight:p,u_accent:d}}(t,e,i);p.draw(n,s.TRIANGLES,o,r,a,St.disabled,d,i.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments)}}function ao(t,e,i,o,r,a){var n=t.context,s=n.gl,l=e.dem;if(l&&l.data){var c=l.dim,m=l.stride,g=l.getPixels();if(n.activeTexture.set(s.TEXTURE1),n.pixelStoreUnpackPremultiplyAlpha.set(!1),e.demTexture=e.demTexture||t.getTileTexture(m),e.demTexture){var p=e.demTexture;p.update(g,{premultiply:!1}),p.bind(s.NEAREST,s.CLAMP_TO_EDGE)}else e.demTexture=new aa.Texture(n,g,s.RGBA,{premultiply:!1}),e.demTexture.bind(s.NEAREST,s.CLAMP_TO_EDGE);n.activeTexture.set(s.TEXTURE0);var d=e.fbo;if(!d){var y=new aa.Texture(n,{width:c,height:c,data:null},s.RGBA);y.bind(s.LINEAR,s.CLAMP_TO_EDGE),(d=e.fbo=n.createFramebuffer(c,c,!0)).colorAttachment.set(y.texture)}n.bindFramebuffer.set(d.framebuffer),n.viewport.set([0,0,c,c]),t.useProgram('hillshadePrepare').draw(n,s.TRIANGLES,o,r,a,St.disabled,function(t,e){var a=e.stride,o=aa.create();return aa.ortho(o,0,aa.EXTENT,-aa.EXTENT,0,0,1),aa.translate(o,o,[0,-aa.EXTENT,0]),{u_matrix:o,u_image:1,u_dimension:[a,a],u_zoom:t.overscaledZ,u_unpack:e.getUnpackVector()}}(e.tileID,l),i.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments),e.needsHillshadePrepare=!1}}function no(t,e,m,o,r){var a=o.paint.get('raster-fade-duration');if(0<a){var n=aa.browser.now(),s=(n-t.timeAdded)/a,l=e?(n-e.timeAdded)/a:-1,c=m.getSource(),u=r.coveringZoomLevel({tileSize:c.tileSize,roundZoom:c.roundZoom}),g=!e||B(e.tileID.overscaledZ-u)>B(t.tileID.overscaledZ-u),p=g&&t.refreshedUponExpiration?1:aa.clamp(g?s:1-l,0,1);return t.refreshedUponExpiration&&1<=s&&(t.refreshedUponExpiration=!1),e?{opacity:1,mix:1-p}:{opacity:p,mix:0}}return{opacity:1,mix:0}}function so(a,t,e,r){fo(a,0,t+e/2,a.transform.width,e,r)}function _o(a,t,e,r){fo(a,t-e/2,0,e,a.transform.height,r)}function fo(t,e,i,o,r,a){var p=t.context,s=p.gl;s.enable(s.SCISSOR_TEST),s.scissor(e*aa.browser.devicePixelRatio,i*aa.browser.devicePixelRatio,o*aa.browser.devicePixelRatio,r*aa.browser.devicePixelRatio),p.clear({color:a}),s.disable(s.SCISSOR_TEST)}function mo(t,e,i){var o=t.context,r=o.gl,a=i.posMatrix,n=t.useProgram('debug'),s=Et.disabled,l=It.disabled,c=t.colorModeForRenderPass();o.activeTexture.set(r.TEXTURE0),t.emptyTexture.bind(r.LINEAR,r.CLAMP_TO_EDGE),n.draw(o,r.LINE_STRIP,s,l,c,St.disabled,yn(a,aa.Color.red),'$debug',t.debugBuffer,t.tileBorderIndexBuffer,t.debugSegments);var u=e.getTileByID(i.key).latestRawTileData,m=ea((u&&u.byteLength||0)/1024),p=e.getTile(i).tileSize,d=.5*(512/ta(p,512)*(i.overscaledZ/t.transform.zoom)),g=i.canonical.toString();i.overscaledZ!==i.canonical.z&&(g+=' => '+i.overscaledZ),function(a,t){a.initDebugOverlayCanvas();var e=a.debugOverlayCanvas,n=a.context.gl,o=a.debugOverlayCanvas.getContext('2d');o.clearRect(0,0,e.width,e.height),o.shadowColor='white',o.shadowBlur=2,o.lineWidth=1.5,o.strokeStyle='white',o.textBaseline='top',o.font='bold 36px Open Sans, sans-serif',o.fillText(t,5,5),o.strokeText(t,5,5),a.debugOverlayTexture.update(e),a.debugOverlayTexture.bind(n.LINEAR,n.CLAMP_TO_EDGE)}(t,g+' '+m+'kb'),n.draw(o,r.TRIANGLES,s,l,Pt.alphaBlended,St.disabled,yn(a,aa.Color.transparent,d),'$debug',t.debugBuffer,t.quadTriangleIndexBuffer,t.debugSegments)}function go(o,t){(!o.duration||o.duration<t.duration)&&(o.duration=t.duration,o.easing=t.easing)}function Lo(t,e,i){var o=i.maxSpeed,p=i.linearity,a=i.deceleration,n=aa.clamp(t*p/(e/1e3),-o,o),s=B(n)/(a*p);return{easing:i.easing,duration:1e3*s,amount:n*(s/2)}}function Ao(a,t){for(var e={},r=0;r<a.length;r++)e[a[r].identifier]=t[r];return e}function No(a,t,e){for(var r=0;r<a.length;r++)if(a[r].identifier===e)return t[r]}function Jo(o,t){return x(o/t)/_}function Qo(o,t){return 180*o.angleWith(t)/Xe}function fa(e){return B(e.y)>B(e.x)}function ha(e){return e*(2-e)}function xa(e){return e.panDelta&&e.panDelta.mag()||e.zoomDelta||e.bearingDelta||e.pitchDelta}function va(e){e.parentNode&&e.parentNode.removeChild(e)}function ba(t,e,i){if(t=new aa.LngLat(t.lng,t.lat),e){var o=new aa.LngLat(t.lng-360,t.lat),r=new aa.LngLat(t.lng+360,t.lat),a=i.locationPoint(t).distSqr(e);i.locationPoint(o).distSqr(e)<a?t=o:i.locationPoint(r).distSqr(e)<a&&(t=r)}for(;180<B(t.lng-i.center.lng);){var n=i.locationPoint(t);if(0<=n.x&&0<=n.y&&n.x<=i.width&&n.y<=i.height)break;t.lng>i.center.lng?t.lng-=360:t.lng+=360}return t}function wa(a,t,e){var n=a.classList;for(var o in Mr)n.remove('mapboxgl-'+e+'-anchor-'+o);n.add('mapboxgl-'+e+'-anchor-'+t)}function Ta(p,t,e){var i=e&&e.maxWidth||100,o=p._container.clientHeight/2,r=p.unproject([0,o]),a=p.unproject([i,o]),n=r.distanceTo(a);if(e&&'imperial'===e.unit){var s=3.2808*n;5280<s?Ea(t,i,s/5280,p._getUIString('ScaleControl.Miles')):Ea(t,i,s,p._getUIString('ScaleControl.Feet'))}else e&&'nautical'===e.unit?Ea(t,i,n/1852,p._getUIString('ScaleControl.NauticalMiles')):1e3<=n?Ea(t,i,n/1e3,p._getUIString('ScaleControl.Kilometers')):Ea(t,i,n,p._getUIString('ScaleControl.Meters'))}function Ea(l,t,e,i){var o=(s=e,(r=C(10,(''+ea(s)).length-1))*(a=10<=(a=s/r)?10:5<=a?5:3<=a?3:2<=a?2:1<=a?1:function(o){var t=C(10,m(-x(o)/y));return b(o*t)/t}(a))),s,r,a;l.style.width=t*(o/e)+'px',l.innerHTML=o+'&nbsp;'+i}var Sa=aa.createCommonjsModule(function(a){function r(o){return!e(o)}function e(e){return'undefined'==typeof window||'undefined'==typeof document?'not a browser':Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?'JSON'in window&&'parse'in JSON&&'stringify'in JSON?function(){if(!('Worker'in window&&'Blob'in window&&'URL'in window))return!1;var a=new Blob([''],{type:'text/javascript'}),r=URL.createObjectURL(a),o,t;try{t=new Worker(r),o=!0}catch(t){o=!1}return t&&t.terminate(),URL.revokeObjectURL(r),o}()?'Uint8ClampedArray'in window?ArrayBuffer.isView?function(){var o=document.createElement('canvas');o.width=o.height=1;var t=o.getContext('2d');if(!t)return!1;var a=t.getImageData(0,0,1,1);return a&&a.width===o.width}()?(void 0===n[t=e&&e.failIfMajorPerformanceCaveat]&&(n[t]=function(e){var t=function(e){var t=document.createElement('canvas'),a=Object.create(r.webGLContextAttributes);return a.failIfMajorPerformanceCaveat=e,t.probablySupportsContext?t.probablySupportsContext('webgl',a)||t.probablySupportsContext('experimental-webgl',a):t.supportsContext?t.supportsContext('webgl',a)||t.supportsContext('experimental-webgl',a):t.getContext('webgl',a)||t.getContext('experimental-webgl',a)}(e);if(!t)return!1;var a=t.createShader(t.VERTEX_SHADER);return a&&!t.isContextLost()&&(t.shaderSource(a,'void main() {}'),t.compileShader(a),!0===t.getShaderParameter(a,t.COMPILE_STATUS))}(t)),n[t]?void 0:'insufficient WebGL support'):'insufficient Canvas/getImageData support':'insufficient ArrayBuffer support':'insufficient Uint8ClampedArray support':'insufficient worker support':'insufficient JSON support':'insufficient Object support':'insufficient Function support':'insufficent Array support';var t}a.exports?a.exports=r:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=r,window.mapboxgl.notSupportedReason=e);var n={};r.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),Ca={create:function(t,e,a){var o=aa.window.document.createElement(t);return void 0!==e&&(o.className=e),a&&a.appendChild(o),o},createNS:function(t,e){return aa.window.document.createElementNS(t,e)}},i=aa.window.document&&aa.window.document.documentElement.style,Ia=t(['userSelect','MozUserSelect','WebkitUserSelect','msUserSelect']),n;Ca.disableDrag=function(){i&&Ia&&(n=i[Ia],i[Ia]='none')},Ca.enableDrag=function(){i&&Ia&&(i[Ia]=n)};var a=t(['transform','WebkitTransform']);Ca.setTransform=function(o,t){o.style[a]=t};var s=!1;try{var l=Object.defineProperty({},'passive',{get:function(){s=!0}});aa.window.addEventListener('test',l,l),aa.window.removeEventListener('test',l,l)}catch(e){s=!1}Ca.addEventListener=function(a,t,e,r){void 0===r&&(r={}),a.addEventListener(t,e,'passive'in r&&s?r:r.capture)},Ca.removeEventListener=function(a,t,e,r){void 0===r&&(r={}),a.removeEventListener(t,e,'passive'in r&&s?r:r.capture)};var c=function(t){t.preventDefault(),t.stopPropagation(),aa.window.removeEventListener('click',c,!0)};Ca.suppressClick=function(){aa.window.addEventListener('click',c,!0),aa.window.setTimeout(function(){aa.window.removeEventListener('click',c,!0)},0)},Ca.mousePos=function(t,e){var a=t.getBoundingClientRect();return new aa.Point(e.clientX-a.left-t.clientLeft,e.clientY-a.top-t.clientTop)},Ca.touchPos=function(t,e){for(var n=t.getBoundingClientRect(),o=[],r=0;r<e.length;r++)o.push(new aa.Point(e[r].clientX-n.left-t.clientLeft,e[r].clientY-n.top-t.clientTop));return o},Ca.mouseButton=function(t){return void 0!==aa.window.InstallTrigger&&2===t.button&&t.ctrlKey&&0<=aa.window.navigator.platform.toUpperCase().indexOf('MAC')?0:t.button},Ca.remove=function(e){e.parentNode&&e.parentNode.removeChild(e)};var u=function(t){function e(){t.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new aa.RGBAImage({width:1,height:1}),this.dirty=!0}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.isLoaded=function(){return this.loaded},e.prototype.setLoaded=function(a){if(this.loaded!==a&&(this.loaded=a,a)){for(var t=0,e=this.requestors,r;t<e.length;t+=1)r=e[t],this._notify(r.ids,r.callback);this.requestors=[]}},e.prototype.getImage=function(e){return this.images[e]},e.prototype.addImage=function(o,t){this._validate(o,t)&&(this.images[o]=t)},e.prototype._validate=function(t,e){var a=!0;return this._validateStretch(e.stretchX,e.data&&e.data.width)||(this.fire(new aa.ErrorEvent(new Error('Image "'+t+'" has invalid "stretchX" value'))),a=!1),this._validateStretch(e.stretchY,e.data&&e.data.height)||(this.fire(new aa.ErrorEvent(new Error('Image "'+t+'" has invalid "stretchY" value'))),a=!1),this._validateContent(e.content,e)||(this.fire(new aa.ErrorEvent(new Error('Image "'+t+'" has invalid "content" value'))),a=!1),a},e.prototype._validateStretch=function(n,s){if(!n)return!0;for(var e=0,i=0,o=n,r;i<o.length;i+=1){if(r=o[i],r[0]<e||r[1]<r[0]||s<r[1])return!1;e=r[1]}return!0},e.prototype._validateContent=function(o,t){return!(o&&(4!==o.length||0>o[0]||t.data.width<o[0]||0>o[1]||t.data.height<o[1]||0>o[2]||t.data.width<o[2]||0>o[3]||t.data.height<o[3]||o[2]<o[0]||o[3]<o[1]))},e.prototype.updateImage=function(o,t){t.version=this.images[o].version+1,this.images[o]=t,this.updatedImages[o]=!0},e.prototype.removeImage=function(o){var t=this.images[o];delete this.images[o],delete this.patterns[o],t.userImage&&t.userImage.onRemove&&t.userImage.onRemove()},e.prototype.listImages=function(){return Object.keys(this.images)},e.prototype.getImages=function(a,n){var s=!0;if(!this.isLoaded())for(var i=0,o=a;i<o.length;i+=1)this.images[o[i]]||(s=!1);this.isLoaded()||s?this._notify(a,n):this.requestors.push({ids:a,callback:n})},e.prototype._notify=function(t,e){for(var i={},o=0,r=t,a;o<r.length;o+=1){a=r[o],this.images[a]||this.fire(new aa.Event('styleimagemissing',{id:a}));var l=this.images[a];l?i[a]={data:l.data.clone(),pixelRatio:l.pixelRatio,sdf:l.sdf,version:l.version,stretchX:l.stretchX,stretchY:l.stretchY,content:l.content,hasRenderCallback:!!(l.userImage&&l.userImage.render)}:aa.warnOnce('Image "'+a+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}e(null,i)},e.prototype.getPixelSize=function(){var e=this.atlasImage;return{width:e.width,height:e.height}},e.prototype.getPattern=function(t){var e=this.patterns[t],n=this.getImage(t);if(!n)return null;if(e&&e.position.version===n.version)return e.position;if(e)e.position.version=n.version;else{var i={w:n.data.width+2,h:n.data.height+2,x:0,y:0},s=new aa.ImagePosition(i,n);this.patterns[t]={bin:i,position:s}}return this._updatePatternAtlas(),this.patterns[t].position},e.prototype.bind=function(t){var e=t.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new aa.Texture(t,this.atlasImage,e.RGBA),this.atlasTexture.bind(e.LINEAR,e.CLAMP_TO_EDGE)},e.prototype._updatePatternAtlas=function(){var t=[];for(var e in this.patterns)t.push(this.patterns[e].bin);var i=aa.potpack(t),o=i.w,r=i.h,a=this.atlasImage;for(var n in a.resize({width:o||1,height:r||1}),this.patterns){var s=this.patterns[n].bin,l=s.x+1,m=s.y+1,g=this.images[n].data,y=g.width,_=g.height;aa.RGBAImage.copy(g,a,{x:0,y:0},{x:l,y:m},{width:y,height:_}),aa.RGBAImage.copy(g,a,{x:0,y:_-1},{x:l,y:m-1},{width:y,height:1}),aa.RGBAImage.copy(g,a,{x:0,y:0},{x:l,y:m+_},{width:y,height:1}),aa.RGBAImage.copy(g,a,{x:y-1,y:0},{x:l-1,y:m},{width:1,height:_}),aa.RGBAImage.copy(g,a,{x:0,y:0},{x:l+y,y:m},{width:1,height:_})}this.dirty=!0},e.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},e.prototype.dispatchRenderCallbacks=function(a){for(var t=0,e=a,n;t<e.length;t+=1)if(n=e[t],!this.callbackDispatchedThisFrame[n]){this.callbackDispatchedThisFrame[n]=!0;var o=this.images[n];ra(o)&&this.updateImage(n,o)}},e}(aa.Evented),p=r,Aa=1e20;r.prototype.draw=function(a){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(a,this.buffer,this.middle);for(var t=this.ctx.getImageData(0,0,this.size,this.size),e=new Uint8ClampedArray(this.size*this.size),n=0,o;n<this.size*this.size;n++)o=t.data[4*n+3]/255,this.gridOuter[n]=1===o?0:0===o?Aa:C(oa(0,.5-o),2),this.gridInner[n]=1===o?Aa:0===o?0:C(oa(0,o-.5),2);for(h(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),h(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),n=0;n<this.size*this.size;n++)e[n]=oa(0,ta(255,b(255-255*((this.gridOuter[n]-this.gridInner[n])/this.radius+this.cutoff))));return e},p.default=r;var ka=function(o,t){this.requestManager=o,this.localIdeographFontFamily=t,this.entries={}};ka.prototype.setURL=function(e){this.url=e},ka.prototype.getGlyphs=function(t,p){var d=this,e=[];for(var o in t)for(var r=0,n=t[o];r<n.length;r+=1)e.push({stack:o,id:n[r]});aa.asyncAll(e,function(o,p){var e=o.stack,c=o.id,u=d.entries[e];u||(u=d.entries[e]={glyphs:{},requests:{},ranges:{}});var t=u.glyphs[c];if(void 0===t){if(t=d._tinySDF(u,e,c))return u.glyphs[c]=t,void p(null,{stack:e,id:c,glyph:t});var a=ea(c/256);if(65535<256*a)p(new Error('glyphs > 65535 not supported'));else if(u.ranges[a])p(null,{stack:e,id:c,glyph:t});else{var s=u.requests[a];s||(s=u.requests[a]=[],ka.loadGlyphRange(e,a,d.url,d.requestManager,function(o,t){if(t){for(var e in t)d._doesCharSupportLocalGlyph(+e)||(u.glyphs[+e]=t[+e]);u.ranges[a]=!0}for(var l=0,r=s;l<r.length;l+=1)(0,r[l])(o,t);delete u.requests[a]})),s.push(function(a,t){a?p(a):t&&p(null,{stack:e,id:c,glyph:t[c]||null})})}}else p(null,{stack:e,id:c,glyph:t})},function(i,t){if(i)p(i);else if(t){for(var e={},o=0,r=t;o<r.length;o+=1){var a=r[o],n=a.stack,s=a.id,l=a.glyph;(e[n]||(e[n]={}))[s]=l&&{id:l.id,bitmap:l.bitmap.clone(),metrics:l.metrics}}p(null,e)}})},ka.prototype._doesCharSupportLocalGlyph=function(t){return!!this.localIdeographFontFamily&&(aa.isChar['CJK Unified Ideographs'](t)||aa.isChar['Hangul Syllables'](t)||aa.isChar.Hiragana(t)||aa.isChar.Katakana(t))},ka.prototype._tinySDF=function(t,e,i){var s=this.localIdeographFontFamily;if(s&&this._doesCharSupportLocalGlyph(i)){var r=t.tinySDF;if(!r){var l='400';/bold/i.test(e)?l='900':/medium/i.test(e)?l='500':/light/i.test(e)&&(l='200'),r=t.tinySDF=new ka.TinySDF(24,3,8,.25,s,l)}return{id:i,bitmap:new aa.AlphaImage({width:30,height:30},r.draw(d(i))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},ka.loadGlyphRange=function(t,e,i,o,p){var a=256*e,r=o.transformRequest(o.normalizeGlyphsURL(i).replace('{fontstack}',t).replace('{range}',a+'-'+(a+255)),aa.ResourceType.Glyphs);aa.getArrayBuffer(r,function(t,e){if(t)p(t);else if(e){for(var a={},o=0,r=aa.parseGlyphPBF(e),n;o<r.length;o+=1)n=r[o],a[n.id]=n;p(null,a)}})},ka.TinySDF=p;var Pa=function(){this.specification=aa.styleSpec.light.position};Pa.prototype.possiblyEvaluate=function(t,e){return aa.sphericalToCartesian(t.expression.evaluate(e))},Pa.prototype.interpolate=function(t,e,a){return{x:aa.number(t.x,e.x,a),y:aa.number(t.y,e.y,a),z:aa.number(t.z,e.z,a)}};var za=new aa.Properties({anchor:new aa.DataConstantProperty(aa.styleSpec.light.anchor),position:new Pa,color:new aa.DataConstantProperty(aa.styleSpec.light.color),intensity:new aa.DataConstantProperty(aa.styleSpec.light.intensity)}),Da=function(t){function e(e){t.call(this),this._transitionable=new aa.Transitionable(za),this.setLight(e),this._transitioning=this._transitionable.untransitioned()}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getLight=function(){return this._transitionable.serialize()},e.prototype.setLight=function(t,e){if(void 0===e&&(e={}),!this._validate(aa.validateLight,t,e))for(var a in t){var o=t[a];aa.endsWith(a,'-transition')?this._transitionable.setTransition(a.slice(0,-11),o):this._transitionable.setValue(a,o)}},e.prototype.updateTransitions=function(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)},e.prototype.hasTransition=function(){return this._transitioning.hasTransition()},e.prototype.recalculate=function(e){this.properties=this._transitioning.possiblyEvaluate(e)},e.prototype._validate=function(t,e,a){return(!a||!1!==a.validate)&&aa.emitValidationErrors(this,t.call(aa.validateStyle,aa.extend({value:e,style:{glyphs:!0,sprite:!0},styleSpec:aa.styleSpec})))},e}(aa.Evented),La=function(o,t){this.width=o,this.height=t,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};La.prototype.getDash=function(o,t){var e=o.join(',')+(t+'');return this.dashEntry[e]||(this.dashEntry[e]=this.addDash(o,t)),this.dashEntry[e]},La.prototype.getDashRanges=function(p,t,e){var i=[],o=1==p.length%2?-p[p.length-1]*e:0,d=p[0]*e,u=!0;i.push({left:o,right:d,isDash:u,zeroLength:0===p[0]});for(var m=p[0],s=1,l;s<p.length;s++)l=p[s],i.push({left:o=m*e,right:d=(m+=l)*e,isDash:u=!u,zeroLength:0===l});return i},La.prototype.addRoundDash=function(m,t,e){for(var g=t/2,o=-e;o<=e;o++)for(var r=this.width*(this.nextRow+e+o),a=0,n=m[a],s=0;s<this.width;s++){1<s/n.right&&(n=m[++a]);var l=B(s-n.left),c=B(s-n.right),u=ta(l,c),y=void 0,p=o/e*(g+1);if(n.isDash){var d=g-B(p);y=N(u*u+d*d)}else y=g-N(u*u+p*p);this.data[r+s]=oa(0,ta(255,y+128))}},La.prototype.addRegularDash=function(d){for(var t=d.length-1;0<=t;--t){var e=d[t],i=d[t+1];e.zeroLength?d.splice(t,1):i&&i.isDash===e.isDash&&(i.left=e.left,d.splice(t,1))}var o=d[0],r=d[d.length-1];o.isDash===r.isDash&&(o.left=r.left-this.width,r.right=o.right+this.width);for(var a=this.width*this.nextRow,n=0,s=d[n],l=0;l<this.width;l++){1<l/s.right&&(s=d[++n]);var c=B(l-s.left),u=B(l-s.right),m=ta(c,u);this.data[a+l]=oa(0,ta(255,(s.isDash?m:-m)+128))}},La.prototype.addDash=function(t,e){var i=e?7:0,o=2*i+1;if(this.nextRow+o>this.height)return aa.warnOnce('LineAtlas out of space'),null;for(var r=0,p=0;p<t.length;p++)r+=t[p];if(0!==r){var n=this.width/r,s=this.getDashRanges(t,this.width,n);e?this.addRoundDash(s,n,i):this.addRegularDash(s)}var l={y:(this.nextRow+i+.5)/this.height,height:2*i/this.height,width:r};return this.nextRow+=o,this.dirty=!0,l},La.prototype.bind=function(o){var t=o.gl;this.texture?(t.bindTexture(t.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,t.texSubImage2D(t.TEXTURE_2D,0,0,0,this.width,this.height,t.ALPHA,t.UNSIGNED_BYTE,this.data))):(this.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texImage2D(t.TEXTURE_2D,0,t.ALPHA,this.width,this.height,0,t.ALPHA,t.UNSIGNED_BYTE,this.data))};var T=function t(e,i){this.workerPool=e,this.actors=[],this.currentActor=0,this.id=aa.uniqueId();for(var o=this.workerPool.acquire(this.id),r=0,a;r<o.length;r++)a=new t.Actor(o[r],i,this.id),a.name='Worker '+r,this.actors.push(a)};T.prototype.broadcast=function(a,e,t){aa.asyncAll(this.actors,function(r,t){r.send(a,e,t)},t=t||function(){})},T.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},T.prototype.remove=function(){this.actors.forEach(function(e){e.remove()}),this.actors=[],this.workerPool.release(this.id)},T.Actor=aa.Actor;var E=function(t,e,a){this.bounds=aa.LngLatBounds.convert(this.validateBounds(t)),this.minzoom=e||0,this.maxzoom=a||24};E.prototype.validateBounds=function(e){return Array.isArray(e)&&4===e.length?[oa(-180,e[0]),oa(-90,e[1]),ta(180,e[2]),ta(90,e[3])]:[-180,-90,180,90]},E.prototype.contains=function(t){var e=C(2,t.z),i=ea(aa.mercatorXfromLng(this.bounds.getWest())*e),o=ea(aa.mercatorYfromLat(this.bounds.getNorth())*e),r=m(aa.mercatorXfromLng(this.bounds.getEast())*e),a=m(aa.mercatorYfromLat(this.bounds.getSouth())*e);return t.x>=i&&t.x<r&&t.y>=o&&t.y<a};var P=function(t){function e(e,n,o,r){if(t.call(this),this.id=e,this.dispatcher=o,this.type='vector',this.minzoom=0,this.maxzoom=22,this.scheme='xyz',this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,aa.extend(this,aa.pick(n,['url','scheme','tileSize','promoteId'])),this._options=aa.extend({type:'vector'},n),this._collectResourceTiming=n.collectResourceTiming,512!==this.tileSize)throw new Error('vector tile sources must have a tileSize of 512');this.setEventedParent(r)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.load=function(){var t=this;this._loaded=!1,this.fire(new aa.Event('dataloading',{dataType:'source'})),this._tileJSONRequest=ia(this._options,this.map._requestManager,function(e,a){t._tileJSONRequest=null,t._loaded=!0,e?t.fire(new aa.ErrorEvent(e)):a&&(aa.extend(t,a),a.bounds&&(t.tileBounds=new E(a.bounds,t.minzoom,t.maxzoom)),aa.postTurnstileEvent(a.tiles,t.map._requestManager._customAccessToken),aa.postMapLoadEvent(a.tiles,t.map._getMapId(),t.map._requestManager._skuToken,t.map._requestManager._customAccessToken),t.fire(new aa.Event('data',{dataType:'source',sourceDataType:'metadata'})),t.fire(new aa.Event('data',{dataType:'source',sourceDataType:'content'})))})},e.prototype.loaded=function(){return this._loaded},e.prototype.hasTile=function(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)},e.prototype.onAdd=function(e){this.map=e,this.load()},e.prototype.setSourceProperty=function(e){this._tileJSONRequest&&this._tileJSONRequest.cancel(),e(),this.map.style.sourceCaches[this.id].clearTiles(),this.load()},e.prototype.setTiles=function(o){var t=this;return this.setSourceProperty(function(){t._options.tiles=o}),this},e.prototype.setUrl=function(o){var t=this;return this.setSourceProperty(function(){t.url=o,t._options.url=o}),this},e.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},e.prototype.serialize=function(){return aa.extend({},this._options)},e.prototype.loadTile=function(t,e){function n(a,o){return delete t.request,t.aborted?e(null):a&&404!==a.status?e(a):(o&&o.resourceTiming&&(t.resourceTiming=o.resourceTiming),this.map._refreshExpiredTiles&&o&&t.setExpiryData(o),t.loadVectorData(o,this.map.painter),aa.cacheEntryPossiblyAdded(this.dispatcher),e(null),void(t.reloadCallback&&(this.loadTile(t,t.reloadCallback),t.reloadCallback=null)))}var a=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme)),o={request:this.map._requestManager.transformRequest(a,aa.ResourceType.Tile),uid:t.uid,tileID:t.tileID,zoom:t.tileID.overscaledZ,tileSize:this.tileSize*t.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:aa.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};o.request.collectResourceTiming=this._collectResourceTiming,t.actor&&'expired'!==t.state?'loading'===t.state?t.reloadCallback=e:t.request=t.actor.send('reloadTile',o,n.bind(this)):(t.actor=this.dispatcher.getActor(),t.request=t.actor.send('loadTile',o,n.bind(this)))},e.prototype.abortTile=function(e){e.request&&(e.request.cancel(),delete e.request),e.actor&&e.actor.send('abortTile',{uid:e.uid,type:this.type,source:this.id},void 0)},e.prototype.unloadTile=function(e){e.unloadVectorData(),e.actor&&e.actor.send('removeTile',{uid:e.uid,type:this.type,source:this.id},void 0)},e.prototype.hasTransition=function(){return!1},e}(aa.Evented),Ra=function(t){function e(e,n,o,r){t.call(this),this.id=e,this.dispatcher=o,this.setEventedParent(r),this.type='raster',this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme='xyz',this.tileSize=512,this._loaded=!1,this._options=aa.extend({type:'raster'},n),aa.extend(this,aa.pick(n,['url','scheme','tileSize']))}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.load=function(){var t=this;this._loaded=!1,this.fire(new aa.Event('dataloading',{dataType:'source'})),this._tileJSONRequest=ia(this._options,this.map._requestManager,function(e,a){t._tileJSONRequest=null,t._loaded=!0,e?t.fire(new aa.ErrorEvent(e)):a&&(aa.extend(t,a),a.bounds&&(t.tileBounds=new E(a.bounds,t.minzoom,t.maxzoom)),aa.postTurnstileEvent(a.tiles),aa.postMapLoadEvent(a.tiles,t.map._getMapId(),t.map._requestManager._skuToken),t.fire(new aa.Event('data',{dataType:'source',sourceDataType:'metadata'})),t.fire(new aa.Event('data',{dataType:'source',sourceDataType:'content'})))})},e.prototype.loaded=function(){return this._loaded},e.prototype.onAdd=function(e){this.map=e,this.load()},e.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},e.prototype.serialize=function(){return aa.extend({},this._options)},e.prototype.hasTile=function(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)},e.prototype.loadTile=function(t,e){var i=this,o=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);t.request=aa.getImage(this.map._requestManager.transformRequest(o,aa.ResourceType.Tile),function(o,r){if(delete t.request,t.aborted)t.state='unloaded',e(null);else if(o)t.state='errored',e(o);else if(r){i.map._refreshExpiredTiles&&t.setExpiryData(r),delete r.cacheControl,delete r.expires;var a=i.map.painter.context,n=a.gl;t.texture=i.map.painter.getTileTexture(r.width),t.texture?t.texture.update(r,{useMipmap:!0}):(t.texture=new aa.Texture(a,r,n.RGBA,{useMipmap:!0}),t.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE,n.LINEAR_MIPMAP_NEAREST),a.extTextureFilterAnisotropic&&n.texParameterf(n.TEXTURE_2D,a.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,a.extTextureFilterAnisotropicMax)),t.state='loaded',aa.cacheEntryPossiblyAdded(i.dispatcher),e(null)}})},e.prototype.abortTile=function(o,t){o.request&&(o.request.cancel(),delete o.request),t()},e.prototype.unloadTile=function(o,t){o.texture&&this.map.painter.saveTileTexture(o.texture),t()},e.prototype.hasTransition=function(){return!1},e}(aa.Evented),Ba=function(t){function e(e,n,o,r){t.call(this,e,n,o,r),this.type='raster-dem',this.maxzoom=22,this._options=aa.extend({type:'raster-dem'},n),this.encoding=n.encoding||'mapbox'}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.serialize=function(){return{type:'raster-dem',url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},e.prototype.loadTile=function(l,e){function t(a,t){a&&(l.state='errored',e(a)),t&&(l.dem=t,l.needsHillshadePrepare=!0,l.state='loaded',e(null))}var a=this.map._requestManager.normalizeTileURL(l.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);l.request=aa.getImage(this.map._requestManager.transformRequest(a,aa.ResourceType.Tile),function(r,o){if(delete l.request,l.aborted)l.state='unloaded',e(null);else if(r)l.state='errored',e(r);else if(o){this.map._refreshExpiredTiles&&l.setExpiryData(o),delete o.cacheControl,delete o.expires;var a=aa.window.ImageBitmap&&o instanceof aa.window.ImageBitmap&&aa.offscreenCanvasSupported()?o:aa.browser.getImageData(o,1),i={uid:l.uid,coord:l.tileID,source:this.id,rawImageData:a,encoding:this.encoding};l.actor&&'expired'!==l.state||(l.actor=this.dispatcher.getActor(),l.actor.send('loadDEMTile',i,t.bind(this)))}}.bind(this)),l.neighboringTiles=this._getNeighboringTiles(l.tileID)},e.prototype._getNeighboringTiles=function(t){var e=t.canonical,i=C(2,e.z),o=(e.x-1+i)%i,r=0===e.x?t.wrap-1:t.wrap,a=(e.x+1+i)%i,n=e.x+1===i?t.wrap+1:t.wrap,s={};return s[new aa.OverscaledTileID(t.overscaledZ,r,e.z,o,e.y).key]={backfilled:!1},s[new aa.OverscaledTileID(t.overscaledZ,n,e.z,a,e.y).key]={backfilled:!1},0<e.y&&(s[new aa.OverscaledTileID(t.overscaledZ,r,e.z,o,e.y-1).key]={backfilled:!1},s[new aa.OverscaledTileID(t.overscaledZ,t.wrap,e.z,e.x,e.y-1).key]={backfilled:!1},s[new aa.OverscaledTileID(t.overscaledZ,n,e.z,a,e.y-1).key]={backfilled:!1}),e.y+1<i&&(s[new aa.OverscaledTileID(t.overscaledZ,r,e.z,o,e.y+1).key]={backfilled:!1},s[new aa.OverscaledTileID(t.overscaledZ,t.wrap,e.z,e.x,e.y+1).key]={backfilled:!1},s[new aa.OverscaledTileID(t.overscaledZ,n,e.z,a,e.y+1).key]={backfilled:!1}),s},e.prototype.unloadTile=function(e){e.demTexture&&this.map.painter.saveTileTexture(e.demTexture),e.fbo&&(e.fbo.destroy(),delete e.fbo),e.dem&&delete e.dem,delete e.neighboringTiles,e.state='unloaded',e.actor&&e.actor.send('removeDEMTile',{uid:e.uid,source:this.id})},e}(Ra),Fa=function(t){function e(e,s,o,r){t.call(this),this.id=e,this.type='geojson',this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=o.getActor(),this.setEventedParent(r),this._data=s.data,this._options=aa.extend({},s),this._collectResourceTiming=s.collectResourceTiming,this._resourceTiming=[],void 0!==s.maxzoom&&(this.maxzoom=s.maxzoom),s.type&&(this.type=s.type),s.attribution&&(this.attribution=s.attribution),this.promoteId=s.promoteId;var a=aa.EXTENT/this.tileSize;this.workerOptions=aa.extend({source:this.id,cluster:s.cluster||!1,geojsonVtOptions:{buffer:(void 0===s.buffer?128:s.buffer)*a,tolerance:(void 0===s.tolerance?.375:s.tolerance)*a,extent:aa.EXTENT,maxZoom:this.maxzoom,lineMetrics:s.lineMetrics||!1,generateId:s.generateId||!1},superclusterOptions:{maxZoom:void 0===s.clusterMaxZoom?this.maxzoom-1:ta(s.clusterMaxZoom,this.maxzoom-1),minPoints:oa(2,s.clusterMinPoints||2),extent:aa.EXTENT,radius:(s.clusterRadius||50)*a,log:!1,generateId:s.generateId||!1},clusterProperties:s.clusterProperties,filter:s.filter},s.workerOptions)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.load=function(){var t=this;this.fire(new aa.Event('dataloading',{dataType:'source'})),this._updateWorkerData(function(e){if(e)t.fire(new aa.ErrorEvent(e));else{var a={dataType:'source',sourceDataType:'metadata'};t._collectResourceTiming&&t._resourceTiming&&0<t._resourceTiming.length&&(a.resourceTiming=t._resourceTiming,t._resourceTiming=[]),t.fire(new aa.Event('data',a))}})},e.prototype.onAdd=function(e){this.map=e,this.load()},e.prototype.setData=function(t){var a=this;return this._data=t,this.fire(new aa.Event('dataloading',{dataType:'source'})),this._updateWorkerData(function(t){if(t)a.fire(new aa.ErrorEvent(t));else{var e={dataType:'source',sourceDataType:'content'};a._collectResourceTiming&&a._resourceTiming&&0<a._resourceTiming.length&&(e.resourceTiming=a._resourceTiming,a._resourceTiming=[]),a.fire(new aa.Event('data',e))}}),this},e.prototype.getClusterExpansionZoom=function(o,a){return this.actor.send('geojson.getClusterExpansionZoom',{clusterId:o,source:this.id},a),this},e.prototype.getClusterChildren=function(o,a){return this.actor.send('geojson.getClusterChildren',{clusterId:o,source:this.id},a),this},e.prototype.getClusterLeaves=function(a,r,n,s){return this.actor.send('geojson.getClusterLeaves',{source:this.id,clusterId:a,limit:r,offset:n},s),this},e.prototype._updateWorkerData=function(a){var e=this;this._loaded=!1;var n=aa.extend({},this.workerOptions),t=this._data;'string'==typeof t?(n.request=this.map._requestManager.transformRequest(aa.browser.resolveURL(t),aa.ResourceType.Source),n.request.collectResourceTiming=this._collectResourceTiming):n.data=JSON.stringify(t),this.actor.send(this.type+'.loadData',n,function(o,t){e._removed||t&&t.abandoned||(e._loaded=!0,t&&t.resourceTiming&&t.resourceTiming[e.id]&&(e._resourceTiming=t.resourceTiming[e.id].slice(0)),e.actor.send(e.type+'.coalesce',{source:n.source},null),a(o))})},e.prototype.loaded=function(){return this._loaded},e.prototype.loadTile=function(n,e){var i=this,o=n.actor?'reloadTile':'loadTile';n.actor=this.actor,n.request=this.actor.send(o,{type:this.type,uid:n.uid,tileID:n.tileID,zoom:n.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:aa.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(r,t){return delete n.request,n.unloadVectorData(),n.aborted?e(null):r?e(r):(n.loadVectorData(t,i.map.painter,'reloadTile'==o),e(null))})},e.prototype.abortTile=function(e){e.request&&(e.request.cancel(),delete e.request),e.aborted=!0},e.prototype.unloadTile=function(e){e.unloadVectorData(),this.actor.send('removeTile',{uid:e.uid,type:this.type,source:this.id})},e.prototype.onRemove=function(){this._removed=!0,this.actor.send('removeSource',{type:this.type,source:this.id})},e.prototype.serialize=function(){return aa.extend({},this._options,{type:this.type,data:this._data})},e.prototype.hasTransition=function(){return!1},e}(aa.Evented),Ma=aa.createLayout([{name:'a_pos',type:'Int16',components:2},{name:'a_texture_pos',type:'Int16',components:2}]),M=function(a){function e(e,t,n,o){a.call(this),this.id=e,this.dispatcher=n,this.coordinates=t.coordinates,this.type='image',this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(o),this.options=t}return a&&(e.__proto__=a),(e.prototype=Object.create(a&&a.prototype)).constructor=e,e.prototype.load=function(t,e){var n=this;this._loaded=!1,this.fire(new aa.Event('dataloading',{dataType:'source'})),this.url=this.options.url,aa.getImage(this.map._requestManager.transformRequest(this.url,aa.ResourceType.Image),function(o,r){n._loaded=!0,o?n.fire(new aa.ErrorEvent(o)):r&&(n.image=r,t&&(n.coordinates=t),e&&e(),n._finishLoading())})},e.prototype.loaded=function(){return this._loaded},e.prototype.updateImage=function(o){var t=this;return this.image&&o.url?(this.options.url=o.url,this.load(o.coordinates,function(){t.texture=null}),this):this},e.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new aa.Event('data',{dataType:'source',sourceDataType:'metadata'})))},e.prototype.onAdd=function(e){this.map=e,this.load()},e.prototype.setCoordinates=function(t){var e=this;this.coordinates=t;var a=t.map(aa.MercatorCoordinate.fromLngLat);this.tileID=function(t){for(var e=1/0,i=1/0,o=-1/0,r=-1/0,a=0,n=t,s;a<n.length;a+=1)s=n[a],e=ta(e,s.x),i=ta(i,s.y),o=oa(o,s.x),r=oa(r,s.y);var l=oa(o-e,r-i),p=oa(0,ea(-x(l)/_)),d=C(2,p);return new aa.CanonicalTileID(p,ea((e+o)/2*d),ea((i+r)/2*d))}(a),this.minzoom=this.maxzoom=this.tileID.z;var o=a.map(function(o){return e.tileID.getTilePoint(o)._round()});return this._boundsArray=new aa.StructArrayLayout4i8,this._boundsArray.emplaceBack(o[0].x,o[0].y,0,0),this._boundsArray.emplaceBack(o[1].x,o[1].y,aa.EXTENT,0),this._boundsArray.emplaceBack(o[3].x,o[3].y,0,aa.EXTENT),this._boundsArray.emplaceBack(o[2].x,o[2].y,aa.EXTENT,aa.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new aa.Event('data',{dataType:'source',sourceDataType:'content'})),this},e.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&this.image){var t=this.map.painter.context,e=t.gl;for(var a in this.boundsBuffer||(this.boundsBuffer=t.createVertexBuffer(this._boundsArray,Ma.members)),this.boundsSegments||(this.boundsSegments=aa.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new aa.Texture(t,this.image,e.RGBA),this.texture.bind(e.LINEAR,e.CLAMP_TO_EDGE)),this.tiles){var o=this.tiles[a];'loaded'!==o.state&&(o.state='loaded',o.texture=this.texture)}}},e.prototype.loadTile=function(o,t){this.tileID&&this.tileID.equals(o.tileID.canonical)?(this.tiles[o.tileID.wrap+'']=o,o.buckets={},t(null)):(o.state='errored',t(null))},e.prototype.serialize=function(){return{type:'image',url:this.options.url,coordinates:this.coordinates}},e.prototype.hasTransition=function(){return!1},e}(aa.Evented),Oa=function(a){function e(e,t,n,o){a.call(this,e,t,n,o),this.roundZoom=!0,this.type='video',this.options=t}return a&&(e.__proto__=a),(e.prototype=Object.create(a&&a.prototype)).constructor=e,e.prototype.load=function(){var t=this;this._loaded=!1;var e=this.options;this.urls=[];for(var a=0,o=e.urls;a<o.length;a+=1)this.urls.push(this.map._requestManager.transformRequest(o[a],aa.ResourceType.Source).url);aa.getVideo(this.urls,function(e,a){t._loaded=!0,e?t.fire(new aa.ErrorEvent(e)):a&&(t.video=a,t.video.loop=!0,t.video.addEventListener('playing',function(){t.map.triggerRepaint()}),t.map&&t.video.play(),t._finishLoading())})},e.prototype.pause=function(){this.video&&this.video.pause()},e.prototype.play=function(){this.video&&this.video.play()},e.prototype.seek=function(t){if(this.video){var e=this.video.seekable;t<e.start(0)||t>e.end(0)?this.fire(new aa.ErrorEvent(new aa.ValidationError('sources.'+this.id,null,'Playback for this video can be set only between the '+e.start(0)+' and '+e.end(0)+'-second mark.'))):this.video.currentTime=t}},e.prototype.getVideo=function(){return this.video},e.prototype.onAdd=function(e){this.map||(this.map=e,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},e.prototype.prepare=function(){if(!(0===Object.keys(this.tiles).length||2>this.video.readyState)){var t=this.map.painter.context,e=t.gl;for(var a in this.boundsBuffer||(this.boundsBuffer=t.createVertexBuffer(this._boundsArray,Ma.members)),this.boundsSegments||(this.boundsSegments=aa.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(e.LINEAR,e.CLAMP_TO_EDGE),e.texSubImage2D(e.TEXTURE_2D,0,0,0,e.RGBA,e.UNSIGNED_BYTE,this.video)):(this.texture=new aa.Texture(t,this.video,e.RGBA),this.texture.bind(e.LINEAR,e.CLAMP_TO_EDGE)),this.tiles){var o=this.tiles[a];'loaded'!==o.state&&(o.state='loaded',o.texture=this.texture)}}},e.prototype.serialize=function(){return{type:'video',urls:this.urls,coordinates:this.coordinates}},e.prototype.hasTransition=function(){return this.video&&!this.video.paused},e}(M),Na=function(t){function e(e,n,o,r){t.call(this,e,n,o,r),n.coordinates?Array.isArray(n.coordinates)&&4===n.coordinates.length&&!n.coordinates.some(function(e){return!Array.isArray(e)||2!==e.length||e.some(function(e){return'number'!=typeof e})})||this.fire(new aa.ErrorEvent(new aa.ValidationError('sources.'+e,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new aa.ErrorEvent(new aa.ValidationError('sources.'+e,null,'missing required property "coordinates"'))),n.animate&&'boolean'!=typeof n.animate&&this.fire(new aa.ErrorEvent(new aa.ValidationError('sources.'+e,null,'optional "animate" property must be a boolean value'))),n.canvas?'string'==typeof n.canvas||n.canvas instanceof aa.window.HTMLCanvasElement||this.fire(new aa.ErrorEvent(new aa.ValidationError('sources.'+e,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new aa.ErrorEvent(new aa.ValidationError('sources.'+e,null,'missing required property "canvas"'))),this.options=n,this.animate=void 0===n.animate||n.animate}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof aa.window.HTMLCanvasElement?this.options.canvas:aa.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new aa.ErrorEvent(new Error('Canvas dimensions cannot be less than or equal to zero.'))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},e.prototype.getCanvas=function(){return this.canvas},e.prototype.onAdd=function(e){this.map=e,this.load(),this.canvas&&this.animate&&this.play()},e.prototype.onRemove=function(){this.pause()},e.prototype.prepare=function(){var t=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,t=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,t=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var e=this.map.painter.context,n=e.gl;for(var o in this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,Ma.members)),this.boundsSegments||(this.boundsSegments=aa.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(t||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new aa.Texture(e,this.canvas,n.RGBA,{premultiply:!0}),this.tiles){var r=this.tiles[o];'loaded'!==r.state&&(r.state='loaded',r.texture=this.texture)}}},e.prototype.serialize=function(){return{type:'canvas',coordinates:this.coordinates}},e.prototype.hasTransition=function(){return this._playing},e.prototype._hasInvalidDimensions=function(){for(var o=0,t=[this.canvas.width,this.canvas.height],e;o<t.length;o+=1)if(e=t[o],isNaN(e)||0>=e)return!0;return!1},e}(M),Ua={vector:P,raster:Ra,"raster-dem":Ba,geojson:Fa,video:Oa,image:M,canvas:Na},k=function(o,t){this.max=o,this.onRemove=t,this.reset()};k.prototype.reset=function(){for(var a in this.data)for(var t=0,e=this.data[a],r;t<e.length;t+=1)r=e[t],r.timeout&&clearTimeout(r.timeout),this.onRemove(r.value);return this.data={},this.order=[],this},k.prototype.add=function(s,t,l){var i=this,o=s.wrapped().key;void 0===this.data[o]&&(this.data[o]=[]);var r={value:t,timeout:void 0};if(void 0!==l&&(r.timeout=setTimeout(function(){i.remove(s,r)},l)),this.data[o].push(r),this.order.push(o),this.order.length>this.max){var a=this._getAndRemoveByKey(this.order[0]);a&&this.onRemove(a)}return this},k.prototype.has=function(e){return e.wrapped().key in this.data},k.prototype.getAndRemove=function(e){return this.has(e)?this._getAndRemoveByKey(e.wrapped().key):null},k.prototype._getAndRemoveByKey=function(o){var t=this.data[o].shift();return t.timeout&&clearTimeout(t.timeout),0===this.data[o].length&&delete this.data[o],this.order.splice(this.order.indexOf(o),1),t.value},k.prototype.getByKey=function(o){var t=this.data[o];return t?t[0].value:null},k.prototype.get=function(e){return this.has(e)?this.data[e.wrapped().key][0].value:null},k.prototype.remove=function(a,t){if(!this.has(a))return this;var e=a.wrapped().key,n=void 0===t?0:this.data[e].indexOf(t),o=this.data[e][n];return this.data[e].splice(n,1),o.timeout&&clearTimeout(o.timeout),0===this.data[e].length&&delete this.data[e],this.onRemove(o.value),this.order.splice(this.order.indexOf(e),1),this},k.prototype.setMaxSize=function(o){for(this.max=o;this.order.length>this.max;){var t=this._getAndRemoveByKey(this.order[0]);t&&this.onRemove(t)}return this},k.prototype.filter=function(p){var t=[];for(var e in this.data)for(var i=0,o=this.data[e],r;i<o.length;i+=1)r=o[i],p(r.value)||t.push(r);for(var a=0,n=t,s;a<n.length;a+=1)s=n[a],this.remove(s.value.tileID,s)};var U=function(a,t,e){this.context=a;var r=a.gl;this.buffer=r.createBuffer(),this.dynamicDraw=!!e,this.context.unbindVAO(),a.bindElementBuffer.set(this.buffer),r.bufferData(r.ELEMENT_ARRAY_BUFFER,t.arrayBuffer,this.dynamicDraw?r.DYNAMIC_DRAW:r.STATIC_DRAW),this.dynamicDraw||delete t.arrayBuffer};U.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},U.prototype.updateData=function(o){var t=this.context.gl;this.context.unbindVAO(),this.bind(),t.bufferSubData(t.ELEMENT_ARRAY_BUFFER,0,o.arrayBuffer)},U.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var Va={Int8:'BYTE',Uint8:'UNSIGNED_BYTE',Int16:'SHORT',Uint16:'UNSIGNED_SHORT',Int32:'INT',Uint32:'UNSIGNED_INT',Float32:'FLOAT'},Z=function(a,t,e,n){this.length=t.length,this.attributes=e,this.itemSize=t.bytesPerElement,this.dynamicDraw=n,this.context=a;var o=a.gl;this.buffer=o.createBuffer(),a.bindVertexBuffer.set(this.buffer),o.bufferData(o.ARRAY_BUFFER,t.arrayBuffer,this.dynamicDraw?o.DYNAMIC_DRAW:o.STATIC_DRAW),this.dynamicDraw||delete t.arrayBuffer};Z.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},Z.prototype.updateData=function(o){var t=this.context.gl;this.bind(),t.bufferSubData(t.ARRAY_BUFFER,0,o.arrayBuffer)},Z.prototype.enableAttributes=function(a,t){for(var e=0,r;e<this.attributes.length;e++)r=t.attributes[this.attributes[e].name],void 0!==r&&a.enableVertexAttribArray(r)},Z.prototype.setVertexAttribPointers=function(n,t,e){for(var i=0;i<this.attributes.length;i++){var o=this.attributes[i],r=t.attributes[o.name];void 0!==r&&n.vertexAttribPointer(r,o.components,n[Va[o.type]],!1,this.itemSize,o.offset+this.itemSize*(e||0))}},Z.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var q=function(e){this.gl=e.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};q.prototype.get=function(){return this.current},q.prototype.set=function(){},q.prototype.getDefault=function(){return this.default},q.prototype.setDefault=function(){this.set(this.default)};var j=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return aa.Color.transparent},e.prototype.set=function(o){var t=this.current;(o.r!==t.r||o.g!==t.g||o.b!==t.b||o.a!==t.a||this.dirty)&&(this.gl.clearColor(o.r,o.g,o.b,o.a),this.current=o,this.dirty=!1)},e}(q),V=function(o){function t(){o.apply(this,arguments)}return o&&(t.__proto__=o),(t.prototype=Object.create(o&&o.prototype)).constructor=t,t.prototype.getDefault=function(){return 1},t.prototype.set=function(e){(e!==this.current||this.dirty)&&(this.gl.clearDepth(e),this.current=e,this.dirty=!1)},t}(q),G=function(o){function t(){o.apply(this,arguments)}return o&&(t.__proto__=o),(t.prototype=Object.create(o&&o.prototype)).constructor=t,t.prototype.getDefault=function(){return 0},t.prototype.set=function(e){(e!==this.current||this.dirty)&&(this.gl.clearStencil(e),this.current=e,this.dirty=!1)},t}(q),W=function(o){function t(){o.apply(this,arguments)}return o&&(t.__proto__=o),(t.prototype=Object.create(o&&o.prototype)).constructor=t,t.prototype.getDefault=function(){return[!0,!0,!0,!0]},t.prototype.set=function(o){var t=this.current;(o[0]!==t[0]||o[1]!==t[1]||o[2]!==t[2]||o[3]!==t[3]||this.dirty)&&(this.gl.colorMask(o[0],o[1],o[2],o[3]),this.current=o,this.dirty=!1)},t}(q),X=function(o){function t(){o.apply(this,arguments)}return o&&(t.__proto__=o),(t.prototype=Object.create(o&&o.prototype)).constructor=t,t.prototype.getDefault=function(){return!0},t.prototype.set=function(e){(e!==this.current||this.dirty)&&(this.gl.depthMask(e),this.current=e,this.dirty=!1)},t}(q),H=function(o){function t(){o.apply(this,arguments)}return o&&(t.__proto__=o),(t.prototype=Object.create(o&&o.prototype)).constructor=t,t.prototype.getDefault=function(){return 255},t.prototype.set=function(e){(e!==this.current||this.dirty)&&(this.gl.stencilMask(e),this.current=e,this.dirty=!1)},t}(q),K=function(o){function t(){o.apply(this,arguments)}return o&&(t.__proto__=o),(t.prototype=Object.create(o&&o.prototype)).constructor=t,t.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},t.prototype.set=function(o){var t=this.current;(o.func!==t.func||o.ref!==t.ref||o.mask!==t.mask||this.dirty)&&(this.gl.stencilFunc(o.func,o.ref,o.mask),this.current=o,this.dirty=!1)},t}(q),Y=function(o){function t(){o.apply(this,arguments)}return o&&(t.__proto__=o),(t.prototype=Object.create(o&&o.prototype)).constructor=t,t.prototype.getDefault=function(){var e=this.gl;return[e.KEEP,e.KEEP,e.KEEP]},t.prototype.set=function(o){var t=this.current;(o[0]!==t[0]||o[1]!==t[1]||o[2]!==t[2]||this.dirty)&&(this.gl.stencilOp(o[0],o[1],o[2]),this.current=o,this.dirty=!1)},t}(q),J=function(o){function t(){o.apply(this,arguments)}return o&&(t.__proto__=o),(t.prototype=Object.create(o&&o.prototype)).constructor=t,t.prototype.getDefault=function(){return!1},t.prototype.set=function(o){if(o!==this.current||this.dirty){var t=this.gl;o?t.enable(t.STENCIL_TEST):t.disable(t.STENCIL_TEST),this.current=o,this.dirty=!1}},t}(q),Q=function(o){function t(){o.apply(this,arguments)}return o&&(t.__proto__=o),(t.prototype=Object.create(o&&o.prototype)).constructor=t,t.prototype.getDefault=function(){return[0,1]},t.prototype.set=function(o){var t=this.current;(o[0]!==t[0]||o[1]!==t[1]||this.dirty)&&(this.gl.depthRange(o[0],o[1]),this.current=o,this.dirty=!1)},t}(q),$=function(o){function t(){o.apply(this,arguments)}return o&&(t.__proto__=o),(t.prototype=Object.create(o&&o.prototype)).constructor=t,t.prototype.getDefault=function(){return!1},t.prototype.set=function(o){if(o!==this.current||this.dirty){var t=this.gl;o?t.enable(t.DEPTH_TEST):t.disable(t.DEPTH_TEST),this.current=o,this.dirty=!1}},t}(q),tt=function(o){function t(){o.apply(this,arguments)}return o&&(t.__proto__=o),(t.prototype=Object.create(o&&o.prototype)).constructor=t,t.prototype.getDefault=function(){return this.gl.LESS},t.prototype.set=function(e){(e!==this.current||this.dirty)&&(this.gl.depthFunc(e),this.current=e,this.dirty=!1)},t}(q),et=function(o){function t(){o.apply(this,arguments)}return o&&(t.__proto__=o),(t.prototype=Object.create(o&&o.prototype)).constructor=t,t.prototype.getDefault=function(){return!1},t.prototype.set=function(o){if(o!==this.current||this.dirty){var t=this.gl;o?t.enable(t.BLEND):t.disable(t.BLEND),this.current=o,this.dirty=!1}},t}(q),it=function(o){function t(){o.apply(this,arguments)}return o&&(t.__proto__=o),(t.prototype=Object.create(o&&o.prototype)).constructor=t,t.prototype.getDefault=function(){var e=this.gl;return[e.ONE,e.ZERO]},t.prototype.set=function(o){var t=this.current;(o[0]!==t[0]||o[1]!==t[1]||this.dirty)&&(this.gl.blendFunc(o[0],o[1]),this.current=o,this.dirty=!1)},t}(q),ot=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return aa.Color.transparent},e.prototype.set=function(o){var t=this.current;(o.r!==t.r||o.g!==t.g||o.b!==t.b||o.a!==t.a||this.dirty)&&(this.gl.blendColor(o.r,o.g,o.b,o.a),this.current=o,this.dirty=!1)},e}(q),rt=function(o){function t(){o.apply(this,arguments)}return o&&(t.__proto__=o),(t.prototype=Object.create(o&&o.prototype)).constructor=t,t.prototype.getDefault=function(){return this.gl.FUNC_ADD},t.prototype.set=function(e){(e!==this.current||this.dirty)&&(this.gl.blendEquation(e),this.current=e,this.dirty=!1)},t}(q),at=function(o){function t(){o.apply(this,arguments)}return o&&(t.__proto__=o),(t.prototype=Object.create(o&&o.prototype)).constructor=t,t.prototype.getDefault=function(){return!1},t.prototype.set=function(o){if(o!==this.current||this.dirty){var t=this.gl;o?t.enable(t.CULL_FACE):t.disable(t.CULL_FACE),this.current=o,this.dirty=!1}},t}(q),nt=function(o){function t(){o.apply(this,arguments)}return o&&(t.__proto__=o),(t.prototype=Object.create(o&&o.prototype)).constructor=t,t.prototype.getDefault=function(){return this.gl.BACK},t.prototype.set=function(e){(e!==this.current||this.dirty)&&(this.gl.cullFace(e),this.current=e,this.dirty=!1)},t}(q),st=function(o){function t(){o.apply(this,arguments)}return o&&(t.__proto__=o),(t.prototype=Object.create(o&&o.prototype)).constructor=t,t.prototype.getDefault=function(){return this.gl.CCW},t.prototype.set=function(e){(e!==this.current||this.dirty)&&(this.gl.frontFace(e),this.current=e,this.dirty=!1)},t}(q),lt=function(o){function t(){o.apply(this,arguments)}return o&&(t.__proto__=o),(t.prototype=Object.create(o&&o.prototype)).constructor=t,t.prototype.getDefault=function(){return null},t.prototype.set=function(e){(e!==this.current||this.dirty)&&(this.gl.useProgram(e),this.current=e,this.dirty=!1)},t}(q),ct=function(o){function t(){o.apply(this,arguments)}return o&&(t.__proto__=o),(t.prototype=Object.create(o&&o.prototype)).constructor=t,t.prototype.getDefault=function(){return this.gl.TEXTURE0},t.prototype.set=function(e){(e!==this.current||this.dirty)&&(this.gl.activeTexture(e),this.current=e,this.dirty=!1)},t}(q),ut=function(o){function t(){o.apply(this,arguments)}return o&&(t.__proto__=o),(t.prototype=Object.create(o&&o.prototype)).constructor=t,t.prototype.getDefault=function(){var e=this.gl;return[0,0,e.drawingBufferWidth,e.drawingBufferHeight]},t.prototype.set=function(o){var t=this.current;(o[0]!==t[0]||o[1]!==t[1]||o[2]!==t[2]||o[3]!==t[3]||this.dirty)&&(this.gl.viewport(o[0],o[1],o[2],o[3]),this.current=o,this.dirty=!1)},t}(q),ht=function(o){function t(){o.apply(this,arguments)}return o&&(t.__proto__=o),(t.prototype=Object.create(o&&o.prototype)).constructor=t,t.prototype.getDefault=function(){return null},t.prototype.set=function(o){if(o!==this.current||this.dirty){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,o),this.current=o,this.dirty=!1}},t}(q),pt=function(o){function t(){o.apply(this,arguments)}return o&&(t.__proto__=o),(t.prototype=Object.create(o&&o.prototype)).constructor=t,t.prototype.getDefault=function(){return null},t.prototype.set=function(o){if(o!==this.current||this.dirty){var t=this.gl;t.bindRenderbuffer(t.RENDERBUFFER,o),this.current=o,this.dirty=!1}},t}(q),dt=function(o){function t(){o.apply(this,arguments)}return o&&(t.__proto__=o),(t.prototype=Object.create(o&&o.prototype)).constructor=t,t.prototype.getDefault=function(){return null},t.prototype.set=function(o){if(o!==this.current||this.dirty){var t=this.gl;t.bindTexture(t.TEXTURE_2D,o),this.current=o,this.dirty=!1}},t}(q),_t=function(o){function t(){o.apply(this,arguments)}return o&&(t.__proto__=o),(t.prototype=Object.create(o&&o.prototype)).constructor=t,t.prototype.getDefault=function(){return null},t.prototype.set=function(o){if(o!==this.current||this.dirty){var t=this.gl;t.bindBuffer(t.ARRAY_BUFFER,o),this.current=o,this.dirty=!1}},t}(q),ft=function(o){function t(){o.apply(this,arguments)}return o&&(t.__proto__=o),(t.prototype=Object.create(o&&o.prototype)).constructor=t,t.prototype.getDefault=function(){return null},t.prototype.set=function(o){var t=this.gl;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,o),this.current=o,this.dirty=!1},t}(q),mt=function(o){function t(t){o.call(this,t),this.vao=t.extVertexArrayObject}return o&&(t.__proto__=o),(t.prototype=Object.create(o&&o.prototype)).constructor=t,t.prototype.getDefault=function(){return null},t.prototype.set=function(e){this.vao&&(e!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(e),this.current=e,this.dirty=!1)},t}(q),gt=function(o){function t(){o.apply(this,arguments)}return o&&(t.__proto__=o),(t.prototype=Object.create(o&&o.prototype)).constructor=t,t.prototype.getDefault=function(){return 4},t.prototype.set=function(o){if(o!==this.current||this.dirty){var t=this.gl;t.pixelStorei(t.UNPACK_ALIGNMENT,o),this.current=o,this.dirty=!1}},t}(q),vt=function(o){function t(){o.apply(this,arguments)}return o&&(t.__proto__=o),(t.prototype=Object.create(o&&o.prototype)).constructor=t,t.prototype.getDefault=function(){return!1},t.prototype.set=function(o){if(o!==this.current||this.dirty){var t=this.gl;t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,o),this.current=o,this.dirty=!1}},t}(q),yt=function(o){function t(){o.apply(this,arguments)}return o&&(t.__proto__=o),(t.prototype=Object.create(o&&o.prototype)).constructor=t,t.prototype.getDefault=function(){return!1},t.prototype.set=function(o){if(o!==this.current||this.dirty){var t=this.gl;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,o),this.current=o,this.dirty=!1}},t}(q),xt=function(o){function t(t,a){o.call(this,t),this.context=t,this.parent=a}return o&&(t.__proto__=o),(t.prototype=Object.create(o&&o.prototype)).constructor=t,t.prototype.getDefault=function(){return null},t}(q),bt=function(o){function t(){o.apply(this,arguments)}return o&&(t.__proto__=o),(t.prototype=Object.create(o&&o.prototype)).constructor=t,t.prototype.setDirty=function(){this.dirty=!0},t.prototype.set=function(o){if(o!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var t=this.gl;t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,o,0),this.current=o,this.dirty=!1}},t}(xt),wt=function(o){function t(){o.apply(this,arguments)}return o&&(t.__proto__=o),(t.prototype=Object.create(o&&o.prototype)).constructor=t,t.prototype.set=function(o){if(o!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var t=this.gl;t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,o),this.current=o,this.dirty=!1}},t}(xt),Tt=function(a,t,e,n){this.context=a,this.width=t,this.height=e;var o=this.framebuffer=a.gl.createFramebuffer();this.colorAttachment=new bt(a,o),n&&(this.depthAttachment=new wt(a,o))};Tt.prototype.destroy=function(){var o=this.context.gl,t=this.colorAttachment.get();if(t&&o.deleteTexture(t),this.depthAttachment){var e=this.depthAttachment.get();e&&o.deleteRenderbuffer(e)}o.deleteFramebuffer(this.framebuffer)};var Et=function(o,t,e){this.func=o,this.mask=t,this.range=e};Et.ReadOnly=!1,Et.ReadWrite=!0,Et.disabled=new Et(519,Et.ReadOnly,[0,1]);var It=function(n,t,e,i,o,r){this.test=n,this.ref=t,this.mask=e,this.fail=i,this.depthFail=o,this.pass=r};It.disabled=new It({func:519,mask:0},0,0,7680,7680,7680);var Pt=function(o,t,e){this.blendFunction=o,this.blendColor=t,this.mask=e};Pt.disabled=new Pt(Pt.Replace=[1,0],aa.Color.transparent,[!1,!1,!1,!1]),Pt.unblended=new Pt(Pt.Replace,aa.Color.transparent,[!0,!0,!0,!0]),Pt.alphaBlended=new Pt([1,771],aa.Color.transparent,[!0,!0,!0,!0]);var St=function(o,t,e){this.enable=o,this.mode=t,this.frontFace=e};St.disabled=new St(!1,1029,2305),St.backCCW=new St(!0,1029,2305);var Ct=function(e){this.gl=e,this.extVertexArrayObject=this.gl.getExtension('OES_vertex_array_object'),this.clearColor=new j(this),this.clearDepth=new V(this),this.clearStencil=new G(this),this.colorMask=new W(this),this.depthMask=new X(this),this.stencilMask=new H(this),this.stencilFunc=new K(this),this.stencilOp=new Y(this),this.stencilTest=new J(this),this.depthRange=new Q(this),this.depthTest=new $(this),this.depthFunc=new tt(this),this.blend=new et(this),this.blendFunc=new it(this),this.blendColor=new ot(this),this.blendEquation=new rt(this),this.cullFace=new at(this),this.cullFaceSide=new nt(this),this.frontFace=new st(this),this.program=new lt(this),this.activeTexture=new ct(this),this.viewport=new ut(this),this.bindFramebuffer=new ht(this),this.bindRenderbuffer=new pt(this),this.bindTexture=new dt(this),this.bindVertexBuffer=new _t(this),this.bindElementBuffer=new ft(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new mt(this),this.pixelStoreUnpack=new gt(this),this.pixelStoreUnpackPremultiplyAlpha=new vt(this),this.pixelStoreUnpackFlipY=new yt(this),this.extTextureFilterAnisotropic=e.getExtension('EXT_texture_filter_anisotropic')||e.getExtension('MOZ_EXT_texture_filter_anisotropic')||e.getExtension('WEBKIT_EXT_texture_filter_anisotropic'),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=e.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=e.getExtension('OES_texture_half_float'),this.extTextureHalfFloat&&(e.getExtension('OES_texture_half_float_linear'),this.extRenderToTextureHalfFloat=e.getExtension('EXT_color_buffer_half_float')),this.extTimerQuery=e.getExtension('EXT_disjoint_timer_query'),this.maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE)};Ct.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},Ct.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},Ct.prototype.createIndexBuffer=function(o,t){return new U(this,o,t)},Ct.prototype.createVertexBuffer=function(o,t,e){return new Z(this,o,t,e)},Ct.prototype.createRenderbuffer=function(a,t,e){var n=this.gl,o=n.createRenderbuffer();return this.bindRenderbuffer.set(o),n.renderbufferStorage(n.RENDERBUFFER,a,t,e),this.bindRenderbuffer.set(null),o},Ct.prototype.createFramebuffer=function(o,t,e){return new Tt(this,o,t,e)},Ct.prototype.clear=function(a){var t=a.color,e=a.depth,n=this.gl,o=0;t&&(o|=n.COLOR_BUFFER_BIT,this.clearColor.set(t),this.colorMask.set([!0,!0,!0,!0])),void 0!==e&&(o|=n.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(e),this.depthMask.set(!0)),n.clear(o)},Ct.prototype.setCullFace=function(e){!1===e.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(e.mode),this.frontFace.set(e.frontFace))},Ct.prototype.setDepthMode=function(e){e.func!==this.gl.ALWAYS||e.mask?(this.depthTest.set(!0),this.depthFunc.set(e.func),this.depthMask.set(e.mask),this.depthRange.set(e.range)):this.depthTest.set(!1)},Ct.prototype.setStencilMode=function(e){e.test.func!==this.gl.ALWAYS||e.mask?(this.stencilTest.set(!0),this.stencilMask.set(e.mask),this.stencilOp.set([e.fail,e.depthFail,e.pass]),this.stencilFunc.set({func:e.test.func,ref:e.ref,mask:e.test.mask})):this.stencilTest.set(!1)},Ct.prototype.setColorMode=function(t){aa.deepEqual(t.blendFunction,Pt.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(t.blendFunction),this.blendColor.set(t.blendColor)),this.colorMask.set(t.mask)},Ct.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var zt=function(t){function T(e,n,o){var r=this;t.call(this),this.id=e,this.dispatcher=o,this.on('data',function(e){'source'===e.dataType&&'metadata'===e.sourceDataType&&(r._sourceLoaded=!0),r._sourceLoaded&&!r._paused&&'source'===e.dataType&&'content'===e.sourceDataType&&(r.reload(),r.transform&&r.update(r.transform))}),this.on('error',function(){r._sourceErrored=!0}),this._source=function(t,e,n,o){var r=new Ua[e.type](t,e,n,o);if(r.id!==t)throw new Error('Expected Source id to be '+t+' instead of '+r.id);return aa.bindAll(['load','abort','unload','serialize','prepare'],r),r}(e,n,o,this),this._tiles={},this._cache=new k(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new aa.SourceFeatureState}return t&&(T.__proto__=t),(T.prototype=Object.create(t&&t.prototype)).constructor=T,T.prototype.onAdd=function(e){this.map=e,this._maxTileCacheSize=e?e._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(e)},T.prototype.onRemove=function(e){this._source&&this._source.onRemove&&this._source.onRemove(e)},T.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;if(!this._source.loaded())return!1;for(var o in this._tiles){var t=this._tiles[o];if('loaded'!==t.state&&'errored'!==t.state)return!1}return!0},T.prototype.getSource=function(){return this._source},T.prototype.pause=function(){this._paused=!0},T.prototype.resume=function(){if(this._paused){var e=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,e&&this.reload(),this.transform&&this.update(this.transform)}},T.prototype._loadTile=function(o,t){return this._source.loadTile(o,t)},T.prototype._unloadTile=function(e){if(this._source.unloadTile)return this._source.unloadTile(e,function(){})},T.prototype._abortTile=function(e){if(this._source.abortTile)return this._source.abortTile(e,function(){})},T.prototype.serialize=function(){return this._source.serialize()},T.prototype.prepare=function(o){for(var t in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var e=this._tiles[t];e.upload(o),e.prepare(this.map.style.imageManager)}},T.prototype.getIds=function(){return aa.values(this._tiles).map(function(e){return e.tileID}).sort(F).map(function(e){return e.key})},T.prototype.getRenderableIds=function(t){var l=this,e=[];for(var o in this._tiles)this._isIdRenderable(o,t)&&e.push(this._tiles[o]);return t?e.sort(function(t,e){var o=t.tileID,r=e.tileID,a=new aa.Point(o.canonical.x,o.canonical.y)._rotate(l.transform.angle),n=new aa.Point(r.canonical.x,r.canonical.y)._rotate(l.transform.angle);return o.overscaledZ-r.overscaledZ||n.y-a.y||n.x-a.x}).map(function(e){return e.tileID.key}):e.map(function(e){return e.tileID}).sort(F).map(function(e){return e.key})},T.prototype.hasRenderableParent=function(o){var t=this.findLoadedParent(o,0);return!!t&&this._isIdRenderable(t.tileID.key)},T.prototype._isIdRenderable=function(o,t){return this._tiles[o]&&this._tiles[o].hasData()&&!this._coveredTiles[o]&&(t||!this._tiles[o].holdingForFade())},T.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var e in this._cache.reset(),this._tiles)'errored'!==this._tiles[e].state&&this._reloadTile(e,'reloading')},T.prototype._reloadTile=function(o,t){var e=this._tiles[o];e&&('loading'!==e.state&&(e.state=t),this._loadTile(e,this._tileLoaded.bind(this,e,o,t)))},T.prototype._tileLoaded=function(t,a,n,o){return o?(t.state='errored',void(404===o.status?this.update(this.transform):this._source.fire(new aa.ErrorEvent(o,{tile:t})))):void(t.timeAdded=aa.browser.now(),'expired'===n&&(t.refreshedUponExpiration=!0),this._setTileReloadTimer(a,t),'raster-dem'===this.getSource().type&&t.dem&&this._backfillDEM(t),this._state.initializeTileState(t,this.map?this.map.painter:null),this._source.fire(new aa.Event('data',{dataType:'source',tile:t,coord:t.tileID})))},T.prototype._backfillDEM=function(n){function t(n,t){n.needsHillshadePrepare=!0;var e=t.tileID.canonical.x-n.tileID.canonical.x,i=t.tileID.canonical.y-n.tileID.canonical.y,o=C(2,n.tileID.canonical.z),r=t.tileID.key;0===e&&0==i||1<B(i)||(1<B(e)&&(1===B(e+o)?e+=o:1===B(e-o)&&(e-=o)),t.dem&&n.dem&&(n.dem.backfillBorder(t.dem,e,i),n.neighboringTiles&&n.neighboringTiles[r]&&(n.neighboringTiles[r].backfilled=!0)))}for(var a=this.getRenderableIds(),e=0,i;e<a.length;e++)if(i=a[e],n.neighboringTiles&&n.neighboringTiles[i]){var o=this.getTileByID(i);t(n,o),t(o,n)}},T.prototype.getTile=function(e){return this.getTileByID(e.key)},T.prototype.getTileByID=function(e){return this._tiles[e]},T.prototype._retainLoadedChildren=function(p,t,e,i){for(var o in this._tiles){var r=this._tiles[o];if(!(i[o]||!r.hasData()||r.tileID.overscaledZ<=t||r.tileID.overscaledZ>e)){for(var a=r.tileID,n;r&&r.tileID.overscaledZ>t+1;)n=r.tileID.scaledTo(r.tileID.overscaledZ-1),(r=this._tiles[n.key])&&r.hasData()&&(a=n);for(var s=a;s.overscaledZ>t;)if(p[(s=s.scaledTo(s.overscaledZ-1)).key]){i[a.key]=a;break}}}},T.prototype.findLoadedParent=function(n,t){if(n.key in this._loadedParentTiles){var e=this._loadedParentTiles[n.key];return e&&e.tileID.overscaledZ>=t?e:null}for(var i=n.overscaledZ-1;i>=t;i--){var o=n.scaledTo(i),r=this._getLoadedTile(o);if(r)return r}},T.prototype._getLoadedTile=function(o){var t=this._tiles[o.key];return t&&t.hasData()?t:this._cache.getByKey(o.wrapped().key)},T.prototype.updateCacheSize=function(a){var t=m(a.width/this._source.tileSize)+1,e=m(a.height/this._source.tileSize)+1,n=ea(5*(t*e)),o='number'==typeof this._maxTileCacheSize?ta(this._maxTileCacheSize,n):n;this._cache.setMaxSize(o)},T.prototype.handleWrapJump=function(s){var t=b((s-(void 0===this._prevLng?s:this._prevLng))/360);if(this._prevLng=s,t){var e={};for(var i in this._tiles){var o=this._tiles[i];o.tileID=o.tileID.unwrapTo(o.tileID.wrap+t),e[o.tileID.key]=o}for(var r in this._tiles=e,this._timers)clearTimeout(this._timers[r]),delete this._timers[r];for(var a in this._tiles)this._setTileReloadTimer(a,this._tiles[a])}},T.prototype.update=function(t){var e=this;if(this.transform=t,this._sourceLoaded&&!this._paused){var o;this.updateCacheSize(t),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?o=t.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(t){return new aa.OverscaledTileID(t.canonical.z,t.wrap,t.canonical.z,t.canonical.x,t.canonical.y)}):(o=t.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(o=o.filter(function(o){return e._source.hasTile(o)}))):o=[];var r=t.coveringZoomLevel(this._source),a=oa(r-T.maxOverzooming,this._source.minzoom),n=oa(r+T.maxUnderzooming,this._source.minzoom),i=this._updateRetainedTiles(o,r);if(Mt(this._source.type)){for(var s={},l={},c=0,u=Object.keys(i);c<u.length;c+=1){var p=u[c],d=i[p],_=this._tiles[p];if(_&&!(_.fadeEndTime&&_.fadeEndTime<=aa.browser.now())){var f=this.findLoadedParent(d,a);f&&(this._addTile(f.tileID),s[f.tileID.key]=f.tileID),l[p]=d}}for(var m in this._retainLoadedChildren(l,r,n,i),s)i[m]||(this._coveredTiles[m]=!0,i[m]=s[m])}for(var g in i)this._tiles[g].clearFadeHold();for(var h=0,y=aa.keysDifference(this._tiles,i);h<y.length;h+=1){var x=y[h],v=this._tiles[x];v.hasSymbolBuckets&&!v.holdingForFade()?v.setHoldDuration(this.map._fadeDuration):v.hasSymbolBuckets&&!v.symbolFadeFinished()||this._removeTile(x)}this._updateLoadedParentTileCache()}},T.prototype.releaseSymbolFadeTiles=function(){for(var e in this._tiles)this._tiles[e].holdingForFade()&&this._removeTile(e)},T.prototype._updateRetainedTiles=function(i,t){for(var e={},o={},r=oa(t-T.maxOverzooming,this._source.minzoom),a=oa(t+T.maxUnderzooming,this._source.minzoom),n={},s=0,l=i;s<l.length;s+=1){var c=l[s],u=this._addTile(c);e[c.key]=c,u.hasData()||t<this._source.maxzoom&&(n[c.key]=c)}this._retainLoadedChildren(n,t,a,e);for(var h=0,p=i;h<p.length;h+=1){var d=p[h],_=this._tiles[d.key];if(!_.hasData()){if(t+1>this._source.maxzoom){var f=d.children(this._source.maxzoom)[0],m=this.getTile(f);if(m&&m.hasData()){e[f.key]=f;continue}}else{var g=d.children(this._source.maxzoom);if(e[g[0].key]&&e[g[1].key]&&e[g[2].key]&&e[g[3].key])continue}for(var v=_.wasRequested(),y=d.overscaledZ-1,x;y>=r&&(x=d.scaledTo(y),!o[x.key])&&(o[x.key]=!0,!(_=this.getTile(x))&&v&&(_=this._addTile(x)),!(_&&(e[x.key]=x,v=_.wasRequested(),_.hasData())));--y);}}return e},T.prototype._updateLoadedParentTileCache=function(){for(var s in this._loadedParentTiles={},this._tiles){for(var t=[],e=void 0,i=this._tiles[s].tileID;0<i.overscaledZ;){if(i.key in this._loadedParentTiles){e=this._loadedParentTiles[i.key];break}t.push(i.key);var o=i.scaledTo(i.overscaledZ-1);if(e=this._getLoadedTile(o))break;i=o}for(var r=0,a=t;r<a.length;r+=1)this._loadedParentTiles[a[r]]=e}},T.prototype._addTile=function(t){var e=this._tiles[t.key];if(e)return e;(e=this._cache.getAndRemove(t))&&(this._setTileReloadTimer(t.key,e),e.tileID=t,this._state.initializeTileState(e,this.map?this.map.painter:null),this._cacheTimers[t.key]&&(clearTimeout(this._cacheTimers[t.key]),delete this._cacheTimers[t.key],this._setTileReloadTimer(t.key,e)));var a=!!e;return a||(e=new aa.Tile(t,this._source.tileSize*t.overscaleFactor()),this._loadTile(e,this._tileLoaded.bind(this,e,t.key,e.state))),e?(e.uses++,this._tiles[t.key]=e,a||this._source.fire(new aa.Event('dataloading',{tile:e,coord:e.tileID,dataType:'source'})),e):null},T.prototype._setTileReloadTimer=function(a,t){var e=this;a in this._timers&&(clearTimeout(this._timers[a]),delete this._timers[a]);var r=t.getExpiryTimeout();r&&(this._timers[a]=setTimeout(function(){e._reloadTile(a,'expired'),delete e._timers[a]},r))},T.prototype._removeTile=function(o){var t=this._tiles[o];t&&(t.uses--,delete this._tiles[o],this._timers[o]&&(clearTimeout(this._timers[o]),delete this._timers[o]),0<t.uses||(t.hasData()&&'reloading'!==t.state?this._cache.add(t.tileID,t,t.getExpiryTimeout()):(t.aborted=!0,this._abortTile(t),this._unloadTile(t))))},T.prototype.clearTiles=function(){for(var e in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(e);this._cache.reset()},T.prototype.tilesIn=function(t,e,i){var x=this,r=[],a=this.transform;if(!a)return r;for(var o=i?a.getCameraQueryGeometry(t):t,b=t.map(function(e){return a.pointCoordinate(e)}),l=o.map(function(e){return a.pointCoordinate(e)}),c=this.getIds(),u=1/0,h=1/0,p=-1/0,d=-1/0,s=0,_=l,m;s<_.length;s+=1)m=_[s],u=ta(u,m.x),h=ta(h,m.y),p=oa(p,m.x),d=oa(d,m.y);for(var g=function(t){var n=x._tiles[c[t]];if(!n.holdingForFade()){var i=n.tileID,_=C(2,a.zoom-n.tileID.overscaledZ),w=e*n.queryPadding*aa.EXTENT/n.tileSize/_,m=[i.getTilePoint(new aa.MercatorCoordinate(u,h)),i.getTilePoint(new aa.MercatorCoordinate(p,d))];if(m[0].x-w<aa.EXTENT&&m[0].y-w<aa.EXTENT&&0<=m[1].x+w&&0<=m[1].y+w){var g=b.map(function(e){return i.getTilePoint(e)}),T=l.map(function(e){return i.getTilePoint(e)});r.push({tile:n,tileID:i,queryGeometry:g,cameraQueryGeometry:T,scale:_})}}},f=0;f<c.length;f++)g(f);return r},T.prototype.getVisibleCoordinates=function(n){for(var s=this,e=this.getRenderableIds(n).map(function(e){return s._tiles[e].tileID}),t=0,o=e,r;t<o.length;t+=1)r=o[t],r.posMatrix=this.transform.calculatePosMatrix(r.toUnwrapped());return e},T.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(Mt(this._source.type))for(var t in this._tiles){var e=this._tiles[t];if(void 0!==e.fadeEndTime&&e.fadeEndTime>=aa.browser.now())return!0}return!1},T.prototype.setFeatureState=function(o,t,e){this._state.updateState(o=o||'_geojsonTileLayer',t,e)},T.prototype.removeFeatureState=function(o,t,e){this._state.removeFeatureState(o=o||'_geojsonTileLayer',t,e)},T.prototype.getFeatureState=function(o,t){return this._state.getState(o=o||'_geojsonTileLayer',t)},T.prototype.setDependencies=function(a,t,e){var r=this._tiles[a];r&&r.setDependencies(t,e)},T.prototype.reloadTilesForDependencies=function(o,t){for(var e in this._tiles)this._tiles[e].hasDependency(o,t)&&this._reloadTile(e,'reloading');this._cache.filter(function(e){return!e.hasDependency(o,t)})},T}(aa.Evented);zt.maxOverzooming=10,zt.maxUnderzooming=3;var Dt='mapboxgl_preloaded_worker_pool',Rt=function(){this.active={}};Rt.prototype.acquire=function(e){if(!this.workers)for(this.workers=[];this.workers.length<Rt.workerCount;)this.workers.push(new Lt);return this.active[e]=!0,this.workers.slice()},Rt.prototype.release=function(e){delete this.active[e],0===this.numActive()&&(this.workers.forEach(function(e){e.terminate()}),this.workers=null)},Rt.prototype.isPreloaded=function(){return!!this.active[Dt]},Rt.prototype.numActive=function(){return Object.keys(this.active).length};var kt=ea(aa.browser.hardwareConcurrency/2),Ot;Rt.workerCount=oa(ta(kt,6),1);var Bt={setStyle:'setStyle',addLayer:'addLayer',removeLayer:'removeLayer',setPaintProperty:'setPaintProperty',setLayoutProperty:'setLayoutProperty',setFilter:'setFilter',addSource:'addSource',removeSource:'removeSource',setGeoJSONSourceData:'setGeoJSONSourceData',setLayerZoomRange:'setLayerZoomRange',setLayerProperty:'setLayerProperty',setCenter:'setCenter',setZoom:'setZoom',setBearing:'setBearing',setPitch:'setPitch',setSprite:'setSprite',setGlyphs:'setGlyphs',setTransition:'setTransition',setLight:'setLight'},Zt=function(o,t){this.reset(o,t)};Zt.prototype.reset=function(o,t){this.points=o||[],this._distances=[0];for(var e=1;e<this.points.length;e++)this._distances[e]=this._distances[e-1]+this.points[e].dist(this.points[e-1]);this.length=this._distances[this._distances.length-1],this.padding=ta(t||0,.5*this.length),this.paddedLength=this.length-2*this.padding},Zt.prototype.lerp=function(t){if(1===this.points.length)return this.points[0];t=aa.clamp(t,0,1);for(var e=1,i=this._distances[e],o=t*this.paddedLength+this.padding;i<o&&e<this._distances.length;)i=this._distances[++e];var r=e-1,a=this._distances[r],n=i-a,s=0<n?(o-a)/n:0;return this.points[r].mult(1-s).add(this.points[e].mult(s))};var Kt=function(n,t,e){var i=this.boxCells=[],o=this.circleCells=[];this.xCellCount=m(n/e),this.yCellCount=m(t/e);for(var r=0;r<this.xCellCount*this.yCellCount;r++)i.push([]),o.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=n,this.height=t,this.xScale=this.xCellCount/n,this.yScale=this.yCellCount/t,this.boxUid=0,this.circleUid=0};Kt.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},Kt.prototype.insert=function(a,t,e,n,o){this._forEachCell(t,e,n,o,this._insertBoxCell,this.boxUid++),this.boxKeys.push(a),this.bboxes.push(t),this.bboxes.push(e),this.bboxes.push(n),this.bboxes.push(o)},Kt.prototype.insertCircle=function(a,t,e,r){this._forEachCell(t-r,e-r,t+r,e+r,this._insertCircleCell,this.circleUid++),this.circleKeys.push(a),this.circles.push(t),this.circles.push(e),this.circles.push(r)},Kt.prototype._insertBoxCell=function(n,t,e,i,o,r){this.boxCells[o].push(r)},Kt.prototype._insertCircleCell=function(n,t,e,i,o,r){this.circleCells[o].push(r)},Kt.prototype._query=function(p,t,e,i,o,d){if(0>e||p>this.width||0>i||t>this.height)return!o&&[];var a=[];if(0>=p&&0>=t&&this.width<=e&&this.height<=i){if(o)return!0;for(var n=0;n<this.boxKeys.length;n++)a.push({key:this.boxKeys[n],x1:this.bboxes[4*n],y1:this.bboxes[4*n+1],x2:this.bboxes[4*n+2],y2:this.bboxes[4*n+3]});for(var s=0;s<this.circleKeys.length;s++){var l=this.circles[3*s],c=this.circles[3*s+1],u=this.circles[3*s+2];a.push({key:this.circleKeys[s],x1:l-u,y1:c-u,x2:l+u,y2:c+u})}return d?a.filter(d):a}return this._forEachCell(p,t,e,i,this._queryCell,a,{hitTest:o,seenUids:{box:{},circle:{}}},d),o?0<a.length:a},Kt.prototype._queryCircle=function(p,d,u,m,g){var r=p-u,a=p+u,n=d-u,s=d+u;if(0>a||r>this.width||0>s||n>this.height)return!m&&[];var l=[];return this._forEachCell(r,n,a,s,this._queryCellCircle,l,{hitTest:m,circle:{x:p,y:d,radius:u},seenUids:{box:{},circle:{}}},g),m?0<l.length:l},Kt.prototype.query=function(a,t,e,n,o){return this._query(a,t,e,n,!1,o)},Kt.prototype.hitTest=function(a,t,e,n,o){return this._query(a,t,e,n,!0,o)},Kt.prototype.hitTestCircle=function(a,t,e,r){return this._queryCircle(a,t,e,!0,r)},Kt.prototype._queryCell=function(E,t,e,i,o,r,a,n){var S=a.seenUids,l=this.boxCells[o];if(null!==l)for(var c=this.bboxes,u=0,h=l,p;u<h.length;u+=1)if(p=h[u],!S.box[p]){S.box[p]=!0;var d=4*p;if(E<=c[d+2]&&t<=c[d+3]&&e>=c[d+0]&&i>=c[d+1]&&(!n||n(this.boxKeys[p]))){if(a.hitTest)return r.push(!0),!0;r.push({key:this.boxKeys[p],x1:c[d],y1:c[d+1],x2:c[d+2],y2:c[d+3]})}}var _=this.circleCells[o];if(null!==_)for(var f=this.circles,m=0,g=_,v;m<g.length;m+=1)if(v=g[m],!S.circle[v]){S.circle[v]=!0;var y=3*v;if(this._circleAndRectCollide(f[y],f[y+1],f[y+2],E,t,e,i)&&(!n||n(this.circleKeys[v]))){if(a.hitTest)return r.push(!0),!0;var x=f[y],b=f[y+1],w=f[y+2];r.push({key:this.circleKeys[v],x1:x-w,y1:b-w,x2:x+w,y2:b+w})}}},Kt.prototype._queryCellCircle=function(w,t,e,i,o,r,a,n){var T=a.circle,l=a.seenUids,c=this.boxCells[o];if(null!==c)for(var u=this.bboxes,h=0,p=c,d;h<p.length;h+=1)if(d=p[h],!l.box[d]){l.box[d]=!0;var _=4*d;if(this._circleAndRectCollide(T.x,T.y,T.radius,u[_+0],u[_+1],u[_+2],u[_+3])&&(!n||n(this.boxKeys[d])))return r.push(!0),!0}var f=this.circleCells[o];if(null!==f)for(var m=this.circles,g=0,v=f,y;g<v.length;g+=1)if(y=v[g],!l.circle[y]){l.circle[y]=!0;var x=3*y;if(this._circlesCollide(m[x],m[x+1],m[x+2],T.x,T.y,T.radius)&&(!n||n(this.circleKeys[y])))return r.push(!0),!0}},Kt.prototype._forEachCell=function(m,t,e,i,o,r,a,n){for(var s=this._convertToXCellCoord(m),l=this._convertToYCellCoord(t),c=this._convertToXCellCoord(e),u=this._convertToYCellCoord(i),g=s;g<=c;g++)for(var p=l;p<=u;p++)if(o.call(this,m,t,e,i,this.xCellCount*p+g,r,a,n))return},Kt.prototype._convertToXCellCoord=function(e){return oa(0,ta(this.xCellCount-1,ea(e*this.xScale)))},Kt.prototype._convertToYCellCoord=function(e){return oa(0,ta(this.yCellCount-1,ea(e*this.yScale)))},Kt.prototype._circlesCollide=function(p,t,e,i,o,r){var a=i-p,n=o-t,s=e+r;return s*s>a*a+n*n},Kt.prototype._circleAndRectCollide=function(d,t,e,i,o,r,a){var n=(r-i)/2,s=B(d-(i+n));if(s>n+e)return!1;var l=(a-o)/2,c=B(t-(o+l));if(c>l+e)return!1;if(s<=n||c<=l)return!0;var u=s-n,m=c-l;return u*u+m*m<=e*e};var Yt=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]),le=function(o,t,e){void 0===t&&(t=new Kt(o.width+200,o.height+200,25)),void 0===e&&(e=new Kt(o.width+200,o.height+200,25)),this.transform=o,this.grid=t,this.ignoredGrid=e,this.pitchfactor=Ze(o._pitch)*o.cameraToCenterDistance,this.screenRightBoundary=o.width+100,this.screenBottomBoundary=o.height+100,this.gridRightBoundary=o.width+200,this.gridBottomBoundary=o.height+200};le.prototype.placeCollisionBox=function(p,t,e,i,o){var r=this.projectAndGetPerspectiveRatio(i,p.anchorPointX,p.anchorPointY),a=e*r.perspectiveRatio,n=p.x1*a+r.point.x,s=p.y1*a+r.point.y,l=p.x2*a+r.point.x,d=p.y2*a+r.point.y;return this.isInsideGrid(n,s,l,d)&&(t||!this.grid.hitTest(n,s,l,d,o))?{box:[n,s,l,d],offscreen:this.isOffscreen(n,s,l,d)}:{box:[],offscreen:!1}},le.prototype.placeCollisionCircles=function(t,A,i,o,r,a,n,s,l,J,u,h,p){var d=[],_=new aa.Point(A.anchorX,A.anchorY),f=Qt(_,a),$=$t(this.transform.cameraToCenterDistance,f.signedDistanceFromCamera),g=(J?r/$:r*$)/aa.ONE_EM,v=Qt(_,n).point,y=ie(g,o,A.lineOffsetX*g,A.lineOffsetY*g,!1,v,_,A,i,n,{}),x=!1,Q=!1,w=!0;if(y){for(var ee=.5*h*$+p,E=new aa.Point(-100,-100),I=new aa.Point(this.screenRightBoundary,this.screenBottomBoundary),P=new Zt,S=y.first,C=y.last,z=[],D=S.path.length-1;1<=D;D--)z.push(S.path[D]);for(var M=1;M<C.path.length;M++)z.push(C.path[M]);if(s){var L=z.map(function(e){return Qt(e,s)});z=L.some(function(e){return 0>=e.signedDistanceFromCamera})?[]:L.map(function(e){return e.point})}var R=[];if(0<z.length){for(var k=z[0].clone(),B=z[0].clone(),O=1;O<z.length;O++)k.x=ta(k.x,z[O].x),k.y=ta(k.y,z[O].y),B.x=oa(B.x,z[O].x),B.y=oa(B.y,z[O].y);R=k.x>=E.x&&B.x<=I.x&&k.y>=E.y&&B.y<=I.y?[z]:B.x<E.x||k.x>I.x||B.y<E.y||k.y>I.y?[]:aa.clipLine([z],E.x,E.y,I.x,I.y)}for(var F=0,U=R;F<U.length;F+=1){var N;P.reset(U[F],.25*ee),N=P.length<=.5*ee?1:m(P.paddedLength/(2.5*ee))+1;for(var Z=0;Z<N;Z++){var q=Z/oa(N-1,1),j=P.lerp(q),V=j.x+100,G=j.y+100;d.push(V,G,ee,0);var W=V-ee,X=G-ee,H=V+ee,K=G+ee;if(w=w&&this.isOffscreen(W,X,H,K),Q=Q||this.isInsideGrid(W,X,H,K),!t&&this.grid.hitTestCircle(V,G,ee,u)&&(x=!0,!l))return{circles:[],offscreen:!1,collisionDetected:x}}}}return{circles:(l||!x)&&Q?d:[],offscreen:w,collisionDetected:x}},le.prototype.queryRenderedSymbols=function(t){if(0===t.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};for(var e=[],i=1/0,o=1/0,r=-1/0,a=-1/0,n=0,s=t;n<s.length;n+=1){var l=s[n],c=new aa.Point(l.x+100,l.y+100);i=ta(i,c.x),o=ta(o,c.y),r=oa(r,c.x),a=oa(a,c.y),e.push(c)}for(var u={},y={},p=0,d=this.grid.query(i,o,r,a).concat(this.ignoredGrid.query(i,o,r,a));p<d.length;p+=1){var _=d[p],f=_.key;if(void 0===u[f.bucketInstanceId]&&(u[f.bucketInstanceId]={}),!u[f.bucketInstanceId][f.featureIndex]){var m=[new aa.Point(_.x1,_.y1),new aa.Point(_.x2,_.y1),new aa.Point(_.x2,_.y2),new aa.Point(_.x1,_.y2)];aa.polygonIntersectsPolygon(e,m)&&(u[f.bucketInstanceId][f.featureIndex]=!0,void 0===y[f.bucketInstanceId]&&(y[f.bucketInstanceId]=[]),y[f.bucketInstanceId].push(f.featureIndex))}}return y},le.prototype.insertCollisionBox=function(a,t,e,n,s){(t?this.ignoredGrid:this.grid).insert({bucketInstanceId:e,featureIndex:n,collisionGroupID:s},a[0],a[1],a[2],a[3])},le.prototype.insertCollisionCircles=function(l,t,e,p,d){for(var c=t?this.ignoredGrid:this.grid,a={bucketInstanceId:e,featureIndex:p,collisionGroupID:d},n=0;n<l.length;n+=4)c.insertCircle(a,l[n],l[n+1],l[n+2])},le.prototype.projectAndGetPerspectiveRatio=function(t,e,a){var o=[e,a,0,1];return ce(o,o,t),{point:new aa.Point((o[0]/o[3]+1)/2*this.transform.width+100,(-o[1]/o[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+.5*(this.transform.cameraToCenterDistance/o[3])}},le.prototype.isOffscreen=function(a,t,e,r){return 100>e||a>=this.screenRightBoundary||100>r||t>this.screenBottomBoundary},le.prototype.isInsideGrid=function(a,t,e,r){return 0<=e&&a<this.gridRightBoundary&&0<=r&&t<this.gridBottomBoundary},le.prototype.getViewportMatrix=function(){var t=aa.identity([]);return aa.translate(t,t,[-100,-100,0]),t};var he=function(a,t,r,n){this.opacity=a?oa(0,ta(1,a.opacity+(a.placed?t:-t))):n&&r?1:0,this.placed=r};he.prototype.isHidden=function(){return 0===this.opacity&&!this.placed};var de=function(a,t,e,n,o){this.text=new he(a?a.text:null,t,e,o),this.icon=new he(a?a.icon:null,t,n,o)};de.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var _e=function(o,t,e){this.text=o,this.icon=t,this.skipFade=e},fe=function(){this.invProjMatrix=aa.create(),this.viewportMatrix=aa.create(),this.circles=[]},me=function(a,t,e,n,o){this.bucketInstanceId=a,this.featureIndex=t,this.sourceLayerIndex=e,this.bucketIndex=n,this.tileID=o},ge=function(e){this.crossSourceCollisions=e,this.maxGroupID=0,this.collisionGroups={}};ge.prototype.get=function(o){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[o]){var a=++this.maxGroupID;this.collisionGroups[o]={ID:a,predicate:function(e){return e.collisionGroupID===a}}}return this.collisionGroups[o]};var ve=function(a,t,e,r){this.transform=a.clone(),this.collisionIndex=new le(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=t,this.retainedQueryData={},this.collisionGroups=new ge(e),this.collisionCircleArrays={},this.prevPlacement=r,r&&(r.prevPlacement=void 0),this.placedOrientations={}};ve.prototype.getBucketParts=function(t,e,i,o){var r=i.getBucket(e),w=i.latestFeatureIndex;if(r&&w&&e.id===r.layerIds[0]){var n=i.collisionBoxArray,T=r.layers[0].layout,E=C(2,this.transform.zoom-i.tileID.overscaledZ),S=i.tileSize/aa.EXTENT,I=this.transform.calculatePosMatrix(i.tileID.toUnwrapped()),A='map'===T.get('text-pitch-alignment'),p='map'===T.get('text-rotation-alignment'),d=ue(i,1,this.transform.zoom),_=Ht(I,A,p,this.transform,d),k=null;if(A){var P=Jt(I,A,p,this.transform,d);k=aa.multiply([],this.transform.labelPlaneMatrix,P)}this.retainedQueryData[r.bucketInstanceId]=new me(r.bucketInstanceId,w,r.sourceLayerIndex,r.index,i.tileID);var g={bucket:r,layout:T,posMatrix:I,textLabelPlaneMatrix:_,labelToScreenMatrix:k,scale:E,textPixelRatio:S,holdingForFade:i.holdingForFade(),collisionBoxArray:n,partiallyEvaluatedTextSize:aa.evaluateSizeForZoom(r.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(r.sourceID)};if(o)for(var z=0,y=r.sortKeyRanges,x;z<y.length;z+=1)x=y[z],t.push({sortKey:x.sortKey,symbolInstanceStart:x.symbolInstanceStart,symbolInstanceEnd:x.symbolInstanceEnd,parameters:g});else t.push({symbolInstanceStart:0,symbolInstanceEnd:r.symbolInstances.length,parameters:g})}},ve.prototype.attemptAnchorPlacement=function(y,x,e,b,w,T,a,n,s,l,c,u,h,p,d){var E=[u.textOffset0,u.textOffset1],S=pe(y,e,b,E,w),C=this.collisionIndex.placeCollisionBox(ye(x,S.x,S.y,T,a,this.transform.angle),c,n,s,l.predicate),I;if(!d||0!==this.collisionIndex.placeCollisionBox(ye(d,S.x,S.y,T,a,this.transform.angle),c,n,s,l.predicate).box.length)return 0<C.box.length?(this.prevPlacement&&this.prevPlacement.variableOffsets[u.crossTileID]&&this.prevPlacement.placements[u.crossTileID]&&this.prevPlacement.placements[u.crossTileID].text&&(I=this.prevPlacement.variableOffsets[u.crossTileID].anchor),this.variableOffsets[u.crossTileID]={textOffset:E,width:e,height:b,anchor:y,textBoxScale:w,prevAnchor:I},this.markUsedJustification(h,y,u,p),h.allowVerticalPlacement&&(this.markUsedOrientation(h,p,u),this.placedOrientations[u.crossTileID]=p),{shift:S,placedGlyphBoxes:C}):void 0},ve.prototype.placeLayerBucketPart=function(t,ee,i){var te=this,e=t.parameters,oe=e.bucket,o=e.layout,r=e.posMatrix,a=e.textLabelPlaneMatrix,n=e.labelToScreenMatrix,l=e.textPixelRatio,s=e.holdingForFade,p=e.collisionBoxArray,d=e.partiallyEvaluatedTextSize,h=e.collisionGroup,c=o.get('text-optional'),u=o.get('icon-optional'),g=o.get('text-allow-overlap'),f=o.get('icon-allow-overlap'),v='map'===o.get('text-rotation-alignment'),x='map'===o.get('text-pitch-alignment'),b='none'!==o.get('icon-text-fit'),m='viewport-y'===o.get('symbol-z-order'),_=g&&(f||!oe.hasIconData()||u),w=f&&(g||!oe.hasTextData()||c);!oe.collisionArrays&&p&&oe.deserializeCollisionBoxes(p);var T=function(E,e){if(!ee[E.crossTileID])if(s)te.placements[E.crossTileID]=new _e(!1,!1,!1);else{var t=!1,p=!1,m=!0,S=null,C={box:null,offscreen:null},I={box:null,offscreen:null},P=null,z=null,D=0,A=0,L=0,k;e.textFeatureIndex?D=e.textFeatureIndex:E.useRuntimeCollisionCircles&&(D=E.featureIndex),e.verticalTextFeatureIndex&&(A=e.verticalTextFeatureIndex);var R=e.textBox;if(R){var B=function(e){var t=aa.WritingMode.horizontal;if(oe.allowVerticalPlacement&&!e&&te.prevPlacement){var o=te.prevPlacement.placedOrientations[E.crossTileID];o&&(te.placedOrientations[E.crossTileID]=o,te.markUsedOrientation(oe,t=o,E))}return t},M=function(t,a){if(oe.allowVerticalPlacement&&0<E.numVerticalGlyphVertices&&e.verticalTextBox)for(var o=0,r=oe.writingModes;o<r.length&&(r[o]===aa.WritingMode.vertical?(C=a(),I=C):C=t(),!(C&&C.box&&C.box.length));o+=1);else C=t()};if(o.get('text-variable-anchor')){var F=o.get('text-variable-anchor');if(te.prevPlacement&&te.prevPlacement.variableOffsets[E.crossTileID]){var O=te.prevPlacement.variableOffsets[E.crossTileID];0<F.indexOf(O.anchor)&&(F=F.filter(function(e){return e!==O.anchor})).unshift(O.anchor)}var N=function(e,n,i){for(var o=e.x2-e.x1,a=e.y2-e.y1,s=E.textBoxScale,c=b&&!f?n:null,u={box:[],offscreen:!1},p=g?2*F.length:F.length,d=0,_;d<p;++d)if(_=te.attemptAnchorPlacement(F[d%F.length],e,o,a,s,v,x,l,r,h,d>=F.length,E,oe,i,c),_&&(u=_.placedGlyphBoxes)&&u.box&&u.box.length){t=!0,S=_.shift;break}return u};M(function(){return N(R,e.iconBox,aa.WritingMode.horizontal)},function(){var t=e.verticalTextBox;return oe.allowVerticalPlacement&&!(C&&C.box&&C.box.length)&&0<E.numVerticalGlyphVertices&&t?N(t,e.verticalIconBox,aa.WritingMode.vertical):{box:null,offscreen:null}}),C&&(t=C.box,m=C.offscreen);var U=B(C&&C.box);if(!t&&te.prevPlacement){var q=te.prevPlacement.variableOffsets[E.crossTileID];q&&(te.variableOffsets[E.crossTileID]=q,te.markUsedJustification(oe,q.anchor,E,U))}}else{var j=function(e,t){var a=te.collisionIndex.placeCollisionBox(e,g,l,r,h.predicate);return a&&a.box&&a.box.length&&(te.markUsedOrientation(oe,t,E),te.placedOrientations[E.crossTileID]=t),a};M(function(){return j(R,aa.WritingMode.horizontal)},function(){var t=e.verticalTextBox;return oe.allowVerticalPlacement&&0<E.numVerticalGlyphVertices&&t?j(t,aa.WritingMode.vertical):{box:null,offscreen:null}}),B(C&&C.box&&C.box.length)}}if(t=(k=C)&&k.box&&0<k.box.length,m=k&&k.offscreen,E.useRuntimeCollisionCircles){var V=oe.text.placedSymbolArray.get(E.centerJustifiedTextSymbolIndex),Z=aa.evaluateSizeForFeature(oe.textSizeData,d,V),G=o.get('text-padding');P=te.collisionIndex.placeCollisionCircles(g,V,oe.lineVertexArray,oe.glyphOffsetArray,Z,r,a,n,i,x,h.predicate,E.collisionCircleDiameter,G),t=g||0<P.circles.length&&!P.collisionDetected,m=m&&P.offscreen}if(e.iconFeatureIndex&&(L=e.iconFeatureIndex),e.iconBox){var W=function(o){var t=b&&S?ye(o,S.x,S.y,v,x,te.transform.angle):o;return te.collisionIndex.placeCollisionBox(t,f,l,r,h.predicate)};p=I&&I.box&&I.box.length&&e.verticalIconBox?0<(z=W(e.verticalIconBox)).box.length:0<(z=W(e.iconBox)).box.length,m=m&&z.offscreen}var H=c||0===E.numHorizontalGlyphVertices&&0===E.numVerticalGlyphVertices,X=u||0===E.numIconVertices;if(H||X?X?H||(p=p&&t):t=p&&t:p=t=p&&t,t&&k&&k.box&&te.collisionIndex.insertCollisionBox(k.box,o.get('text-ignore-placement'),oe.bucketInstanceId,I&&I.box&&A?A:D,h.ID),p&&z&&te.collisionIndex.insertCollisionBox(z.box,o.get('icon-ignore-placement'),oe.bucketInstanceId,L,h.ID),P&&(t&&te.collisionIndex.insertCollisionCircles(P.circles,o.get('text-ignore-placement'),oe.bucketInstanceId,D,h.ID),i)){var K=oe.bucketInstanceId,Y=te.collisionCircleArrays[K];void 0===Y&&(Y=te.collisionCircleArrays[K]=new fe);for(var J=0;J<P.circles.length;J+=4)Y.circles.push(P.circles[J+0]),Y.circles.push(P.circles[J+1]),Y.circles.push(P.circles[J+2]),Y.circles.push(P.collisionDetected?1:0)}te.placements[E.crossTileID]=new _e(t||_,p||w,m||oe.justReloaded),ee[E.crossTileID]=!0}};if(m)for(var E=oe.getSortedSymbolIndexes(this.transform.angle),S=E.length-1,C;0<=S;--S)C=E[S],T(oe.symbolInstances.get(C),oe.collisionArrays[C]);else for(var I=t.symbolInstanceStart;I<t.symbolInstanceEnd;I++)T(oe.symbolInstances.get(I),oe.collisionArrays[I]);if(i&&oe.bucketInstanceId in this.collisionCircleArrays){var A=this.collisionCircleArrays[oe.bucketInstanceId];aa.invert(A.invProjMatrix,r),A.viewportMatrix=this.collisionIndex.getViewportMatrix()}oe.justReloaded=!1},ve.prototype.markUsedJustification=function(t,e,i,o){var r=o===aa.WritingMode.vertical?i.verticalPlacedTextSymbolIndex:{left:i.leftJustifiedTextSymbolIndex,center:i.centerJustifiedTextSymbolIndex,right:i.rightJustifiedTextSymbolIndex}[aa.getAnchorJustification(e)];for(var a=0,n=[i.leftJustifiedTextSymbolIndex,i.centerJustifiedTextSymbolIndex,i.rightJustifiedTextSymbolIndex,i.verticalPlacedTextSymbolIndex],s;a<n.length;a+=1)s=n[a],0<=s&&(t.text.placedSymbolArray.get(s).crossTileID=0<=r&&s!==r?0:i.crossTileID)},ve.prototype.markUsedOrientation=function(t,e,i){for(var o=e===aa.WritingMode.horizontal||e===aa.WritingMode.horizontalOnly?e:0,r=e===aa.WritingMode.vertical?e:0,a=0,n=[i.leftJustifiedTextSymbolIndex,i.centerJustifiedTextSymbolIndex,i.rightJustifiedTextSymbolIndex];a<n.length;a+=1)t.text.placedSymbolArray.get(n[a]).placedOrientation=o;i.verticalPlacedTextSymbolIndex&&(t.text.placedSymbolArray.get(i.verticalPlacedTextSymbolIndex).placedOrientation=r)},ve.prototype.commit=function(m){this.commitTime=m,this.zoomAtLastRecencyCheck=this.transform.zoom;var t=this.prevPlacement,e=!1;this.prevZoomAdjustment=t?t.zoomAdjustment(this.transform.zoom):0;var i=t?t.symbolFadeChange(m):1,o=t?t.opacities:{},r=t?t.variableOffsets:{},a=t?t.placedOrientations:{};for(var n in this.placements){var s=this.placements[n],l=o[n];l?(this.opacities[n]=new de(l,i,s.text,s.icon),e=e||s.text!==l.text.placed||s.icon!==l.icon.placed):(this.opacities[n]=new de(null,i,s.text,s.icon,s.skipFade),e=e||s.text||s.icon)}for(var c in o){var u=o[c];if(!this.opacities[c]){var g=new de(u,i,!1,!1);g.isHidden()||(this.opacities[c]=g,e=e||u.text.placed||u.icon.placed)}}for(var p in r)this.variableOffsets[p]||!this.opacities[p]||this.opacities[p].isHidden()||(this.variableOffsets[p]=r[p]);for(var d in a)this.placedOrientations[d]||!this.opacities[d]||this.opacities[d].isHidden()||(this.placedOrientations[d]=a[d]);e?this.lastPlacementChangeTime=m:'number'!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=t?t.lastPlacementChangeTime:m)},ve.prototype.updateLayerOpacities=function(s,t){for(var e={},i=0,o=t;i<o.length;i+=1){var r=o[i],a=r.getBucket(s);a&&r.latestFeatureIndex&&s.id===a.layerIds[0]&&this.updateBucketOpacities(a,e,r.collisionBoxArray)}},ve.prototype.updateBucketOpacities=function(A,e,t){var i=this;A.hasTextData()&&A.text.opacityVertexArray.clear(),A.hasIconData()&&A.icon.opacityVertexArray.clear(),A.hasIconCollisionBoxData()&&A.iconCollisionBox.collisionVertexArray.clear(),A.hasTextCollisionBoxData()&&A.textCollisionBox.collisionVertexArray.clear();var o=A.layers[0].layout,r=new de(null,0,!1,!1,!0),a=o.get('text-allow-overlap'),n=o.get('icon-allow-overlap'),s=o.get('text-variable-anchor'),l='map'===o.get('text-rotation-alignment'),c='map'===o.get('text-pitch-alignment'),u='none'!==o.get('icon-text-fit'),p=new de(null,0,a&&(n||!A.hasIconData()||o.get('icon-optional')),n&&(a||!A.hasTextData()||o.get('text-optional')),!0);!A.collisionArrays&&t&&(A.hasIconCollisionBoxData()||A.hasTextCollisionBoxData())&&A.deserializeCollisionBoxes(t);for(var d=function(a,t,e){for(var r=0;r<t/4;r++)a.opacityVertexArray.emplaceBack(e)},y=function(t){var o=A.symbolInstances.get(t),a=o.numHorizontalGlyphVertices,n=o.numVerticalGlyphVertices,_=o.crossTileID,f=i.opacities[_];e[_]?f=r:f||(i.opacities[_]=f=p),e[_]=!0;var m=0<o.numIconVertices,g=i.placedOrientations[o.crossTileID],h=g===aa.WritingMode.vertical,y=g===aa.WritingMode.horizontal||g===aa.WritingMode.horizontalOnly;if(0<a||0<n){var v=we(f.text);d(A.text,a,h?ze:v),d(A.text,n,y?ze:v);var b=f.text.isHidden();[o.rightJustifiedTextSymbolIndex,o.centerJustifiedTextSymbolIndex,o.leftJustifiedTextSymbolIndex].forEach(function(e){0<=e&&(A.text.placedSymbolArray.get(e).hidden=b||h?1:0)}),0<=o.verticalPlacedTextSymbolIndex&&(A.text.placedSymbolArray.get(o.verticalPlacedTextSymbolIndex).hidden=b||y?1:0);var w=i.variableOffsets[o.crossTileID];w&&i.markUsedJustification(A,w.anchor,o,g);var T=i.placedOrientations[o.crossTileID];T&&(i.markUsedJustification(A,'left',o,T),i.markUsedOrientation(A,T,o))}if(m){var E=we(f.icon),I=!(u&&o.verticalPlacedIconSymbolIndex&&h);0<=o.placedIconSymbolIndex&&(d(A.icon,o.numIconVertices,I?E:ze),A.icon.placedSymbolArray.get(o.placedIconSymbolIndex).hidden=f.icon.isHidden()),0<=o.verticalPlacedIconSymbolIndex&&(d(A.icon,o.numVerticalIconVertices,I?ze:E),A.icon.placedSymbolArray.get(o.verticalPlacedIconSymbolIndex).hidden=f.icon.isHidden())}if(A.hasIconCollisionBoxData()||A.hasTextCollisionBoxData()){var k=A.collisionArrays[t];if(k){var S=new aa.Point(0,0);if(k.textBox||k.verticalTextBox){var C=!0;if(s){var P=i.variableOffsets[_];P?(S=pe(P.anchor,P.width,P.height,P.textOffset,P.textBoxScale),l&&S._rotate(c?i.transform.angle:-i.transform.angle)):C=!1}k.textBox&&xe(A.textCollisionBox.collisionVertexArray,f.text.placed,!C||h,S.x,S.y),k.verticalTextBox&&xe(A.textCollisionBox.collisionVertexArray,f.text.placed,!C||y,S.x,S.y)}var D=!y&&k.verticalIconBox;k.iconBox&&xe(A.iconCollisionBox.collisionVertexArray,f.icon.placed,D,u?S.x:0,u?S.y:0),k.verticalIconBox&&xe(A.iconCollisionBox.collisionVertexArray,f.icon.placed,!D,u?S.x:0,u?S.y:0)}}},_=0;_<A.symbolInstances.length;_++)y(_);if(A.sortFeatures(this.transform.angle),this.retainedQueryData[A.bucketInstanceId]&&(this.retainedQueryData[A.bucketInstanceId].featureSortOrder=A.featureSortOrder),A.hasTextData()&&A.text.opacityVertexBuffer&&A.text.opacityVertexBuffer.updateData(A.text.opacityVertexArray),A.hasIconData()&&A.icon.opacityVertexBuffer&&A.icon.opacityVertexBuffer.updateData(A.icon.opacityVertexArray),A.hasIconCollisionBoxData()&&A.iconCollisionBox.collisionVertexBuffer&&A.iconCollisionBox.collisionVertexBuffer.updateData(A.iconCollisionBox.collisionVertexArray),A.hasTextCollisionBoxData()&&A.textCollisionBox.collisionVertexBuffer&&A.textCollisionBox.collisionVertexBuffer.updateData(A.textCollisionBox.collisionVertexArray),A.bucketInstanceId in this.collisionCircleArrays){var m=this.collisionCircleArrays[A.bucketInstanceId];A.placementInvProjMatrix=m.invProjMatrix,A.placementViewportMatrix=m.viewportMatrix,A.collisionCircleArray=m.circles,delete this.collisionCircleArrays[A.bucketInstanceId]}},ve.prototype.symbolFadeChange=function(e){return 0===this.fadeDuration?1:(e-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},ve.prototype.zoomAdjustment=function(e){return oa(0,(this.transform.zoom-e)/1.5)},ve.prototype.hasTransitions=function(e){return this.stale||e-this.lastPlacementChangeTime<this.fadeDuration},ve.prototype.stillRecent=function(o,t){var e=this.zoomAtLastRecencyCheck===t?1-this.zoomAdjustment(t):1;return this.zoomAtLastRecencyCheck=t,this.commitTime+this.fadeDuration*e>o},ve.prototype.setStale=function(){this.stale=!0};var be=33554432,Te=16777216,Ee=131072,Ie=65536,Pe=512,Se=256,Ce=2,ze=0,Me=function(e){this._sortAcrossTiles='viewport-y'!==e.layout.get('symbol-z-order')&&void 0!==e.layout.get('symbol-sort-key').constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};Me.prototype.continuePlacement=function(n,t,e,i,o){for(var r=this._bucketParts;this._currentTileIndex<n.length;)if(t.getBucketParts(r,i,n[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,o())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,r.sort(function(o,t){return o.sortKey-t.sortKey}));this._currentPartIndex<r.length;)if(t.placeLayerBucketPart(r[this._currentPartIndex],this._seenCrossTileIDs,e),this._currentPartIndex++,o())return!0;return!1};var Le=function(s,t,e,i,o,r,a){this.placement=new ve(s,o,r,a),this._currentPlacementIndex=t.length-1,this._forceFullPlacement=e,this._showCollisionBoxes=i,this._done=!1};Le.prototype.isDone=function(){return this._done},Le.prototype.continuePlacement=function(t,e,i){for(var o=this,r=aa.browser.now(),a=function(){var t=aa.browser.now()-r;return!o._forceFullPlacement&&2<t};0<=this._currentPlacementIndex;){var n=e[t[this._currentPlacementIndex]],s=this.placement.collisionIndex.transform.zoom;if('symbol'===n.type&&(!n.minzoom||n.minzoom<=s)&&(!n.maxzoom||n.maxzoom>s)){if(this._inProgressLayer||(this._inProgressLayer=new Me(n)),this._inProgressLayer.continuePlacement(i[n.source],this.placement,this._showCollisionBoxes,n,a))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},Le.prototype.commit=function(e){return this.placement.commit(e),this.placement};var Ae=512/aa.EXTENT/2,Re=function(n,t,e){this.tileID=n,this.indexedSymbolInstances={},this.bucketInstanceId=e;for(var i=0;i<t.length;i++){var o=t.get(i),r=o.key;this.indexedSymbolInstances[r]||(this.indexedSymbolInstances[r]=[]),this.indexedSymbolInstances[r].push({crossTileID:o.crossTileID,coord:this.getScaledCoordinates(o,n)})}};Re.prototype.getScaledCoordinates=function(t,e){var a=Ae/C(2,e.canonical.z-this.tileID.canonical.z);return{x:ea((e.canonical.x*aa.EXTENT+t.anchorX)*a),y:ea((e.canonical.y*aa.EXTENT+t.anchorY)*a)}},Re.prototype.findMatches=function(p,t,e){for(var i=this.tileID.canonical.z<t.canonical.z?1:C(2,this.tileID.canonical.z-t.canonical.z),o=0,r;o<p.length;o++)if(r=p.get(o),!r.crossTileID){var a=this.indexedSymbolInstances[r.key];if(a)for(var n=this.getScaledCoordinates(r,t),s=0,l=a,d;s<l.length;s+=1)if(d=l[s],B(d.coord.x-n.x)<=i&&B(d.coord.y-n.y)<=i&&!e[d.crossTileID]){e[d.crossTileID]=!0,r.crossTileID=d.crossTileID;break}}};var ke=function(){this.maxCrossTileID=0};ke.prototype.generate=function(){return++this.maxCrossTileID};var Be=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};Be.prototype.handleWrapJump=function(s){var t=b((s-this.lng)/360);if(0!==t)for(var e in this.indexes){var i=this.indexes[e],o={};for(var r in i){var a=i[r];a.tileID=a.tileID.unwrapTo(a.tileID.wrap+t),o[a.tileID.key]=a}this.indexes[e]=o}this.lng=s},Be.prototype.addBucket=function(p,t,e){if(this.indexes[p.overscaledZ]&&this.indexes[p.overscaledZ][p.key]){if(this.indexes[p.overscaledZ][p.key].bucketInstanceId===t.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(p.overscaledZ,this.indexes[p.overscaledZ][p.key])}for(var i=0;i<t.symbolInstances.length;i++)t.symbolInstances.get(i).crossTileID=0;this.usedCrossTileIDs[p.overscaledZ]||(this.usedCrossTileIDs[p.overscaledZ]={});var o=this.usedCrossTileIDs[p.overscaledZ];for(var r in this.indexes){var d=this.indexes[r];if(+r>p.overscaledZ)for(var n in d){var s=d[n];s.tileID.isChildOf(p)&&s.findMatches(t.symbolInstances,p,o)}else{var l=d[p.scaledTo(+r).key];l&&l.findMatches(t.symbolInstances,p,o)}}for(var c=0,u;c<t.symbolInstances.length;c++)u=t.symbolInstances.get(c),u.crossTileID||(u.crossTileID=e.generate(),o[u.crossTileID]=!0);return void 0===this.indexes[p.overscaledZ]&&(this.indexes[p.overscaledZ]={}),this.indexes[p.overscaledZ][p.key]=new Re(p,t.symbolInstances,t.bucketInstanceId),!0},Be.prototype.removeBucketCrossTileIDs=function(a,t){for(var e in t.indexedSymbolInstances)for(var n=0,o=t.indexedSymbolInstances[e];n<o.length;n+=1)delete this.usedCrossTileIDs[a][o[n].crossTileID]},Be.prototype.removeStaleBuckets=function(a){var t=!1;for(var e in this.indexes){var n=this.indexes[e];for(var o in n)a[n[o].bucketInstanceId]||(this.removeBucketCrossTileIDs(e,n[o]),delete n[o],t=!0)}return t};var Oe=function(){this.layerIndexes={},this.crossTileIDs=new ke,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};Oe.prototype.addLayer=function(p,t,e){var i=this.layerIndexes[p.id];void 0===i&&(i=this.layerIndexes[p.id]=new Be);var o=!1,r={};i.handleWrapJump(e);for(var a=0,n=t;a<n.length;a+=1){var s=n[a],l=s.getBucket(p);l&&p.id===l.layerIds[0]&&(l.bucketInstanceId||(l.bucketInstanceId=++this.maxBucketInstanceId),i.addBucket(s.tileID,l,this.crossTileIDs)&&(o=!0),r[l.bucketInstanceId]=!0)}return i.removeStaleBuckets(r)&&(o=!0),o},Oe.prototype.pruneUnusedLayers=function(o){var a={};for(var e in o.forEach(function(e){a[e]=!0}),this.layerIndexes)a[e]||delete this.layerIndexes[e]};var Fe=function(t,e){return aa.emitValidationErrors(t,e&&e.filter(function(e){return'source.canvas'!==e.identifier}))},Ue=aa.pick(Bt,['addLayer','removeLayer','setPaintProperty','setLayoutProperty','setFilter','addSource','removeSource','setLayerZoomRange','setLight','setTransition','setGeoJSONSourceData']),Ne=aa.pick(Bt,['setCenter','setZoom','setBearing','setPitch']),qa=function(){var t={},e=aa.styleSpec.$version;for(var n in aa.styleSpec.$root){var o=aa.styleSpec.$root[n],a;o.required&&null!=(a='version'==n?e:'array'===o.type?[]:{})&&(t[n]=a)}return t}(),qe=function(t){function s(e,o){var l=this;void 0===o&&(o={}),t.call(this),this.map=e,this.dispatcher=new T(At(),this),this.imageManager=new u,this.imageManager.setEventedParent(this),this.glyphManager=new ka(e._requestManager,o.localIdeographFontFamily),this.lineAtlas=new La(256,512),this.crossTileSymbolIndex=new Oe,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new aa.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast('setReferrer',aa.getReferrer());var a=this;this._rtlTextPluginCallback=s.registerForPluginStateChange(function(t){a.dispatcher.broadcast('syncRTLPluginState',{pluginStatus:t.pluginStatus,pluginURL:t.pluginURL},function(t,e){if(aa.triggerPluginCompletionEvent(t),e&&e.every(function(e){return e}))for(var r in a.sourceCaches)a.sourceCaches[r].reload()})}),this.on('data',function(a){if('source'===a.dataType&&'metadata'===a.sourceDataType){var t=l.sourceCaches[a.sourceId];if(t){var e=t.getSource();if(e&&e.vectorLayerIds)for(var n in l._layers){var o=l._layers[n];o.source===e.id&&l._validateLayer(o)}}}})}return t&&(s.__proto__=t),(s.prototype=Object.create(t&&t.prototype)).constructor=s,s.prototype.loadURL=function(t,e){var n=this;void 0===e&&(e={}),this.fire(new aa.Event('dataloading',{dataType:'style'}));var o='boolean'==typeof e.validate?e.validate:!aa.isMapboxURL(t);t=this.map._requestManager.normalizeStyleURL(t,e.accessToken);var r=this.map._requestManager.transformRequest(t,aa.ResourceType.Style);this._request=aa.getJSON(r,function(t,e){n._request=null,t?n.fire(new aa.ErrorEvent(t)):e&&n._load(e,o)})},s.prototype.loadJSON=function(t,e){var a=this;void 0===e&&(e={}),this.fire(new aa.Event('dataloading',{dataType:'style'})),this._request=aa.browser.frame(function(){a._request=null,a._load(t,!1!==e.validate)})},s.prototype.loadEmpty=function(){this.fire(new aa.Event('dataloading',{dataType:'style'})),this._load(qa,!1)},s.prototype._load=function(t,e){if(!e||!Fe(this,aa.validateStyle(t))){for(var l in this._loaded=!0,this.stylesheet=t,t.sources)this.addSource(l,t.sources[l],{validate:!1});t.sprite?this._loadSprite(t.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(t.glyphs);var o=Ut(this.stylesheet.layers);this._order=o.map(function(e){return e.id}),this._layers={},this._serializedLayers={};for(var r=0,a=o,n;r<a.length;r+=1)n=a[r],(n=aa.createStyleLayer(n)).setEventedParent(this,{layer:{id:n.id}}),this._layers[n.id]=n,this._serializedLayers[n.id]=n.serialize();this.dispatcher.broadcast('setLayers',this._serializeLayers(this._order)),this.light=new Da(this.stylesheet.light),this.fire(new aa.Event('data',{dataType:'style'})),this.fire(new aa.Event('style.load'))}},s.prototype._loadSprite=function(t){var a=this;this._spriteRequest=function(t,e,y){function o(){if(a)y(a);else if(x&&r){var t=aa.browser.getImageData(r),e={};for(var o in x){var n=x[o],i=n.width,s=n.height,l=n.x,b=n.y,w=n.sdf,T=n.pixelRatio,E=n.stretchX,S=n.stretchY,C=n.content,I=new aa.RGBAImage({width:i,height:s});aa.RGBAImage.copy(t,I,{x:l,y:b},{x:0,y:0},{width:i,height:s}),e[o]={data:I,pixelRatio:T,sdf:w,stretchX:E,stretchY:S,content:C}}y(null,e)}}var i=1<aa.browser.devicePixelRatio?'@2x':'',s=aa.getJSON(e.transformRequest(e.normalizeSpriteURL(t,i,'.json'),aa.ResourceType.SpriteJSON),function(r,t){s=null,a||(a=r,x=t,o())}),l=aa.getImage(e.transformRequest(e.normalizeSpriteURL(t,i,'.png'),aa.ResourceType.SpriteImage),function(n,t){l=null,a||(a=n,r=t,o())}),x,r,a;return{cancel:function(){s&&(s.cancel(),s=null),l&&(l.cancel(),l=null)}}}(t,this.map._requestManager,function(t,e){if(a._spriteRequest=null,t)a.fire(new aa.ErrorEvent(t));else if(e)for(var o in e)a.imageManager.addImage(o,e[o]);a.imageManager.setLoaded(!0),a._availableImages=a.imageManager.listImages(),a.dispatcher.broadcast('setImages',a._availableImages),a.fire(new aa.Event('data',{dataType:'style'}))})},s.prototype._validateLayer=function(t){var e=this.sourceCaches[t.source];if(e){var a=t.sourceLayer;if(a){var o=e.getSource();('geojson'===o.type||o.vectorLayerIds&&-1===o.vectorLayerIds.indexOf(a))&&this.fire(new aa.ErrorEvent(new Error('Source layer "'+a+'" does not exist on source "'+o.id+'" as specified by style layer "'+t.id+'"')))}}},s.prototype.loaded=function(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(var e in this.sourceCaches)if(!this.sourceCaches[e].loaded())return!1;return!!this.imageManager.isLoaded()},s.prototype._serializeLayers=function(a){for(var t=[],e=0,n=a,o;e<n.length;e+=1)o=this._layers[n[e]],'custom'!==o.type&&t.push(o.serialize());return t},s.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var o in this.sourceCaches)if(this.sourceCaches[o].hasTransition())return!0;for(var t in this._layers)if(this._layers[t].hasTransition())return!0;return!1},s.prototype._checkLoaded=function(){if(!this._loaded)throw new Error('Style is not done loading')},s.prototype.update=function(t){if(this._loaded){var e=this._changed;if(this._changed){var i=Object.keys(this._updatedLayers),o=Object.keys(this._removedLayers);for(var r in(i.length||o.length)&&this._updateWorkerLayers(i,o),this._updatedSources){var a=this._updatedSources[r];'reload'===a?this._reloadSource(r):'clear'===a&&this._clearSource(r)}for(var n in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[n].updateTransitions(t);this.light.updateTransitions(t),this._resetUpdates()}for(var s in this.sourceCaches)this.sourceCaches[s].used=!1;for(var l=0,p=this._order,d;l<p.length;l+=1)d=this._layers[p[l]],d.recalculate(t,this._availableImages),!d.isHidden(t.zoom)&&d.source&&(this.sourceCaches[d.source].used=!0);this.light.recalculate(t),this.z=t.zoom,e&&this.fire(new aa.Event('data',{dataType:'style'}))}},s.prototype._updateTilesForChangedImages=function(){var o=Object.keys(this._changedImages);if(o.length){for(var t in this.sourceCaches)this.sourceCaches[t].reloadTilesForDependencies(['icons','patterns'],o);this._changedImages={}}},s.prototype._updateWorkerLayers=function(o,t){this.dispatcher.broadcast('updateLayers',{layers:this._serializeLayers(o),removedIds:t})},s.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},s.prototype.setState=function(t){var e=this;if(this._checkLoaded(),Fe(this,aa.validateStyle(t)))return!1;(t=aa.clone$1(t)).layers=Ut(t.layers);var a=function(t,s){if(!t)return[{command:Bt.setStyle,args:[s]}];var i=[];try{if(!aa.deepEqual(t.version,s.version))return[{command:Bt.setStyle,args:[s]}];aa.deepEqual(t.center,s.center)||i.push({command:Bt.setCenter,args:[s.center]}),aa.deepEqual(t.zoom,s.zoom)||i.push({command:Bt.setZoom,args:[s.zoom]}),aa.deepEqual(t.bearing,s.bearing)||i.push({command:Bt.setBearing,args:[s.bearing]}),aa.deepEqual(t.pitch,s.pitch)||i.push({command:Bt.setPitch,args:[s.pitch]}),aa.deepEqual(t.sprite,s.sprite)||i.push({command:Bt.setSprite,args:[s.sprite]}),aa.deepEqual(t.glyphs,s.glyphs)||i.push({command:Bt.setGlyphs,args:[s.glyphs]}),aa.deepEqual(t.transition,s.transition)||i.push({command:Bt.setTransition,args:[s.transition]}),aa.deepEqual(t.light,s.light)||i.push({command:Bt.setLight,args:[s.light]});var o={},r=[];!function(t,e,n,o){for(var r in e=e||{},t=t||{})t.hasOwnProperty(r)&&(e.hasOwnProperty(r)||qt(r,n,o));for(r in e)e.hasOwnProperty(r)&&(t.hasOwnProperty(r)?aa.deepEqual(t[r],e[r])||('geojson'===t[r].type&&'geojson'===e[r].type&&Vt(t,e,r)?n.push({command:Bt.setGeoJSONSourceData,args:[r,e[r].data]}):jt(r,e,n,o)):Nt(r,e,n))}(t.sources,s.sources,r,o);var a=[];t.layers&&t.layers.forEach(function(e){o[e.source]?i.push({command:Bt.removeLayer,args:[e.id]}):a.push(e)}),i=i.concat(r),function(t,e,i){e=e||[];var o=(t=t||[]).map(Wt),g=e.map(Wt),p=t.reduce(Xt,{}),d=e.reduce(Xt,{}),y=o.slice(),_=Object.create(null),m,r,a,n,s,l,c;for(m=0,r=0;m<o.length;m++)d.hasOwnProperty(a=o[m])?r++:(i.push({command:Bt.removeLayer,args:[a]}),y.splice(y.indexOf(a,r),1));for(m=0,r=0;m<g.length;m++)y[y.length-1-m]!==(a=g[g.length-1-m])&&(p.hasOwnProperty(a)?(i.push({command:Bt.removeLayer,args:[a]}),y.splice(y.lastIndexOf(a,y.length-r),1)):r++,i.push({command:Bt.addLayer,args:[d[a],l=y[y.length-m]]}),y.splice(y.length-m,0,a),_[a]=!0);for(m=0;m<g.length;m++)if(n=p[a=g[m]],s=d[a],!_[a]&&!aa.deepEqual(n,s))if(aa.deepEqual(n.source,s.source)&&aa.deepEqual(n['source-layer'],s['source-layer'])&&aa.deepEqual(n.type,s.type)){for(c in Gt(n.layout,s.layout,i,a,null,Bt.setLayoutProperty),Gt(n.paint,s.paint,i,a,null,Bt.setPaintProperty),aa.deepEqual(n.filter,s.filter)||i.push({command:Bt.setFilter,args:[a,s.filter]}),aa.deepEqual(n.minzoom,s.minzoom)&&aa.deepEqual(n.maxzoom,s.maxzoom)||i.push({command:Bt.setLayerZoomRange,args:[a,s.minzoom,s.maxzoom]}),n)n.hasOwnProperty(c)&&'layout'!==c&&'paint'!==c&&'filter'!==c&&'metadata'!==c&&'minzoom'!==c&&'maxzoom'!==c&&(0===c.indexOf('paint.')?Gt(n[c],s[c],i,a,c.slice(6),Bt.setPaintProperty):aa.deepEqual(n[c],s[c])||i.push({command:Bt.setLayerProperty,args:[a,c,s[c]]}));for(c in s)s.hasOwnProperty(c)&&!n.hasOwnProperty(c)&&'layout'!==c&&'paint'!==c&&'filter'!==c&&'metadata'!==c&&'minzoom'!==c&&'maxzoom'!==c&&(0===c.indexOf('paint.')?Gt(n[c],s[c],i,a,c.slice(6),Bt.setPaintProperty):aa.deepEqual(n[c],s[c])||i.push({command:Bt.setLayerProperty,args:[a,c,s[c]]}))}else i.push({command:Bt.removeLayer,args:[a]}),l=y[y.lastIndexOf(a)+1],i.push({command:Bt.addLayer,args:[s,l]})}(a,s.layers,i)}catch(e){console.warn('Unable to compute style diff:',e),i=[{command:Bt.setStyle,args:[s]}]}return i}(this.serialize(),t).filter(function(e){return!(e.command in Ne)});if(0===a.length)return!1;var o=a.filter(function(e){return!(e.command in Ue)});if(0<o.length)throw new Error('Unimplemented: '+o.map(function(e){return e.command}).join(', ')+'.');return a.forEach(function(o){'setTransition'!==o.command&&e[o.command].apply(e,o.args)}),this.stylesheet=t,!0},s.prototype.addImage=function(t,e){return this.getImage(t)?this.fire(new aa.ErrorEvent(new Error('An image with this name already exists.'))):void(this.imageManager.addImage(t,e),this._afterImageUpdated(t))},s.prototype.updateImage=function(o,t){this.imageManager.updateImage(o,t)},s.prototype.getImage=function(e){return this.imageManager.getImage(e)},s.prototype.removeImage=function(t){return this.getImage(t)?void(this.imageManager.removeImage(t),this._afterImageUpdated(t)):this.fire(new aa.ErrorEvent(new Error('No image with this name exists.')))},s.prototype._afterImageUpdated=function(t){this._availableImages=this.imageManager.listImages(),this._changedImages[t]=!0,this._changed=!0,this.dispatcher.broadcast('setImages',this._availableImages),this.fire(new aa.Event('data',{dataType:'style'}))},s.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},s.prototype.addSource=function(t,n,i){var o=this;if(void 0===i&&(i={}),this._checkLoaded(),void 0!==this.sourceCaches[t])throw new Error('There is already a source with this ID');if(!n.type)throw new Error('The type property must be defined, but only the following properties were given: '+Object.keys(n).join(', ')+'.');if(!(0<=['vector','raster','geojson','video','image'].indexOf(n.type)&&this._validate(aa.validateStyle.source,'sources.'+t,n,null,i))){this.map&&this.map._collectResourceTiming&&(n.collectResourceTiming=!0);var r=this.sourceCaches[t]=new zt(t,n,this.dispatcher);r.style=this,r.setEventedParent(this,function(){return{isSourceLoaded:o.loaded(),source:r.serialize(),sourceId:t}}),r.onAdd(this.map),this._changed=!0}},s.prototype.removeSource=function(t){if(this._checkLoaded(),void 0===this.sourceCaches[t])throw new Error('There is no source with this ID');for(var a in this._layers)if(this._layers[a].source===t)return this.fire(new aa.ErrorEvent(new Error('Source "'+t+'" cannot be removed while layer "'+a+'" is using it.')));var r=this.sourceCaches[t];delete this.sourceCaches[t],delete this._updatedSources[t],r.fire(new aa.Event('data',{sourceDataType:'metadata',dataType:'source',sourceId:t})),r.setEventedParent(null),r.clearTiles(),r.onRemove&&r.onRemove(this.map),this._changed=!0},s.prototype.setGeoJSONSourceData=function(o,t){this._checkLoaded(),this.sourceCaches[o].getSource().setData(t),this._changed=!0},s.prototype.getSource=function(e){return this.sourceCaches[e]&&this.sourceCaches[e].getSource()},s.prototype.addLayer=function(t,e,i){void 0===i&&(i={}),this._checkLoaded();var o=t.id;if(this.getLayer(o))this.fire(new aa.ErrorEvent(new Error('Layer with id "'+o+'" already exists on this map')));else{var l;if('custom'===t.type){if(Fe(this,aa.validateCustomStyleLayer(t)))return;l=aa.createStyleLayer(t)}else{if('object'==typeof t.source&&(this.addSource(o,t.source),t=aa.clone$1(t),t=aa.extend(t,{source:o})),this._validate(aa.validateStyle.layer,'layers.'+o,t,{arrayIndex:-1},i))return;l=aa.createStyleLayer(t),this._validateLayer(l),l.setEventedParent(this,{layer:{id:o}}),this._serializedLayers[l.id]=l.serialize()}var a=e?this._order.indexOf(e):this._order.length;if(e&&-1===a)this.fire(new aa.ErrorEvent(new Error('Layer with id "'+e+'" does not exist on this map.')));else{if(this._order.splice(a,0,o),this._layerOrderChanged=!0,this._layers[o]=l,this._removedLayers[o]&&l.source&&'custom'!==l.type){var n=this._removedLayers[o];delete this._removedLayers[o],n.type===l.type?(this._updatedSources[l.source]='reload',this.sourceCaches[l.source].pause()):this._updatedSources[l.source]='clear'}this._updateLayer(l),l.onAdd&&l.onAdd(this.map)}}},s.prototype.moveLayer=function(t,e){if(this._checkLoaded(),this._changed=!0,!this._layers[t])this.fire(new aa.ErrorEvent(new Error('The layer \''+t+'\' does not exist in the map\'s style and cannot be moved.')));else if(t!==e){var a=this._order.indexOf(t);this._order.splice(a,1);var o=e?this._order.indexOf(e):this._order.length;e&&-1===o?this.fire(new aa.ErrorEvent(new Error('Layer with id "'+e+'" does not exist on this map.'))):(this._order.splice(o,0,t),this._layerOrderChanged=!0)}},s.prototype.removeLayer=function(t){this._checkLoaded();var e=this._layers[t];if(e){e.setEventedParent(null);var a=this._order.indexOf(t);this._order.splice(a,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[t]=e,delete this._layers[t],delete this._serializedLayers[t],delete this._updatedLayers[t],delete this._updatedPaintProps[t],e.onRemove&&e.onRemove(this.map)}else this.fire(new aa.ErrorEvent(new Error('The layer \''+t+'\' does not exist in the map\'s style and cannot be removed.')))},s.prototype.getLayer=function(e){return this._layers[e]},s.prototype.hasLayer=function(e){return e in this._layers},s.prototype.setLayerZoomRange=function(t,e,a){this._checkLoaded();var o=this.getLayer(t);o?o.minzoom===e&&o.maxzoom===a||(null!=e&&(o.minzoom=e),null!=a&&(o.maxzoom=a),this._updateLayer(o)):this.fire(new aa.ErrorEvent(new Error('The layer \''+t+'\' does not exist in the map\'s style and cannot have zoom extent.')))},s.prototype.setFilter=function(t,e,a){void 0===a&&(a={}),this._checkLoaded();var o=this.getLayer(t);if(!o)this.fire(new aa.ErrorEvent(new Error('The layer \''+t+'\' does not exist in the map\'s style and cannot be filtered.')));else if(!aa.deepEqual(o.filter,e))return null==e?(o.filter=void 0,void this._updateLayer(o)):void(this._validate(aa.validateStyle.filter,'layers.'+o.id+'.filter',e,null,a)||(o.filter=aa.clone$1(e),this._updateLayer(o)))},s.prototype.getFilter=function(t){return aa.clone$1(this.getLayer(t).filter)},s.prototype.setLayoutProperty=function(t,e,n,o){void 0===o&&(o={}),this._checkLoaded();var r=this.getLayer(t);r?aa.deepEqual(r.getLayoutProperty(e),n)||(r.setLayoutProperty(e,n,o),this._updateLayer(r)):this.fire(new aa.ErrorEvent(new Error('The layer \''+t+'\' does not exist in the map\'s style and cannot be styled.')))},s.prototype.getLayoutProperty=function(t,e){var a=this.getLayer(t);return a?a.getLayoutProperty(e):void this.fire(new aa.ErrorEvent(new Error('The layer \''+t+'\' does not exist in the map\'s style.')))},s.prototype.setPaintProperty=function(t,e,n,o){void 0===o&&(o={}),this._checkLoaded();var r=this.getLayer(t);r?aa.deepEqual(r.getPaintProperty(e),n)||(r.setPaintProperty(e,n,o)&&this._updateLayer(r),this._changed=!0,this._updatedPaintProps[t]=!0):this.fire(new aa.ErrorEvent(new Error('The layer \''+t+'\' does not exist in the map\'s style and cannot be styled.')))},s.prototype.getPaintProperty=function(o,t){return this.getLayer(o).getPaintProperty(t)},s.prototype.setFeatureState=function(t,e){this._checkLoaded();var i=t.source,o=t.sourceLayer,r=this.sourceCaches[i];if(void 0!==r){var a=r.getSource().type;'geojson'===a&&o?this.fire(new aa.ErrorEvent(new Error('GeoJSON sources cannot have a sourceLayer parameter.'))):'vector'!==a||o?(void 0===t.id&&this.fire(new aa.ErrorEvent(new Error('The feature id parameter must be provided.'))),r.setFeatureState(o,t.id,e)):this.fire(new aa.ErrorEvent(new Error('The sourceLayer parameter must be provided for vector source types.')))}else this.fire(new aa.ErrorEvent(new Error('The source \''+i+'\' does not exist in the map\'s style.')))},s.prototype.removeFeatureState=function(t,e){this._checkLoaded();var i=t.source,o=this.sourceCaches[i];if(void 0!==o){var r=o.getSource().type,a='vector'===r?t.sourceLayer:void 0;'vector'!==r||a?e&&'string'!=typeof t.id&&'number'!=typeof t.id?this.fire(new aa.ErrorEvent(new Error('A feature id is required to remove its specific state property.'))):o.removeFeatureState(a,t.id,e):this.fire(new aa.ErrorEvent(new Error('The sourceLayer parameter must be provided for vector source types.')))}else this.fire(new aa.ErrorEvent(new Error('The source \''+i+'\' does not exist in the map\'s style.')))},s.prototype.getFeatureState=function(t){this._checkLoaded();var e=t.source,a=t.sourceLayer,o=this.sourceCaches[e];if(void 0!==o){if('vector'!==o.getSource().type||a)return void 0===t.id&&this.fire(new aa.ErrorEvent(new Error('The feature id parameter must be provided.'))),o.getFeatureState(a,t.id);this.fire(new aa.ErrorEvent(new Error('The sourceLayer parameter must be provided for vector source types.')))}else this.fire(new aa.ErrorEvent(new Error('The source \''+e+'\' does not exist in the map\'s style.')))},s.prototype.getTransition=function(){return aa.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},s.prototype.serialize=function(){return aa.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:aa.mapObject(this.sourceCaches,function(e){return e.serialize()}),layers:this._serializeLayers(this._order)},function(e){return void 0!==e})},s.prototype._updateLayer=function(e){this._updatedLayers[e.id]=!0,e.source&&!this._updatedSources[e.source]&&'raster'!==this.sourceCaches[e.source].getSource().type&&(this._updatedSources[e.source]='reload',this.sourceCaches[e.source].pause()),this._changed=!0},s.prototype._flattenAndSortRenderedFeatures=function(w){for(var T=this,e=function(e){return'fill-extrusion'===T._layers[e].type},t={},o=[],r=this._order.length-1,a;0<=r;r--)if(a=this._order[r],e(a)){t[a]=r;for(var n=0,i=w,s;n<i.length;n+=1)if(s=i[n][a],s)for(var l=0,c=s;l<c.length;l+=1)o.push(c[l])}o.sort(function(o,t){return t.intersectionZ-o.intersectionZ});for(var u=[],p=this._order.length-1,d;0<=p;p--)if(d=this._order[p],e(d))for(var _=o.length-1,f;0<=_&&(f=o[_].feature,!(t[f.layer.id]<p));_--)u.push(f),o.pop();else for(var m=0,g=w,h;m<g.length;m+=1)if(h=g[m][d],h)for(var y=0,x=h;y<x.length;y+=1)u.push(x[y].feature);return u},s.prototype.queryRenderedFeatures=function(t,e,i){e&&e.filter&&this._validate(aa.validateStyle.filter,'queryRenderedFeatures.filter',e.filter,null,e);var o={};if(e&&e.layers){if(!Array.isArray(e.layers))return this.fire(new aa.ErrorEvent(new Error('parameters.layers must be an Array.'))),[];for(var r=0,a=e.layers;r<a.length;r+=1){var n=a[r],s=this._layers[n];if(!s)return this.fire(new aa.ErrorEvent(new Error('The layer \''+n+'\' does not exist in the map\'s style and cannot be queried for features.'))),[];o[s.source]=!0}}var p=[];for(var d in e.availableImages=this._availableImages,this.sourceCaches)e.layers&&!o[d]||p.push(sa(this.sourceCaches[d],this._layers,this._serializedLayers,t,e,i));return this.placement&&p.push(function(g,t,y,e,x,o,a){for(var r={},s=o.queryRenderedSymbols(e),n=[],i=0,l=Object.keys(s).map(Number);i<l.length;i+=1)n.push(a[l[i]]);n.sort(O);for(var c=function(){var l=d[p],e=l.featureIndex.lookupSymbolFeatures(s[l.bucketInstanceId],t,l.bucketIndex,l.sourceLayerIndex,x.filter,x.layers,x.availableImages,g);for(var o in e){var a=r[o]=r[o]||[],n=e[o];n.sort(function(a,t){var e=l.featureSortOrder;if(e){var o=e.indexOf(a.featureIndex);return e.indexOf(t.featureIndex)-o}return t.featureIndex-a.featureIndex});for(var i=0,c=n;i<c.length;i+=1)a.push(c[i])}},p=0,d=n;p<d.length;p+=1)c();var u=function(t){r[t].forEach(function(e){var o=e.feature,r=y[g[t].source].getFeatureState(o.layer['source-layer'],o.id);o.source=o.layer.source,o.layer['source-layer']&&(o.sourceLayer=o.layer['source-layer']),o.state=r})};for(var _ in r)u(_);return r}(this._layers,this._serializedLayers,this.sourceCaches,t,e,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(p)},s.prototype.querySourceFeatures=function(t,e){e&&e.filter&&this._validate(aa.validateStyle.filter,'querySourceFeatures.filter',e.filter,null,e);var a=this.sourceCaches[t];return a?function(l,t){for(var e=l.getRenderableIds().map(function(t){return l.getTileByID(t)}),i=[],o={},r=0;r<e.length;r++){var a=e[r],n=a.tileID.canonical.key;o[n]||(o[n]=!0,a.querySourceFeatures(i,t))}return i}(a,e):[]},s.prototype.addSourceType=function(a,r,e){return s.getSourceType(a)?e(new Error('A source type called "'+a+'" already exists.')):(s.setSourceType(a,r),r.workerSourceURL?void this.dispatcher.broadcast('loadWorkerSource',{name:a,url:r.workerSourceURL},e):e(null,null))},s.prototype.getLight=function(){return this.light.getLight()},s.prototype.setLight=function(t,e){void 0===e&&(e={}),this._checkLoaded();var i=this.light.getLight(),o=!1;for(var r in t)if(!aa.deepEqual(t[r],i[r])){o=!0;break}if(o){var a={now:aa.browser.now(),transition:aa.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(t,e),this.light.updateTransitions(a)}},s.prototype._validate=function(t,e,n,s,r){return void 0===r&&(r={}),(!r||!1!==r.validate)&&Fe(this,t.call(aa.validateStyle,aa.extend({key:e,style:this.serialize(),value:n,styleSpec:aa.styleSpec},s)))},s.prototype._remove=function(){for(var t in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),aa.evented.off('pluginStateChange',this._rtlTextPluginCallback),this._layers)this._layers[t].setEventedParent(null);for(var e in this.sourceCaches)this.sourceCaches[e].clearTiles(),this.sourceCaches[e].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},s.prototype._clearSource=function(e){this.sourceCaches[e].clearTiles()},s.prototype._reloadSource=function(e){this.sourceCaches[e].resume(),this.sourceCaches[e].reload()},s.prototype._updateSources=function(o){for(var t in this.sourceCaches)this.sourceCaches[t].update(o)},s.prototype._generateCollisionBoxes=function(){for(var e in this.sourceCaches)this._reloadSource(e)},s.prototype._updatePlacement=function(t,e,i,o,r){void 0===r&&(r=!1);for(var a=!1,n=!1,s={},l=0,c=this._order,u;l<c.length;l+=1)if(u=this._layers[c[l]],'symbol'===u.type){if(!s[u.source]){var g=this.sourceCaches[u.source];s[u.source]=g.getRenderableIds(!0).map(function(e){return g.getTileByID(e)}).sort(function(o,t){return t.tileID.overscaledZ-o.tileID.overscaledZ||(o.tileID.isLessThan(t.tileID)?-1:1)})}var p=this.crossTileSymbolIndex.addLayer(u,s[u.source],t.center.lng);a=a||p}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((r=r||this._layerOrderChanged||0===i)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(aa.browser.now(),t.zoom))&&(this.pauseablePlacement=new Le(t,this._order,r,e,i,o,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,s),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(aa.browser.now()),n=!0),a&&this.pauseablePlacement.placement.setStale()),n||a)for(var d=0,y=this._order,_;d<y.length;d+=1)_=this._layers[y[d]],'symbol'===_.type&&this.placement.updateLayerOpacities(_,s[_.source]);return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(aa.browser.now())},s.prototype._releaseSymbolFadeTiles=function(){for(var e in this.sourceCaches)this.sourceCaches[e].releaseSymbolFadeTiles()},s.prototype.getImages=function(a,t,e){this.imageManager.getImages(t.icons,e),this._updateTilesForChangedImages();var r=this.sourceCaches[t.source];r&&r.setDependencies(t.tileID.key,t.type,t.icons)},s.prototype.getGlyphs=function(o,t,e){this.glyphManager.getGlyphs(t.stacks,e)},s.prototype.getResource=function(t,e,a){return aa.makeRequest(e,a)},s}(aa.Evented);qe.getSourceType=function(e){return Ua[e]},qe.setSourceType=function(o,t){Ua[o]=t},qe.registerForPluginStateChange=aa.registerForPluginStateChange;var ja=aa.createLayout([{name:'a_pos',type:'Int16',components:2}]),Ve=De('#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif','#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}'),Za=De('uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}','attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}'),Ga=De('uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}','uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}'),Ha=De('varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}','uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}'),Wa=De('void main() {gl_FragColor=vec4(1.0);}','attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}'),Xa=De('uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}','uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}'),Ka=De('uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}','uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}'),Ya=De('varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}','attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}'),Ja=De('varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}','attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}'),$a=De('uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}','attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}'),Qa=De('#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}','attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}'),tr=De('varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}','attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}'),ir=De('uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}','uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}'),mr=De('uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}','uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}'),Cr=De('varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}','uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}'),Lr=De('uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}','uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}'),Rr=De('#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}','uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}'),Vr=De('uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}','uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}'),jr=De('uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}','\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}'),Kr=De('uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}','\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}'),Yr=De('uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}','\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}'),Jr=De('uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}','\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}'),$r=De('uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}','uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}'),Qr=De('uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}','const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}'),en=De('#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}','const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}'),tn=De('#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}','const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}'),on=Object.freeze({__proto__:null,prelude:Ve,background:Za,backgroundPattern:Ga,circle:Ha,clippingMask:Wa,heatmap:Xa,heatmapTexture:Ka,collisionBox:Ya,collisionCircle:Ja,debug:$a,fill:Qa,fillOutline:tr,fillOutlinePattern:ir,fillPattern:mr,fillExtrusion:Cr,fillExtrusionPattern:Lr,hillshadePrepare:Rr,hillshade:Vr,line:jr,lineGradient:Kr,linePattern:Yr,lineSDF:Jr,raster:$r,symbolIcon:Qr,symbolSDF:en,symbolTextAndIcon:tn}),an=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};an.prototype.bind=function(p,t,e,i,o,r,a,n){this.context=p;for(var s=this.boundPaintVertexBuffers.length!==i.length,d=0;!s&&d<i.length;d++)this.boundPaintVertexBuffers[d]!==i[d]&&(s=!0);p.extVertexArrayObject&&this.vao&&this.boundProgram===t&&this.boundLayoutVertexBuffer===e&&!s&&this.boundIndexBuffer===o&&this.boundVertexOffset===r&&this.boundDynamicVertexBuffer===a&&this.boundDynamicVertexBuffer2===n?(p.bindVertexArrayOES.set(this.vao),a&&a.bind(),o&&o.dynamicDraw&&o.bind(),n&&n.bind()):this.freshBind(t,e,i,o,r,a,n)},an.prototype.freshBind=function(g,t,e,i,o,r,a){var n=g.numAttributes,l=this.context,c=l.gl,u;if(l.extVertexArrayObject)this.vao&&this.destroy(),this.vao=l.extVertexArrayObject.createVertexArrayOES(),l.bindVertexArrayOES.set(this.vao),u=0,this.boundProgram=g,this.boundLayoutVertexBuffer=t,this.boundPaintVertexBuffers=e,this.boundIndexBuffer=i,this.boundVertexOffset=o,this.boundDynamicVertexBuffer=r,this.boundDynamicVertexBuffer2=a;else{u=l.currentNumAttributes||0;for(var s=n;s<u;s++)c.disableVertexAttribArray(s)}t.enableAttributes(c,g);for(var y=0,p=e;y<p.length;y+=1)p[y].enableAttributes(c,g);r&&r.enableAttributes(c,g),a&&a.enableAttributes(c,g),t.bind(),t.setVertexAttribPointers(c,g,o);for(var d=0,_=e,f;d<_.length;d+=1)f=_[d],f.bind(),f.setVertexAttribPointers(c,g,o);r&&(r.bind(),r.setVertexAttribPointers(c,g,o)),i&&i.bind(),a&&(a.bind(),a.setVertexAttribPointers(c,g,o)),l.currentNumAttributes=n},an.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var rn=function(S,t,e,i,o,r){var a=S.gl;this.program=a.createProgram();for(var n=la(e.staticAttributes),s=i?i.getBinderAttributes():[],l=n.concat(s),c=e.staticUniforms?la(e.staticUniforms):[],u=i?i.getBinderUniforms():[],h=[],p=0,d=c.concat(u),_;p<d.length;p+=1)_=d[p],0>h.indexOf(_)&&h.push(_);var f=i?i.defines():[];r&&f.push('#define OVERDRAW_INSPECTOR;');var m=f.concat(Ve.fragmentSource,e.fragmentSource).join('\n'),g=f.concat(Ve.vertexSource,e.vertexSource).join('\n'),v=a.createShader(a.FRAGMENT_SHADER);if(a.isContextLost())this.failedToCreate=!0;else{a.shaderSource(v,m),a.compileShader(v),a.attachShader(this.program,v);var y=a.createShader(a.VERTEX_SHADER);if(a.isContextLost())this.failedToCreate=!0;else{a.shaderSource(y,g),a.compileShader(y),a.attachShader(this.program,y),this.attributes={};var x={};this.numAttributes=l.length;for(var b=0;b<this.numAttributes;b++)l[b]&&(a.bindAttribLocation(this.program,b,l[b]),this.attributes[l[b]]=b);a.linkProgram(this.program),a.deleteShader(y),a.deleteShader(v);for(var w=0,T;w<h.length;w++)if(T=h[w],T&&!x[T]){var E=a.getUniformLocation(this.program,T);E&&(x[T]=E)}this.fixedUniforms=o(S,x),this.binderUniforms=i?i.getUniforms(S,x):[]}}};rn.prototype.draw=function(E,t,e,i,o,r,a,n,s,l,c,u,h,S,d,_){var f=E.gl,g;if(!this.failedToCreate){for(var m in E.program.set(this.program),E.setDepthMode(e),E.setStencilMode(i),E.setColorMode(o),E.setCullFace(r),this.fixedUniforms)this.fixedUniforms[m].set(a[m]);S&&S.setUniforms(E,this.binderUniforms,u,{zoom:h});for(var v=(g={},g[f.LINES]=2,g[f.TRIANGLES]=3,g[f.LINE_STRIP]=1,g)[t],y=0,x=c.get();y<x.length;y+=1){var b=x[y],w=b.vaos||(b.vaos={});(w[n]||(w[n]=new an)).bind(E,this,s,S?S.getPaintVertexBuffers():[],l,b.vertexOffset,d,_),f.drawElements(t,b.primitiveLength*v,f.UNSIGNED_SHORT,2*(b.primitiveOffset*v))}}};var nn=function(t,p,i,d){var u=p.style.light,a=u.properties.get('position'),n=[a.x,a.y,a.z],m=aa.create$1();'viewport'===u.properties.get('anchor')&&aa.fromRotation(m,-p.transform.angle),aa.transformMat3(n,n,m);var l=u.properties.get('color');return{u_matrix:t,u_lightpos:n,u_lightintensity:u.properties.get('intensity'),u_lightcolor:[l.r,l.g,l.b],u_vertical_gradient:+i,u_opacity:d}},sn=function(t,e,i,o,r,a,n){return aa.extend(nn(t,e,i,o),pa(a,e,n),{u_height_factor:-C(2,r.overscaledZ)/n.tileSize/8})},ln=function(e){return{u_matrix:e}},pn=function(t,e,a,o){return aa.extend(ln(t),pa(a,e,o))},dn=function(o,a){return{u_matrix:o,u_world:a}},cn=function(t,e,n,o,r){return aa.extend(pn(t,e,n,o),{u_world:r})},un=function(t,e,i,o){var r=t.transform,s,p;if('map'===o.paint.get('circle-pitch-alignment')){var d=ue(i,1,r.zoom);s=!0,p=[d,d]}else s=!1,p=r.pixelsToGLUnits;return{u_camera_to_center_distance:r.cameraToCenterDistance,u_scale_with_map:+('map'===o.paint.get('circle-pitch-scale')),u_matrix:t.translatePosMatrix(e.posMatrix,i,o.paint.get('circle-translate'),o.paint.get('circle-translate-anchor')),u_pitch_with_map:+s,u_device_pixel_ratio:aa.browser.devicePixelRatio,u_extrude_scale:p}},mn=function(n,s,e){var i=ue(e,1,s.zoom),l=C(2,s.zoom-e.tileID.overscaledZ),r=e.tileID.overscaleFactor();return{u_matrix:n,u_camera_to_center_distance:s.cameraToCenterDistance,u_pixels_to_tile_units:i,u_extrude_scale:[s.pixelsToGLUnits[0]/(i*l),s.pixelsToGLUnits[1]/(i*l)],u_overscale_factor:r}},gn=function(o,a,r){return{u_matrix:o,u_inv_matrix:a,u_camera_to_center_distance:r.cameraToCenterDistance,u_viewport_size:[r.width,r.height]}},yn=function(o,a,r){return void 0===r&&(r=1),{u_matrix:o,u_color:a,u_overlay:0,u_overlay_scale:r}},_n=function(e){return{u_matrix:e}},fn=function(a,r,e,n){return{u_matrix:a,u_extrude_scale:ue(r,1,e),u_intensity:n}},hn=function(t,e,a){var o=t.transform;return{u_matrix:ca(t,e,a),u_ratio:1/ue(e,1,o.zoom),u_device_pixel_ratio:aa.browser.devicePixelRatio,u_units_to_pixels:[1/o.pixelsToGLUnits[0],1/o.pixelsToGLUnits[1]]}},xn=function(t,e,a,o){return aa.extend(hn(t,e,a),{u_image:0,u_image_height:o})},vn=function(t,e,i,o){var r=t.transform,a=da(e,r);return{u_matrix:ca(t,e,i),u_texsize:e.imageAtlasTexture.size,u_ratio:1/ue(e,1,r.zoom),u_device_pixel_ratio:aa.browser.devicePixelRatio,u_image:0,u_scale:[a,o.fromScale,o.toScale],u_fade:o.t,u_units_to_pixels:[1/r.pixelsToGLUnits[0],1/r.pixelsToGLUnits[1]]}},bn=function(t,e,i,o,r){var a=t.lineAtlas,n=da(e,t.transform),s='round'===i.layout.get('line-cap'),l=a.getDash(o.from,s),d=a.getDash(o.to,s),c=l.width*r.fromScale,u=d.width*r.toScale;return aa.extend(hn(t,e,i),{u_patternscale_a:[n/c,-l.height/2],u_patternscale_b:[n/u,-d.height/2],u_sdfgamma:a.width/(256*ta(c,u)*aa.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:l.y,u_tex_y_b:d.y,u_mix:r.t})},wn=function(s,l,p,d,o){return{u_matrix:s,u_tl_parent:l,u_scale_parent:p,u_buffer_scale:1,u_fade_t:d.mix,u_opacity:d.opacity*o.paint.get('raster-opacity'),u_image0:0,u_image1:1,u_brightness_low:o.paint.get('raster-brightness-min'),u_brightness_high:o.paint.get('raster-brightness-max'),u_saturation_factor:(a=o.paint.get('raster-saturation'),0<a?1-1/(1.001-a):-a),u_contrast_factor:(r=o.paint.get('raster-contrast'),0<r?1/(1-r):1+r),u_spin_weights:ua(o.paint.get('raster-hue-rotate'))};var r,a},Tn=function(p,t,e,d,m,r,g,y,_,f){var h=m.transform;return{u_is_size_zoom_constant:+('constant'===p||'source'===p),u_is_size_feature_constant:+('constant'===p||'camera'===p),u_size_t:t?t.uSizeT:0,u_size:t?t.uSize:0,u_camera_to_center_distance:h.cameraToCenterDistance,u_pitch:2*(h.pitch/360)*Xe,u_rotate_symbol:+e,u_aspect_ratio:h.width/h.height,u_fade_change:m.options.fadeDuration?m.symbolFadeChange:1,u_matrix:r,u_label_plane_matrix:g,u_coord_matrix:y,u_is_text:+_,u_pitch_with_map:+d,u_texsize:f,u_texture:0}},En=function(t,e,i,o,r,a,n,s,l,d,c){var u=r.transform;return aa.extend(Tn(t,e,i,o,r,a,n,s,l,d),{u_gamma_scale:o?Ze(u._pitch)*u.cameraToCenterDistance:1,u_device_pixel_ratio:aa.browser.devicePixelRatio,u_is_halo:+c})},Sn=function(t,e,i,o,r,a,n,s,l,p){return aa.extend(En(t,e,i,o,r,a,n,s,!0,l,!0),{u_texsize_icon:p,u_texture_icon:1})},Cn=function(o,a,r){return{u_matrix:o,u_opacity:a,u_color:r}},In=function(t,s,l,o,r,a){return aa.extend(function(d,t,e,i){var o=e.imageManager.getPattern(d.from.toString()),r=e.imageManager.getPattern(d.to.toString()),a=e.imageManager.getPixelSize(),n=a.width,s=a.height,l=C(2,i.tileID.overscaledZ),c=i.tileSize*C(2,e.transform.tileZoom)/l,u=c*(i.tileID.canonical.x+i.tileID.wrap*l),m=c*i.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:o.tl,u_pattern_br_a:o.br,u_pattern_tl_b:r.tl,u_pattern_br_b:r.br,u_texsize:[n,s],u_mix:t.t,u_pattern_size_a:o.displaySize,u_pattern_size_b:r.displaySize,u_scale_a:t.fromScale,u_scale_b:t.toScale,u_tile_units_to_pixels:1/ue(i,1,e.transform.tileZoom),u_pixel_coord_upper:[u>>16,m>>16],u_pixel_coord_lower:[65535&u,65535&m]}}(o,a,l,r),{u_matrix:t,u_opacity:s})},An={fillExtrusion:function(t,e){return{u_matrix:new aa.UniformMatrix4f(t,e.u_matrix),u_lightpos:new aa.Uniform3f(t,e.u_lightpos),u_lightintensity:new aa.Uniform1f(t,e.u_lightintensity),u_lightcolor:new aa.Uniform3f(t,e.u_lightcolor),u_vertical_gradient:new aa.Uniform1f(t,e.u_vertical_gradient),u_opacity:new aa.Uniform1f(t,e.u_opacity)}},fillExtrusionPattern:function(t,e){return{u_matrix:new aa.UniformMatrix4f(t,e.u_matrix),u_lightpos:new aa.Uniform3f(t,e.u_lightpos),u_lightintensity:new aa.Uniform1f(t,e.u_lightintensity),u_lightcolor:new aa.Uniform3f(t,e.u_lightcolor),u_vertical_gradient:new aa.Uniform1f(t,e.u_vertical_gradient),u_height_factor:new aa.Uniform1f(t,e.u_height_factor),u_image:new aa.Uniform1i(t,e.u_image),u_texsize:new aa.Uniform2f(t,e.u_texsize),u_pixel_coord_upper:new aa.Uniform2f(t,e.u_pixel_coord_upper),u_pixel_coord_lower:new aa.Uniform2f(t,e.u_pixel_coord_lower),u_scale:new aa.Uniform3f(t,e.u_scale),u_fade:new aa.Uniform1f(t,e.u_fade),u_opacity:new aa.Uniform1f(t,e.u_opacity)}},fill:function(t,e){return{u_matrix:new aa.UniformMatrix4f(t,e.u_matrix)}},fillPattern:function(t,e){return{u_matrix:new aa.UniformMatrix4f(t,e.u_matrix),u_image:new aa.Uniform1i(t,e.u_image),u_texsize:new aa.Uniform2f(t,e.u_texsize),u_pixel_coord_upper:new aa.Uniform2f(t,e.u_pixel_coord_upper),u_pixel_coord_lower:new aa.Uniform2f(t,e.u_pixel_coord_lower),u_scale:new aa.Uniform3f(t,e.u_scale),u_fade:new aa.Uniform1f(t,e.u_fade)}},fillOutline:function(t,e){return{u_matrix:new aa.UniformMatrix4f(t,e.u_matrix),u_world:new aa.Uniform2f(t,e.u_world)}},fillOutlinePattern:function(t,e){return{u_matrix:new aa.UniformMatrix4f(t,e.u_matrix),u_world:new aa.Uniform2f(t,e.u_world),u_image:new aa.Uniform1i(t,e.u_image),u_texsize:new aa.Uniform2f(t,e.u_texsize),u_pixel_coord_upper:new aa.Uniform2f(t,e.u_pixel_coord_upper),u_pixel_coord_lower:new aa.Uniform2f(t,e.u_pixel_coord_lower),u_scale:new aa.Uniform3f(t,e.u_scale),u_fade:new aa.Uniform1f(t,e.u_fade)}},circle:function(t,e){return{u_camera_to_center_distance:new aa.Uniform1f(t,e.u_camera_to_center_distance),u_scale_with_map:new aa.Uniform1i(t,e.u_scale_with_map),u_pitch_with_map:new aa.Uniform1i(t,e.u_pitch_with_map),u_extrude_scale:new aa.Uniform2f(t,e.u_extrude_scale),u_device_pixel_ratio:new aa.Uniform1f(t,e.u_device_pixel_ratio),u_matrix:new aa.UniformMatrix4f(t,e.u_matrix)}},collisionBox:function(t,e){return{u_matrix:new aa.UniformMatrix4f(t,e.u_matrix),u_camera_to_center_distance:new aa.Uniform1f(t,e.u_camera_to_center_distance),u_pixels_to_tile_units:new aa.Uniform1f(t,e.u_pixels_to_tile_units),u_extrude_scale:new aa.Uniform2f(t,e.u_extrude_scale),u_overscale_factor:new aa.Uniform1f(t,e.u_overscale_factor)}},collisionCircle:function(t,e){return{u_matrix:new aa.UniformMatrix4f(t,e.u_matrix),u_inv_matrix:new aa.UniformMatrix4f(t,e.u_inv_matrix),u_camera_to_center_distance:new aa.Uniform1f(t,e.u_camera_to_center_distance),u_viewport_size:new aa.Uniform2f(t,e.u_viewport_size)}},debug:function(t,e){return{u_color:new aa.UniformColor(t,e.u_color),u_matrix:new aa.UniformMatrix4f(t,e.u_matrix),u_overlay:new aa.Uniform1i(t,e.u_overlay),u_overlay_scale:new aa.Uniform1f(t,e.u_overlay_scale)}},clippingMask:function(t,e){return{u_matrix:new aa.UniformMatrix4f(t,e.u_matrix)}},heatmap:function(t,e){return{u_extrude_scale:new aa.Uniform1f(t,e.u_extrude_scale),u_intensity:new aa.Uniform1f(t,e.u_intensity),u_matrix:new aa.UniformMatrix4f(t,e.u_matrix)}},heatmapTexture:function(t,e){return{u_matrix:new aa.UniformMatrix4f(t,e.u_matrix),u_world:new aa.Uniform2f(t,e.u_world),u_image:new aa.Uniform1i(t,e.u_image),u_color_ramp:new aa.Uniform1i(t,e.u_color_ramp),u_opacity:new aa.Uniform1f(t,e.u_opacity)}},hillshade:function(t,e){return{u_matrix:new aa.UniformMatrix4f(t,e.u_matrix),u_image:new aa.Uniform1i(t,e.u_image),u_latrange:new aa.Uniform2f(t,e.u_latrange),u_light:new aa.Uniform2f(t,e.u_light),u_shadow:new aa.UniformColor(t,e.u_shadow),u_highlight:new aa.UniformColor(t,e.u_highlight),u_accent:new aa.UniformColor(t,e.u_accent)}},hillshadePrepare:function(t,e){return{u_matrix:new aa.UniformMatrix4f(t,e.u_matrix),u_image:new aa.Uniform1i(t,e.u_image),u_dimension:new aa.Uniform2f(t,e.u_dimension),u_zoom:new aa.Uniform1f(t,e.u_zoom),u_unpack:new aa.Uniform4f(t,e.u_unpack)}},line:function(t,e){return{u_matrix:new aa.UniformMatrix4f(t,e.u_matrix),u_ratio:new aa.Uniform1f(t,e.u_ratio),u_device_pixel_ratio:new aa.Uniform1f(t,e.u_device_pixel_ratio),u_units_to_pixels:new aa.Uniform2f(t,e.u_units_to_pixels)}},lineGradient:function(t,e){return{u_matrix:new aa.UniformMatrix4f(t,e.u_matrix),u_ratio:new aa.Uniform1f(t,e.u_ratio),u_device_pixel_ratio:new aa.Uniform1f(t,e.u_device_pixel_ratio),u_units_to_pixels:new aa.Uniform2f(t,e.u_units_to_pixels),u_image:new aa.Uniform1i(t,e.u_image),u_image_height:new aa.Uniform1f(t,e.u_image_height)}},linePattern:function(t,e){return{u_matrix:new aa.UniformMatrix4f(t,e.u_matrix),u_texsize:new aa.Uniform2f(t,e.u_texsize),u_ratio:new aa.Uniform1f(t,e.u_ratio),u_device_pixel_ratio:new aa.Uniform1f(t,e.u_device_pixel_ratio),u_image:new aa.Uniform1i(t,e.u_image),u_units_to_pixels:new aa.Uniform2f(t,e.u_units_to_pixels),u_scale:new aa.Uniform3f(t,e.u_scale),u_fade:new aa.Uniform1f(t,e.u_fade)}},lineSDF:function(t,e){return{u_matrix:new aa.UniformMatrix4f(t,e.u_matrix),u_ratio:new aa.Uniform1f(t,e.u_ratio),u_device_pixel_ratio:new aa.Uniform1f(t,e.u_device_pixel_ratio),u_units_to_pixels:new aa.Uniform2f(t,e.u_units_to_pixels),u_patternscale_a:new aa.Uniform2f(t,e.u_patternscale_a),u_patternscale_b:new aa.Uniform2f(t,e.u_patternscale_b),u_sdfgamma:new aa.Uniform1f(t,e.u_sdfgamma),u_image:new aa.Uniform1i(t,e.u_image),u_tex_y_a:new aa.Uniform1f(t,e.u_tex_y_a),u_tex_y_b:new aa.Uniform1f(t,e.u_tex_y_b),u_mix:new aa.Uniform1f(t,e.u_mix)}},raster:function(t,e){return{u_matrix:new aa.UniformMatrix4f(t,e.u_matrix),u_tl_parent:new aa.Uniform2f(t,e.u_tl_parent),u_scale_parent:new aa.Uniform1f(t,e.u_scale_parent),u_buffer_scale:new aa.Uniform1f(t,e.u_buffer_scale),u_fade_t:new aa.Uniform1f(t,e.u_fade_t),u_opacity:new aa.Uniform1f(t,e.u_opacity),u_image0:new aa.Uniform1i(t,e.u_image0),u_image1:new aa.Uniform1i(t,e.u_image1),u_brightness_low:new aa.Uniform1f(t,e.u_brightness_low),u_brightness_high:new aa.Uniform1f(t,e.u_brightness_high),u_saturation_factor:new aa.Uniform1f(t,e.u_saturation_factor),u_contrast_factor:new aa.Uniform1f(t,e.u_contrast_factor),u_spin_weights:new aa.Uniform3f(t,e.u_spin_weights)}},symbolIcon:function(t,e){return{u_is_size_zoom_constant:new aa.Uniform1i(t,e.u_is_size_zoom_constant),u_is_size_feature_constant:new aa.Uniform1i(t,e.u_is_size_feature_constant),u_size_t:new aa.Uniform1f(t,e.u_size_t),u_size:new aa.Uniform1f(t,e.u_size),u_camera_to_center_distance:new aa.Uniform1f(t,e.u_camera_to_center_distance),u_pitch:new aa.Uniform1f(t,e.u_pitch),u_rotate_symbol:new aa.Uniform1i(t,e.u_rotate_symbol),u_aspect_ratio:new aa.Uniform1f(t,e.u_aspect_ratio),u_fade_change:new aa.Uniform1f(t,e.u_fade_change),u_matrix:new aa.UniformMatrix4f(t,e.u_matrix),u_label_plane_matrix:new aa.UniformMatrix4f(t,e.u_label_plane_matrix),u_coord_matrix:new aa.UniformMatrix4f(t,e.u_coord_matrix),u_is_text:new aa.Uniform1i(t,e.u_is_text),u_pitch_with_map:new aa.Uniform1i(t,e.u_pitch_with_map),u_texsize:new aa.Uniform2f(t,e.u_texsize),u_texture:new aa.Uniform1i(t,e.u_texture)}},symbolSDF:function(t,e){return{u_is_size_zoom_constant:new aa.Uniform1i(t,e.u_is_size_zoom_constant),u_is_size_feature_constant:new aa.Uniform1i(t,e.u_is_size_feature_constant),u_size_t:new aa.Uniform1f(t,e.u_size_t),u_size:new aa.Uniform1f(t,e.u_size),u_camera_to_center_distance:new aa.Uniform1f(t,e.u_camera_to_center_distance),u_pitch:new aa.Uniform1f(t,e.u_pitch),u_rotate_symbol:new aa.Uniform1i(t,e.u_rotate_symbol),u_aspect_ratio:new aa.Uniform1f(t,e.u_aspect_ratio),u_fade_change:new aa.Uniform1f(t,e.u_fade_change),u_matrix:new aa.UniformMatrix4f(t,e.u_matrix),u_label_plane_matrix:new aa.UniformMatrix4f(t,e.u_label_plane_matrix),u_coord_matrix:new aa.UniformMatrix4f(t,e.u_coord_matrix),u_is_text:new aa.Uniform1i(t,e.u_is_text),u_pitch_with_map:new aa.Uniform1i(t,e.u_pitch_with_map),u_texsize:new aa.Uniform2f(t,e.u_texsize),u_texture:new aa.Uniform1i(t,e.u_texture),u_gamma_scale:new aa.Uniform1f(t,e.u_gamma_scale),u_device_pixel_ratio:new aa.Uniform1f(t,e.u_device_pixel_ratio),u_is_halo:new aa.Uniform1i(t,e.u_is_halo)}},symbolTextAndIcon:function(t,e){return{u_is_size_zoom_constant:new aa.Uniform1i(t,e.u_is_size_zoom_constant),u_is_size_feature_constant:new aa.Uniform1i(t,e.u_is_size_feature_constant),u_size_t:new aa.Uniform1f(t,e.u_size_t),u_size:new aa.Uniform1f(t,e.u_size),u_camera_to_center_distance:new aa.Uniform1f(t,e.u_camera_to_center_distance),u_pitch:new aa.Uniform1f(t,e.u_pitch),u_rotate_symbol:new aa.Uniform1i(t,e.u_rotate_symbol),u_aspect_ratio:new aa.Uniform1f(t,e.u_aspect_ratio),u_fade_change:new aa.Uniform1f(t,e.u_fade_change),u_matrix:new aa.UniformMatrix4f(t,e.u_matrix),u_label_plane_matrix:new aa.UniformMatrix4f(t,e.u_label_plane_matrix),u_coord_matrix:new aa.UniformMatrix4f(t,e.u_coord_matrix),u_is_text:new aa.Uniform1i(t,e.u_is_text),u_pitch_with_map:new aa.Uniform1i(t,e.u_pitch_with_map),u_texsize:new aa.Uniform2f(t,e.u_texsize),u_texsize_icon:new aa.Uniform2f(t,e.u_texsize_icon),u_texture:new aa.Uniform1i(t,e.u_texture),u_texture_icon:new aa.Uniform1i(t,e.u_texture_icon),u_gamma_scale:new aa.Uniform1f(t,e.u_gamma_scale),u_device_pixel_ratio:new aa.Uniform1f(t,e.u_device_pixel_ratio),u_is_halo:new aa.Uniform1i(t,e.u_is_halo)}},background:function(t,e){return{u_matrix:new aa.UniformMatrix4f(t,e.u_matrix),u_opacity:new aa.Uniform1f(t,e.u_opacity),u_color:new aa.UniformColor(t,e.u_color)}},backgroundPattern:function(t,e){return{u_matrix:new aa.UniformMatrix4f(t,e.u_matrix),u_opacity:new aa.Uniform1f(t,e.u_opacity),u_image:new aa.Uniform1i(t,e.u_image),u_pattern_tl_a:new aa.Uniform2f(t,e.u_pattern_tl_a),u_pattern_br_a:new aa.Uniform2f(t,e.u_pattern_br_a),u_pattern_tl_b:new aa.Uniform2f(t,e.u_pattern_tl_b),u_pattern_br_b:new aa.Uniform2f(t,e.u_pattern_br_b),u_texsize:new aa.Uniform2f(t,e.u_texsize),u_mix:new aa.Uniform1f(t,e.u_mix),u_pattern_size_a:new aa.Uniform2f(t,e.u_pattern_size_a),u_pattern_size_b:new aa.Uniform2f(t,e.u_pattern_size_b),u_scale_a:new aa.Uniform1f(t,e.u_scale_a),u_scale_b:new aa.Uniform1f(t,e.u_scale_b),u_pixel_coord_upper:new aa.Uniform2f(t,e.u_pixel_coord_upper),u_pixel_coord_lower:new aa.Uniform2f(t,e.u_pixel_coord_lower),u_tile_units_to_pixels:new aa.Uniform1f(t,e.u_tile_units_to_pixels)}}},kn=aa.identity(new Float32Array(16)),Pn=new aa.Color(1,0,0,1),lo=new aa.Color(0,1,0,1),co=new aa.Color(0,0,1,1),uo=new aa.Color(1,0,1,1),ho=new aa.Color(0,1,1,1),po={symbol:function(t,e,i,o,r){if('translucent'===t.renderPass){var a=It.disabled,n=t.colorModeForRenderPass();i.layout.get('text-variable-anchor')&&function(t,e,i,o,r,a,n){for(var s=e.transform,l='map'===r,c='map'===a,u=0,h=t;u<h.length;u+=1){var p=h[u],d=o.getTile(p),_=d.getBucket(i);if(_&&_.text&&_.text.segments.get().length){var f=aa.evaluateSizeForZoom(_.textSizeData,s.zoom),m=ue(d,1,e.transform.zoom),g=Ht(p.posMatrix,c,l,e.transform,m),v='none'!==i.layout.get('icon-text-fit')&&_.hasIconData();if(f){var y=C(2,s.zoom-d.tileID.overscaledZ);ya(_,l,c,n,aa.symbolSize,s,g,p.posMatrix,y,f,v)}}}}(o,t,i,e,i.layout.get('text-rotation-alignment'),i.layout.get('text-pitch-alignment'),r),0!==i.paint.get('icon-opacity').constantOr(1)&&to(t,e,i,o,!1,i.paint.get('icon-translate'),i.paint.get('icon-translate-anchor'),i.layout.get('icon-rotation-alignment'),i.layout.get('icon-pitch-alignment'),i.layout.get('icon-keep-upright'),a,n),0!==i.paint.get('text-opacity').constantOr(1)&&to(t,e,i,o,!0,i.paint.get('text-translate'),i.paint.get('text-translate-anchor'),i.layout.get('text-rotation-alignment'),i.layout.get('text-pitch-alignment'),i.layout.get('text-keep-upright'),a,n),e.map.showCollisionBoxes&&(ma(t,e,i,o,i.paint.get('text-translate'),i.paint.get('text-translate-anchor'),!0),ma(t,e,i,o,i.paint.get('icon-translate'),i.paint.get('icon-translate-anchor'),!1))}},circle:function(t,e,i,o){if('translucent'===t.renderPass){var r=i.paint.get('circle-opacity'),a=i.paint.get('circle-stroke-width'),n=i.paint.get('circle-stroke-opacity'),s=void 0!==i.layout.get('circle-sort-key').constantOr(1);if(0!==r.constantOr(1)||0!==a.constantOr(1)&&0!==n.constantOr(1)){for(var l=t.context,c=l.gl,u=t.depthModeForSublayer(0,Et.ReadOnly),h=It.disabled,p=t.colorModeForRenderPass(),d=[],_=0;_<o.length;_++){var f=o[_],m=e.getTile(f),g=m.getBucket(i);if(g){var v=g.programConfigurations.get(i.id),C={programConfiguration:v,program:t.useProgram('circle',v),layoutVertexBuffer:g.layoutVertexBuffer,indexBuffer:g.indexBuffer,uniformValues:un(t,f,m,i)};if(s)for(var A=0,b=g.segments.get(),w;A<b.length;A+=1)w=b[A],d.push({segments:new aa.SegmentVector([w]),sortKey:w.sortKey,state:C});else d.push({segments:g.segments,sortKey:0,state:C})}}s&&d.sort(function(o,t){return o.sortKey-t.sortKey});for(var T=0,E=d;T<E.length;T+=1){var I=E[T],k=I.state;k.program.draw(l,c.TRIANGLES,u,h,p,St.disabled,k.uniformValues,i.id,k.layoutVertexBuffer,k.indexBuffer,I.segments,i.paint,t.transform.zoom,k.programConfiguration)}}}},heatmap:function(t,e,i,o){if(0!==i.paint.get('heatmap-opacity'))if('offscreen'===t.renderPass){var r=t.context,a=r.gl,n=It.disabled,s=new Pt([a.ONE,a.ONE],aa.Color.transparent,[!0,!0,!0,!0]);!function(n,t,e){var i=n.gl;n.activeTexture.set(i.TEXTURE1),n.viewport.set([0,0,t.width/4,t.height/4]);var o=e.heatmapFbo;if(o)i.bindTexture(i.TEXTURE_2D,o.colorAttachment.get()),n.bindFramebuffer.set(o.framebuffer);else{var r=i.createTexture();i.bindTexture(i.TEXTURE_2D,r),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR),o=e.heatmapFbo=n.createFramebuffer(t.width/4,t.height/4,!1),function(a,t,e,n){var o=a.gl;o.texImage2D(o.TEXTURE_2D,0,o.RGBA,t.width/4,t.height/4,0,o.RGBA,a.extRenderToTextureHalfFloat?a.extTextureHalfFloat.HALF_FLOAT_OES:o.UNSIGNED_BYTE,null),n.colorAttachment.set(e)}(n,t,r,o)}}(r,t,i),r.clear({color:aa.Color.transparent});for(var l=0,c;l<o.length;l++)if(c=o[l],!e.hasRenderableParent(c)){var u=e.getTile(c),m=u.getBucket(i);if(m){var p=m.programConfigurations.get(i.id);t.useProgram('heatmap',p).draw(r,a.TRIANGLES,Et.disabled,n,s,St.disabled,fn(c.posMatrix,u,t.transform.zoom,i.paint.get('heatmap-intensity')),i.id,m.layoutVertexBuffer,m.indexBuffer,m.segments,i.paint,t.transform.zoom,p)}}r.viewport.set([0,0,t.width,t.height])}else'translucent'===t.renderPass&&(t.context.setColorMode(t.colorModeForRenderPass()),function(t,e){var i=t.context,o=i.gl,r=e.heatmapFbo;if(r){i.activeTexture.set(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,r.colorAttachment.get()),i.activeTexture.set(o.TEXTURE1);var a=e.colorRampTexture;a||(a=e.colorRampTexture=new aa.Texture(i,e.colorRamp,o.RGBA)),a.bind(o.LINEAR,o.CLAMP_TO_EDGE),t.useProgram('heatmapTexture').draw(i,o.TRIANGLES,Et.disabled,It.disabled,t.colorModeForRenderPass(),St.disabled,function(t,e){var o=aa.create();aa.ortho(o,0,t.width,t.height,0,0,1);var r=t.context.gl;return{u_matrix:o,u_world:[r.drawingBufferWidth,r.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:e.paint.get('heatmap-opacity')}}(t,e),e.id,t.viewportBuffer,t.quadTriangleIndexBuffer,t.viewportSegments,e.paint,t.transform.zoom)}}(t,i))},line:function(t,e,i,o){if('translucent'===t.renderPass){var r=i.paint.get('line-opacity'),a=i.paint.get('line-width');if(0!==r.constantOr(1)&&0!==a.constantOr(1))for(var n=t.depthModeForSublayer(0,Et.ReadOnly),s=t.colorModeForRenderPass(),l=i.paint.get('line-dasharray'),c=i.paint.get('line-pattern'),u=c.constantOr(1),F=i.paint.get('line-gradient'),p=i.getCrossfadeParameters(),d=u?'linePattern':l?'lineSDF':F?'lineGradient':'line',_=t.context,f=_.gl,O=!0,g=0,v=o;g<v.length;g+=1){var y=v[g],x=e.getTile(y);if(!u||x.patternsLoaded()){var b=x.getBucket(i);if(b){var w=b.programConfigurations.get(i.id),T=t.context.program.get(),E=t.useProgram(d,w),I=O||E.program!==T,P=c.constantOr(null);if(P&&x.imageAtlas){var S=x.imageAtlas,C=S.patternPositions[P.to.toString()],z=S.patternPositions[P.from.toString()];C&&z&&w.setConstantPatternPositions(C,z)}var D=u?vn(t,x,i,p):l?bn(t,x,i,l,p):F?xn(t,x,i,b.lineClipsArray.length):hn(t,x,i);if(u)_.activeTexture.set(f.TEXTURE0),x.imageAtlasTexture.bind(f.LINEAR,f.CLAMP_TO_EDGE),w.updatePaintBuffers(p);else if(l&&(I||t.lineAtlas.dirty))_.activeTexture.set(f.TEXTURE0),t.lineAtlas.bind(_);else if(F){var M=b.gradients[i.id],L=M.texture;if(i.gradientVersion!==M.version){var A=256;if(i.stepInterpolant){var N=e.getSource().maxzoom,k=y.canonical.z===N?m(1<<t.transform.maxZoom-y.canonical.z):1;A=aa.clamp(aa.nextPowerOfTwo(1024*(b.maxLineLength/aa.EXTENT)*k),256,_.maxTextureSize)}M.gradient=aa.renderColorRamp({expression:i.gradientExpression(),evaluationKey:'lineProgress',resolution:A,image:M.gradient||void 0,clips:b.lineClipsArray}),M.texture?M.texture.update(M.gradient):M.texture=new aa.Texture(_,M.gradient,f.RGBA),M.version=i.gradientVersion,L=M.texture}_.activeTexture.set(f.TEXTURE0),L.bind(i.stepInterpolant?f.NEAREST:f.LINEAR,f.CLAMP_TO_EDGE)}E.draw(_,f.TRIANGLES,n,t.stencilModeForClipping(y),s,St.disabled,D,i.id,b.layoutVertexBuffer,b.indexBuffer,b.segments,i.paint,t.transform.zoom,w,b.layoutVertexBuffer2),O=!1}}}}},fill:function(t,e,i,o){var r=i.paint.get('fill-color'),a=i.paint.get('fill-opacity');if(0!==a.constantOr(1)){var n=t.colorModeForRenderPass(),s=i.paint.get('fill-pattern'),l=t.opaquePassEnabledForLayer()&&!s.constantOr(1)&&1===r.constantOr(aa.Color.transparent).a&&1===a.constantOr(0)?'opaque':'translucent';if(t.renderPass===l){var p=t.depthModeForSublayer(1,'opaque'===t.renderPass?Et.ReadWrite:Et.ReadOnly);io(t,e,i,o,p,n,!1)}if('translucent'===t.renderPass&&i.paint.get('fill-antialias')){var d=t.depthModeForSublayer(i.getPaintProperty('fill-outline-color')?2:0,Et.ReadOnly);io(t,e,i,o,d,n,!0)}}},"fill-extrusion":function(s,t,e,i){var o=e.paint.get('fill-extrusion-opacity');if(0!==o&&'translucent'===s.renderPass){var r=new Et(s.context.gl.LEQUAL,Et.ReadWrite,s.depthRangeFor3D);if(1!==o||e.paint.get('fill-extrusion-pattern').constantOr(1))oo(s,t,e,i,r,It.disabled,Pt.disabled),oo(s,t,e,i,r,s.stencilModeFor3D(),s.colorModeForRenderPass());else{var a=s.colorModeForRenderPass();oo(s,t,e,i,r,It.disabled,a)}}},hillshade:function(d,t,e,i){if('offscreen'===d.renderPass||'translucent'===d.renderPass){for(var o=d.context,r=d.depthModeForSublayer(0,Et.ReadOnly),a=d.colorModeForRenderPass(),n='translucent'===d.renderPass?d.stencilConfigForOverlap(i):[{},i],s=n[0],l=0,c=n[1];l<c.length;l+=1){var u=c[l],m=t.getTile(u);m.needsHillshadePrepare&&'offscreen'===d.renderPass?ao(d,m,e,r,It.disabled,a):'translucent'===d.renderPass&&ro(d,m,e,r,s[u.overscaledZ],a)}o.viewport.set([0,0,d.width,d.height])}},raster:function(S,t,e,i){if('translucent'===S.renderPass&&0!==e.paint.get('raster-opacity')&&i.length)for(var o=S.context,r=o.gl,a=t.getSource(),n=S.useProgram('raster'),s=S.colorModeForRenderPass(),l=a instanceof M?[{},i]:S.stencilConfigForOverlap(i),c=l[0],u=l[1],h=u[u.length-1].overscaledZ,p=!S.options.moving,d=0,_=u;d<_.length;d+=1){var f=_[d],m=S.depthModeForSublayer(f.overscaledZ-h,1===e.paint.get('raster-opacity')?Et.ReadWrite:Et.ReadOnly,r.LESS),g=t.getTile(f),v=S.transform.calculatePosMatrix(f.toUnwrapped(),p);g.registerFadeDuration(e.paint.get('raster-fade-duration'));var y=t.findLoadedParent(f,0),x=no(g,y,t,e,S.transform),b=void 0,w=void 0,T='nearest'===e.paint.get('raster-resampling')?r.NEAREST:r.LINEAR;o.activeTexture.set(r.TEXTURE0),g.texture.bind(T,r.CLAMP_TO_EDGE,r.LINEAR_MIPMAP_NEAREST),o.activeTexture.set(r.TEXTURE1),y?(y.texture.bind(T,r.CLAMP_TO_EDGE,r.LINEAR_MIPMAP_NEAREST),b=C(2,y.tileID.overscaledZ-g.tileID.overscaledZ),w=[g.tileID.canonical.x*b%1,g.tileID.canonical.y*b%1]):g.texture.bind(T,r.CLAMP_TO_EDGE,r.LINEAR_MIPMAP_NEAREST);var E=wn(v,w||[0,0],b||1,x,e);a instanceof M?n.draw(o,r.TRIANGLES,m,It.disabled,s,St.disabled,E,e.id,a.boundsBuffer,S.quadTriangleIndexBuffer,a.boundsSegments):n.draw(o,r.TRIANGLES,m,c[f.overscaledZ],s,St.disabled,E,e.id,S.rasterBoundsBuffer,S.quadTriangleIndexBuffer,S.rasterBoundsSegments)}},background:function(w,t,e){var i=e.paint.get('background-color'),o=e.paint.get('background-opacity');if(0!==o){var r=w.context,a=r.gl,n=w.transform,s=n.tileSize,T=e.paint.get('background-pattern');if(!w.isPatternMissing(T)){var E=!T&&1===i.a&&1===o&&w.opaquePassEnabledForLayer()?'opaque':'translucent';if(w.renderPass===E){var u=It.disabled,h=w.depthModeForSublayer(0,'opaque'==E?Et.ReadWrite:Et.ReadOnly),p=w.colorModeForRenderPass(),d=w.useProgram(T?'backgroundPattern':'background'),_=n.coveringTiles({tileSize:s});T&&(r.activeTexture.set(a.TEXTURE0),w.imageManager.bind(w.context));for(var f=e.getCrossfadeParameters(),m=0,g=_;m<g.length;m+=1){var v=g[m],S=w.transform.calculatePosMatrix(v.toUnwrapped()),x=T?In(S,o,w,T,{tileID:v,tileSize:s},f):Cn(S,o,i);d.draw(r,a.TRIANGLES,h,u,p,St.disabled,x,e.id,w.tileExtentBuffer,w.quadTriangleIndexBuffer,w.tileExtentSegments)}}}}},debug:function(a,t,e){for(var r=0;r<e.length;r++)mo(a,t,e[r])},custom:function(s,t,e){var i=s.context,o=e.implementation;if('offscreen'===s.renderPass){var r=o.prerender;r&&(s.setCustomLayerDefaults(),i.setColorMode(s.colorModeForRenderPass()),r.call(o,i.gl,s.transform.customLayerMatrix()),i.setDirty(),s.setBaseState())}else if('translucent'===s.renderPass){s.setCustomLayerDefaults(),i.setColorMode(s.colorModeForRenderPass()),i.setStencilMode(It.disabled);var a='3d'===o.renderingMode?new Et(s.context.gl.LEQUAL,Et.ReadWrite,s.depthRangeFor3D):s.depthModeForSublayer(0,Et.ReadOnly);i.setDepthMode(a),o.render(i.gl,s.transform.customLayerMatrix()),i.setDirty(),s.setBaseState(),i.bindFramebuffer.set(null)}}},vo=function(o,t){this.context=new Ct(o),this.transform=t,this._tileTextures={},this.setup(),this.numSublayers=zt.maxUnderzooming+zt.maxOverzooming+1,this.depthEpsilon=1/65536,this.crossTileSymbolIndex=new Oe,this.gpuTimers={}},yo;vo.prototype.resize=function(t,e){if(this.width=t*aa.browser.devicePixelRatio,this.height=e*aa.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var a=0,o=this.style._order;a<o.length;a+=1)this.style._layers[o[a]].resize()},vo.prototype.setup=function(){var t=this.context,e=new aa.StructArrayLayout2i4;e.emplaceBack(0,0),e.emplaceBack(aa.EXTENT,0),e.emplaceBack(0,aa.EXTENT),e.emplaceBack(aa.EXTENT,aa.EXTENT),this.tileExtentBuffer=t.createVertexBuffer(e,ja.members),this.tileExtentSegments=aa.SegmentVector.simpleSegment(0,0,4,2);var i=new aa.StructArrayLayout2i4;i.emplaceBack(0,0),i.emplaceBack(aa.EXTENT,0),i.emplaceBack(0,aa.EXTENT),i.emplaceBack(aa.EXTENT,aa.EXTENT),this.debugBuffer=t.createVertexBuffer(i,ja.members),this.debugSegments=aa.SegmentVector.simpleSegment(0,0,4,5);var o=new aa.StructArrayLayout4i8;o.emplaceBack(0,0,0,0),o.emplaceBack(aa.EXTENT,0,aa.EXTENT,0),o.emplaceBack(0,aa.EXTENT,0,aa.EXTENT),o.emplaceBack(aa.EXTENT,aa.EXTENT,aa.EXTENT,aa.EXTENT),this.rasterBoundsBuffer=t.createVertexBuffer(o,Ma.members),this.rasterBoundsSegments=aa.SegmentVector.simpleSegment(0,0,4,2);var r=new aa.StructArrayLayout2i4;r.emplaceBack(0,0),r.emplaceBack(1,0),r.emplaceBack(0,1),r.emplaceBack(1,1),this.viewportBuffer=t.createVertexBuffer(r,ja.members),this.viewportSegments=aa.SegmentVector.simpleSegment(0,0,4,2);var a=new aa.StructArrayLayout1ui2;a.emplaceBack(0),a.emplaceBack(1),a.emplaceBack(3),a.emplaceBack(2),a.emplaceBack(0),this.tileBorderIndexBuffer=t.createIndexBuffer(a);var n=new aa.StructArrayLayout3ui6;n.emplaceBack(0,1,2),n.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=t.createIndexBuffer(n),this.emptyTexture=new aa.Texture(t,{width:1,height:1,data:new Uint8Array([0,0,0,0])},t.gl.RGBA);var s=this.context.gl;this.stencilClearMode=new It({func:s.ALWAYS,mask:0},0,255,s.ZERO,s.ZERO,s.ZERO)},vo.prototype.clearStencil=function(){var t=this.context,e=t.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var a=aa.create();aa.ortho(a,0,this.width,this.height,0,0,1),aa.scale(a,a,[e.drawingBufferWidth,e.drawingBufferHeight,0]),this.useProgram('clippingMask').draw(t,e.TRIANGLES,Et.disabled,this.stencilClearMode,Pt.disabled,St.disabled,_n(a),'$clipping',this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},vo.prototype._renderTileClippingMasks=function(p,t){if(this.currentStencilSource!==p.source&&p.isTileClipped()&&t&&t.length){this.currentStencilSource=p.source;var e=this.context,i=e.gl;256<this.nextStencilID+t.length&&this.clearStencil(),e.setColorMode(Pt.disabled),e.setDepthMode(Et.disabled);var o=this.useProgram('clippingMask');this._tileClippingMaskIDs={};for(var r=0,a=t;r<a.length;r+=1){var n=a[r],s=this._tileClippingMaskIDs[n.key]=this.nextStencilID++;o.draw(e,i.TRIANGLES,Et.disabled,new It({func:i.ALWAYS,mask:0},s,255,i.KEEP,i.KEEP,i.REPLACE),Pt.disabled,St.disabled,_n(n.posMatrix),'$clipping',this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},vo.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,256<this.nextStencilID+1&&this.clearStencil();var o=this.nextStencilID++,t=this.context.gl;return new It({func:t.NOTEQUAL,mask:255},o,255,t.KEEP,t.KEEP,t.REPLACE)},vo.prototype.stencilModeForClipping=function(o){var t=this.context.gl;return new It({func:t.EQUAL,mask:255},this._tileClippingMaskIDs[o.key],0,t.KEEP,t.KEEP,t.REPLACE)},vo.prototype.stencilConfigForOverlap=function(l){var t=this.context.gl,i=l.sort(function(o,t){return t.overscaledZ-o.overscaledZ}),o=i[i.length-1].overscaledZ,r=i[0].overscaledZ-o+1,a;if(1<r){this.currentStencilSource=void 0,256<this.nextStencilID+r&&this.clearStencil();for(var e={},n=0;n<r;n++)e[n+o]=new It({func:t.GEQUAL,mask:255},n+this.nextStencilID,255,t.KEEP,t.KEEP,t.REPLACE);return this.nextStencilID+=r,[e,i]}return[(a={},a[o]=It.disabled,a),i]},vo.prototype.colorModeForRenderPass=function(){var t=this.context.gl;return this._showOverdrawInspector?new Pt([t.CONSTANT_COLOR,t.ONE],new aa.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):'opaque'===this.renderPass?Pt.unblended:Pt.alphaBlended},vo.prototype.depthModeForSublayer=function(a,t,e){if(!this.opaquePassEnabledForLayer())return Et.disabled;var r=1-((1+this.currentLayer)*this.numSublayers+a)*this.depthEpsilon;return new Et(e||this.context.gl.LEQUAL,t,[r,r])},vo.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},vo.prototype.render=function(t,e){var i=this;this.style=t,this.options=e,this.lineAtlas=t.lineAtlas,this.imageManager=t.imageManager,this.glyphManager=t.glyphManager,this.symbolFadeChange=t.placement.symbolFadeChange(aa.browser.now()),this.imageManager.beginFrame();var o=this.style._order,r=this.style.sourceCaches;for(var a in r){var n=r[a];n.used&&n.prepare(this.context)}var s={},u={},h={},p,S;for(var c in r){var d=r[c];s[c]=d.getVisibleCoordinates(),u[c]=s[c].slice().reverse(),h[c]=d.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var _=0;_<o.length;_++)if(this.style._layers[o[_]].is3D()){this.opaquePassCutoff=_;break}this.renderPass='offscreen';for(var f=0,m=o,g;f<m.length;f+=1)if(g=this.style._layers[m[f]],g.hasOffscreenPass()&&!g.isHidden(this.transform.zoom)){var v=u[g.source];('custom'===g.type||v.length)&&this.renderLayer(this,r[g.source],g,v)}for(this.context.bindFramebuffer.set(null),this.context.clear({color:e.showOverdrawInspector?aa.Color.black:aa.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=e.showOverdrawInspector,this.depthRangeFor3D=[0,1-(t._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass='opaque',this.currentLayer=o.length-1;0<=this.currentLayer;this.currentLayer--){var y=this.style._layers[o[this.currentLayer]],x=r[y.source],b=s[y.source];this._renderTileClippingMasks(y,b),this.renderLayer(this,x,y,b)}for(this.renderPass='translucent',this.currentLayer=0;this.currentLayer<o.length;this.currentLayer++){var w=this.style._layers[o[this.currentLayer]],T=r[w.source],E=('symbol'===w.type?h:u)[w.source];this._renderTileClippingMasks(w,s[w.source]),this.renderLayer(this,T,w,E)}this.options.showTileBoundaries&&(aa.values(this.style._layers).forEach(function(e){e.source&&!e.isHidden(i.transform.zoom)&&(e.source!==(S&&S.id)&&(S=i.style.sourceCaches[e.source]),(!p||p.getSource().maxzoom<S.getSource().maxzoom)&&(p=S))}),p&&po.debug(this,p,p.getVisibleCoordinates())),this.options.showPadding&&function(o){var t=o.transform.padding;so(o,o.transform.height-(t.top||0),3,Pn),so(o,t.bottom||0,3,lo),_o(o,t.left||0,3,co),_o(o,o.transform.width-(t.right||0),3,uo);var e=o.transform.centerPoint;!function(a,t,e,r){fo(a,t-1,e-10,2,20,r),fo(a,t-10,e-1,20,2,r)}(o,e.x,o.transform.height-e.y,ho)}(this),this.context.setDefault()},vo.prototype.renderLayer=function(a,t,e,r){e.isHidden(this.transform.zoom)||('background'===e.type||'custom'===e.type||r.length)&&(this.id=e.id,this.gpuTimingStart(e),po[e.type](a,t,e,r,this.style.placement.variableOffsets),this.gpuTimingEnd())},vo.prototype.gpuTimingStart=function(o){if(this.options.gpuTiming){var t=this.context.extTimerQuery,e=this.gpuTimers[o.id];e||(e=this.gpuTimers[o.id]={calls:0,cpuTime:0,query:t.createQueryEXT()}),e.calls++,t.beginQueryEXT(t.TIME_ELAPSED_EXT,e.query)}},vo.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var e=this.context.extTimerQuery;e.endQueryEXT(e.TIME_ELAPSED_EXT)}},vo.prototype.collectGpuTimers=function(){var e=this.gpuTimers;return this.gpuTimers={},e},vo.prototype.queryGpuTimers=function(n){var t={};for(var e in n){var i=n[e],o=this.context.extTimerQuery,r=o.getQueryObjectEXT(i.query,o.QUERY_RESULT_EXT)/1e6;o.deleteQueryEXT(i.query),t[e]=r}return t},vo.prototype.translatePosMatrix=function(t,e,i,o,r){if(!i[0]&&!i[1])return t;var a=r?'map'===o?this.transform.angle:0:'viewport'===o?-this.transform.angle:0;if(a){var n=w(a),s=Ze(a);i=[i[0]*s-i[1]*n,i[0]*n+i[1]*s]}var l=[r?i[0]:ue(e,i[0],this.transform.zoom),r?i[1]:ue(e,i[1],this.transform.zoom),0],p=new Float32Array(16);return aa.translate(p,t,l),p},vo.prototype.saveTileTexture=function(o){var t=this._tileTextures[o.size[0]];t?t.push(o):this._tileTextures[o.size[0]]=[o]},vo.prototype.getTileTexture=function(o){var t=this._tileTextures[o];return t&&0<t.length?t.pop():null},vo.prototype.isPatternMissing=function(o){if(!o)return!1;if(!o.from||!o.to)return!0;var a=this.imageManager.getPattern(o.from.toString()),r=this.imageManager.getPattern(o.to.toString());return!a||!r},vo.prototype.useProgram=function(o,t){this.cache=this.cache||{};var e=''+o+(t?t.cacheKey:'')+(this._showOverdrawInspector?'/overdraw':'');return this.cache[e]||(this.cache[e]=new rn(this.context,o,on[o],t,An[o],this._showOverdrawInspector)),this.cache[e]},vo.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},vo.prototype.setBaseState=function(){var e=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(e.FUNC_ADD)},vo.prototype.initDebugOverlayCanvas=function(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=aa.window.document.createElement('canvas'),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new aa.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},vo.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var zn=function(o,t){this.points=o,this.planes=t};zn.fromInvProjectionMatrix=function(t,s,e){var o=C(2,e),l=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(e){return aa.transformMat4([],e,t)}).map(function(t){return aa.scale$1([],t,1/t[3]/s*o)}),a=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(t){var e=aa.sub([],l[t[0]],l[t[1]]),a=aa.sub([],l[t[2]],l[t[1]]),o=aa.normalize([],aa.cross([],e,a)),r=-aa.dot(o,l[t[1]]);return o.concat(r)});return new zn(l,a)};var xo=function(t,e){this.min=t,this.max=e,this.center=aa.scale$2([],aa.add([],this.min,this.max),.5)};xo.prototype.quadrant=function(t){for(var e=[0==t%2,2>t],n=aa.clone$2(this.min),o=aa.clone$2(this.max),r=0;r<e.length;r++)n[r]=e[r]?this.min[r]:this.center[r],o[r]=e[r]?this.center[r]:this.max[r];return o[2]=this.max[2],new xo(n,o)},xo.prototype.distanceX=function(e){return oa(ta(this.max[0],e[0]),this.min[0])-e[0]},xo.prototype.distanceY=function(e){return oa(ta(this.max[1],e[1]),this.min[1])-e[1]},xo.prototype.intersects=function(t){for(var e=Number.MAX_VALUE,d=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],i=!0,o=0;o<t.planes.length;o++){for(var r=t.planes[o],a=0,n=0;n<d.length;n++)a+=0<=aa.dot$1(r,d[n]);if(0===a)return 0;a!==d.length&&(i=!1)}if(i)return 2;for(var s=0;3>s;s++){for(var l=e,c=-e,u=0,m;u<t.points.length;u++)m=t.points[u][s]-this.min[s],l=ta(l,m),c=oa(c,m);if(0>c||l>this.max[s]-this.min[s])return 0}return 1};var bo=function(a,t,e,r){if(void 0===a&&(a=0),void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),isNaN(a)||0>a||isNaN(t)||0>t||isNaN(e)||0>e||isNaN(r)||0>r)throw new Error('Invalid value for edge-insets, top, bottom, left and right must all be numbers');this.top=a,this.bottom=t,this.left=e,this.right=r};bo.prototype.interpolate=function(t,e,a){return null!=e.top&&null!=t.top&&(this.top=aa.number(t.top,e.top,a)),null!=e.bottom&&null!=t.bottom&&(this.bottom=aa.number(t.bottom,e.bottom,a)),null!=e.left&&null!=t.left&&(this.left=aa.number(t.left,e.left,a)),null!=e.right&&null!=t.right&&(this.right=aa.number(t.right,e.right,a)),this},bo.prototype.getCenter=function(t,e){var a=aa.clamp((this.left+t-this.right)/2,0,t),o=aa.clamp((this.top+e-this.bottom)/2,0,e);return new aa.Point(a,o)},bo.prototype.equals=function(e){return this.top===e.top&&this.bottom===e.bottom&&this.left===e.left&&this.right===e.right},bo.prototype.clone=function(){return new bo(this.top,this.bottom,this.left,this.right)},bo.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var wo=function(t,e,n,o,r){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===r||r,this._minZoom=t||0,this._maxZoom=e||22,this._minPitch=null==n?0:n,this._maxPitch=null==o?60:o,this.setMaxBounds(),this.width=0,this.height=0,this._center=new aa.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new bo,this._posMatrixCache={},this._alignedPosMatrixCache={}},To={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};wo.prototype.clone=function(){var e=new wo(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return e.tileSize=this.tileSize,e.latRange=this.latRange,e.width=this.width,e.height=this.height,e._center=this._center,e.zoom=this.zoom,e.angle=this.angle,e._fov=this._fov,e._pitch=this._pitch,e._unmodified=this._unmodified,e._edgeInsets=this._edgeInsets.clone(),e._calcMatrices(),e},To.minZoom.get=function(){return this._minZoom},To.minZoom.set=function(e){this._minZoom!==e&&(this._minZoom=e,this.zoom=oa(this.zoom,e))},To.maxZoom.get=function(){return this._maxZoom},To.maxZoom.set=function(e){this._maxZoom!==e&&(this._maxZoom=e,this.zoom=ta(this.zoom,e))},To.minPitch.get=function(){return this._minPitch},To.minPitch.set=function(e){this._minPitch!==e&&(this._minPitch=e,this.pitch=oa(this.pitch,e))},To.maxPitch.get=function(){return this._maxPitch},To.maxPitch.set=function(e){this._maxPitch!==e&&(this._maxPitch=e,this.pitch=ta(this.pitch,e))},To.renderWorldCopies.get=function(){return this._renderWorldCopies},To.renderWorldCopies.set=function(e){void 0===e?e=!0:null===e&&(e=!1),this._renderWorldCopies=e},To.worldSize.get=function(){return this.tileSize*this.scale},To.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},To.size.get=function(){return new aa.Point(this.width,this.height)},To.bearing.get=function(){return 180*(-this.angle/Xe)},To.bearing.set=function(t){var e=-aa.wrap(t,-180,180)*Xe/180;this.angle!==e&&(this._unmodified=!1,this.angle=e,this._calcMatrices(),this.rotationMatrix=aa.create$2(),aa.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},To.pitch.get=function(){return 180*(this._pitch/Xe)},To.pitch.set=function(t){var e=aa.clamp(t,this.minPitch,this.maxPitch)/180*Xe;this._pitch!==e&&(this._unmodified=!1,this._pitch=e,this._calcMatrices())},To.fov.get=function(){return 180*(this._fov/Xe)},To.fov.set=function(e){e=oa(.01,ta(60,e)),this._fov!==e&&(this._unmodified=!1,this._fov=e/180*Xe,this._calcMatrices())},To.zoom.get=function(){return this._zoom},To.zoom.set=function(o){var t=ta(oa(o,this.minZoom),this.maxZoom);this._zoom!==t&&(this._unmodified=!1,this._zoom=t,this.scale=this.zoomScale(t),this.tileZoom=ea(t),this.zoomFraction=t-this.tileZoom,this._constrain(),this._calcMatrices())},To.center.get=function(){return this._center},To.center.set=function(e){e.lat===this._center.lat&&e.lng===this._center.lng||(this._unmodified=!1,this._center=e,this._constrain(),this._calcMatrices())},To.padding.get=function(){return this._edgeInsets.toJSON()},To.padding.set=function(e){this._edgeInsets.equals(e)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,e,1),this._calcMatrices())},To.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},wo.prototype.isPaddingEqual=function(e){return this._edgeInsets.equals(e)},wo.prototype.interpolatePadding=function(o,t,e){this._unmodified=!1,this._edgeInsets.interpolate(o,t,e),this._constrain(),this._calcMatrices()},wo.prototype.coveringZoomLevel=function(o){var t=(o.roundZoom?b:ea)(this.zoom+this.scaleZoom(this.tileSize/o.tileSize));return oa(0,t)},wo.prototype.getVisibleUnwrappedCoordinates=function(t){var e=[new aa.UnwrappedTileID(0,t)];if(this._renderWorldCopies)for(var i=this.pointCoordinate(new aa.Point(0,0)),o=this.pointCoordinate(new aa.Point(this.width,0)),r=this.pointCoordinate(new aa.Point(this.width,this.height)),a=this.pointCoordinate(new aa.Point(0,this.height)),n=ea(ta(i.x,o.x,r.x,a.x)),s=ea(oa(i.x,o.x,r.x,a.x)),l=n-1;l<=s+1;l++)0!==l&&e.push(new aa.UnwrappedTileID(l,t));return e},wo.prototype.coveringTiles=function(t){var e=this.coveringZoomLevel(t),i=e;if(void 0!==t.minzoom&&e<t.minzoom)return[];void 0!==t.maxzoom&&e>t.maxzoom&&(e=t.maxzoom);var o=aa.MercatorCoordinate.fromLngLat(this.center),r=C(2,e),a=[r*o.x,r*o.y,0],n=zn.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,e),s=t.minzoom||0;60>=this.pitch&&.1>this._edgeInsets.top&&(s=e);var l=function(e){return{aabb:new xo([e*r,0,0],[(e+1)*r,r,0]),zoom:0,x:0,y:0,wrap:e,fullyVisible:!1}},c=[],u=[],h=e,p=t.reparseOverscaled?i:e;if(this._renderWorldCopies)for(var d=1;3>=d;d++)c.push(l(-d)),c.push(l(d));for(c.push(l(0));0<c.length;){var S=c.pop(),f=S.x,m=S.y,g=S.fullyVisible;if(!g){var A=S.aabb.intersects(n);if(0===A)continue;g=2===A}var y=S.aabb.distanceX(a),x=S.aabb.distanceY(a),b=oa(B(y),B(x));if(S.zoom===h||b>3+(1<<h-S.zoom)-2&&S.zoom>=s)u.push({tileID:new aa.OverscaledTileID(S.zoom===h?p:S.zoom,S.wrap,S.zoom,f,m),distanceSq:aa.sqrLen([a[0]-.5-f,a[1]-.5-m])});else for(var w=0;4>w;w++){var T=(f<<1)+w%2,k=(m<<1)+(w>>1);c.push({aabb:S.aabb.quadrant(w),zoom:S.zoom+1,x:T,y:k,wrap:S.wrap,fullyVisible:g})}}return u.sort(function(o,t){return o.distanceSq-t.distanceSq}).map(function(e){return e.tileID})},wo.prototype.resize=function(o,t){this.width=o,this.height=t,this.pixelsToGLUnits=[2/o,-2/t],this._constrain(),this._calcMatrices()},To.unmodified.get=function(){return this._unmodified},wo.prototype.zoomScale=function(e){return C(2,e)},wo.prototype.scaleZoom=function(e){return x(e)/_},wo.prototype.project=function(t){var e=aa.clamp(t.lat,-this.maxValidLatitude,this.maxValidLatitude);return new aa.Point(aa.mercatorXfromLng(t.lng)*this.worldSize,aa.mercatorYfromLat(e)*this.worldSize)},wo.prototype.unproject=function(t){return new aa.MercatorCoordinate(t.x/this.worldSize,t.y/this.worldSize).toLngLat()},To.point.get=function(){return this.project(this.center)},wo.prototype.setLocationAtPoint=function(t,e){var i=this.pointCoordinate(e),o=this.pointCoordinate(this.centerPoint),r=this.locationCoordinate(t),a=new aa.MercatorCoordinate(r.x-(i.x-o.x),r.y-(i.y-o.y));this.center=this.coordinateLocation(a),this._renderWorldCopies&&(this.center=this.center.wrap())},wo.prototype.locationPoint=function(e){return this.coordinatePoint(this.locationCoordinate(e))},wo.prototype.pointLocation=function(e){return this.coordinateLocation(this.pointCoordinate(e))},wo.prototype.locationCoordinate=function(t){return aa.MercatorCoordinate.fromLngLat(t)},wo.prototype.coordinateLocation=function(e){return e.toLngLat()},wo.prototype.pointCoordinate=function(t){var e=[t.x,t.y,0,1],i=[t.x,t.y,1,1];aa.transformMat4(e,e,this.pixelMatrixInverse),aa.transformMat4(i,i,this.pixelMatrixInverse);var o=e[3],r=i[3],a=e[1]/o,n=i[1]/r,s=e[2]/o,l=i[2]/r,p=s==l?0:(0-s)/(l-s);return new aa.MercatorCoordinate(aa.number(e[0]/o,i[0]/r,p)/this.worldSize,aa.number(a,n,p)/this.worldSize)},wo.prototype.coordinatePoint=function(t){var e=[t.x*this.worldSize,t.y*this.worldSize,0,1];return aa.transformMat4(e,e,this.pixelMatrix),new aa.Point(e[0]/e[3],e[1]/e[3])},wo.prototype.getBounds=function(){return new aa.LngLatBounds().extend(this.pointLocation(new aa.Point(0,0))).extend(this.pointLocation(new aa.Point(this.width,0))).extend(this.pointLocation(new aa.Point(this.width,this.height))).extend(this.pointLocation(new aa.Point(0,this.height)))},wo.prototype.getMaxBounds=function(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new aa.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},wo.prototype.setMaxBounds=function(e){e?(this.lngRange=[e.getWest(),e.getEast()],this.latRange=[e.getSouth(),e.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},wo.prototype.calculatePosMatrix=function(t,e){void 0===e&&(e=!1);var i=t.key,o=e?this._alignedPosMatrixCache:this._posMatrixCache;if(o[i])return o[i];var r=t.canonical,a=this.worldSize/this.zoomScale(r.z),n=r.x+C(2,r.z)*t.wrap,s=aa.identity(new Float64Array(16));return aa.translate(s,s,[n*a,r.y*a,0]),aa.scale(s,s,[a/aa.EXTENT,a/aa.EXTENT,1]),aa.multiply(s,e?this.alignedProjMatrix:this.projMatrix,s),o[i]=new Float32Array(s),o[i]},wo.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},wo.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var t=-90,a=90,n=-180,s=180,l=this.size,c=this._unmodified,u,e,i,o;if(this.latRange){var r=this.latRange;t=aa.mercatorYfromLat(r[1])*this.worldSize,u=(a=aa.mercatorYfromLat(r[0])*this.worldSize)-t<l.y?l.y/(a-t):0}if(this.lngRange){var y=this.lngRange;n=aa.mercatorXfromLng(y[0])*this.worldSize,e=(s=aa.mercatorXfromLng(y[1])*this.worldSize)-n<l.x?l.x/(s-n):0}var p=this.point,d=oa(e||0,u||0);if(d)return this.center=this.unproject(new aa.Point(e?(s+n)/2:p.x,u?(a+t)/2:p.y)),this.zoom+=this.scaleZoom(d),this._unmodified=c,void(this._constraining=!1);if(this.latRange){var _=p.y,f=l.y/2;_-f<t&&(o=t+f),_+f>a&&(o=a-f)}if(this.lngRange){var m=p.x,g=l.x/2;m-g<n&&(i=n+g),m+g>s&&(i=s-g)}void 0===i&&void 0===o||(this.center=this.unproject(new aa.Point(void 0===i?p.x:i,void 0===o?p.y:o))),this._unmodified=c,this._constraining=!1}},wo.prototype._calcMatrices=function(){if(this.height){var t=this.centerOffset;this.cameraToCenterDistance=.5/v(this._fov/2)*this.height;var e=Xe/2+this._pitch,i=this._fov*(.5+t.y/this.height),o=w(i)*this.cameraToCenterDistance/w(aa.clamp(Xe-e-i,.01,Xe-.01)),r=this.point,a=r.x,y=r.y,x=1.01*(Ze(Xe/2-this._pitch)*o+this.cameraToCenterDistance),l=this.height/50,c=new Float64Array(16);aa.perspective(c,this._fov,this.width/this.height,l,x),c[8]=2*-t.x/this.width,c[9]=2*t.y/this.height,aa.scale(c,c,[1,-1,1]),aa.translate(c,c,[0,0,-this.cameraToCenterDistance]),aa.rotateX(c,c,this._pitch),aa.rotateZ(c,c,this.angle),aa.translate(c,c,[-a,-y,0]),this.mercatorMatrix=aa.scale([],c,[this.worldSize,this.worldSize,this.worldSize]),aa.scale(c,c,[1,1,aa.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=c,this.invProjMatrix=aa.invert([],this.projMatrix);var u=this.width%2/2,h=this.height%2/2,p=Ze(this.angle),d=w(this.angle),_=a-b(a)+p*u+d*h,f=y-b(y)+p*h+d*u,m=new Float64Array(c);if(aa.translate(m,m,[.5<_?_-1:_,.5<f?f-1:f,0]),this.alignedProjMatrix=m,c=aa.create(),aa.scale(c,c,[this.width/2,-this.height/2,1]),aa.translate(c,c,[1,-1,0]),this.labelPlaneMatrix=c,c=aa.create(),aa.scale(c,c,[1,-1,1]),aa.translate(c,c,[-1,-1,0]),aa.scale(c,c,[2/this.width,2/this.height,1]),this.glCoordMatrix=c,this.pixelMatrix=aa.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(c=aa.invert(new Float64Array(16),this.pixelMatrix)))throw new Error('failed to invert matrix');this.pixelMatrixInverse=c,this._posMatrixCache={},this._alignedPosMatrixCache={}}},wo.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var t=this.pointCoordinate(new aa.Point(0,0)),e=[t.x*this.worldSize,t.y*this.worldSize,0,1];return aa.transformMat4(e,e,this.pixelMatrix)[3]/this.cameraToCenterDistance},wo.prototype.getCameraPoint=function(){var t=v(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new aa.Point(0,t))},wo.prototype.getCameraQueryGeometry=function(t){var e=this.getCameraPoint();if(1===t.length)return[t[0],e];for(var i=e.x,o=e.y,r=e.x,a=e.y,n=0,s=t,l;n<s.length;n+=1)l=s[n],i=ta(i,l.x),o=ta(o,l.y),r=oa(r,l.x),a=oa(a,l.y);return[new aa.Point(i,o),new aa.Point(r,o),new aa.Point(r,a),new aa.Point(i,a),new aa.Point(i,o)]},Object.defineProperties(wo.prototype,To);var Eo=function(t){var e,n,o,r;this._hashName=t&&encodeURIComponent(t),aa.bindAll(['_getCurrentHash','_onHashChange','_updateHash'],this),this._updateHash=(e=this._updateHashUnthrottled.bind(this),n=!1,o=null,r=function(){o=null,n&&(e(),o=setTimeout(r,300),n=!1)},function(){return n=!0,o||r(),o})};Eo.prototype.addTo=function(t){return this._map=t,aa.window.addEventListener('hashchange',this._onHashChange,!1),this._map.on('moveend',this._updateHash),this},Eo.prototype.remove=function(){return aa.window.removeEventListener('hashchange',this._onHashChange,!1),this._map.off('moveend',this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Eo.prototype.getHashString=function(t){var e=this._map.getCenter(),i=b(100*this._map.getZoom())/100,o=m((i*_+1.0453677741492975)/y),r=C(10,o),a=b(e.lng*r)/r,n=b(e.lat*r)/r,s=this._map.getBearing(),l=this._map.getPitch(),c='';if(c+=t?'/'+a+'/'+n+'/'+i:i+'/'+n+'/'+a,(s||l)&&(c+='/'+b(10*s)/10),l&&(c+='/'+b(l)),this._hashName){var u=this._hashName,g=!1,p=aa.window.location.hash.slice(1).split('&').map(function(o){var t=o.split('=')[0];return t===u?(g=!0,t+'='+c):o}).filter(function(e){return e});return g||p.push(u+'='+c),'#'+p.join('&')}return'#'+c},Eo.prototype._getCurrentHash=function(){var a=this,t=aa.window.location.hash.replace('#',''),o;return this._hashName?(t.split('&').map(function(e){return e.split('=')}).forEach(function(e){e[0]===a._hashName&&(o=e)}),(o&&o[1]||'').split('/')):t.split('/')},Eo.prototype._onHashChange=function(){var o=this._getCurrentHash();if(3<=o.length&&!o.some(function(e){return isNaN(e)})){var t=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(o[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+o[2],+o[1]],zoom:+o[0],bearing:t,pitch:+(o[4]||0)}),!0}return!1},Eo.prototype._updateHashUnthrottled=function(){var t=this.getHashString();try{aa.window.history.replaceState(aa.window.history.state,'',t)}catch(e){}};var Io={linearity:.3,easing:aa.bezier(0,0,.3,1)},Po=aa.extend({deceleration:2500,maxSpeed:1400},Io),So=aa.extend({deceleration:20,maxSpeed:1400},Io),Co=aa.extend({deceleration:1e3,maxSpeed:360},Io),zo=aa.extend({deceleration:1e3,maxSpeed:90},Io),Do=function(e){this._map=e,this.clear()};Do.prototype.clear=function(){this._inertiaBuffer=[]},Do.prototype.record=function(t){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:aa.browser.now(),settings:t})},Do.prototype._drainInertiaBuffer=function(){for(var t=this._inertiaBuffer,e=aa.browser.now();0<t.length&&160<e-t[0].time;)t.shift()},Do.prototype._onMoveEnd=function(t){if(this._drainInertiaBuffer(),!(2>this._inertiaBuffer.length)){for(var e={zoom:0,bearing:0,pitch:0,pan:new aa.Point(0,0),pinchAround:void 0,around:void 0},i=0,o=this._inertiaBuffer,r;i<o.length;i+=1)r=o[i].settings,e.zoom+=r.zoomDelta||0,e.bearing+=r.bearingDelta||0,e.pitch+=r.pitchDelta||0,r.panDelta&&e.pan._add(r.panDelta),r.around&&(e.around=r.around),r.pinchAround&&(e.pinchAround=r.pinchAround);var a=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,n={};if(e.pan.mag()){var s=Lo(e.pan.mag(),a,aa.extend({},Po,t||{}));n.offset=e.pan.mult(s.amount/e.pan.mag()),n.center=this._map.transform.center,go(n,s)}if(e.zoom){var l=Lo(e.zoom,a,So);n.zoom=this._map.transform.zoom+l.amount,go(n,l)}if(e.bearing){var d=Lo(e.bearing,a,Co);n.bearing=this._map.transform.bearing+aa.clamp(d.amount,-179,179),go(n,d)}if(e.pitch){var c=Lo(e.pitch,a,zo);n.pitch=this._map.transform.pitch+c.amount,go(n,c)}if(n.zoom||n.bearing){var u=void 0===e.pinchAround?e.around:e.pinchAround;n.around=u?this._map.unproject(u):this._map.getCenter()}return this.clear(),aa.extend(n,{noMoveStart:!0})}};var Mo=function(t){function e(e,i,r,p){void 0===p&&(p={});var n=Ca.mousePos(i.getCanvasContainer(),r),d=i.unproject(n);t.call(this,e,aa.extend({point:n,lngLat:d,originalEvent:r},p)),this._defaultPrevented=!1,this.target=i}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var o={defaultPrevented:{configurable:!0}};return e.prototype.preventDefault=function(){this._defaultPrevented=!0},o.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(e.prototype,o),e}(aa.Event),Ro=function(t){function e(e,i,r){var p='touchend'===e?r.changedTouches:r.touches,n=Ca.touchPos(i.getCanvasContainer(),p),d=n.map(function(e){return i.unproject(e)}),m=n.reduce(function(a,t,e,r){return a.add(t.div(r.length))},new aa.Point(0,0)),g=i.unproject(m);t.call(this,e,{points:n,point:m,lngLats:d,lngLat:g,originalEvent:r}),this._defaultPrevented=!1}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var o={defaultPrevented:{configurable:!0}};return e.prototype.preventDefault=function(){this._defaultPrevented=!0},o.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(e.prototype,o),e}(aa.Event),ko=function(a){function t(t,r,n){a.call(this,t,{originalEvent:n}),this._defaultPrevented=!1}a&&(t.__proto__=a),(t.prototype=Object.create(a&&a.prototype)).constructor=t;var e={defaultPrevented:{configurable:!0}};return t.prototype.preventDefault=function(){this._defaultPrevented=!0},e.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(t.prototype,e),t}(aa.Event),Bo=function(o,t){this._map=o,this._clickTolerance=t.clickTolerance};Bo.prototype.reset=function(){delete this._mousedownPos},Bo.prototype.wheel=function(e){return this._firePreventable(new ko(e.type,this._map,e))},Bo.prototype.mousedown=function(o,t){return this._mousedownPos=t,this._firePreventable(new Mo(o.type,this._map,o))},Bo.prototype.mouseup=function(e){this._map.fire(new Mo(e.type,this._map,e))},Bo.prototype.click=function(o,t){this._mousedownPos&&this._mousedownPos.dist(t)>=this._clickTolerance||this._map.fire(new Mo(o.type,this._map,o))},Bo.prototype.dblclick=function(e){return this._firePreventable(new Mo(e.type,this._map,e))},Bo.prototype.mouseover=function(e){this._map.fire(new Mo(e.type,this._map,e))},Bo.prototype.mouseout=function(e){this._map.fire(new Mo(e.type,this._map,e))},Bo.prototype.touchstart=function(e){return this._firePreventable(new Ro(e.type,this._map,e))},Bo.prototype.touchmove=function(e){this._map.fire(new Ro(e.type,this._map,e))},Bo.prototype.touchend=function(e){this._map.fire(new Ro(e.type,this._map,e))},Bo.prototype.touchcancel=function(e){this._map.fire(new Ro(e.type,this._map,e))},Bo.prototype._firePreventable=function(e){if(this._map.fire(e),e.defaultPrevented)return{}},Bo.prototype.isEnabled=function(){return!0},Bo.prototype.isActive=function(){return!1},Bo.prototype.enable=function(){},Bo.prototype.disable=function(){};var Oo=function(e){this._map=e};Oo.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},Oo.prototype.mousemove=function(e){this._map.fire(new Mo(e.type,this._map,e))},Oo.prototype.mousedown=function(){this._delayContextMenu=!0},Oo.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Mo('contextmenu',this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},Oo.prototype.contextmenu=function(e){this._delayContextMenu?this._contextMenuEvent=e:this._map.fire(new Mo(e.type,this._map,e)),this._map.listens('contextmenu')&&e.preventDefault()},Oo.prototype.isEnabled=function(){return!0},Oo.prototype.isActive=function(){return!1},Oo.prototype.enable=function(){},Oo.prototype.disable=function(){};var Fo=function(o,t){this._map=o,this._el=o.getCanvasContainer(),this._container=o.getContainer(),this._clickTolerance=t.clickTolerance||1};Fo.prototype.isEnabled=function(){return!!this._enabled},Fo.prototype.isActive=function(){return!!this._active},Fo.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Fo.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Fo.prototype.mousedown=function(o,t){this.isEnabled()&&o.shiftKey&&0===o.button&&(Ca.disableDrag(),this._startPos=this._lastPos=t,this._active=!0)},Fo.prototype.mousemoveWindow=function(i,t){if(this._active){var e=t;if(!(this._lastPos.equals(e)||!this._box&&e.dist(this._startPos)<this._clickTolerance)){var o=this._startPos;this._lastPos=e,this._box||(this._box=Ca.create('div','mapboxgl-boxzoom',this._container),this._container.classList.add('mapboxgl-crosshair'),this._fireEvent('boxzoomstart',i));var r=ta(o.x,e.x),a=oa(o.x,e.x),n=ta(o.y,e.y),s=oa(o.y,e.y);Ca.setTransform(this._box,'translate('+r+'px,'+n+'px)'),this._box.style.width=a-r+'px',this._box.style.height=s-n+'px'}}},Fo.prototype.mouseupWindow=function(t,i){var o=this;if(this._active&&0===t.button){var r=this._startPos,a=i;if(this.reset(),Ca.suppressClick(),r.x!==a.x||r.y!==a.y)return this._map.fire(new aa.Event('boxzoomend',{originalEvent:t})),{cameraAnimation:function(e){return e.fitScreenCoordinates(r,a,o._map.getBearing(),{linear:!0})}};this._fireEvent('boxzoomcancel',t)}},Fo.prototype.keydown=function(e){this._active&&27===e.keyCode&&(this.reset(),this._fireEvent('boxzoomcancel',e))},Fo.prototype.reset=function(){this._active=!1,this._container.classList.remove('mapboxgl-crosshair'),this._box&&(Ca.remove(this._box),this._box=null),Ca.enableDrag(),delete this._startPos,delete this._lastPos},Fo.prototype._fireEvent=function(t,e){return this._map.fire(new aa.Event(t,{originalEvent:e}))};var Uo=function(e){this.reset(),this.numTouches=e.numTouches};Uo.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},Uo.prototype.touchstart=function(t,e,a){(this.centroid||a.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=t.timeStamp),a.length===this.numTouches&&(this.centroid=function(t){for(var e=new aa.Point(0,0),a=0,o=t;a<o.length;a+=1)e._add(o[a]);return e.div(t.length)}(e),this.touches=Ao(a,e)))},Uo.prototype.touchmove=function(n,t,e){if(!this.aborted&&this.centroid){var i=Ao(e,t);for(var o in this.touches){var r=i[o];(!r||30<r.dist(this.touches[o]))&&(this.aborted=!0)}}},Uo.prototype.touchend=function(a,t,e){if((!this.centroid||500<a.timeStamp-this.startTime)&&(this.aborted=!0),0===e.length){var r=!this.aborted&&this.centroid;if(this.reset(),r)return r}};var Zo=function(e){this.singleTap=new Uo(e),this.numTaps=e.numTaps,this.reset()};Zo.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},Zo.prototype.touchstart=function(o,t,e){this.singleTap.touchstart(o,t,e)},Zo.prototype.touchmove=function(o,t,e){this.singleTap.touchmove(o,t,e)},Zo.prototype.touchend=function(n,t,e){var i=this.singleTap.touchend(n,t,e);if(i){var o=500>n.timeStamp-this.lastTime,r=!this.lastTap||30>this.lastTap.dist(i);if(o&&r||this.reset(),this.count++,this.lastTime=n.timeStamp,this.lastTap=i,this.count===this.numTaps)return this.reset(),i}};var qo=function(){this._zoomIn=new Zo({numTouches:1,numTaps:2}),this._zoomOut=new Zo({numTouches:2,numTaps:1}),this.reset()};qo.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},qo.prototype.touchstart=function(o,t,e){this._zoomIn.touchstart(o,t,e),this._zoomOut.touchstart(o,t,e)},qo.prototype.touchmove=function(o,t,e){this._zoomIn.touchmove(o,t,e),this._zoomOut.touchmove(o,t,e)},qo.prototype.touchend=function(n,s,e){var i=this,o=this._zoomIn.touchend(n,s,e),r=this._zoomOut.touchend(n,s,e);return o?(this._active=!0,n.preventDefault(),setTimeout(function(){return i.reset()},0),{cameraAnimation:function(a){return a.easeTo({duration:300,zoom:a.getZoom()+1,around:a.unproject(o)},{originalEvent:n})}}):r?(this._active=!0,n.preventDefault(),setTimeout(function(){return i.reset()},0),{cameraAnimation:function(o){return o.easeTo({duration:300,zoom:o.getZoom()-1,around:o.unproject(r)},{originalEvent:n})}}):void 0},qo.prototype.touchcancel=function(){this.reset()},qo.prototype.enable=function(){this._enabled=!0},qo.prototype.disable=function(){this._enabled=!1,this.reset()},qo.prototype.isEnabled=function(){return this._enabled},qo.prototype.isActive=function(){return this._active};var jo={0:1,2:2},Vo=function(e){this.reset(),this._clickTolerance=e.clickTolerance||1};Vo.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},Vo.prototype._correctButton=function(){return!1},Vo.prototype._move=function(){return{}},Vo.prototype.mousedown=function(a,t){if(!this._lastPoint){var e=Ca.mouseButton(a);this._correctButton(a,e)&&(this._lastPoint=t,this._eventButton=e)}},Vo.prototype.mousemoveWindow=function(o,t){var e=this._lastPoint;if(e)if(o.preventDefault(),function(o,t){var e=jo[t];return void 0===o.buttons||(o.buttons&e)!==e}(o,this._eventButton))this.reset();else if(this._moved||!(t.dist(e)<this._clickTolerance))return this._moved=!0,this._lastPoint=t,this._move(e,t)},Vo.prototype.mouseupWindow=function(e){this._lastPoint&&Ca.mouseButton(e)===this._eventButton&&(this._moved&&Ca.suppressClick(),this.reset())},Vo.prototype.enable=function(){this._enabled=!0},Vo.prototype.disable=function(){this._enabled=!1,this.reset()},Vo.prototype.isEnabled=function(){return this._enabled},Vo.prototype.isActive=function(){return this._active};var Go=function(o){function t(){o.apply(this,arguments)}return o&&(t.__proto__=o),(t.prototype=Object.create(o&&o.prototype)).constructor=t,t.prototype.mousedown=function(t,e){o.prototype.mousedown.call(this,t,e),this._lastPoint&&(this._active=!0)},t.prototype._correctButton=function(o,t){return 0===t&&!o.ctrlKey},t.prototype._move=function(o,t){return{around:t,panDelta:t.sub(o)}},t}(Vo),Wo=function(o){function t(){o.apply(this,arguments)}return o&&(t.__proto__=o),(t.prototype=Object.create(o&&o.prototype)).constructor=t,t.prototype._correctButton=function(o,t){return 0===t&&o.ctrlKey||2===t},t.prototype._move=function(o,t){var e=.8*(t.x-o.x);if(e)return this._active=!0,{bearingDelta:e}},t.prototype.contextmenu=function(e){e.preventDefault()},t}(Vo),Xo=function(o){function t(){o.apply(this,arguments)}return o&&(t.__proto__=o),(t.prototype=Object.create(o&&o.prototype)).constructor=t,t.prototype._correctButton=function(o,t){return 0===t&&o.ctrlKey||2===t},t.prototype._move=function(o,t){var e=-.5*(t.y-o.y);if(e)return this._active=!0,{pitchDelta:e}},t.prototype.contextmenu=function(e){e.preventDefault()},t}(Vo),Ho=function(e){this._minTouches=1,this._clickTolerance=e.clickTolerance||1,this.reset()};Ho.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new aa.Point(0,0)},Ho.prototype.touchstart=function(o,t,e){return this._calculateTransform(o,t,e)},Ho.prototype.touchmove=function(o,t,e){if(this._active&&!(e.length<this._minTouches))return o.preventDefault(),this._calculateTransform(o,t,e)},Ho.prototype.touchend=function(o,t,e){this._calculateTransform(o,t,e),this._active&&e.length<this._minTouches&&this.reset()},Ho.prototype.touchcancel=function(){this.reset()},Ho.prototype._calculateTransform=function(t,e,i){0<i.length&&(this._active=!0);var o=Ao(i,e),r=new aa.Point(0,0),a=new aa.Point(0,0),n=0;for(var s in o){var l=o[s],p=this._touches[s];p&&(r._add(l),a._add(l.sub(p)),n++,o[s]=l)}if(this._touches=o,!(n<this._minTouches)&&a.mag()){var d=a.div(n);if(this._sum._add(d),!(this._sum.mag()<this._clickTolerance))return{around:r.div(n),panDelta:d}}},Ho.prototype.enable=function(){this._enabled=!0},Ho.prototype.disable=function(){this._enabled=!1,this.reset()},Ho.prototype.isEnabled=function(){return this._enabled},Ho.prototype.isActive=function(){return this._active};var Ko=function(){this.reset()};Ko.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},Ko.prototype._start=function(){},Ko.prototype._move=function(){return{}},Ko.prototype.touchstart=function(o,t,e){this._firstTwoTouches||2>e.length||(this._firstTwoTouches=[e[0].identifier,e[1].identifier],this._start([t[0],t[1]]))},Ko.prototype.touchmove=function(l,t,e){if(this._firstTwoTouches){l.preventDefault();var i=this._firstTwoTouches,o=i[1],r=No(e,t,i[0]),a=No(e,t,o);if(r&&a){var n=this._aroundCenter?null:r.add(a).div(2);return this._move([r,a],n,l)}}},Ko.prototype.touchend=function(i,t,e){if(this._firstTwoTouches){var o=this._firstTwoTouches,r=o[1],a=No(e,t,o[0]),n=No(e,t,r);a&&n||(this._active&&Ca.suppressClick(),this.reset())}},Ko.prototype.touchcancel=function(){this.reset()},Ko.prototype.enable=function(e){this._enabled=!0,this._aroundCenter=!!e&&'center'===e.around},Ko.prototype.disable=function(){this._enabled=!1,this.reset()},Ko.prototype.isEnabled=function(){return this._enabled},Ko.prototype.isActive=function(){return this._active};var Yo=function(o){function t(){o.apply(this,arguments)}return o&&(t.__proto__=o),(t.prototype=Object.create(o&&o.prototype)).constructor=t,t.prototype.reset=function(){o.prototype.reset.call(this),delete this._distance,delete this._startDistance},t.prototype._start=function(e){this._startDistance=this._distance=e[0].dist(e[1])},t.prototype._move=function(o,t){var a=this._distance;if(this._distance=o[0].dist(o[1]),this._active||!(.1>B(Jo(this._distance,this._startDistance))))return this._active=!0,{zoomDelta:Jo(this._distance,a),pinchAround:t}},t}(Ko),$o=function(o){function t(){o.apply(this,arguments)}return o&&(t.__proto__=o),(t.prototype=Object.create(o&&o.prototype)).constructor=t,t.prototype.reset=function(){o.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},t.prototype._start=function(e){this._startVector=this._vector=e[0].sub(e[1]),this._minDiameter=e[0].dist(e[1])},t.prototype._move=function(o,t){var a=this._vector;if(this._vector=o[0].sub(o[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Qo(this._vector,a),pinchAround:t}},t.prototype._isBelowThreshold=function(o){this._minDiameter=ta(this._minDiameter,o.mag());var t=360*(25/(Xe*this._minDiameter)),e=Qo(o,this._startVector);return B(e)<t},t}(Ko),er=function(o){function t(){o.apply(this,arguments)}return o&&(t.__proto__=o),(t.prototype=Object.create(o&&o.prototype)).constructor=t,t.prototype.reset=function(){o.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},t.prototype._start=function(e){this._lastPoints=e,fa(e[0].sub(e[1]))&&(this._valid=!1)},t.prototype._move=function(a,t,e){var n=a[0].sub(this._lastPoints[0]),o=a[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(n,o,e.timeStamp),this._valid)return this._lastPoints=a,this._active=!0,{pitchDelta:-.5*((n.y+o.y)/2)}},t.prototype.gestureBeginsVertically=function(n,t,e){if(void 0!==this._valid)return this._valid;var i=2<=n.mag(),s=2<=t.mag();if(i||s){if(!i||!s)return void 0===this._firstMove&&(this._firstMove=e),100>e-this._firstMove&&void 0;var l=0<n.y==0<t.y;return fa(n)&&fa(t)&&l}},t}(Ko),or={panStep:100,bearingStep:15,pitchStep:10},rr=function(){var e=or;this._panStep=e.panStep,this._bearingStep=e.bearingStep,this._pitchStep=e.pitchStep};rr.prototype.reset=function(){this._active=!1},rr.prototype.keydown=function(p){var d=this;if(!(p.altKey||p.ctrlKey||p.metaKey)){var e=0,i=0,o=0,r=0,c=0;switch(p.keyCode){case 61:case 107:case 171:case 187:e=1;break;case 189:case 109:case 173:e=-1;break;case 37:p.shiftKey?i=-1:(p.preventDefault(),r=-1);break;case 39:p.shiftKey?i=1:(p.preventDefault(),r=1);break;case 38:p.shiftKey?o=1:(p.preventDefault(),c=-1);break;case 40:p.shiftKey?o=-1:(p.preventDefault(),c=1);break;default:return;}return{cameraAnimation:function(u){var s=u.getZoom();u.easeTo({duration:300,easeId:'keyboardHandler',easing:ha,zoom:e?b(s)+e*(p.shiftKey?2:1):s,bearing:u.getBearing()+i*d._bearingStep,pitch:u.getPitch()+o*d._pitchStep,offset:[-r*d._panStep,-c*d._panStep],center:u.getCenter()},{originalEvent:p})}}}},rr.prototype.enable=function(){this._enabled=!0},rr.prototype.disable=function(){this._enabled=!1,this.reset()},rr.prototype.isEnabled=function(){return this._enabled},rr.prototype.isActive=function(){return this._active};var ar=function(t,e){this._map=t,this._el=t.getCanvasContainer(),this._handler=e,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,aa.bindAll(['_onTimeout'],this)};ar.prototype.setZoomRate=function(e){this._defaultZoomRate=e},ar.prototype.setWheelZoomRate=function(e){this._wheelZoomRate=e},ar.prototype.isEnabled=function(){return!!this._enabled},ar.prototype.isActive=function(){return!!this._active||void 0!==this._finishTimeout},ar.prototype.isZooming=function(){return!!this._zooming},ar.prototype.enable=function(e){this.isEnabled()||(this._enabled=!0,this._aroundCenter=e&&'center'===e.around)},ar.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},ar.prototype.wheel=function(t){if(this.isEnabled()){var e=t.deltaMode===aa.window.WheelEvent.DOM_DELTA_LINE?40*t.deltaY:t.deltaY,a=aa.browser.now(),o=a-(this._lastWheelEventTime||0);this._lastWheelEventTime=a,0!==e&&0==e%4.000244140625?this._type='wheel':0!==e&&4>B(e)?this._type='trackpad':400<o?(this._type=null,this._lastValue=e,this._timeout=setTimeout(this._onTimeout,40,t)):this._type||(this._type=200>B(o*e)?'trackpad':'wheel',this._timeout&&(clearTimeout(this._timeout),this._timeout=null,e+=this._lastValue)),t.shiftKey&&e&&(e/=4),this._type&&(this._lastWheelEvent=t,this._delta-=e,this._active||this._start(t)),t.preventDefault()}},ar.prototype._onTimeout=function(e){this._type='wheel',this._delta-=this._lastValue,this._active||this._start(e)},ar.prototype._start=function(t){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var e=Ca.mousePos(this._el,t);this._around=aa.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(e)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},ar.prototype.renderFrame=function(){var t=this;if(this._frameId&&(this._frameId=null,this.isActive())){var e=this._map.transform;if(0!==this._delta){var i='wheel'===this._type&&4.000244140625<B(this._delta)?this._wheelZoomRate:this._defaultZoomRate,o=2/(1+g(-B(this._delta*i)));0>this._delta&&0!=o&&(o=1/o);var r='number'==typeof this._targetZoom?e.zoomScale(this._targetZoom):e.scale;this._targetZoom=ta(e.maxZoom,oa(e.minZoom,e.scaleZoom(r*o))),'wheel'===this._type&&(this._startZoom=e.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var a='number'==typeof this._targetZoom?this._targetZoom:e.zoom,s=this._startZoom,l=this._easing,d=!1,c;if('wheel'===this._type&&s&&l){var n=ta((aa.browser.now()-this._lastWheelEventTime)/200,1),m=l(n);c=aa.number(s,a,m),1>n?this._frameId||(this._frameId=!0):d=!0}else c=a,d=!0;return this._active=!0,d&&(this._active=!1,this._finishTimeout=setTimeout(function(){t._zooming=!1,t._handler._triggerRenderFrame(),delete t._targetZoom,delete t._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!d,zoomDelta:c-e.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},ar.prototype._smoothOutEasing=function(t){var l=aa.ease;if(this._prevEase){var p=this._prevEase,o=(aa.browser.now()-p.start)/p.duration,r=p.easing(o+.01)-p.easing(o),a=.01*(.27/N(r*r+1e-4)),n=N(.0729-a*a);l=aa.bezier(a,n,.25,1)}return this._prevEase={start:aa.browser.now(),duration:t,easing:l},l},ar.prototype.reset=function(){this._active=!1};var sr=function(o,t){this._clickZoom=o,this._tapZoom=t};sr.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},sr.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},sr.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},sr.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var lr=function(){this.reset()};lr.prototype.reset=function(){this._active=!1},lr.prototype.dblclick=function(o,a){return o.preventDefault(),{cameraAnimation:function(e){e.easeTo({duration:300,zoom:e.getZoom()+(o.shiftKey?-1:1),around:e.unproject(a)},{originalEvent:o})}}},lr.prototype.enable=function(){this._enabled=!0},lr.prototype.disable=function(){this._enabled=!1,this.reset()},lr.prototype.isEnabled=function(){return this._enabled},lr.prototype.isActive=function(){return this._active};var cr=function(){this._tap=new Zo({numTouches:1,numTaps:1}),this.reset()};cr.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},cr.prototype.touchstart=function(o,t,e){this._swipePoint||(this._tapTime&&500<o.timeStamp-this._tapTime&&this.reset(),this._tapTime?0<e.length&&(this._swipePoint=t[0],this._swipeTouch=e[0].identifier):this._tap.touchstart(o,t,e))},cr.prototype.touchmove=function(a,t,e){if(!this._tapTime)this._tap.touchmove(a,t,e);else if(this._swipePoint){if(e[0].identifier!==this._swipeTouch)return;var n=t[0],o=n.y-this._swipePoint.y;return this._swipePoint=n,a.preventDefault(),this._active=!0,{zoomDelta:o/128}}},cr.prototype.touchend=function(o,t,e){this._tapTime?this._swipePoint&&0===e.length&&this.reset():this._tap.touchend(o,t,e)&&(this._tapTime=o.timeStamp)},cr.prototype.touchcancel=function(){this.reset()},cr.prototype.enable=function(){this._enabled=!0},cr.prototype.disable=function(){this._enabled=!1,this.reset()},cr.prototype.isEnabled=function(){return this._enabled},cr.prototype.isActive=function(){return this._active};var ur=function(o,t,e){this._el=o,this._mousePan=t,this._touchPan=e};ur.prototype.enable=function(e){this._inertiaOptions=e||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add('mapboxgl-touch-drag-pan')},ur.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove('mapboxgl-touch-drag-pan')},ur.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},ur.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var hr=function(o,t,e){this._pitchWithRotate=o.pitchWithRotate,this._mouseRotate=t,this._mousePitch=e};hr.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},hr.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},hr.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},hr.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var pr=function(a,t,e,r){this._el=a,this._touchZoom=t,this._touchRotate=e,this._tapDragZoom=r,this._rotationDisabled=!1,this._enabled=!0};pr.prototype.enable=function(e){this._touchZoom.enable(e),this._rotationDisabled||this._touchRotate.enable(e),this._tapDragZoom.enable(),this._el.classList.add('mapboxgl-touch-zoom-rotate')},pr.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove('mapboxgl-touch-zoom-rotate')},pr.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},pr.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},pr.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},pr.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var dr=function(e){return e.zoom||e.drag||e.pitch||e.rotate},_r=function(o){function t(){o.apply(this,arguments)}return o&&(t.__proto__=o),(t.prototype=Object.create(o&&o.prototype)).constructor=t,t}(aa.Event),fr=function(t,e){this._map=t,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Do(t),this._bearingSnap=e.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(e),aa.bindAll(['handleEvent','handleWindowEvent'],this);var o=this._el;this._listeners=[[o,'touchstart',{passive:!0}],[o,'touchmove',{passive:!1}],[o,'touchend',void 0],[o,'touchcancel',void 0],[o,'mousedown',void 0],[o,'mousemove',void 0],[o,'mouseup',void 0],[aa.window.document,'mousemove',{capture:!0}],[aa.window.document,'mouseup',void 0],[o,'mouseover',void 0],[o,'mouseout',void 0],[o,'dblclick',void 0],[o,'click',void 0],[o,'keydown',{capture:!1}],[o,'keyup',void 0],[o,'wheel',{passive:!1}],[o,'contextmenu',void 0],[aa.window,'blur',void 0]];for(var r=0,a=this._listeners;r<a.length;r+=1){var n=a[r],i=n[0];Ca.addEventListener(i,n[1],i===aa.window.document?this.handleWindowEvent:this.handleEvent,n[2])}};fr.prototype.destroy=function(){for(var t=0,e=this._listeners;t<e.length;t+=1){var o=e[t],r=o[0];Ca.removeEventListener(r,o[1],r===aa.window.document?this.handleWindowEvent:this.handleEvent,o[2])}},fr.prototype._addDefaultHandlers=function(y){var t=this._map,e=t.getCanvasContainer();this._add('mapEvent',new Bo(t,y));var i=t.boxZoom=new Fo(t,y);this._add('boxZoom',i);var o=new qo,r=new lr;t.doubleClickZoom=new sr(r,o),this._add('tapZoom',o),this._add('clickZoom',r);var a=new cr;this._add('tapDragZoom',a);var n=t.touchPitch=new er;this._add('touchPitch',n);var s=new Wo(y),l=new Xo(y);t.dragRotate=new hr(y,s,l),this._add('mouseRotate',s,['mousePitch']),this._add('mousePitch',l,['mouseRotate']);var c=new Go(y),u=new Ho(y);t.dragPan=new ur(e,c,u),this._add('mousePan',c),this._add('touchPan',u,['touchZoom','touchRotate']);var h=new $o,p=new Yo;t.touchZoomRotate=new pr(e,p,h,a),this._add('touchRotate',h,['touchPan','touchZoom']),this._add('touchZoom',p,['touchPan','touchRotate']);var d=t.scrollZoom=new ar(t,this);this._add('scrollZoom',d,['mousePan']);var _=t.keyboard=new rr;this._add('keyboard',_),this._add('blockableMapEvent',new Oo(t));for(var f=0,m=['boxZoom','doubleClickZoom','tapDragZoom','touchPitch','dragRotate','dragPan','touchZoomRotate','scrollZoom','keyboard'],g;f<m.length;f+=1)g=m[f],y.interactive&&y[g]&&t[g].enable(y[g])},fr.prototype._add=function(o,a,r){this._handlers.push({handlerName:o,handler:a,allowed:r}),this._handlersById[o]=a},fr.prototype.stop=function(o){if(!this._updatingCamera){for(var t=0,e=this._handlers;t<e.length;t+=1)e[t].handler.reset();this._inertia.clear(),this._fireEvents({},{},o),this._changes=[]}},fr.prototype.isActive=function(){for(var o=0,t=this._handlers;o<t.length;o+=1)if(t[o].handler.isActive())return!0;return!1},fr.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},fr.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},fr.prototype.isMoving=function(){return!!dr(this._eventsInProgress)||this.isZooming()},fr.prototype._blockedByActive=function(a,t,r){for(var n in a)if(n!==r&&(!t||0>t.indexOf(n)))return!0;return!1},fr.prototype.handleWindowEvent=function(e){this.handleEvent(e,e.type+'Window')},fr.prototype._getMapTouches=function(a){for(var t=[],e=0,n=a,o;e<n.length;e+=1)o=n[e],this._el.contains(o.target)&&t.push(o);return t},fr.prototype.handleEvent=function(i,t){if('blur'!==i.type){this._updatingCamera=!0;for(var e='renderFrame'===i.type?void 0:i,o={needsRenderFrame:!1},r={},a={},n=i.touches?this._getMapTouches(i.touches):void 0,s=n?Ca.touchPos(this._el,n):Ca.mousePos(this._el,i),l=0,c=this._handlers;l<c.length;l+=1){var u=c[l],y=u.handlerName,p=u.handler,d=u.allowed;if(p.isEnabled()){var _=void 0;this._blockedByActive(a,d,y)?p.reset():p[t||i.type]&&(_=p[t||i.type](i,s,n),this.mergeHandlerResult(o,r,_,y,e),_&&_.needsRenderFrame&&this._triggerRenderFrame()),(_||p.isActive())&&(a[y]=p)}}var f={};for(var m in this._previousActiveHandlers)a[m]||(f[m]=e);this._previousActiveHandlers=a,(Object.keys(f).length||xa(o))&&(this._changes.push([o,r,f]),this._triggerRenderFrame()),(Object.keys(a).length||xa(o))&&this._map._stop(!0),this._updatingCamera=!1;var g=o.cameraAnimation;g&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],g(this._map))}else this.stop(!0)},fr.prototype.mergeHandlerResult=function(t,e,i,o,s){if(i){aa.extend(t,i);var a={handlerName:o,originalEvent:i.originalEvent||s};void 0!==i.zoomDelta&&(e.zoom=a),void 0!==i.panDelta&&(e.drag=a),void 0!==i.pitchDelta&&(e.pitch=a),void 0!==i.bearingDelta&&(e.rotate=a)}},fr.prototype._applyChanges=function(){for(var t={},e={},i={},o=0,r=this._changes;o<r.length;o+=1){var a=r[o],n=a[0],s=a[1],l=a[2];n.panDelta&&(t.panDelta=(t.panDelta||new aa.Point(0,0))._add(n.panDelta)),n.zoomDelta&&(t.zoomDelta=(t.zoomDelta||0)+n.zoomDelta),n.bearingDelta&&(t.bearingDelta=(t.bearingDelta||0)+n.bearingDelta),n.pitchDelta&&(t.pitchDelta=(t.pitchDelta||0)+n.pitchDelta),void 0!==n.around&&(t.around=n.around),void 0!==n.pinchAround&&(t.pinchAround=n.pinchAround),n.noInertia&&(t.noInertia=n.noInertia),aa.extend(e,s),aa.extend(i,l)}this._updateMapTransform(t,e,i),this._changes=[]},fr.prototype._updateMapTransform=function(p,t,e){var i=this._map,o=i.transform;if(!xa(p))return this._fireEvents(t,e,!0);var r=p.panDelta,a=p.zoomDelta,n=p.bearingDelta,s=p.pitchDelta,l=p.around,d=p.pinchAround;void 0!==d&&(l=d),i._stop(!0),l=l||i.transform.centerPoint;var c=o.pointLocation(r?l.sub(r):l);n&&(o.bearing+=n),s&&(o.pitch+=s),a&&(o.zoom+=a),o.setLocationAtPoint(c,l),this._map._update(),p.noInertia||this._inertia.record(p),this._fireEvents(t,e,!0)},fr.prototype._fireEvents=function(t,e,i){var o=this,r=dr(this._eventsInProgress),b=dr(t),n={};for(var s in t)this._eventsInProgress[s]||(n[s+'start']=t[s].originalEvent),this._eventsInProgress[s]=t[s];for(var l in!r&&b&&this._fireEvent('movestart',b.originalEvent),n)this._fireEvent(l,n[l]);for(var c in b&&this._fireEvent('move',b.originalEvent),t)this._fireEvent(c,t[c].originalEvent);var u={},p;for(var w in this._eventsInProgress){var d=this._eventsInProgress[w],_=d.handlerName,f=d.originalEvent;this._handlersById[_].isActive()||(delete this._eventsInProgress[w],u[w+'end']=p=e[_]||f)}for(var m in u)this._fireEvent(m,u[m]);var g=dr(this._eventsInProgress);if(i&&(r||b)&&!g){this._updatingCamera=!0;var T=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),y=function(e){return 0!==e&&-o._bearingSnap<e&&e<o._bearingSnap};T?(y(T.bearing||this._map.getBearing())&&(T.bearing=0),this._map.easeTo(T,{originalEvent:p})):(this._map.fire(new aa.Event('moveend',{originalEvent:p})),y(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},fr.prototype._fireEvent=function(t,e){this._map.fire(new aa.Event(t,e?{originalEvent:e}:{}))},fr.prototype._requestFrame=function(){var o=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add(function(t){delete o._frameId,o.handleEvent(new _r('renderFrame',{timeStamp:t})),o._applyChanges()})},fr.prototype._triggerRenderFrame=function(){void 0===this._frameId&&(this._frameId=this._requestFrame())};var gr=function(t){function e(e,a){t.call(this),this._moving=!1,this._zooming=!1,this.transform=e,this._bearingSnap=a.bearingSnap,aa.bindAll(['_renderFrameCallback'],this)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getCenter=function(){return new aa.LngLat(this.transform.center.lng,this.transform.center.lat)},e.prototype.setCenter=function(o,a){return this.jumpTo({center:o},a)},e.prototype.panBy=function(t,a,r){return t=aa.Point.convert(t).mult(-1),this.panTo(this.transform.center,aa.extend({offset:t},a),r)},e.prototype.panTo=function(t,a,r){return this.easeTo(aa.extend({center:t},a),r)},e.prototype.getZoom=function(){return this.transform.zoom},e.prototype.setZoom=function(o,a){return this.jumpTo({zoom:o},a),this},e.prototype.zoomTo=function(t,a,r){return this.easeTo(aa.extend({zoom:t},a),r)},e.prototype.zoomIn=function(o,t){return this.zoomTo(this.getZoom()+1,o,t),this},e.prototype.zoomOut=function(o,t){return this.zoomTo(this.getZoom()-1,o,t),this},e.prototype.getBearing=function(){return this.transform.bearing},e.prototype.setBearing=function(o,a){return this.jumpTo({bearing:o},a),this},e.prototype.getPadding=function(){return this.transform.padding},e.prototype.setPadding=function(o,a){return this.jumpTo({padding:o},a),this},e.prototype.rotateTo=function(t,a,r){return this.easeTo(aa.extend({bearing:t},a),r)},e.prototype.resetNorth=function(t,e){return this.rotateTo(0,aa.extend({duration:1e3},t),e),this},e.prototype.resetNorthPitch=function(t,e){return this.easeTo(aa.extend({bearing:0,pitch:0,duration:1e3},t),e),this},e.prototype.snapToNorth=function(o,t){return B(this.getBearing())<this._bearingSnap?this.resetNorth(o,t):this},e.prototype.getPitch=function(){return this.transform.pitch},e.prototype.setPitch=function(o,a){return this.jumpTo({pitch:o},a),this},e.prototype.cameraForBounds=function(t,e){return t=aa.LngLatBounds.convert(t),this._cameraForBoxAndBearing(t.getNorthWest(),t.getSouthEast(),0,e)},e.prototype._cameraForBoxAndBearing=function(t,e,i,b){var r={top:0,bottom:0,right:0,left:0};if('number'==typeof(b=aa.extend({padding:r,offset:[0,0],maxZoom:this.transform.maxZoom},b)).padding){var w=b.padding;b.padding={top:w,bottom:w,right:w,left:w}}b.padding=aa.extend(r,b.padding);var T=this.transform,s=T.padding,l=T.project(aa.LngLat.convert(t)),c=T.project(aa.LngLat.convert(e)),u=l.rotate(-i*Xe/180),h=c.rotate(-i*Xe/180),p=new aa.Point(oa(u.x,h.x),oa(u.y,h.y)),d=new aa.Point(ta(u.x,h.x),ta(u.y,h.y)),_=p.sub(d),f=(T.width-(s.left+s.right+b.padding.left+b.padding.right))/_.x,m=(T.height-(s.top+s.bottom+b.padding.top+b.padding.bottom))/_.y;if(!(0>m||0>f)){var g=ta(T.scaleZoom(T.scale*ta(f,m)),b.maxZoom),E=aa.Point.convert(b.offset),y=new aa.Point(E.x+(b.padding.left-b.padding.right)/2,E.y+(b.padding.top-b.padding.bottom)/2).mult(T.scale/T.zoomScale(g));return{center:T.unproject(l.add(c).div(2).sub(y)),zoom:g,bearing:i}}aa.warnOnce('Map cannot fit within canvas with the given bounds, padding, and/or offset.')},e.prototype.fitBounds=function(o,t,e){return this._fitInternal(this.cameraForBounds(o,t),t,e)},e.prototype.fitScreenCoordinates=function(t,e,n,o,r){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(aa.Point.convert(t)),this.transform.pointLocation(aa.Point.convert(e)),n,o),o,r)},e.prototype._fitInternal=function(t,e,a){return t?(delete(e=aa.extend(t,e)).padding,e.linear?this.easeTo(e,a):this.flyTo(e,a)):this},e.prototype.jumpTo=function(t,e){this.stop();var i=this.transform,o=!1,r=!1,a=!1;return'zoom'in t&&i.zoom!==+t.zoom&&(o=!0,i.zoom=+t.zoom),void 0!==t.center&&(i.center=aa.LngLat.convert(t.center)),'bearing'in t&&i.bearing!==+t.bearing&&(r=!0,i.bearing=+t.bearing),'pitch'in t&&i.pitch!==+t.pitch&&(a=!0,i.pitch=+t.pitch),null==t.padding||i.isPaddingEqual(t.padding)||(i.padding=t.padding),this.fire(new aa.Event('movestart',e)).fire(new aa.Event('move',e)),o&&this.fire(new aa.Event('zoomstart',e)).fire(new aa.Event('zoom',e)).fire(new aa.Event('zoomend',e)),r&&this.fire(new aa.Event('rotatestart',e)).fire(new aa.Event('rotate',e)).fire(new aa.Event('rotateend',e)),a&&this.fire(new aa.Event('pitchstart',e)).fire(new aa.Event('pitch',e)).fire(new aa.Event('pitchend',e)),this.fire(new aa.Event('moveend',e))},e.prototype.easeTo=function(t,E){var i=this;this._stop(!1,t.easeId),(!1===(t=aa.extend({offset:[0,0],duration:500,easing:aa.ease},t)).animate||!t.essential&&aa.browser.prefersReducedMotion)&&(t.duration=0);var o=this.transform,r=this.getZoom(),a=this.getBearing(),n=this.getPitch(),s=this.getPadding(),l='zoom'in t?+t.zoom:r,c='bearing'in t?this._normalizeBearing(t.bearing,a):a,u='pitch'in t?+t.pitch:n,h='padding'in t?t.padding:o.padding,p=aa.Point.convert(t.offset),d=o.centerPoint.add(p),e=o.pointLocation(d),_=aa.LngLat.convert(t.center||e);this._normalizeCenter(_);var S=o.project(e),y=o.project(_).sub(S),x=o.zoomScale(l-r),b,g;t.around&&(b=aa.LngLat.convert(t.around),g=o.locationPoint(b));var m={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||l!==r,this._rotating=this._rotating||a!==c,this._pitching=this._pitching||u!==n,this._padding=!o.isPaddingEqual(h),this._easeId=t.easeId,this._prepareEase(E,t.noMoveStart,m),this._ease(function(t){if(i._zooming&&(o.zoom=aa.number(r,l,t)),i._rotating&&(o.bearing=aa.number(a,c,t)),i._pitching&&(o.pitch=aa.number(n,u,t)),i._padding&&(o.interpolatePadding(s,h,t),d=o.centerPoint.add(p)),b)o.setLocationAtPoint(b,g);else{var e=o.zoomScale(o.zoom-r),_=l>r?ta(2,x):oa(.5,x),m=C(_,1-t),f=o.unproject(S.add(y.mult(t*m)).mult(e));o.setLocationAtPoint(o.renderWorldCopies?f.wrap():f,d)}i._fireMoveEvents(E)},function(e){i._afterEase(E,e)},t),this},e.prototype._prepareEase=function(t,e,a){void 0===a&&(a={}),this._moving=!0,e||a.moving||this.fire(new aa.Event('movestart',t)),this._zooming&&!a.zooming&&this.fire(new aa.Event('zoomstart',t)),this._rotating&&!a.rotating&&this.fire(new aa.Event('rotatestart',t)),this._pitching&&!a.pitching&&this.fire(new aa.Event('pitchstart',t))},e.prototype._fireMoveEvents=function(t){this.fire(new aa.Event('move',t)),this._zooming&&this.fire(new aa.Event('zoom',t)),this._rotating&&this.fire(new aa.Event('rotate',t)),this._pitching&&this.fire(new aa.Event('pitch',t))},e.prototype._afterEase=function(t,e){if(!this._easeId||!e||this._easeId!==e){delete this._easeId;var n=this._zooming,o=this._rotating,r=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,n&&this.fire(new aa.Event('zoomend',t)),o&&this.fire(new aa.Event('rotateend',t)),r&&this.fire(new aa.Event('pitchend',t)),this.fire(new aa.Event('moveend',t))}},e.prototype.flyTo=function(t,F){function e(o){var t=(w*w-b*b+(o?-1:1)*P*P*T*T)/(2*(o?w:b)*P*T);return x(N(t*t+1)-t)}function i(e){return(g(e)-g(-e))/2}function C(e){return(g(e)+g(-e))/2}var z=this;if(!t.essential&&aa.browser.prefersReducedMotion){var o=aa.pick(t,['center','zoom','bearing','pitch','around']);return this.jumpTo(o,F)}this.stop(),t=aa.extend({offset:[0,0],speed:1.2,curve:1.42,easing:aa.ease},t);var D=this.transform,a=this.getZoom(),n=this.getBearing(),s=this.getPitch(),l=this.getPadding(),c='zoom'in t?aa.clamp(+t.zoom,D.minZoom,D.maxZoom):a,u='bearing'in t?this._normalizeBearing(t.bearing,n):n,h='pitch'in t?+t.pitch:s,p='padding'in t?t.padding:D.padding,r=D.zoomScale(c-a),d=aa.Point.convert(t.offset),f=D.centerPoint.add(d),m=D.pointLocation(f),O=aa.LngLat.convert(t.center||m);this._normalizeCenter(O);var v=D.project(m),y=D.project(O).sub(v),_=t.curve,b=oa(D.width,D.height),w=b/r,T=y.mag();if('minZoom'in t){var E=aa.clamp(ta(t.minZoom,a,c),D.minZoom,D.maxZoom),I=b/D.zoomScale(E-a);_=N(2*(I/T))}var P=_*_,S=e(0),M=function(e){return C(S)/C(S+_*e)},L=function(o){return b*((C(S)*(i(t=S+_*o)/C(t))-i(S))/P)/T;var t},A=(e(1)-S)/_;if(1e-6>B(T)||!isFinite(A)){if(1e-6>B(b-w))return this.easeTo(t,F);var R=w<b?-1:1;A=B(x(w/b))/_,L=function(){return 0},M=function(e){return g(R*_*e)}}return t.duration='duration'in t?+t.duration:1e3*A/('screenSpeed'in t?+t.screenSpeed/_:+t.speed),t.maxDuration&&t.duration>t.maxDuration&&(t.duration=0),this._zooming=!0,this._rotating=n!==u,this._pitching=h!==s,this._padding=!D.isPaddingEqual(p),this._prepareEase(F,!1),this._ease(function(t){var e=t*A,o=1/M(e);D.zoom=1===t?c:a+D.scaleZoom(o),z._rotating&&(D.bearing=aa.number(n,u,t)),z._pitching&&(D.pitch=aa.number(s,h,t)),z._padding&&(D.interpolatePadding(l,p,t),f=D.centerPoint.add(d));var r=1===t?O:D.unproject(v.add(y.mult(L(e))).mult(o));D.setLocationAtPoint(D.renderWorldCopies?r.wrap():r,f),z._fireMoveEvents(F)},function(){return z._afterEase(F)},t),this},e.prototype.isEasing=function(){return!!this._easeFrameId},e.prototype.stop=function(){return this._stop()},e.prototype._stop=function(a,r){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var e=this._onEaseEnd;delete this._onEaseEnd,e.call(this,r)}if(!a){var n=this.handlers;n&&n.stop(!1)}return this},e.prototype._ease=function(t,e,a){!1===a.animate||0===a.duration?(t(1),e()):(this._easeStart=aa.browser.now(),this._easeOptions=a,this._onEaseFrame=t,this._onEaseEnd=e,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},e.prototype._renderFrameCallback=function(){var t=ta((aa.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(t)),1>t?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},e.prototype._normalizeBearing=function(t,e){t=aa.wrap(t,-180,180);var a=B(t-e);return B(t-360-e)<a&&(t-=360),B(t+360-e)<a&&(t+=360),t},e.prototype._normalizeCenter=function(o){var t=this.transform;if(t.renderWorldCopies&&!t.lngRange){var e=o.lng-t.center.lng;o.lng+=180<e?-360:-180>e?360:0}},e}(aa.Evented),vr=function(t){void 0===t&&(t={}),this.options=t,aa.bindAll(['_updateEditLink','_updateData','_updateCompact'],this)};vr.prototype.getDefaultPosition=function(){return'bottom-right'},vr.prototype.onAdd=function(o){var t=this.options&&this.options.compact;return this._map=o,this._container=Ca.create('div','mapboxgl-ctrl mapboxgl-ctrl-attrib'),this._innerContainer=Ca.create('div','mapboxgl-ctrl-attrib-inner',this._container),t&&this._container.classList.add('mapboxgl-compact'),this._updateAttributions(),this._updateEditLink(),this._map.on('styledata',this._updateData),this._map.on('sourcedata',this._updateData),this._map.on('moveend',this._updateEditLink),void 0===t&&(this._map.on('resize',this._updateCompact),this._updateCompact()),this._container},vr.prototype.onRemove=function(){Ca.remove(this._container),this._map.off('styledata',this._updateData),this._map.off('sourcedata',this._updateData),this._map.off('moveend',this._updateEditLink),this._map.off('resize',this._updateCompact),this._map=void 0,this._attribHTML=void 0},vr.prototype._updateEditLink=function(){var t=this._editLink;t||(t=this._editLink=this._container.querySelector('.mapbox-improve-map'));var a=[{key:'owner',value:this.styleOwner},{key:'id',value:this.styleId},{key:'access_token',value:this._map._requestManager._customAccessToken||aa.config.ACCESS_TOKEN}];if(t){var e=a.reduce(function(r,t,e){return t.value&&(r+=t.key+'='+t.value+(e<a.length-1?'&':'')),r},'?');t.href=aa.config.FEEDBACK_URL+'/'+e+(this._map._hash?this._map._hash.getHashString(!0):''),t.rel='noopener nofollow'}},vr.prototype._updateData=function(e){e&&('metadata'===e.sourceDataType||'style'===e.dataType)&&(this._updateAttributions(),this._updateEditLink())},vr.prototype._updateAttributions=function(){if(this._map.style){var s=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?s=s.concat(this.options.customAttribution.map(function(e){return'string'==typeof e?e:''})):'string'==typeof this.options.customAttribution&&s.push(this.options.customAttribution)),this._map.style.stylesheet){var t=this._map.style.stylesheet;this.styleOwner=t.owner,this.styleId=t.id}var e=this._map.style.sourceCaches;for(var i in e){var o=e[i];if(o.used){var r=o.getSource();r.attribution&&0>s.indexOf(r.attribution)&&s.push(r.attribution)}}s.sort(function(o,t){return o.length-t.length});var a=(s=s.filter(function(t,e){for(var a=e+1;a<s.length;a++)if(0<=s[a].indexOf(t))return!1;return!0})).join(' | ');a!==this._attribHTML&&(this._attribHTML=a,s.length?(this._innerContainer.innerHTML=a,this._container.classList.remove('mapboxgl-attrib-empty')):this._container.classList.add('mapboxgl-attrib-empty'),this._editLink=null)}},vr.prototype._updateCompact=function(){640>=this._map.getCanvasContainer().offsetWidth?this._container.classList.add('mapboxgl-compact'):this._container.classList.remove('mapboxgl-compact')};var Dn=function(){aa.bindAll(['_updateLogo'],this),aa.bindAll(['_updateCompact'],this)};Dn.prototype.onAdd=function(o){this._map=o,this._container=Ca.create('div','mapboxgl-ctrl');var t=Ca.create('a','mapboxgl-ctrl-logo');return t.target='_blank',t.rel='noopener nofollow',t.href='https://www.mapbox.com/',t.setAttribute('aria-label',this._map._getUIString('LogoControl.Title')),t.setAttribute('rel','noopener nofollow'),this._container.appendChild(t),this._container.style.display='none',this._map.on('sourcedata',this._updateLogo),this._updateLogo(),this._map.on('resize',this._updateCompact),this._updateCompact(),this._container},Dn.prototype.onRemove=function(){Ca.remove(this._container),this._map.off('sourcedata',this._updateLogo),this._map.off('resize',this._updateCompact)},Dn.prototype.getDefaultPosition=function(){return'bottom-left'},Dn.prototype._updateLogo=function(e){e&&'metadata'!==e.sourceDataType||(this._container.style.display=this._logoRequired()?'block':'none')},Dn.prototype._logoRequired=function(){if(this._map.style){var o=this._map.style.sourceCaches;for(var t in o)if(o[t].getSource().mapbox_logo)return!0;return!1}},Dn.prototype._updateCompact=function(){var o=this._container.children;if(o.length){var t=o[0];250>this._map.getCanvasContainer().offsetWidth?t.classList.add('mapboxgl-compact'):t.classList.remove('mapboxgl-compact')}};var xr=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};xr.prototype.add=function(o){var a=++this._id;return this._queue.push({callback:o,id:a,cancelled:!1}),a},xr.prototype.remove=function(a){for(var t=this._currentlyRunning,e=0,n=t?this._queue.concat(t):this._queue,o;e<n.length;e+=1)if(o=n[e],o.id===a)return void(o.cancelled=!0)},xr.prototype.run=function(a){void 0===a&&(a=0);var t=this._currentlyRunning=this._queue;this._queue=[];for(var e=0,n=t,o;e<n.length&&(o=n[e],o.cancelled||(o.callback(a),!this._cleared));e+=1);this._cleared=!1,this._currentlyRunning=!1},xr.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var br={"FullscreenControl.Enter":'Enter fullscreen',"FullscreenControl.Exit":'Exit fullscreen',"GeolocateControl.FindMyLocation":'Find my location',"GeolocateControl.LocationNotAvailable":'Location not available',"LogoControl.Title":'Mapbox logo',"NavigationControl.ResetBearing":'Reset bearing to north',"NavigationControl.ZoomIn":'Zoom in',"NavigationControl.ZoomOut":'Zoom out',"ScaleControl.Feet":'ft',"ScaleControl.Meters":'m',"ScaleControl.Kilometers":'km',"ScaleControl.Miles":'mi',"ScaleControl.NauticalMiles":'nm'},wr=aa.window.HTMLImageElement,Tr=aa.window.HTMLElement,Er=aa.window.ImageBitmap,Ir={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:'sans-serif',transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},Pr=function(n){function e(t){var o=this;if(null!=(t=aa.extend({},Ir,t)).minZoom&&null!=t.maxZoom&&t.minZoom>t.maxZoom)throw new Error('maxZoom must be greater than or equal to minZoom');if(null!=t.minPitch&&null!=t.maxPitch&&t.minPitch>t.maxPitch)throw new Error('maxPitch must be greater than or equal to minPitch');if(null!=t.minPitch&&0>t.minPitch)throw new Error('minPitch must be greater than or equal to 0');if(null!=t.maxPitch&&60<t.maxPitch)throw new Error('maxPitch must be less than or equal to 60');var e=new wo(t.minZoom,t.maxZoom,t.minPitch,t.maxPitch,t.renderWorldCopies);if(n.call(this,e,t),this._interactive=t.interactive,this._maxTileCacheSize=t.maxTileCacheSize,this._failIfMajorPerformanceCaveat=t.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=t.preserveDrawingBuffer,this._antialias=t.antialias,this._trackResize=t.trackResize,this._bearingSnap=t.bearingSnap,this._refreshExpiredTiles=t.refreshExpiredTiles,this._fadeDuration=t.fadeDuration,this._crossSourceCollisions=t.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=t.collectResourceTiming,this._renderTaskQueue=new xr,this._controls=[],this._mapId=aa.uniqueId(),this._locale=aa.extend({},br,t.locale),this._requestManager=new aa.RequestManager(t.transformRequest,t.accessToken),'string'!=typeof t.container){if(!(t.container instanceof Tr))throw new Error('Invalid type: \'container\' must be a String or HTMLElement.');this._container=t.container}else if(this._container=aa.window.document.getElementById(t.container),!this._container)throw new Error('Container \''+t.container+'\' not found.');if(t.maxBounds&&this.setMaxBounds(t.maxBounds),aa.bindAll(['_onWindowOnline','_onWindowResize','_contextLost','_contextRestored'],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error('Failed to initialize WebGL.');this.on('move',function(){return o._update(!1)}),this.on('moveend',function(){return o._update(!1)}),this.on('zoom',function(){return o._update(!0)}),void 0!==aa.window&&(aa.window.addEventListener('online',this._onWindowOnline,!1),aa.window.addEventListener('resize',this._onWindowResize,!1),aa.window.addEventListener('orientationchange',this._onWindowResize,!1)),this.handlers=new fr(this,t),this._hash=t.hash&&new Eo('string'==typeof t.hash&&t.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:t.center,zoom:t.zoom,bearing:t.bearing,pitch:t.pitch}),t.bounds&&(this.resize(),this.fitBounds(t.bounds,aa.extend({},t.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=t.localIdeographFontFamily,t.style&&this.setStyle(t.style,{localIdeographFontFamily:t.localIdeographFontFamily}),t.attributionControl&&this.addControl(new vr({customAttribution:t.customAttribution})),this.addControl(new Dn,t.logoPosition),this.on('style.load',function(){o.transform.unmodified&&o.jumpTo(o.style.stylesheet)}),this.on('data',function(t){o._update('style'===t.dataType),o.fire(new aa.Event(t.dataType+'data',t))}),this.on('dataloading',function(t){o.fire(new aa.Event(t.dataType+'dataloading',t))})}n&&(e.__proto__=n),(e.prototype=Object.create(n&&n.prototype)).constructor=e;var t={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return e.prototype._getMapId=function(){return this._mapId},e.prototype.addControl=function(t,a){if(void 0===a&&t.getDefaultPosition&&(a=t.getDefaultPosition()),void 0===a&&(a='top-right'),!t||!t.onAdd)return this.fire(new aa.ErrorEvent(new Error('Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.')));var n=t.onAdd(this);this._controls.push(t);var o=this._controlPositions[a];return-1===a.indexOf('bottom')?o.appendChild(n):o.insertBefore(n,o.firstChild),this},e.prototype.removeControl=function(t){if(!t||!t.onRemove)return this.fire(new aa.ErrorEvent(new Error('Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.')));var o=this._controls.indexOf(t);return-1<o&&this._controls.splice(o,1),t.onRemove(this),this},e.prototype.resize=function(t){var e=this._containerDimensions(),n=e[0],o=e[1];this._resizeCanvas(n,o),this.transform.resize(n,o),this.painter.resize(n,o);var r=!this._moving;return r&&(this.stop(),this.fire(new aa.Event('movestart',t)).fire(new aa.Event('move',t))),this.fire(new aa.Event('resize',t)),r&&this.fire(new aa.Event('moveend',t)),this},e.prototype.getBounds=function(){return this.transform.getBounds()},e.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},e.prototype.setMaxBounds=function(t){return this.transform.setMaxBounds(aa.LngLatBounds.convert(t)),this._update()},e.prototype.setMinZoom=function(e){if(-2<=(e=null==e?-2:e)&&e<=this.transform.maxZoom)return this.transform.minZoom=e,this._update(),this.getZoom()<e&&this.setZoom(e),this;throw new Error('minZoom must be between -2 and the current maxZoom, inclusive')},e.prototype.getMinZoom=function(){return this.transform.minZoom},e.prototype.setMaxZoom=function(e){if((e=null==e?22:e)>=this.transform.minZoom)return this.transform.maxZoom=e,this._update(),this.getZoom()>e&&this.setZoom(e),this;throw new Error('maxZoom must be greater than the current minZoom')},e.prototype.getMaxZoom=function(){return this.transform.maxZoom},e.prototype.setMinPitch=function(e){if(0>(e=null==e?0:e))throw new Error('minPitch must be greater than or equal to 0');if(0<=e&&e<=this.transform.maxPitch)return this.transform.minPitch=e,this._update(),this.getPitch()<e&&this.setPitch(e),this;throw new Error('minPitch must be between 0 and the current maxPitch, inclusive')},e.prototype.getMinPitch=function(){return this.transform.minPitch},e.prototype.setMaxPitch=function(e){if(60<(e=null==e?60:e))throw new Error('maxPitch must be less than or equal to 60');if(e>=this.transform.minPitch)return this.transform.maxPitch=e,this._update(),this.getPitch()>e&&this.setPitch(e),this;throw new Error('maxPitch must be greater than the current minPitch')},e.prototype.getMaxPitch=function(){return this.transform.maxPitch},e.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},e.prototype.setRenderWorldCopies=function(e){return this.transform.renderWorldCopies=e,this._update()},e.prototype.project=function(t){return this.transform.locationPoint(aa.LngLat.convert(t))},e.prototype.unproject=function(t){return this.transform.pointLocation(aa.Point.convert(t))},e.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},e.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},e.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},e.prototype._createDelegatedListener=function(s,l,p){var d=this,t;if('mouseenter'===s||'mouseover'===s){var r=!1;return{layer:l,listener:p,delegates:{mousemove:function(e){var t=d.getLayer(l)?d.queryRenderedFeatures(e.point,{layers:[l]}):[];t.length?r||(r=!0,p.call(d,new Mo(s,d,e.originalEvent,{features:t}))):r=!1},mouseout:function(){r=!1}}}}if('mouseleave'===s||'mouseout'===s){var a=!1;return{layer:l,listener:p,delegates:{mousemove:function(e){(d.getLayer(l)?d.queryRenderedFeatures(e.point,{layers:[l]}):[]).length?a=!0:a&&(a=!1,p.call(d,new Mo(s,d,e.originalEvent)))},mouseout:function(t){a&&(a=!1,p.call(d,new Mo(s,d,t.originalEvent)))}}}}return{layer:l,listener:p,delegates:(t={},t[s]=function(e){var t=d.getLayer(l)?d.queryRenderedFeatures(e.point,{layers:[l]}):[];t.length&&(e.features=t,p.call(d,e),delete e.features)},t)}},e.prototype.on=function(o,t,e){if(void 0===e)return n.prototype.on.call(this,o,t);var i=this._createDelegatedListener(o,t,e);for(var r in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[o]=this._delegatedListeners[o]||[],this._delegatedListeners[o].push(i),i.delegates)this.on(r,i.delegates[r]);return this},e.prototype.once=function(o,t,e){if(void 0===e)return n.prototype.once.call(this,o,t);var i=this._createDelegatedListener(o,t,e);for(var r in i.delegates)this.once(r,i.delegates[r]);return this},e.prototype.off=function(p,t,e){var o=this;return void 0===e?n.prototype.off.call(this,p,t):(this._delegatedListeners&&this._delegatedListeners[p]&&function(r){for(var i=r[p],a=0,n;a<i.length;a++)if(n=i[a],n.layer===t&&n.listener===e){for(var s in n.delegates)o.off(s,n.delegates[s]);return i.splice(a,1),o}}(this._delegatedListeners),this)},e.prototype.queryRenderedFeatures=function(t,e){if(!this.style)return[];var n;if(void 0!==e||void 0===t||t instanceof aa.Point||Array.isArray(t)||(e=t,t=void 0),e=e||{},(t=t||[[0,0],[this.transform.width,this.transform.height]])instanceof aa.Point||'number'==typeof t[0])n=[aa.Point.convert(t)];else{var o=aa.Point.convert(t[0]),r=aa.Point.convert(t[1]);n=[o,new aa.Point(r.x,o.y),r,new aa.Point(o.x,r.y),o]}return this.style.queryRenderedFeatures(n,e,this.transform)},e.prototype.querySourceFeatures=function(o,t){return this.style.querySourceFeatures(o,t)},e.prototype.setStyle=function(t,e){return!1!==(e=aa.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},e)).diff&&e.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&t?(this._diffStyle(t,e),this):(this._localIdeographFontFamily=e.localIdeographFontFamily,this._updateStyle(t,e))},e.prototype._getUIString=function(o){var t=this._locale[o];if(null==t)throw new Error('Missing UI string \''+o+'\'');return t},e.prototype._updateStyle=function(o,a){return this.style&&(this.style.setEventedParent(null),this.style._remove()),o?(this.style=new qe(this,a||{}),this.style.setEventedParent(this,{style:this.style}),'string'==typeof o?this.style.loadURL(o):this.style.loadJSON(o),this):(delete this.style,this)},e.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new qe(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},e.prototype._diffStyle=function(t,n){var i=this;if('string'==typeof t){var o=this._requestManager.normalizeStyleURL(t),r=this._requestManager.transformRequest(o,aa.ResourceType.Style);aa.getJSON(r,function(t,e){t?i.fire(new aa.ErrorEvent(t)):e&&i._updateDiff(e,n)})}else'object'==typeof t&&this._updateDiff(t,n)},e.prototype._updateDiff=function(t,e){try{this.style.setState(t)&&this._update(!0)}catch(a){aa.warnOnce('Unable to perform style diff: '+(a.message||a.error||a)+'.  Rebuilding the style from scratch.'),this._updateStyle(t,e)}},e.prototype.getStyle=function(){if(this.style)return this.style.serialize()},e.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():aa.warnOnce('There is no style added to the map.')},e.prototype.addSource=function(o,t){return this._lazyInitEmptyStyle(),this.style.addSource(o,t),this._update(!0)},e.prototype.isSourceLoaded=function(t){var e=this.style&&this.style.sourceCaches[t];return void 0===e?void this.fire(new aa.ErrorEvent(new Error('There is no source with ID \''+t+'\''))):e.loaded()},e.prototype.areTilesLoaded=function(){var a=this.style&&this.style.sourceCaches;for(var t in a){var e=a[t]._tiles;for(var n in e){var o=e[n];if('loaded'!==o.state&&'errored'!==o.state)return!1}}return!0},e.prototype.addSourceType=function(o,t,e){return this._lazyInitEmptyStyle(),this.style.addSourceType(o,t,e)},e.prototype.removeSource=function(e){return this.style.removeSource(e),this._update(!0)},e.prototype.getSource=function(e){return this.style.getSource(e)},e.prototype.addImage=function(t,e,i){void 0===i&&(i={});var o=i.pixelRatio;void 0===o&&(o=1);var p=i.sdf;void 0===p&&(p=!1);var d=i.stretchX,m=i.stretchY,g=i.content;if(this._lazyInitEmptyStyle(),e instanceof wr||Er&&e instanceof Er){var y=aa.browser.getImageData(e);this.style.addImage(t,{data:new aa.RGBAImage({width:y.width,height:y.height},y.data),pixelRatio:o,stretchX:d,stretchY:m,content:g,sdf:p,version:0})}else{if(void 0===e.width||void 0===e.height)return this.fire(new aa.ErrorEvent(new Error('Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`')));var c=e;this.style.addImage(t,{data:new aa.RGBAImage({width:e.width,height:e.height},new Uint8Array(e.data)),pixelRatio:o,stretchX:d,stretchY:m,content:g,sdf:p,version:0,userImage:c}),c.onAdd&&c.onAdd(this,t)}},e.prototype.updateImage=function(t,e){var i=this.style.getImage(t);if(!i)return this.fire(new aa.ErrorEvent(new Error('The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.')));var l=e instanceof wr||Er&&e instanceof Er?aa.browser.getImageData(e):e,r=l.width,a=l.height,n=l.data;return void 0===r||void 0===a?this.fire(new aa.ErrorEvent(new Error('Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`'))):r!==i.data.width||a!==i.data.height?this.fire(new aa.ErrorEvent(new Error('The width and height of the updated image must be that same as the previous version of the image'))):(i.data.replace(n,!(e instanceof wr||Er&&e instanceof Er)),void this.style.updateImage(t,i))},e.prototype.hasImage=function(t){return t?!!this.style.getImage(t):(this.fire(new aa.ErrorEvent(new Error('Missing required image id'))),!1)},e.prototype.removeImage=function(e){this.style.removeImage(e)},e.prototype.loadImage=function(t,e){aa.getImage(this._requestManager.transformRequest(t,aa.ResourceType.Image),e)},e.prototype.listImages=function(){return this.style.listImages()},e.prototype.addLayer=function(o,t){return this._lazyInitEmptyStyle(),this.style.addLayer(o,t),this._update(!0)},e.prototype.moveLayer=function(o,t){return this.style.moveLayer(o,t),this._update(!0)},e.prototype.removeLayer=function(e){return this.style.removeLayer(e),this._update(!0)},e.prototype.getLayer=function(e){return this.style.getLayer(e)},e.prototype.setLayerZoomRange=function(o,t,e){return this.style.setLayerZoomRange(o,t,e),this._update(!0)},e.prototype.setFilter=function(o,t,e){return void 0===e&&(e={}),this.style.setFilter(o,t,e),this._update(!0)},e.prototype.getFilter=function(e){return this.style.getFilter(e)},e.prototype.setPaintProperty=function(a,t,e,r){return void 0===r&&(r={}),this.style.setPaintProperty(a,t,e,r),this._update(!0)},e.prototype.getPaintProperty=function(o,t){return this.style.getPaintProperty(o,t)},e.prototype.setLayoutProperty=function(a,t,e,r){return void 0===r&&(r={}),this.style.setLayoutProperty(a,t,e,r),this._update(!0)},e.prototype.getLayoutProperty=function(o,t){return this.style.getLayoutProperty(o,t)},e.prototype.setLight=function(o,t){return void 0===t&&(t={}),this._lazyInitEmptyStyle(),this.style.setLight(o,t),this._update(!0)},e.prototype.getLight=function(){return this.style.getLight()},e.prototype.setFeatureState=function(o,t){return this.style.setFeatureState(o,t),this._update()},e.prototype.removeFeatureState=function(o,t){return this.style.removeFeatureState(o,t),this._update()},e.prototype.getFeatureState=function(e){return this.style.getFeatureState(e)},e.prototype.getContainer=function(){return this._container},e.prototype.getCanvasContainer=function(){return this._canvasContainer},e.prototype.getCanvas=function(){return this._canvas},e.prototype._containerDimensions=function(){var o=0,t=0;return this._container&&(o=this._container.clientWidth||400,t=this._container.clientHeight||300),[o,t]},e.prototype._detectMissingCSS=function(){'rgb(250, 128, 114)'!==aa.window.getComputedStyle(this._missingCSSCanary).getPropertyValue('background-color')&&aa.warnOnce('This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.')},e.prototype._setupContainer=function(){var n=this._container;n.classList.add('mapboxgl-map'),(this._missingCSSCanary=Ca.create('div','mapboxgl-canary',n)).style.visibility='hidden',this._detectMissingCSS();var t=this._canvasContainer=Ca.create('div','mapboxgl-canvas-container',n);this._interactive&&t.classList.add('mapboxgl-interactive'),this._canvas=Ca.create('canvas','mapboxgl-canvas',t),this._canvas.addEventListener('webglcontextlost',this._contextLost,!1),this._canvas.addEventListener('webglcontextrestored',this._contextRestored,!1),this._canvas.setAttribute('tabindex','0'),this._canvas.setAttribute('aria-label','Map');var e=this._containerDimensions();this._resizeCanvas(e[0],e[1]);var o=this._controlContainer=Ca.create('div','mapboxgl-control-container',n),r=this._controlPositions={};['top-left','top-right','bottom-left','bottom-right'].forEach(function(e){r[e]=Ca.create('div','mapboxgl-ctrl-'+e,o)})},e.prototype._resizeCanvas=function(t,e){var a=aa.browser.devicePixelRatio||1;this._canvas.width=a*t,this._canvas.height=a*e,this._canvas.style.width=t+'px',this._canvas.style.height=e+'px'},e.prototype._setupPainter=function(){var e=aa.extend({},Sa.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),t=this._canvas.getContext('webgl',e)||this._canvas.getContext('experimental-webgl',e);t?(this.painter=new vo(t,this.transform),aa.webpSupported.testSupport(t)):this.fire(new aa.ErrorEvent(new Error('Failed to initialize WebGL')))},e.prototype._contextLost=function(t){t.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new aa.Event('webglcontextlost',{originalEvent:t}))},e.prototype._contextRestored=function(t){this._setupPainter(),this.resize(),this._update(),this.fire(new aa.Event('webglcontextrestored',{originalEvent:t}))},e.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},e.prototype._update=function(e){return this.style?(this._styleDirty=this._styleDirty||e,this._sourcesDirty=!0,this.triggerRepaint(),this):this},e.prototype._requestRenderFrame=function(e){return this._update(),this._renderTaskQueue.add(e)},e.prototype._cancelRenderFrame=function(e){this._renderTaskQueue.remove(e)},e.prototype._render=function(t){var m=this,e=0,o=this.painter.context.extTimerQuery,a;if(this.listens('gpu-timing-frame')&&(a=o.createQueryEXT(),o.beginQueryEXT(o.TIME_ELAPSED_EXT,a),e=aa.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(t),!this._removed){var r=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var n=this.transform.zoom,i=aa.browser.now();this.style.zoomHistory.update(n,i);var s=new aa.EvaluationParameters(n,{now:i,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),c=s.crossFadingFactor();1===c&&c===this._crossFadingFactor||(r=!0,this._crossFadingFactor=c),this.style.update(s)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens('gpu-timing-layer')}),this.fire(new aa.Event('render')),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new aa.Event('load'))),this.style&&(this.style.hasTransitions()||r)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens('gpu-timing-frame')){var u=aa.browser.now()-e;o.endQueryEXT(o.TIME_ELAPSED_EXT,a),setTimeout(function(){var t=o.getQueryObjectEXT(a,o.QUERY_RESULT_EXT)/1e6;o.deleteQueryEXT(a),m.fire(new aa.Event('gpu-timing-frame',{cpuTime:u,gpuTime:t}))},50)}if(this.listens('gpu-timing-layer')){var g=this.painter.collectGpuTimers();setTimeout(function(){var t=m.painter.queryGpuTimers(g);m.fire(new aa.Event('gpu-timing-layer',{layerTimes:t}))},50)}var p=this._sourcesDirty||this._styleDirty||this._placementDirty;return p||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new aa.Event('idle')),!this._loaded||this._fullyLoaded||p||(this._fullyLoaded=!0),this}},e.prototype.remove=function(){this._hash&&this._hash.remove();for(var t=0,e=this._controls;t<e.length;t+=1)e[t].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),void 0!==aa.window&&(aa.window.removeEventListener('resize',this._onWindowResize,!1),aa.window.removeEventListener('orientationchange',this._onWindowResize,!1),aa.window.removeEventListener('online',this._onWindowOnline,!1));var a=this.painter.context.gl.getExtension('WEBGL_lose_context');a&&a.loseContext(),va(this._canvasContainer),va(this._controlContainer),va(this._missingCSSCanary),this._container.classList.remove('mapboxgl-map'),this._removed=!0,this.fire(new aa.Event('remove'))},e.prototype.triggerRepaint=function(){var o=this;this.style&&!this._frame&&(this._frame=aa.browser.frame(function(e){o._frame=null,o._render(e)}))},e.prototype._onWindowOnline=function(){this._update()},e.prototype._onWindowResize=function(e){this._trackResize&&this.resize({originalEvent:e})._update()},t.showTileBoundaries.get=function(){return!!this._showTileBoundaries},t.showTileBoundaries.set=function(e){this._showTileBoundaries!==e&&(this._showTileBoundaries=e,this._update())},t.showPadding.get=function(){return!!this._showPadding},t.showPadding.set=function(e){this._showPadding!==e&&(this._showPadding=e,this._update())},t.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},t.showCollisionBoxes.set=function(e){this._showCollisionBoxes!==e&&(this._showCollisionBoxes=e,e?this.style._generateCollisionBoxes():this._update())},t.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},t.showOverdrawInspector.set=function(e){this._showOverdrawInspector!==e&&(this._showOverdrawInspector=e,this._update())},t.repaint.get=function(){return!!this._repaint},t.repaint.set=function(e){this._repaint!==e&&(this._repaint=e,this.triggerRepaint())},t.vertices.get=function(){return!!this._vertices},t.vertices.set=function(e){this._vertices=e,this._update()},e.prototype._setCacheLimits=function(t,e){aa.setCacheLimits(t,e)},t.version.get=function(){return aa.version},Object.defineProperties(e.prototype,t),e}(gr),Ln={showCompass:!0,showZoom:!0,visualizePitch:!1},zr=function(t){var e=this;this.options=aa.extend({},Ln,t),this._container=Ca.create('div','mapboxgl-ctrl mapboxgl-ctrl-group'),this._container.addEventListener('contextmenu',function(e){return e.preventDefault()}),this.options.showZoom&&(aa.bindAll(['_setButtonTitle','_updateZoomButtons'],this),this._zoomInButton=this._createButton('mapboxgl-ctrl-zoom-in',function(o){return e._map.zoomIn({},{originalEvent:o})}),Ca.create('span','mapboxgl-ctrl-icon',this._zoomInButton).setAttribute('aria-hidden',!0),this._zoomOutButton=this._createButton('mapboxgl-ctrl-zoom-out',function(o){return e._map.zoomOut({},{originalEvent:o})}),Ca.create('span','mapboxgl-ctrl-icon',this._zoomOutButton).setAttribute('aria-hidden',!0)),this.options.showCompass&&(aa.bindAll(['_rotateCompassArrow'],this),this._compass=this._createButton('mapboxgl-ctrl-compass',function(o){e.options.visualizePitch?e._map.resetNorthPitch({},{originalEvent:o}):e._map.resetNorth({},{originalEvent:o})}),this._compassIcon=Ca.create('span','mapboxgl-ctrl-icon',this._compass),this._compassIcon.setAttribute('aria-hidden',!0))};zr.prototype._updateZoomButtons=function(){var e=this._map.getZoom();this._zoomInButton.disabled=e===this._map.getMaxZoom(),this._zoomOutButton.disabled=e===this._map.getMinZoom()},zr.prototype._rotateCompassArrow=function(){var e=this.options.visualizePitch?'scale('+1/C(Ze(this._map.transform.pitch*(Xe/180)),.5)+') rotateX('+this._map.transform.pitch+'deg) rotateZ('+this._map.transform.angle*(180/Xe)+'deg)':'rotate('+this._map.transform.angle*(180/Xe)+'deg)';this._compassIcon.style.transform=e},zr.prototype.onAdd=function(e){return this._map=e,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,'ZoomIn'),this._setButtonTitle(this._zoomOutButton,'ZoomOut'),this._map.on('zoom',this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,'ResetBearing'),this.options.visualizePitch&&this._map.on('pitch',this._rotateCompassArrow),this._map.on('rotate',this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Rn(this._map,this._compass,this.options.visualizePitch)),this._container},zr.prototype.onRemove=function(){Ca.remove(this._container),this.options.showZoom&&this._map.off('zoom',this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off('pitch',this._rotateCompassArrow),this._map.off('rotate',this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},zr.prototype._createButton=function(a,t){var e=Ca.create('button',a,this._container);return e.type='button',e.addEventListener('click',t),e},zr.prototype._setButtonTitle=function(o,t){var e=this._map._getUIString('NavigationControl.'+t);o.title=e,o.setAttribute('aria-label',e)};var Rn=function(t,e,o){void 0===o&&(o=!1),this._clickTolerance=10,this.element=e,this.mouseRotate=new Wo({clickTolerance:t.dragRotate._mouseRotate._clickTolerance}),this.map=t,o&&(this.mousePitch=new Xo({clickTolerance:t.dragRotate._mousePitch._clickTolerance})),aa.bindAll(['mousedown','mousemove','mouseup','touchstart','touchmove','touchend','reset'],this),Ca.addEventListener(e,'mousedown',this.mousedown),Ca.addEventListener(e,'touchstart',this.touchstart,{passive:!1}),Ca.addEventListener(e,'touchmove',this.touchmove),Ca.addEventListener(e,'touchend',this.touchend),Ca.addEventListener(e,'touchcancel',this.reset)};Rn.prototype.down=function(o,t){this.mouseRotate.mousedown(o,t),this.mousePitch&&this.mousePitch.mousedown(o,t),Ca.disableDrag()},Rn.prototype.move=function(a,t){var e=this.map,n=this.mouseRotate.mousemoveWindow(a,t);if(n&&n.bearingDelta&&e.setBearing(e.getBearing()+n.bearingDelta),this.mousePitch){var o=this.mousePitch.mousemoveWindow(a,t);o&&o.pitchDelta&&e.setPitch(e.getPitch()+o.pitchDelta)}},Rn.prototype.off=function(){var e=this.element;Ca.removeEventListener(e,'mousedown',this.mousedown),Ca.removeEventListener(e,'touchstart',this.touchstart,{passive:!1}),Ca.removeEventListener(e,'touchmove',this.touchmove),Ca.removeEventListener(e,'touchend',this.touchend),Ca.removeEventListener(e,'touchcancel',this.reset),this.offTemp()},Rn.prototype.offTemp=function(){Ca.enableDrag(),Ca.removeEventListener(aa.window,'mousemove',this.mousemove),Ca.removeEventListener(aa.window,'mouseup',this.mouseup)},Rn.prototype.mousedown=function(t){this.down(aa.extend({},t,{ctrlKey:!0,preventDefault:function(){return t.preventDefault()}}),Ca.mousePos(this.element,t)),Ca.addEventListener(aa.window,'mousemove',this.mousemove),Ca.addEventListener(aa.window,'mouseup',this.mouseup)},Rn.prototype.mousemove=function(e){this.move(e,Ca.mousePos(this.element,e))},Rn.prototype.mouseup=function(e){this.mouseRotate.mouseupWindow(e),this.mousePitch&&this.mousePitch.mouseupWindow(e),this.offTemp()},Rn.prototype.touchstart=function(e){1===e.targetTouches.length?(this._startPos=this._lastPos=Ca.touchPos(this.element,e.targetTouches)[0],this.down({type:'mousedown',button:0,ctrlKey:!0,preventDefault:function(){return e.preventDefault()}},this._startPos)):this.reset()},Rn.prototype.touchmove=function(e){1===e.targetTouches.length?(this._lastPos=Ca.touchPos(this.element,e.targetTouches)[0],this.move({preventDefault:function(){return e.preventDefault()}},this._lastPos)):this.reset()},Rn.prototype.touchend=function(e){0===e.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},Rn.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var Mr={center:'translate(-50%,-50%)',top:'translate(-50%,0)',"top-left":'translate(0,0)',"top-right":'translate(-100%,0)',bottom:'translate(-50%,-100%)',"bottom-left":'translate(0,-100%)',"bottom-right":'translate(-100%,-100%)',left:'translate(0,-50%)',right:'translate(-100%,-50%)'},Ar=function(t){function e(e,i){var r=this;if(t.call(this),(e instanceof aa.window.HTMLElement||i)&&(e=aa.extend({element:e},i)),aa.bindAll(['_update','_onMove','_onUp','_addDragHandler','_onMapClick','_onKeyPress'],this),this._anchor=e&&e.anchor||'center',this._color=e&&e.color||'#3FB1CE',this._scale=e&&e.scale||1,this._draggable=e&&e.draggable||!1,this._state='inactive',this._rotation=e&&e.rotation||0,this._rotationAlignment=e&&e.rotationAlignment||'auto',this._pitchAlignment=e&&e.pitchAlignment&&'auto'!==e.pitchAlignment?e.pitchAlignment:this._rotationAlignment,e&&e.element)this._element=e.element,this._offset=aa.Point.convert(e&&e.offset||[0,0]);else{this._defaultMarker=!0,this._element=Ca.create('div'),this._element.setAttribute('aria-label','Map marker');var a=Ca.createNS('http://www.w3.org/2000/svg','svg');a.setAttributeNS(null,'display','block'),a.setAttributeNS(null,'height','41px'),a.setAttributeNS(null,'width','27px'),a.setAttributeNS(null,'viewBox','0 0 27 41');var n=Ca.createNS('http://www.w3.org/2000/svg','g');n.setAttributeNS(null,'stroke','none'),n.setAttributeNS(null,'stroke-width','1'),n.setAttributeNS(null,'fill','none'),n.setAttributeNS(null,'fill-rule','evenodd');var s=Ca.createNS('http://www.w3.org/2000/svg','g');s.setAttributeNS(null,'fill-rule','nonzero');var l=Ca.createNS('http://www.w3.org/2000/svg','g');l.setAttributeNS(null,'transform','translate(3.0, 29.0)'),l.setAttributeNS(null,'fill','#000000');for(var c=0,u=[{rx:'10.5',ry:'5.25002273'},{rx:'10.5',ry:'5.25002273'},{rx:'9.5',ry:'4.77275007'},{rx:'8.5',ry:'4.29549936'},{rx:'7.5',ry:'3.81822308'},{rx:'6.5',ry:'3.34094679'},{rx:'5.5',ry:'2.86367051'},{rx:'4.5',ry:'2.38636864'}];c<u.length;c+=1){var h=u[c],p=Ca.createNS('http://www.w3.org/2000/svg','ellipse');p.setAttributeNS(null,'opacity','0.04'),p.setAttributeNS(null,'cx','10.5'),p.setAttributeNS(null,'cy','5.80029008'),p.setAttributeNS(null,'rx',h.rx),p.setAttributeNS(null,'ry',h.ry),l.appendChild(p)}var d=Ca.createNS('http://www.w3.org/2000/svg','g');d.setAttributeNS(null,'fill',this._color);var _=Ca.createNS('http://www.w3.org/2000/svg','path');_.setAttributeNS(null,'d','M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z'),d.appendChild(_);var f=Ca.createNS('http://www.w3.org/2000/svg','g');f.setAttributeNS(null,'opacity','0.25'),f.setAttributeNS(null,'fill','#000000');var m=Ca.createNS('http://www.w3.org/2000/svg','path');m.setAttributeNS(null,'d','M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z'),f.appendChild(m);var g=Ca.createNS('http://www.w3.org/2000/svg','g');g.setAttributeNS(null,'transform','translate(6.0, 7.0)'),g.setAttributeNS(null,'fill','#FFFFFF');var v=Ca.createNS('http://www.w3.org/2000/svg','g');v.setAttributeNS(null,'transform','translate(8.0, 8.0)');var y=Ca.createNS('http://www.w3.org/2000/svg','circle');y.setAttributeNS(null,'fill','#000000'),y.setAttributeNS(null,'opacity','0.25'),y.setAttributeNS(null,'cx','5.5'),y.setAttributeNS(null,'cy','5.5'),y.setAttributeNS(null,'r','5.4999962');var x=Ca.createNS('http://www.w3.org/2000/svg','circle');x.setAttributeNS(null,'fill','#FFFFFF'),x.setAttributeNS(null,'cx','5.5'),x.setAttributeNS(null,'cy','5.5'),x.setAttributeNS(null,'r','5.4999962'),v.appendChild(y),v.appendChild(x),s.appendChild(l),s.appendChild(d),s.appendChild(f),s.appendChild(g),s.appendChild(v),a.appendChild(s),a.setAttributeNS(null,'height',41*this._scale+'px'),a.setAttributeNS(null,'width',27*this._scale+'px'),this._element.appendChild(a),this._offset=aa.Point.convert(e&&e.offset||[0,-14])}this._element.classList.add('mapboxgl-marker'),this._element.addEventListener('dragstart',function(e){e.preventDefault()}),this._element.addEventListener('mousedown',function(e){e.preventDefault()}),this._element.addEventListener('focus',function(){var e=r._map.getContainer();e.scrollTop=0,e.scrollLeft=0}),wa(this._element,this._anchor,'marker'),this._popup=null}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.addTo=function(e){return this.remove(),this._map=e,e.getCanvasContainer().appendChild(this._element),e.on('move',this._update),e.on('moveend',this._update),this.setDraggable(this._draggable),this._update(),this._map.on('click',this._onMapClick),this},e.prototype.remove=function(){return this._map&&(this._map.off('click',this._onMapClick),this._map.off('move',this._update),this._map.off('moveend',this._update),this._map.off('mousedown',this._addDragHandler),this._map.off('touchstart',this._addDragHandler),this._map.off('mouseup',this._onUp),this._map.off('touchend',this._onUp),this._map.off('mousemove',this._onMove),this._map.off('touchmove',this._onMove),delete this._map),Ca.remove(this._element),this._popup&&this._popup.remove(),this},e.prototype.getLngLat=function(){return this._lngLat},e.prototype.setLngLat=function(t){return this._lngLat=aa.LngLat.convert(t),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},e.prototype.getElement=function(){return this._element},e.prototype.setPopup=function(o){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener('keypress',this._onKeyPress),this._originalTabIndex||this._element.removeAttribute('tabindex')),o){if(!('offset'in o.options)){var t=9.545941546018392;o.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[t,-1*(24.6+t)],"bottom-right":[-t,-1*(24.6+t)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=o,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute('tabindex'),this._originalTabIndex||this._element.setAttribute('tabindex','0'),this._element.addEventListener('keypress',this._onKeyPress)}return this},e.prototype._onKeyPress=function(o){var t=o.code,e=o.charCode||o.keyCode;'Space'!==t&&'Enter'!==t&&32!==e&&13!==e||this.togglePopup()},e.prototype._onMapClick=function(o){var t=o.originalEvent.target,e=this._element;this._popup&&(t===e||e.contains(t))&&this.togglePopup()},e.prototype.getPopup=function(){return this._popup},e.prototype.togglePopup=function(){var e=this._popup;return e?(e.isOpen()?e.remove():e.addTo(this._map),this):this},e.prototype._update=function(a){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=ba(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var t='';'viewport'===this._rotationAlignment||'auto'===this._rotationAlignment?t='rotateZ('+this._rotation+'deg)':'map'===this._rotationAlignment&&(t='rotateZ('+(this._rotation-this._map.getBearing())+'deg)');var e='';'viewport'===this._pitchAlignment||'auto'===this._pitchAlignment?e='rotateX(0deg)':'map'===this._pitchAlignment&&(e='rotateX('+this._map.getPitch()+'deg)'),a&&'moveend'!==a.type||(this._pos=this._pos.round()),Ca.setTransform(this._element,Mr[this._anchor]+' translate('+this._pos.x+'px, '+this._pos.y+'px) '+e+' '+t)}},e.prototype.getOffset=function(){return this._offset},e.prototype.setOffset=function(t){return this._offset=aa.Point.convert(t),this._update(),this},e.prototype._onMove=function(t){this._pos=t.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents='none','pending'===this._state&&(this._state='active',this.fire(new aa.Event('dragstart'))),this.fire(new aa.Event('drag'))},e.prototype._onUp=function(){this._element.style.pointerEvents='auto',this._positionDelta=null,this._map.off('mousemove',this._onMove),this._map.off('touchmove',this._onMove),'active'===this._state&&this.fire(new aa.Event('dragend')),this._state='inactive'},e.prototype._addDragHandler=function(e){this._element.contains(e.originalEvent.target)&&(e.preventDefault(),this._positionDelta=e.point.sub(this._pos).add(this._offset),this._state='pending',this._map.on('mousemove',this._onMove),this._map.on('touchmove',this._onMove),this._map.once('mouseup',this._onUp),this._map.once('touchend',this._onUp))},e.prototype.setDraggable=function(e){return this._draggable=!!e,this._map&&(e?(this._map.on('mousedown',this._addDragHandler),this._map.on('touchstart',this._addDragHandler)):(this._map.off('mousedown',this._addDragHandler),this._map.off('touchstart',this._addDragHandler))),this},e.prototype.isDraggable=function(){return this._draggable},e.prototype.setRotation=function(e){return this._rotation=e||0,this._update(),this},e.prototype.getRotation=function(){return this._rotation},e.prototype.setRotationAlignment=function(e){return this._rotationAlignment=e||'auto',this._update(),this},e.prototype.getRotationAlignment=function(){return this._rotationAlignment},e.prototype.setPitchAlignment=function(e){return this._pitchAlignment=e&&'auto'!==e?e:this._rotationAlignment,this._update(),this},e.prototype.getPitchAlignment=function(){return this._pitchAlignment},e}(aa.Evented),Bn={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Or=0,Fr=!1,Ur=function(t){function e(e){t.call(this),this.options=aa.extend({},Bn,e),aa.bindAll(['_onSuccess','_onError','_onZoom','_finish','_setupUI','_updateCamera','_updateMarker'],this)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.onAdd=function(t){var e;return this._map=t,this._container=Ca.create('div','mapboxgl-ctrl mapboxgl-ctrl-group'),e=this._setupUI,void 0===Mn?void 0===aa.window.navigator.permissions?e(Mn=!!aa.window.navigator.geolocation):aa.window.navigator.permissions.query({name:'geolocation'}).then(function(o){e(Mn='denied'!==o.state)}):e(Mn),this._container},e.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(aa.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),Ca.remove(this._container),this._map.off('zoom',this._onZoom),this._map=void 0,Or=0,Fr=!1},e.prototype._isOutOfMapMaxBounds=function(o){var t=this._map.getMaxBounds(),e=o.coords;return t&&(e.longitude<t.getWest()||e.longitude>t.getEast()||e.latitude<t.getSouth()||e.latitude>t.getNorth())},e.prototype._setErrorState=function(){switch(this._watchState){case'WAITING_ACTIVE':this._watchState='ACTIVE_ERROR',this._geolocateButton.classList.remove('mapboxgl-ctrl-geolocate-active'),this._geolocateButton.classList.add('mapboxgl-ctrl-geolocate-active-error');break;case'ACTIVE_LOCK':this._watchState='ACTIVE_ERROR',this._geolocateButton.classList.remove('mapboxgl-ctrl-geolocate-active'),this._geolocateButton.classList.add('mapboxgl-ctrl-geolocate-active-error'),this._geolocateButton.classList.add('mapboxgl-ctrl-geolocate-waiting');break;case'BACKGROUND':this._watchState='BACKGROUND_ERROR',this._geolocateButton.classList.remove('mapboxgl-ctrl-geolocate-background'),this._geolocateButton.classList.add('mapboxgl-ctrl-geolocate-background-error'),this._geolocateButton.classList.add('mapboxgl-ctrl-geolocate-waiting');}},e.prototype._onSuccess=function(t){if(this._map){if(this._isOutOfMapMaxBounds(t))return this._setErrorState(),this.fire(new aa.Event('outofmaxbounds',t)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=t,this._watchState){case'WAITING_ACTIVE':case'ACTIVE_LOCK':case'ACTIVE_ERROR':this._watchState='ACTIVE_LOCK',this._geolocateButton.classList.remove('mapboxgl-ctrl-geolocate-waiting'),this._geolocateButton.classList.remove('mapboxgl-ctrl-geolocate-active-error'),this._geolocateButton.classList.add('mapboxgl-ctrl-geolocate-active');break;case'BACKGROUND':case'BACKGROUND_ERROR':this._watchState='BACKGROUND',this._geolocateButton.classList.remove('mapboxgl-ctrl-geolocate-waiting'),this._geolocateButton.classList.remove('mapboxgl-ctrl-geolocate-background-error'),this._geolocateButton.classList.add('mapboxgl-ctrl-geolocate-background');}this.options.showUserLocation&&'OFF'!==this._watchState&&this._updateMarker(t),this.options.trackUserLocation&&'ACTIVE_LOCK'!==this._watchState||this._updateCamera(t),this.options.showUserLocation&&this._dotElement.classList.remove('mapboxgl-user-location-dot-stale'),this.fire(new aa.Event('geolocate',t)),this._finish()}},e.prototype._updateCamera=function(t){var e=new aa.LngLat(t.coords.longitude,t.coords.latitude),n=t.coords.accuracy,o=this._map.getBearing(),i=aa.extend({bearing:o},this.options.fitBoundsOptions);this._map.fitBounds(e.toBounds(n),i,{geolocateSource:!0})},e.prototype._updateMarker=function(t){if(t){var e=new aa.LngLat(t.coords.longitude,t.coords.latitude);this._accuracyCircleMarker.setLngLat(e).addTo(this._map),this._userLocationDotMarker.setLngLat(e).addTo(this._map),this._accuracy=t.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},e.prototype._updateCircleRadius=function(){var a=this._map._container.clientHeight/2,t=this._map.unproject([0,a]),e=this._map.unproject([1,a]),n=t.distanceTo(e),o=m(2*this._accuracy/n);this._circleElement.style.width=o+'px',this._circleElement.style.height=o+'px'},e.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},e.prototype._onError=function(t){if(this._map){if(this.options.trackUserLocation)if(1===t.code){this._watchState='OFF',this._geolocateButton.classList.remove('mapboxgl-ctrl-geolocate-waiting'),this._geolocateButton.classList.remove('mapboxgl-ctrl-geolocate-active'),this._geolocateButton.classList.remove('mapboxgl-ctrl-geolocate-active-error'),this._geolocateButton.classList.remove('mapboxgl-ctrl-geolocate-background'),this._geolocateButton.classList.remove('mapboxgl-ctrl-geolocate-background-error'),this._geolocateButton.disabled=!0;var e=this._map._getUIString('GeolocateControl.LocationNotAvailable');this._geolocateButton.title=e,this._geolocateButton.setAttribute('aria-label',e),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===t.code&&Fr)return;this._setErrorState()}'OFF'!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add('mapboxgl-user-location-dot-stale'),this.fire(new aa.Event('error',t)),this._finish()}},e.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},e.prototype._setupUI=function(t){var n=this;if(this._container.addEventListener('contextmenu',function(e){return e.preventDefault()}),this._geolocateButton=Ca.create('button','mapboxgl-ctrl-geolocate',this._container),Ca.create('span','mapboxgl-ctrl-icon',this._geolocateButton).setAttribute('aria-hidden',!0),this._geolocateButton.type='button',!1===t){aa.warnOnce('Geolocation support is not available so the GeolocateControl will be disabled.');var e=this._map._getUIString('GeolocateControl.LocationNotAvailable');this._geolocateButton.disabled=!0,this._geolocateButton.title=e,this._geolocateButton.setAttribute('aria-label',e)}else{var o=this._map._getUIString('GeolocateControl.FindMyLocation');this._geolocateButton.title=o,this._geolocateButton.setAttribute('aria-label',o)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute('aria-pressed','false'),this._watchState='OFF'),this.options.showUserLocation&&(this._dotElement=Ca.create('div','mapboxgl-user-location-dot'),this._userLocationDotMarker=new Ar(this._dotElement),this._circleElement=Ca.create('div','mapboxgl-user-location-accuracy-circle'),this._accuracyCircleMarker=new Ar({element:this._circleElement,pitchAlignment:'map'}),this.options.trackUserLocation&&(this._watchState='OFF'),this._map.on('zoom',this._onZoom)),this._geolocateButton.addEventListener('click',this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on('movestart',function(t){t.geolocateSource||'ACTIVE_LOCK'!==n._watchState||t.originalEvent&&'resize'===t.originalEvent.type||(n._watchState='BACKGROUND',n._geolocateButton.classList.add('mapboxgl-ctrl-geolocate-background'),n._geolocateButton.classList.remove('mapboxgl-ctrl-geolocate-active'),n.fire(new aa.Event('trackuserlocationend')))})},e.prototype.trigger=function(){if(!this._setup)return aa.warnOnce('Geolocate control triggered before added to a map'),!1;if(this.options.trackUserLocation){switch(this._watchState){case'OFF':this._watchState='WAITING_ACTIVE',this.fire(new aa.Event('trackuserlocationstart'));break;case'WAITING_ACTIVE':case'ACTIVE_LOCK':case'ACTIVE_ERROR':case'BACKGROUND_ERROR':Or--,Fr=!1,this._watchState='OFF',this._geolocateButton.classList.remove('mapboxgl-ctrl-geolocate-waiting'),this._geolocateButton.classList.remove('mapboxgl-ctrl-geolocate-active'),this._geolocateButton.classList.remove('mapboxgl-ctrl-geolocate-active-error'),this._geolocateButton.classList.remove('mapboxgl-ctrl-geolocate-background'),this._geolocateButton.classList.remove('mapboxgl-ctrl-geolocate-background-error'),this.fire(new aa.Event('trackuserlocationend'));break;case'BACKGROUND':this._watchState='ACTIVE_LOCK',this._geolocateButton.classList.remove('mapboxgl-ctrl-geolocate-background'),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new aa.Event('trackuserlocationstart'));}switch(this._watchState){case'WAITING_ACTIVE':this._geolocateButton.classList.add('mapboxgl-ctrl-geolocate-waiting'),this._geolocateButton.classList.add('mapboxgl-ctrl-geolocate-active');break;case'ACTIVE_LOCK':this._geolocateButton.classList.add('mapboxgl-ctrl-geolocate-active');break;case'ACTIVE_ERROR':this._geolocateButton.classList.add('mapboxgl-ctrl-geolocate-waiting'),this._geolocateButton.classList.add('mapboxgl-ctrl-geolocate-active-error');break;case'BACKGROUND':this._geolocateButton.classList.add('mapboxgl-ctrl-geolocate-background');break;case'BACKGROUND_ERROR':this._geolocateButton.classList.add('mapboxgl-ctrl-geolocate-waiting'),this._geolocateButton.classList.add('mapboxgl-ctrl-geolocate-background-error');}if('OFF'===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){var t;this._geolocateButton.classList.add('mapboxgl-ctrl-geolocate-waiting'),this._geolocateButton.setAttribute('aria-pressed','true'),1<++Or?(t={maximumAge:6e5,timeout:0},Fr=!0):(t=this.options.positionOptions,Fr=!1),this._geolocationWatchID=aa.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,t)}}else aa.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},e.prototype._clearWatch=function(){aa.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove('mapboxgl-ctrl-geolocate-waiting'),this._geolocateButton.setAttribute('aria-pressed','false'),this.options.showUserLocation&&this._updateMarker(null)},e}(aa.Evented),Fn={maxWidth:100,unit:'metric'},Zr=function(t){this.options=aa.extend({},Fn,t),aa.bindAll(['_onMove','setUnit'],this)},Mn;Zr.prototype.getDefaultPosition=function(){return'bottom-left'},Zr.prototype._onMove=function(){Ta(this._map,this._container,this.options)},Zr.prototype.onAdd=function(e){return this._map=e,this._container=Ca.create('div','mapboxgl-ctrl mapboxgl-ctrl-scale',e.getContainer()),this._map.on('move',this._onMove),this._onMove(),this._container},Zr.prototype.onRemove=function(){Ca.remove(this._container),this._map.off('move',this._onMove),this._map=void 0},Zr.prototype.setUnit=function(e){this.options.unit=e,Ta(this._map,this._container,this.options)};var kr=function(t){this._fullscreen=!1,t&&t.container&&(t.container instanceof aa.window.HTMLElement?this._container=t.container:aa.warnOnce('Full screen control \'container\' must be a DOM element.')),aa.bindAll(['_onClickFullscreen','_changeIcon'],this),'onfullscreenchange'in aa.window.document?this._fullscreenchange='fullscreenchange':'onmozfullscreenchange'in aa.window.document?this._fullscreenchange='mozfullscreenchange':'onwebkitfullscreenchange'in aa.window.document?this._fullscreenchange='webkitfullscreenchange':'onmsfullscreenchange'in aa.window.document&&(this._fullscreenchange='MSFullscreenChange')};kr.prototype.onAdd=function(t){return this._map=t,this._container||(this._container=this._map.getContainer()),this._controlContainer=Ca.create('div','mapboxgl-ctrl mapboxgl-ctrl-group'),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display='none',aa.warnOnce('This device does not support fullscreen mode.')),this._controlContainer},kr.prototype.onRemove=function(){Ca.remove(this._controlContainer),this._map=null,aa.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},kr.prototype._checkFullscreenSupport=function(){return!!(aa.window.document.fullscreenEnabled||aa.window.document.mozFullScreenEnabled||aa.window.document.msFullscreenEnabled||aa.window.document.webkitFullscreenEnabled)},kr.prototype._setupUI=function(){var t=this._fullscreenButton=Ca.create('button','mapboxgl-ctrl-fullscreen',this._controlContainer);Ca.create('span','mapboxgl-ctrl-icon',t).setAttribute('aria-hidden',!0),t.type='button',this._updateTitle(),this._fullscreenButton.addEventListener('click',this._onClickFullscreen),aa.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},kr.prototype._updateTitle=function(){var e=this._getTitle();this._fullscreenButton.setAttribute('aria-label',e),this._fullscreenButton.title=e},kr.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?'FullscreenControl.Exit':'FullscreenControl.Enter')},kr.prototype._isFullscreen=function(){return this._fullscreen},kr.prototype._changeIcon=function(){(aa.window.document.fullscreenElement||aa.window.document.mozFullScreenElement||aa.window.document.webkitFullscreenElement||aa.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle('mapboxgl-ctrl-shrink'),this._fullscreenButton.classList.toggle('mapboxgl-ctrl-fullscreen'),this._updateTitle())},kr.prototype._onClickFullscreen=function(){this._isFullscreen()?aa.window.document.exitFullscreen?aa.window.document.exitFullscreen():aa.window.document.mozCancelFullScreen?aa.window.document.mozCancelFullScreen():aa.window.document.msExitFullscreen?aa.window.document.msExitFullscreen():aa.window.document.webkitCancelFullScreen&&aa.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var On={closeButton:!0,closeOnClick:!0,className:'',maxWidth:'240px'},Wr=function(t){function e(e){t.call(this),this.options=aa.extend(Object.create(On),e),aa.bindAll(['_update','_onClose','remove','_onMouseMove','_onMouseUp','_onDrag'],this)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.addTo=function(t){return this._map&&this.remove(),this._map=t,this.options.closeOnClick&&this._map.on('click',this._onClose),this.options.closeOnMove&&this._map.on('move',this._onClose),this._map.on('remove',this.remove),this._update(),this._trackPointer?(this._map.on('mousemove',this._onMouseMove),this._map.on('mouseup',this._onMouseUp),this._container&&this._container.classList.add('mapboxgl-popup-track-pointer'),this._map._canvasContainer.classList.add('mapboxgl-track-pointer')):this._map.on('move',this._update),this.fire(new aa.Event('open')),this},e.prototype.isOpen=function(){return!!this._map},e.prototype.remove=function(){return this._content&&Ca.remove(this._content),this._container&&(Ca.remove(this._container),delete this._container),this._map&&(this._map.off('move',this._update),this._map.off('move',this._onClose),this._map.off('click',this._onClose),this._map.off('remove',this.remove),this._map.off('mousemove',this._onMouseMove),this._map.off('mouseup',this._onMouseUp),this._map.off('drag',this._onDrag),delete this._map),this.fire(new aa.Event('close')),this},e.prototype.getLngLat=function(){return this._lngLat},e.prototype.setLngLat=function(t){return this._lngLat=aa.LngLat.convert(t),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on('move',this._update),this._map.off('mousemove',this._onMouseMove),this._container&&this._container.classList.remove('mapboxgl-popup-track-pointer'),this._map._canvasContainer.classList.remove('mapboxgl-track-pointer')),this},e.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off('move',this._update),this._map.on('mousemove',this._onMouseMove),this._map.on('drag',this._onDrag),this._container&&this._container.classList.add('mapboxgl-popup-track-pointer'),this._map._canvasContainer.classList.add('mapboxgl-track-pointer')),this},e.prototype.getElement=function(){return this._container},e.prototype.setText=function(t){return this.setDOMContent(aa.window.document.createTextNode(t))},e.prototype.setHTML=function(t){var e=aa.window.document.createDocumentFragment(),o=aa.window.document.createElement('body'),a;for(o.innerHTML=t;a=o.firstChild;)e.appendChild(a);return this.setDOMContent(e)},e.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},e.prototype.setMaxWidth=function(e){return this.options.maxWidth=e,this._update(),this},e.prototype.setDOMContent=function(e){return this._createContent(),this._content.appendChild(e),this._update(),this},e.prototype.addClassName=function(e){this._container&&this._container.classList.add(e)},e.prototype.removeClassName=function(e){this._container&&this._container.classList.remove(e)},e.prototype.toggleClassName=function(e){if(this._container)return this._container.classList.toggle(e)},e.prototype._createContent=function(){this._content&&Ca.remove(this._content),this._content=Ca.create('div','mapboxgl-popup-content',this._container),this.options.closeButton&&(this._closeButton=Ca.create('button','mapboxgl-popup-close-button',this._content),this._closeButton.type='button',this._closeButton.setAttribute('aria-label','Close popup'),this._closeButton.innerHTML='&#215;',this._closeButton.addEventListener('click',this._onClose))},e.prototype._onMouseUp=function(e){this._update(e.point)},e.prototype._onMouseMove=function(e){this._update(e.point)},e.prototype._onDrag=function(e){this._update(e.point)},e.prototype._update=function(t){var e=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=Ca.create('div','mapboxgl-popup',this._map.getContainer()),this._tip=Ca.create('div','mapboxgl-popup-tip',this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(' ').forEach(function(o){return e._container.classList.add(o)}),this._trackPointer&&this._container.classList.add('mapboxgl-popup-track-pointer')),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=ba(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||t)){var o=this._pos=this._trackPointer&&t?t:this._map.project(this._lngLat),r=this.options.anchor,i=function t(e){if(e){if('number'==typeof e){var a=b(N(.5*C(e,2)));return{center:new aa.Point(0,0),top:new aa.Point(0,e),"top-left":new aa.Point(a,a),"top-right":new aa.Point(-a,a),bottom:new aa.Point(0,-e),"bottom-left":new aa.Point(a,-a),"bottom-right":new aa.Point(-a,-a),left:new aa.Point(e,0),right:new aa.Point(-e,0)}}if(e instanceof aa.Point||Array.isArray(e)){var n=aa.Point.convert(e);return{center:n,top:n,"top-left":n,"top-right":n,bottom:n,"bottom-left":n,"bottom-right":n,left:n,right:n}}return{center:aa.Point.convert(e.center||[0,0]),top:aa.Point.convert(e.top||[0,0]),"top-left":aa.Point.convert(e['top-left']||[0,0]),"top-right":aa.Point.convert(e['top-right']||[0,0]),bottom:aa.Point.convert(e.bottom||[0,0]),"bottom-left":aa.Point.convert(e['bottom-left']||[0,0]),"bottom-right":aa.Point.convert(e['bottom-right']||[0,0]),left:aa.Point.convert(e.left||[0,0]),right:aa.Point.convert(e.right||[0,0])}}return t(new aa.Point(0,0))}(this.options.offset);if(!r){var n=this._container.offsetWidth,l=this._container.offsetHeight,p;p=o.y+i.bottom.y<l?['top']:o.y>this._map.transform.height-l?['bottom']:[],o.x<n/2?p.push('left'):o.x>this._map.transform.width-n/2&&p.push('right'),r=0===p.length?'bottom':p.join('-')}var s=o.add(i[r]).round();Ca.setTransform(this._container,Mr[r]+' translate('+s.x+'px,'+s.y+'px)'),wa(this._container,r,'popup')}},e.prototype._onClose=function(){this.remove()},e}(aa.Evented),Nn={version:aa.version,supported:Sa,setRTLTextPlugin:aa.setRTLTextPlugin,getRTLTextPluginStatus:aa.getRTLTextPluginStatus,Map:Pr,NavigationControl:zr,GeolocateControl:Ur,AttributionControl:vr,ScaleControl:Zr,FullscreenControl:kr,Popup:Wr,Marker:Ar,Style:qe,LngLat:aa.LngLat,LngLatBounds:aa.LngLatBounds,Point:aa.Point,MercatorCoordinate:aa.MercatorCoordinate,Evented:aa.Evented,config:aa.config,prewarm:function(){At().acquire(Dt)},clearPrewarmedResources:function(){var e=Ot;e&&(e.isPreloaded()&&1===e.numActive()?(e.release(Dt),Ot=null):console.warn('Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()'))},get accessToken(){return aa.config.ACCESS_TOKEN},set accessToken(t){aa.config.ACCESS_TOKEN=t},get baseApiUrl(){return aa.config.API_URL},set baseApiUrl(t){aa.config.API_URL=t},get workerCount(){return Rt.workerCount},set workerCount(e){Rt.workerCount=e},get maxParallelImageRequests(){return aa.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(t){aa.config.MAX_PARALLEL_IMAGE_REQUESTS=t},clearStorage:function(t){aa.clearTileCache(t)},workerUrl:''};return Nn}),a})},function(e,t,o){'use strict';var a=Math.floor,r=Math.min,n=Math.max,i=Math.round;o.r(t),function(e){function o(e){return e&&'[object Function]'==={}.toString.call(e)}function s(e,t){if(1!==e.nodeType)return[];var o=e.ownerDocument.defaultView,a=o.getComputedStyle(e,null);return t?a[t]:a}function l(e){return'HTML'===e.nodeName?e:e.parentNode||e.host}function p(e){if(!e)return document.body;switch(e.nodeName){case'HTML':case'BODY':return e.ownerDocument.body;case'#document':return e.body;}var t=s(e),o=t.overflow,a=t.overflowX,r=t.overflowY;return /(auto|scroll|overlay)/.test(o+r+a)?e:p(l(e))}function d(e){return e&&e.referenceNode?e.referenceNode:e}function c(e){return 11===e?se:10===e?le:se||le}function u(e){if(!e)return document.documentElement;for(var t=c(10)?document.body:null,o=e.offsetParent||null;o===t&&e.nextElementSibling;)o=(e=e.nextElementSibling).offsetParent;var a=o&&o.nodeName;return a&&'BODY'!==a&&'HTML'!==a?-1!==['TH','TD','TABLE'].indexOf(o.nodeName)&&'static'===s(o,'position')?u(o):o:e?e.ownerDocument.documentElement:document.documentElement}function m(e){var t=e.nodeName;return'BODY'!==t&&('HTML'===t||u(e.firstElementChild)===e)}function g(e){return null===e.parentNode?e:g(e.parentNode)}function y(e,t){if(!e||!e.nodeType||!t||!t.nodeType)return document.documentElement;var o=e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_FOLLOWING,a=o?e:t,r=o?t:e,n=document.createRange();n.setStart(a,0),n.setEnd(r,0);var i=n.commonAncestorContainer;if(e!==i&&t!==i||a.contains(r))return m(i)?i:u(i);var s=g(e);return s.host?y(s.host,t):y(e,g(t).host)}function _(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:'top',o='top'===t?'scrollTop':'scrollLeft',a=e.nodeName;if('BODY'===a||'HTML'===a){var r=e.ownerDocument.documentElement,n=e.ownerDocument.scrollingElement||r;return n[o]}return e[o]}function f(e,t){var o=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2],a=_(t,'top'),r=_(t,'left'),n=o?-1:1;return e.top+=a*n,e.bottom+=a*n,e.left+=r*n,e.right+=r*n,e}function h(e,t){var o='x'===t?'Left':'Top',a='Left'===o?'Right':'Bottom';return parseFloat(e['border'+o+'Width'])+parseFloat(e['border'+a+'Width'])}function x(e,t,o,a){return n(t['offset'+e],t['scroll'+e],o['client'+e],o['offset'+e],o['scroll'+e],c(10)?parseInt(o['offset'+e])+parseInt(a['margin'+('Height'===e?'Top':'Left')])+parseInt(a['margin'+('Height'===e?'Bottom':'Right')]):0)}function v(e){var t=e.body,o=e.documentElement,a=c(10)&&getComputedStyle(o);return{height:x('Height',t,o,a),width:x('Width',t,o,a)}}function b(e){return ue({},e,{right:e.left+e.width,bottom:e.top+e.height})}function w(e){var t={};try{if(c(10)){t=e.getBoundingClientRect();var o=_(e,'top'),a=_(e,'left');t.top+=o,t.left+=a,t.bottom+=o,t.right+=a}else t=e.getBoundingClientRect()}catch(t){}var r={left:t.left,top:t.top,width:t.right-t.left,height:t.bottom-t.top},n='HTML'===e.nodeName?v(e.ownerDocument):{},i=n.width||e.clientWidth||r.width,l=n.height||e.clientHeight||r.height,p=e.offsetWidth-i,d=e.offsetHeight-l;if(p||d){var u=s(e);p-=h(u,'x'),d-=h(u,'y'),r.width-=p,r.height-=d}return b(r)}function T(e,t){var o=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2],a=c(10),r='HTML'===t.nodeName,i=w(e),l=w(t),d=p(e),u=s(t),m=parseFloat(u.borderTopWidth),g=parseFloat(u.borderLeftWidth);o&&r&&(l.top=n(l.top,0),l.left=n(l.left,0));var y=b({top:i.top-l.top-m,left:i.left-l.left-g,width:i.width,height:i.height});if(y.marginTop=0,y.marginLeft=0,!a&&r){var _=parseFloat(u.marginTop),h=parseFloat(u.marginLeft);y.top-=m-_,y.bottom-=m-_,y.left-=g-h,y.right-=g-h,y.marginTop=_,y.marginLeft=h}return(a&&!o?t.contains(d):t===d&&'BODY'!==d.nodeName)&&(y=f(y,t)),y}function E(e){var t=!!(1<arguments.length&&arguments[1]!==void 0)&&arguments[1],o=e.ownerDocument.documentElement,a=T(e,o),r=n(o.clientWidth,window.innerWidth||0),i=n(o.clientHeight,window.innerHeight||0),s=t?0:_(o),l=t?0:_(o,'left'),p={top:s-a.top+a.marginTop,left:l-a.left+a.marginLeft,width:r,height:i};return b(p)}function S(e){var t=e.nodeName;if('BODY'===t||'HTML'===t)return!1;if('fixed'===s(e,'position'))return!0;var o=l(e);return!!o&&S(o)}function C(e){if(!e||!e.parentElement||c())return document.documentElement;for(var t=e.parentElement;t&&'none'===s(t,'transform');)t=t.parentElement;return t||document.documentElement}function I(e,t,o,a){var r=!!(4<arguments.length&&void 0!==arguments[4])&&arguments[4],n={top:0,left:0},i=r?C(e):y(e,d(t));if('viewport'===a)n=E(i,r);else{var s;'scrollParent'===a?(s=p(l(t)),'BODY'===s.nodeName&&(s=e.ownerDocument.documentElement)):'window'===a?s=e.ownerDocument.documentElement:s=a;var c=T(s,i,r);if('HTML'===s.nodeName&&!S(i)){var u=v(e.ownerDocument),m=u.height,g=u.width;n.top+=c.top-c.marginTop,n.bottom=m+c.top,n.left+=c.left-c.marginLeft,n.right=g+c.left}else n=c}o=o||0;var _='number'==typeof o;return n.left+=_?o:o.left||0,n.top+=_?o:o.top||0,n.right-=_?o:o.right||0,n.bottom-=_?o:o.bottom||0,n}function A(e){var t=e.width,o=e.height;return t*o}function k(e,t,o,a,r){var n=5<arguments.length&&arguments[5]!==void 0?arguments[5]:0;if(-1===e.indexOf('auto'))return e;var i=I(o,a,n,r),s={top:{width:i.width,height:t.top-i.top},right:{width:i.right-t.right,height:i.height},bottom:{width:i.width,height:i.bottom-t.bottom},left:{width:t.left-i.left,height:i.height}},l=Object.keys(s).map(function(e){return ue({key:e},s[e],{area:A(s[e])})}).sort(function(e,t){return t.area-e.area}),p=l.filter(function(e){var t=e.width,a=e.height;return t>=o.clientWidth&&a>=o.clientHeight}),d=0<p.length?p[0].key:l[0].key,c=e.split('-')[1];return d+(c?'-'+c:'')}function P(e,t,o){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null,r=a?C(t):y(t,d(o));return T(o,r,a)}function z(e){var t=e.ownerDocument.defaultView,o=t.getComputedStyle(e),a=parseFloat(o.marginTop||0)+parseFloat(o.marginBottom||0),r=parseFloat(o.marginLeft||0)+parseFloat(o.marginRight||0),n={width:e.offsetWidth+r,height:e.offsetHeight+a};return n}function D(e){var t={left:'right',right:'left',bottom:'top',top:'bottom'};return e.replace(/left|right|bottom|top/g,function(e){return t[e]})}function L(e,t,o){o=o.split('-')[0];var a=z(e),r={width:a.width,height:a.height},n=-1!==['right','left'].indexOf(o),i=n?'top':'left',s=n?'left':'top',l=n?'height':'width',p=n?'width':'height';return r[i]=t[i]+t[l]/2-a[l]/2,r[s]=o===s?t[s]-a[p]:t[D(s)],r}function R(e,t){return Array.prototype.find?e.find(t):e.filter(t)[0]}function B(e,t,o){if(Array.prototype.findIndex)return e.findIndex(function(e){return e[t]===o});var a=R(e,function(e){return e[t]===o});return e.indexOf(a)}function F(e,t,a){var r=void 0===a?e:e.slice(0,B(e,'name',a));return r.forEach(function(e){e['function']&&console.warn('`modifier.function` is deprecated, use `modifier.fn`!');var a=e['function']||e.fn;e.enabled&&o(a)&&(t.offsets.popper=b(t.offsets.popper),t.offsets.reference=b(t.offsets.reference),t=a(t,e))}),t}function M(){if(!this.state.isDestroyed){var e={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}};e.offsets.reference=P(this.state,this.popper,this.reference,this.options.positionFixed),e.placement=k(this.options.placement,e.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),e.originalPlacement=e.placement,e.positionFixed=this.options.positionFixed,e.offsets.popper=L(this.popper,e.offsets.reference,e.placement),e.offsets.popper.position=this.options.positionFixed?'fixed':'absolute',e=F(this.modifiers,e),this.state.isCreated?this.options.onUpdate(e):(this.state.isCreated=!0,this.options.onCreate(e))}}function O(e,t){return e.some(function(e){var o=e.name,a=e.enabled;return a&&o===t})}function N(e){for(var t=[!1,'ms','Webkit','Moz','O'],o=e.charAt(0).toUpperCase()+e.slice(1),a=0;a<t.length;a++){var r=t[a],n=r?''+r+o:e;if('undefined'!=typeof document.body.style[n])return n}return null}function U(){return this.state.isDestroyed=!0,O(this.modifiers,'applyStyle')&&(this.popper.removeAttribute('x-placement'),this.popper.style.position='',this.popper.style.top='',this.popper.style.left='',this.popper.style.right='',this.popper.style.bottom='',this.popper.style.willChange='',this.popper.style[N('transform')]=''),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}function V(e){var t=e.ownerDocument;return t?t.defaultView:window}function q(e,t,o,a){var r='BODY'===e.nodeName,n=r?e.ownerDocument.defaultView:e;n.addEventListener(t,o,{passive:!0}),r||q(p(n.parentNode),t,o,a),a.push(n)}function j(e,t,o,a){o.updateBound=a,V(e).addEventListener('resize',o.updateBound,{passive:!0});var r=p(e);return q(r,'scroll',o.updateBound,o.scrollParents),o.scrollElement=r,o.eventsEnabled=!0,o}function Z(){this.state.eventsEnabled||(this.state=j(this.reference,this.options,this.state,this.scheduleUpdate))}function G(e,t){return V(e).removeEventListener('resize',t.updateBound),t.scrollParents.forEach(function(e){e.removeEventListener('scroll',t.updateBound)}),t.updateBound=null,t.scrollParents=[],t.scrollElement=null,t.eventsEnabled=!1,t}function H(){this.state.eventsEnabled&&(cancelAnimationFrame(this.scheduleUpdate),this.state=G(this.reference,this.state))}function W(e){return''!==e&&!isNaN(parseFloat(e))&&isFinite(e)}function X(e,t){Object.keys(t).forEach(function(o){var a='';-1!==['width','height','top','right','bottom','left'].indexOf(o)&&W(t[o])&&(a='px'),e.style[o]=t[o]+a})}function K(e,t){Object.keys(t).forEach(function(o){var a=t[o];!1===a?e.removeAttribute(o):e.setAttribute(o,t[o])})}function Y(e,t){var o=e.offsets,r=o.popper,n=o.reference,s=i,l=function(e){return e},p=s(n.width),d=s(r.width),c=-1!==['left','right'].indexOf(e.placement),u=-1!==e.placement.indexOf('-'),m=t?c||u||p%2==d%2?s:a:l,g=t?s:l;return{left:m(1==p%2&&1==d%2&&!u&&t?r.left-1:r.left),top:g(r.top),bottom:g(r.bottom),right:m(r.right)}}function J(e,t,o){var a=R(e,function(e){var o=e.name;return o===t}),r=!!a&&e.some(function(e){return e.name===o&&e.enabled&&e.order<a.order});if(!r){var n='`'+t+'`';console.warn('`'+o+'`'+' modifier is required by '+n+' modifier in order to work, be sure to include it before '+n+'!')}return r}function $(e){if('end'===e)return'start';return'start'===e?'end':e}function Q(e){var t=!!(1<arguments.length&&arguments[1]!==void 0)&&arguments[1],o=ye.indexOf(e),a=ye.slice(o+1).concat(ye.slice(0,o));return t?a.reverse():a}function ee(e,t,o,a){var r=e.match(/((?:\-|\+)?\d*\.?\d*)(.*)/),i=+r[1],s=r[2];if(!i)return e;if(0===s.indexOf('%')){var l;switch(s){case'%p':l=o;break;case'%':case'%r':default:l=a;}var p=b(l);return p[t]/100*i}if('vh'===s||'vw'===s){var d;return d='vh'===s?n(document.documentElement.clientHeight,window.innerHeight||0):n(document.documentElement.clientWidth,window.innerWidth||0),d/100*i}return i}function te(e,t,o,a){var r=[0,0],n=-1!==['right','left'].indexOf(a),i=e.split(/(\+|\-)/).map(function(e){return e.trim()}),s=i.indexOf(R(i,function(e){return-1!==e.search(/,|\s/)}));i[s]&&-1===i[s].indexOf(',')&&console.warn('Offsets separated by white space(s) are deprecated, use a comma (,) instead.');var l=/\s*,\s*|\s+/,p=-1===s?[i]:[i.slice(0,s).concat([i[s].split(l)[0]]),[i[s].split(l)[1]].concat(i.slice(s+1))];return p=p.map(function(e,a){var r=(1===a?!n:n)?'height':'width',i=!1;return e.reduce(function(e,t){return''===e[e.length-1]&&-1!==['+','-'].indexOf(t)?(e[e.length-1]=t,i=!0,e):i?(e[e.length-1]+=t,i=!1,e):e.concat(t)},[]).map(function(e){return ee(e,r,t,o)})}),p.forEach(function(e,t){e.forEach(function(o,a){W(o)&&(r[t]+=o*('-'===e[a-1]?-1:1))})}),r}function oe(e,t){var o=t.offset,a=e.placement,r=e.offsets,n=r.popper,i=r.reference,s=a.split('-')[0],l=void 0;return l=W(+o)?[+o,0]:te(o,n,i,s),'left'===s?(n.top+=l[0],n.left-=l[1]):'right'===s?(n.top+=l[0],n.left+=l[1]):'top'===s?(n.left+=l[0],n.top-=l[1]):'bottom'===s&&(n.left+=l[0],n.top+=l[1]),e.popper=n,e}/**!
 * @fileOverview Kickass library to create and place poppers near their reference elements.
 * @version 1.16.1
 * @license
 * Copyright (c) 2016 Federico Zivolo and contributors
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */var ae='undefined'!=typeof window&&'undefined'!=typeof document&&'undefined'!=typeof navigator,re=function(){for(var e=['Edge','Trident','Firefox'],t=0;t<e.length;t+=1)if(ae&&0<=navigator.userAgent.indexOf(e[t]))return 1;return 0}(),ne=ae&&window.Promise,ie=ne?function(e){var t=!1;return function(){t||(t=!0,window.Promise.resolve().then(function(){t=!1,e()}))}}:function(e){var t=!1;return function(){t||(t=!0,setTimeout(function(){t=!1,e()},re))}},se=ae&&!!(window.MSInputMethodContext&&document.documentMode),le=ae&&/MSIE 10/.test(navigator.userAgent),pe=function(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')},de=function(){function e(e,t){for(var o=0,a;o<t.length;o++)a=t[o],a.enumerable=a.enumerable||!1,a.configurable=!0,'value'in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,o,a){return o&&e(t.prototype,o),a&&e(t,a),t}}(),ce=function(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e},ue=Object.assign||function(e){for(var t=1,o;t<arguments.length;t++)for(var a in o=arguments[t],o)Object.prototype.hasOwnProperty.call(o,a)&&(e[a]=o[a]);return e},me=ae&&/Firefox/i.test(navigator.userAgent),ge=['auto-start','auto','auto-end','top-start','top','top-end','right-start','right','right-end','bottom-end','bottom','bottom-start','left-end','left','left-start'],ye=ge.slice(3),_e={FLIP:'flip',CLOCKWISE:'clockwise',COUNTERCLOCKWISE:'counterclockwise'},fe=function(){function e(t,a){var r=this,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};pe(this,e),this.scheduleUpdate=function(){return requestAnimationFrame(r.update)},this.update=ie(this.update.bind(this)),this.options=ue({},e.Defaults,n),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=t&&t.jquery?t[0]:t,this.popper=a&&a.jquery?a[0]:a,this.options.modifiers={},Object.keys(ue({},e.Defaults.modifiers,n.modifiers)).forEach(function(t){r.options.modifiers[t]=ue({},e.Defaults.modifiers[t]||{},n.modifiers?n.modifiers[t]:{})}),this.modifiers=Object.keys(this.options.modifiers).map(function(e){return ue({name:e},r.options.modifiers[e])}).sort(function(e,t){return e.order-t.order}),this.modifiers.forEach(function(e){e.enabled&&o(e.onLoad)&&e.onLoad(r.reference,r.popper,r.options,e,r.state)}),this.update();var i=this.options.eventsEnabled;i&&this.enableEventListeners(),this.state.eventsEnabled=i}return de(e,[{key:'update',value:function(){return M.call(this)}},{key:'destroy',value:function(){return U.call(this)}},{key:'enableEventListeners',value:function(){return Z.call(this)}},{key:'disableEventListeners',value:function(){return H.call(this)}}]),e}();fe.Utils=('undefined'==typeof window?e:window).PopperUtils,fe.placements=ge,fe.Defaults={placement:'bottom',positionFixed:!1,eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:{shift:{order:100,enabled:!0,fn:function(e){var t=e.placement,o=t.split('-')[0],a=t.split('-')[1];if(a){var r=e.offsets,n=r.reference,i=r.popper,s=-1!==['bottom','top'].indexOf(o),l=s?'left':'top',p=s?'width':'height',d={start:ce({},l,n[l]),end:ce({},l,n[l]+n[p]-i[p])};e.offsets.popper=ue({},i,d[a])}return e}},offset:{order:200,enabled:!0,fn:oe,offset:0},preventOverflow:{order:300,enabled:!0,fn:function(e,t){var o=t.boundariesElement||u(e.instance.popper);e.instance.reference===o&&(o=u(o));var a=N('transform'),i=e.instance.popper.style,s=i.top,l=i.left,p=i[a];i.top='',i.left='',i[a]='';var d=I(e.instance.popper,e.instance.reference,t.padding,o,e.positionFixed);i.top=s,i.left=l,i[a]=p,t.boundaries=d;var c=t.priority,m=e.offsets.popper,g={primary:function(e){var o=m[e];return m[e]<d[e]&&!t.escapeWithReference&&(o=n(m[e],d[e])),ce({},e,o)},secondary:function(e){var o='right'===e?'left':'top',a=m[o];return m[e]>d[e]&&!t.escapeWithReference&&(a=r(m[o],d[e]-('right'===e?m.width:m.height))),ce({},o,a)}};return c.forEach(function(e){var t=-1===['left','top'].indexOf(e)?'secondary':'primary';m=ue({},m,g[t](e))}),e.offsets.popper=m,e},priority:['left','right','top','bottom'],padding:5,boundariesElement:'scrollParent'},keepTogether:{order:400,enabled:!0,fn:function(e){var t=e.offsets,o=t.popper,r=t.reference,n=e.placement.split('-')[0],i=a,s=-1!==['top','bottom'].indexOf(n),l=s?'right':'bottom',p=s?'left':'top',d=s?'width':'height';return o[l]<i(r[p])&&(e.offsets.popper[p]=i(r[p])-o[d]),o[p]>i(r[l])&&(e.offsets.popper[p]=i(r[l])),e}},arrow:{order:500,enabled:!0,fn:function(e,t){var o;if(!J(e.instance.modifiers,'arrow','keepTogether'))return e;var a=t.element;if('string'==typeof a){if(a=e.instance.popper.querySelector(a),!a)return e;}else if(!e.instance.popper.contains(a))return console.warn('WARNING: `arrow.element` must be child of its popper element!'),e;var l=e.placement.split('-')[0],p=e.offsets,d=p.popper,c=p.reference,u=-1!==['left','right'].indexOf(l),m=u?'height':'width',g=u?'Top':'Left',y=g.toLowerCase(),_=u?'left':'top',f=u?'bottom':'right',h=z(a)[m];c[f]-h<d[y]&&(e.offsets.popper[y]-=d[y]-(c[f]-h)),c[y]+h>d[f]&&(e.offsets.popper[y]+=c[y]+h-d[f]),e.offsets.popper=b(e.offsets.popper);var x=c[y]+c[m]/2-h/2,v=s(e.instance.popper),w=parseFloat(v['margin'+g]),T=parseFloat(v['border'+g+'Width']),E=x-e.offsets.popper[y]-w-T;return E=n(r(d[m]-h,E),0),e.arrowElement=a,e.offsets.arrow=(o={},ce(o,y,i(E)),ce(o,_,''),o),e},element:'[x-arrow]'},flip:{order:600,enabled:!0,fn:function(e,t){if(O(e.instance.modifiers,'inner'))return e;if(e.flipped&&e.placement===e.originalPlacement)return e;var o=I(e.instance.popper,e.instance.reference,t.padding,t.boundariesElement,e.positionFixed),r=e.placement.split('-')[0],n=D(r),i=e.placement.split('-')[1]||'',s=[];switch(t.behavior){case _e.FLIP:s=[r,n];break;case _e.CLOCKWISE:s=Q(r);break;case _e.COUNTERCLOCKWISE:s=Q(r,!0);break;default:s=t.behavior;}return s.forEach(function(l,p){if(r!==l||s.length===p+1)return e;r=e.placement.split('-')[0],n=D(r);var d=e.offsets.popper,c=e.offsets.reference,u=a,m='left'===r&&u(d.right)>u(c.left)||'right'===r&&u(d.left)<u(c.right)||'top'===r&&u(d.bottom)>u(c.top)||'bottom'===r&&u(d.top)<u(c.bottom),g=u(d.left)<u(o.left),y=u(d.right)>u(o.right),_=u(d.top)<u(o.top),f=u(d.bottom)>u(o.bottom),h='left'===r&&g||'right'===r&&y||'top'===r&&_||'bottom'===r&&f,x=-1!==['top','bottom'].indexOf(r),v=!!t.flipVariations&&(x&&'start'===i&&g||x&&'end'===i&&y||!x&&'start'===i&&_||!x&&'end'===i&&f),b=!!t.flipVariationsByContent&&(x&&'start'===i&&y||x&&'end'===i&&g||!x&&'start'===i&&f||!x&&'end'===i&&_),w=v||b;(m||h||w)&&(e.flipped=!0,(m||h)&&(r=s[p+1]),w&&(i=$(i)),e.placement=r+(i?'-'+i:''),e.offsets.popper=ue({},e.offsets.popper,L(e.instance.popper,e.offsets.reference,e.placement)),e=F(e.instance.modifiers,e,'flip'))}),e},behavior:'flip',padding:5,boundariesElement:'viewport',flipVariations:!1,flipVariationsByContent:!1},inner:{order:700,enabled:!1,fn:function(e){var t=e.placement,o=t.split('-')[0],a=e.offsets,r=a.popper,n=a.reference,i=-1!==['left','right'].indexOf(o),s=-1===['top','left'].indexOf(o);return r[i?'left':'top']=n[o]-(s?r[i?'width':'height']:0),e.placement=D(t),e.offsets.popper=b(r),e}},hide:{order:800,enabled:!0,fn:function(e){if(!J(e.instance.modifiers,'hide','preventOverflow'))return e;var t=e.offsets.reference,o=R(e.instance.modifiers,function(e){return'preventOverflow'===e.name}).boundaries;if(t.bottom<o.top||t.left>o.right||t.top>o.bottom||t.right<o.left){if(!0===e.hide)return e;e.hide=!0,e.attributes['x-out-of-boundaries']=''}else{if(!1===e.hide)return e;e.hide=!1,e.attributes['x-out-of-boundaries']=!1}return e}},computeStyle:{order:850,enabled:!0,fn:function(e,t){var o=t.x,a=t.y,r=e.offsets.popper,n=R(e.instance.modifiers,function(e){return'applyStyle'===e.name}).gpuAcceleration;void 0!==n&&console.warn('WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!');var i=void 0===n?t.gpuAcceleration:n,s=u(e.instance.popper),l=w(s),p={position:r.position},d=Y(e,2>window.devicePixelRatio||!me),c='bottom'===o?'top':'bottom',m='right'===a?'left':'right',g=N('transform'),y=void 0,_=void 0;if(_='bottom'==c?'HTML'===s.nodeName?-s.clientHeight+d.bottom:-l.height+d.bottom:d.top,y='right'==m?'HTML'===s.nodeName?-s.clientWidth+d.right:-l.width+d.right:d.left,i&&g)p[g]='translate3d('+y+'px, '+_+'px, 0)',p[c]=0,p[m]=0,p.willChange='transform';else{var f='bottom'==c?-1:1,h='right'==m?-1:1;p[c]=_*f,p[m]=y*h,p.willChange=c+', '+m}var x={"x-placement":e.placement};return e.attributes=ue({},x,e.attributes),e.styles=ue({},p,e.styles),e.arrowStyles=ue({},e.offsets.arrow,e.arrowStyles),e},gpuAcceleration:!0,x:'bottom',y:'right'},applyStyle:{order:900,enabled:!0,fn:function(e){return X(e.instance.popper,e.styles),K(e.instance.popper,e.attributes),e.arrowElement&&Object.keys(e.arrowStyles).length&&X(e.arrowElement,e.arrowStyles),e},onLoad:function(e,t,o,a,r){var n=P(r,t,e,o.positionFixed),i=k(o.placement,n,t,e,o.modifiers.flip.boundariesElement,o.modifiers.flip.padding);return t.setAttribute('x-placement',i),X(t,{position:o.positionFixed?'fixed':'absolute'}),o},gpuAcceleration:void 0}}},t['default']=fe}.call(this,o(7))},function(e,t,o){e.exports=o(4)},function(e,t,o){'use strict';o.r(t);var a=o(0),r=o.n(a),n=o(5),i=o.n(n),s=o(6),l=o.n(s),p=o(1),d=o.n(p);r()(function(){null===localStorage.getItem('selectedMode')&&localStorage.setItem('selectedMode',0),'0'===localStorage.selectedMode?r()('body').removeClass('dark-mode'):'1'===localStorage.selectedMode&&r()('body').addClass('dark-mode');var e=['mapbox://styles/sstankov/ckbfigelz17r81jo0saovsd7b','mapbox://styles/sstankov/ckbfim3tw45vo1imp2uc5rtyq'];d.a.accessToken='pk.eyJ1Ijoic3N0YW5rb3YiLCJhIjoiY2tmZjJ0dnp2MDZkcjJxbGRuNHBkYmUwdyJ9.4s5pHSx2DyuhJJOKChZjDA';var t=new d.a.Map({container:'map-wrapper',style:e[localStorage.selectedMode]});r()('[data-toggle-dark-mode]').on('click',function(){r()('body').toggleClass('dark-mode'),r()('body').hasClass('dark-mode')?(localStorage.setItem('selectedMode',1),t.setStyle(e[localStorage.selectedMode])):(localStorage.setItem('selectedMode',0),t.setStyle(e[localStorage.selectedMode]))}),r()('.block .collapse').on('show.bs.collapse',function(t){t.stopPropagation();var e=r()(t.currentTarget);r()('.blocks-wrapper > .block').removeClass('active'),r()('.blocks-wrapper > .block .collapse').collapse('hide'),e.closest('.block').addClass('active')}),r()('.block .collapse').on('hide.bs.collapse',function(t){t.stopPropagation();var e=r()(t.currentTarget);e.closest('.block').removeClass('active')}),r()('.notification-wrapper').on('click',function(t){t.stopPropagation();var e=r()(t.currentTarget);e.toggleClass('active'),window.matchMedia('(max-width: 768px)')&&e.hasClass('active')&&r()('.main-container').not('.mobile-layout-1').animate({scrollTop:0})}),r()(document).on('show.bs.collapse','.navbar-collapse',function(t){var e=r()(t.target);e.hasClass('navbar-collapse')&&r()('body').addClass('navbar-active')}),r()(document).on('hide.bs.collapse','.navbar-collapse',function(t){var e=r()(t.target);e.hasClass('navbar-collapse')&&r()('body').removeClass('navbar-active')}),r()(document).on('show.bs.dropdown','.navbar-collapse',function(t){t.stopPropagation();var e=r()(t.currentTarget);e.addClass('dropdown-active')}),r()(document).on('hide.bs.dropdown','.navbar-collapse',function(t){t.stopPropagation();var e=r()(t.currentTarget);e.removeClass('dropdown-active')}),r()(document).on('click','.navbar-collapse .dropdown-menu',function(t){t.stopPropagation()});var o=.01*window.innerHeight;document.documentElement.style.setProperty('--vh',''.concat(o,'px')),window.addEventListener('resize',function(){o=.01*window.innerHeight,document.documentElement.style.setProperty('--vh',''.concat(o,'px'))}),window.addEventListener('load',function(){var e=document.getElementsByClassName('needs-validation'),t=Array.prototype.filter.call(e,function(e){e.addEventListener('submit',function(t){!1===e.checkValidity()&&(t.preventDefault(),t.stopPropagation()),e.classList.add('was-validated')},!1)})},!1),'serviceWorker'in navigator&&window.addEventListener('load',function(){navigator.serviceWorker.register('./serviceWorker.js').then(function(e){return console.log('service worker registered',e)})['catch'](function(e){return console.log('service worker not registered',e)})})})},function(){},function(e,t,o){(function(e,a){a(t,o(0),o(2))})(this,function(e,t,o){'use strict';function a(e,t){for(var o=0,a;o<t.length;o++)a=t[o],a.enumerable=a.enumerable||!1,a.configurable=!0,'value'in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}function r(e,t,o){return t&&a(e.prototype,t),o&&a(e,o),e}function n(){return n=Object.assign||function(e){for(var t=1,o;t<arguments.length;t++)for(var a in o=arguments[t],o)Object.prototype.hasOwnProperty.call(o,a)&&(e[a]=o[a]);return e},n.apply(this,arguments)}function i(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function s(e){return null===e||'undefined'==typeof e?''+e:{}.toString.call(e).match(/\s([a-z]+)/i)[1].toLowerCase()}function l(){return{bindType:m,delegateType:m,handle:function(e){return t(e.target).is(this)?e.handleObj.handler.apply(this,arguments):void 0}}}function p(e){var o=this,a=!1;return t(this).one(g.TRANSITION_END,function(){a=!0}),setTimeout(function(){a||g.triggerTransitionEnd(o)},e),this}function d(){t.fn.emulateTransitionEnd=p,t.event.special[g.TRANSITION_END]=l()}function c(e,t){var o=e.nodeName.toLowerCase();if(-1!==t.indexOf(o))return-1===Xe.indexOf(o)||!!(e.nodeValue.match(Ye)||e.nodeValue.match(Je));for(var a=t.filter(function(e){return e instanceof RegExp}),r=0,n=a.length;r<n;r++)if(o.match(a[r]))return!0;return!1}function u(e,t,o){if(0===e.length)return e;if(o&&'function'==typeof o)return o(e);for(var a=new window.DOMParser,r=a.parseFromString(e,'text/html'),n=Object.keys(t),s=[].slice.call(r.body.querySelectorAll('*')),l=function(e){var o=s[e],a=o.nodeName.toLowerCase();if(-1===n.indexOf(o.nodeName.toLowerCase()))return o.parentNode.removeChild(o),'continue';var r=[].slice.call(o.attributes),i=[].concat(t['*']||[],t[a]||[]);r.forEach(function(e){c(e,i)||o.removeAttribute(e.nodeName)})},p=0,i=s.length,d;p<i;p++)d=l(p),'continue'===d;return r.body.innerHTML}t=t&&Object.prototype.hasOwnProperty.call(t,'default')?t['default']:t,o=o&&Object.prototype.hasOwnProperty.call(o,'default')?o['default']:o;var m='transitionend',g={TRANSITION_END:'bsTransitionEnd',getUID:function(e){do e+=~~(Math.random()*1e6);while(document.getElementById(e));return e},getSelectorFromElement:function(e){var t=e.getAttribute('data-target');if(!t||'#'===t){var o=e.getAttribute('href');t=o&&'#'!==o?o.trim():''}try{return document.querySelector(t)?t:null}catch(e){return null}},getTransitionDurationFromElement:function(e){if(!e)return 0;var o=t(e).css('transition-duration'),a=t(e).css('transition-delay'),r=parseFloat(o),n=parseFloat(a);return r||n?(o=o.split(',')[0],a=a.split(',')[0],(parseFloat(o)+parseFloat(a))*1e3):0},reflow:function(e){return e.offsetHeight},triggerTransitionEnd:function(e){t(e).trigger(m)},supportsTransitionEnd:function(){return!!m},isElement:function(e){return(e[0]||e).nodeType},typeCheckConfig:function(e,t,o){for(var a in o)if(Object.prototype.hasOwnProperty.call(o,a)){var r=o[a],n=t[a],i=n&&g.isElement(n)?'element':s(n);if(!new RegExp(r).test(i))throw new Error(e.toUpperCase()+': '+('Option "'+a+'" provided type "'+i+'" ')+('but expected type "'+r+'".'))}},findShadowRoot:function(e){if(!document.documentElement.attachShadow)return null;if('function'==typeof e.getRootNode){var t=e.getRootNode();return t instanceof ShadowRoot?t:null}return e instanceof ShadowRoot?e:e.parentNode?g.findShadowRoot(e.parentNode):null},jQueryDetection:function(){if('undefined'==typeof t)throw new TypeError('Bootstrap\'s JavaScript requires jQuery. jQuery must be included before Bootstrap\'s JavaScript.');var e=t.fn.jquery.split(' ')[0].split('.'),o=9;if(e[0]<2&&e[1]<o||e[0]===1&&e[1]===o&&e[2]<1||e[0]>=4)throw new Error('Bootstrap\'s JavaScript requires at least jQuery v1.9.1 but less than v4.0.0')}};g.jQueryDetection(),d();var y='alert',_='bs.alert',f='.'+_,h=t.fn[y],x=function(){function e(e){this._element=e}var o=e.prototype;return o.close=function(e){var t=this._element;e&&(t=this._getRootElement(e));var o=this._triggerCloseEvent(t);o.isDefaultPrevented()||this._removeElement(t)},o.dispose=function(){t.removeData(this._element,_),this._element=null},o._getRootElement=function(e){var o=g.getSelectorFromElement(e),a=!1;return o&&(a=document.querySelector(o)),a||(a=t(e).closest('.'+'alert')[0]),a},o._triggerCloseEvent=function(e){var o=t.Event('close'+f);return t(e).trigger(o),o},o._removeElement=function(e){var o=this;if(t(e).removeClass('show'),!t(e).hasClass('fade'))return void this._destroyElement(e);var a=g.getTransitionDurationFromElement(e);t(e).one(g.TRANSITION_END,function(t){return o._destroyElement(e,t)}).emulateTransitionEnd(a)},o._destroyElement=function(e){t(e).detach().trigger('closed'+f).remove()},e._jQueryInterface=function(o){return this.each(function(){var a=t(this),r=a.data(_);r||(r=new e(this),a.data(_,r)),'close'===o&&r[o](this)})},e._handleDismiss=function(e){return function(t){t&&t.preventDefault(),e.close(this)}},r(e,null,[{key:'VERSION',get:function(){return'4.5.2'}}]),e}();t(document).on('click'+f+'.data-api','[data-dismiss="alert"]',x._handleDismiss(new x)),t.fn[y]=x._jQueryInterface,t.fn[y].Constructor=x,t.fn[y].noConflict=function(){return t.fn[y]=h,x._jQueryInterface};var v='button',b='bs.button',w='.'+b,T='.data-api',E=t.fn[v],S='active',C='[data-toggle^="button"]',I='input:not([type="hidden"])',A='.btn',k=function(){function e(e){this._element=e}var o=e.prototype;return o.toggle=function(){var e=!0,o=!0,a=t(this._element).closest('[data-toggle="buttons"]')[0];if(a){var r=this._element.querySelector(I);if(r){if('radio'===r.type)if(r.checked&&this._element.classList.contains(S))e=!1;else{var n=a.querySelector('.active');n&&t(n).removeClass(S)}e&&(('checkbox'===r.type||'radio'===r.type)&&(r.checked=!this._element.classList.contains(S)),t(r).trigger('change')),r.focus(),o=!1}}this._element.hasAttribute('disabled')||this._element.classList.contains('disabled')||(o&&this._element.setAttribute('aria-pressed',!this._element.classList.contains(S)),e&&t(this._element).toggleClass(S))},o.dispose=function(){t.removeData(this._element,b),this._element=null},e._jQueryInterface=function(o){return this.each(function(){var a=t(this).data(b);a||(a=new e(this),t(this).data(b,a)),'toggle'===o&&a[o]()})},r(e,null,[{key:'VERSION',get:function(){return'4.5.2'}}]),e}();t(document).on('click'+w+T,C,function(e){var o=e.target,a=o;if(t(o).hasClass('btn')||(o=t(o).closest(A)[0]),!o||o.hasAttribute('disabled')||o.classList.contains('disabled'))e.preventDefault();else{var r=o.querySelector(I);if(r&&(r.hasAttribute('disabled')||r.classList.contains('disabled')))return void e.preventDefault();('LABEL'!==a.tagName||r&&'checkbox'!==r.type)&&k._jQueryInterface.call(t(o),'toggle')}}).on('focus'+w+T+' '+('blur'+w+T),C,function(e){var o=t(e.target).closest(A)[0];t(o).toggleClass('focus',/^focus(in)?$/.test(e.type))}),t(window).on('load'+w+T,function(){for(var e=[].slice.call(document.querySelectorAll('[data-toggle="buttons"] .btn')),t=0,o=e.length;t<o;t++){var a=e[t],r=a.querySelector(I);r.checked||r.hasAttribute('checked')?a.classList.add(S):a.classList.remove(S)}e=[].slice.call(document.querySelectorAll('[data-toggle="button"]'));for(var n=0,i=e.length,s;n<i;n++)s=e[n],'true'===s.getAttribute('aria-pressed')?s.classList.add(S):s.classList.remove(S)}),t.fn[v]=k._jQueryInterface,t.fn[v].Constructor=k,t.fn[v].noConflict=function(){return t.fn[v]=E,k._jQueryInterface};var P='carousel',z='bs.carousel',D='.'+z,L='.data-api',R=t.fn[P],B={interval:5e3,keyboard:!0,slide:!1,pause:'hover',wrap:!0,touch:!0},F={interval:'(number|boolean)',keyboard:'boolean',slide:'(boolean|string)',pause:'(string|boolean)',wrap:'boolean',touch:'boolean'},M='next',O='prev',N='slid'+D,U='active',V='.active.carousel-item',q={TOUCH:'touch',PEN:'pen'},j=function(){function e(e,t){this._items=null,this._interval=null,this._activeElement=null,this._isPaused=!1,this._isSliding=!1,this.touchTimeout=null,this.touchStartX=0,this.touchDeltaX=0,this._config=this._getConfig(t),this._element=e,this._indicatorsElement=this._element.querySelector('.carousel-indicators'),this._touchSupported='ontouchstart'in document.documentElement||0<navigator.maxTouchPoints,this._pointerEvent=!!(window.PointerEvent||window.MSPointerEvent),this._addEventListeners()}var o=e.prototype;return o.next=function(){this._isSliding||this._slide(M)},o.nextWhenVisible=function(){!document.hidden&&t(this._element).is(':visible')&&'hidden'!==t(this._element).css('visibility')&&this.next()},o.prev=function(){this._isSliding||this._slide(O)},o.pause=function(e){e||(this._isPaused=!0),this._element.querySelector('.carousel-item-next, .carousel-item-prev')&&(g.triggerTransitionEnd(this._element),this.cycle(!0)),clearInterval(this._interval),this._interval=null},o.cycle=function(e){e||(this._isPaused=!1),this._interval&&(clearInterval(this._interval),this._interval=null),this._config.interval&&!this._isPaused&&(this._interval=setInterval((document.visibilityState?this.nextWhenVisible:this.next).bind(this),this._config.interval))},o.to=function(e){var o=this;this._activeElement=this._element.querySelector(V);var a=this._getItemIndex(this._activeElement);if(!(e>this._items.length-1||0>e)){if(this._isSliding)return void t(this._element).one(N,function(){return o.to(e)});if(a===e)return this.pause(),void this.cycle();var r=e>a?M:O;this._slide(r,this._items[e])}},o.dispose=function(){t(this._element).off(D),t.removeData(this._element,z),this._items=null,this._config=null,this._element=null,this._interval=null,this._isPaused=null,this._isSliding=null,this._activeElement=null,this._indicatorsElement=null},o._getConfig=function(e){return e=n({},B,e),g.typeCheckConfig(P,e,F),e},o._handleSwipe=function(){var e=Math.abs(this.touchDeltaX);if(!(e<=40)){var t=e/this.touchDeltaX;this.touchDeltaX=0,0<t&&this.prev(),0>t&&this.next()}},o._addEventListeners=function(){var e=this;this._config.keyboard&&t(this._element).on('keydown'+D,function(t){return e._keydown(t)}),'hover'===this._config.pause&&t(this._element).on('mouseenter'+D,function(t){return e.pause(t)}).on('mouseleave'+D,function(t){return e.cycle(t)}),this._config.touch&&this._addTouchEventListeners()},o._addTouchEventListeners=function(){var e=this;if(this._touchSupported){var o=function(t){e._pointerEvent&&q[t.originalEvent.pointerType.toUpperCase()]?e.touchStartX=t.originalEvent.clientX:!e._pointerEvent&&(e.touchStartX=t.originalEvent.touches[0].clientX)},a=function(t){e.touchDeltaX=t.originalEvent.touches&&1<t.originalEvent.touches.length?0:t.originalEvent.touches[0].clientX-e.touchStartX},r=function(t){e._pointerEvent&&q[t.originalEvent.pointerType.toUpperCase()]&&(e.touchDeltaX=t.originalEvent.clientX-e.touchStartX),e._handleSwipe(),'hover'===e._config.pause&&(e.pause(),e.touchTimeout&&clearTimeout(e.touchTimeout),e.touchTimeout=setTimeout(function(t){return e.cycle(t)},500+e._config.interval))};t(this._element.querySelectorAll('.carousel-item img')).on('dragstart'+D,function(t){return t.preventDefault()}),this._pointerEvent?(t(this._element).on('pointerdown'+D,function(e){return o(e)}),t(this._element).on('pointerup'+D,function(e){return r(e)}),this._element.classList.add('pointer-event')):(t(this._element).on('touchstart'+D,function(e){return o(e)}),t(this._element).on('touchmove'+D,function(e){return a(e)}),t(this._element).on('touchend'+D,function(e){return r(e)}))}},o._keydown=function(e){if(!/input|textarea/i.test(e.target.tagName))switch(e.which){case 37:e.preventDefault(),this.prev();break;case 39:e.preventDefault(),this.next();}},o._getItemIndex=function(e){return this._items=e&&e.parentNode?[].slice.call(e.parentNode.querySelectorAll('.carousel-item')):[],this._items.indexOf(e)},o._getItemByDirection=function(e,t){var o=this._getItemIndex(t),a=this._items.length-1;if((e===O&&0===o||e===M&&o===a)&&!this._config.wrap)return t;var r=e===O?-1:1,n=(o+r)%this._items.length;return-1==n?this._items[this._items.length-1]:this._items[n]},o._triggerSlideEvent=function(e,o){var a=this._getItemIndex(e),r=this._getItemIndex(this._element.querySelector(V)),n=t.Event('slide'+D,{relatedTarget:e,direction:o,from:r,to:a});return t(this._element).trigger(n),n},o._setActiveIndicatorElement=function(e){if(this._indicatorsElement){var o=[].slice.call(this._indicatorsElement.querySelectorAll('.active'));t(o).removeClass(U);var a=this._indicatorsElement.children[this._getItemIndex(e)];a&&t(a).addClass(U)}},o._slide=function(e,o){var a=this,r=this._element.querySelector(V),n=this._getItemIndex(r),i=o||r&&this._getItemByDirection(e,r),s=this._getItemIndex(i),l=!!this._interval,p,d,c;if(e===M?(p='carousel-item-left',d='carousel-item-next',c='left'):(p='carousel-item-right',d='carousel-item-prev',c='right'),i&&t(i).hasClass(U))return void(this._isSliding=!1);var u=this._triggerSlideEvent(i,c);if(!u.isDefaultPrevented()&&r&&i){this._isSliding=!0,l&&this.pause(),this._setActiveIndicatorElement(i);var m=t.Event(N,{relatedTarget:i,direction:c,from:n,to:s});if(t(this._element).hasClass('slide')){t(i).addClass(d),g.reflow(i),t(r).addClass(p),t(i).addClass(p);var y=parseInt(i.getAttribute('data-interval'),10);y?(this._config.defaultInterval=this._config.defaultInterval||this._config.interval,this._config.interval=y):this._config.interval=this._config.defaultInterval||this._config.interval;var _=g.getTransitionDurationFromElement(r);t(r).one(g.TRANSITION_END,function(){t(i).removeClass(p+' '+d).addClass(U),t(r).removeClass(U+' '+d+' '+p),a._isSliding=!1,setTimeout(function(){return t(a._element).trigger(m)},0)}).emulateTransitionEnd(_)}else t(r).removeClass(U),t(i).addClass(U),this._isSliding=!1,t(this._element).trigger(m);l&&this.cycle()}},e._jQueryInterface=function(o){return this.each(function(){var a=t(this).data(z),r=n({},B,t(this).data());'object'==typeof o&&(r=n({},r,o));var i='string'==typeof o?o:r.slide;if(a||(a=new e(this,r),t(this).data(z,a)),'number'==typeof o)a.to(o);else if('string'==typeof i){if('undefined'==typeof a[i])throw new TypeError('No method named "'+i+'"');a[i]()}else r.interval&&r.ride&&(a.pause(),a.cycle())})},e._dataApiClickHandler=function(o){var a=g.getSelectorFromElement(this);if(a){var r=t(a)[0];if(r&&t(r).hasClass('carousel')){var i=n({},t(r).data(),t(this).data()),s=this.getAttribute('data-slide-to');s&&(i.interval=!1),e._jQueryInterface.call(t(r),i),s&&t(r).data(z).to(s),o.preventDefault()}}},r(e,null,[{key:'VERSION',get:function(){return'4.5.2'}},{key:'Default',get:function(){return B}}]),e}();t(document).on('click'+D+L,'[data-slide], [data-slide-to]',j._dataApiClickHandler),t(window).on('load'+D+L,function(){for(var e=[].slice.call(document.querySelectorAll('[data-ride="carousel"]')),o=0,a=e.length,r;o<a;o++)r=t(e[o]),j._jQueryInterface.call(r,r.data())}),t.fn[P]=j._jQueryInterface,t.fn[P].Constructor=j,t.fn[P].noConflict=function(){return t.fn[P]=R,j._jQueryInterface};var Z='collapse',G='bs.collapse',H='.'+G,W=t.fn[Z],X={toggle:!0,parent:''},K={toggle:'boolean',parent:'(string|element)'},Y='show',J='collapse',Q='collapsing',ee='collapsed',te='width',oe='[data-toggle="collapse"]',ae=function(){function e(e,t){this._isTransitioning=!1,this._element=e,this._config=this._getConfig(t),this._triggerArray=[].slice.call(document.querySelectorAll('[data-toggle="collapse"][href="#'+e.id+'"],'+('[data-toggle="collapse"][data-target="#'+e.id+'"]')));for(var o=[].slice.call(document.querySelectorAll(oe)),a=0,r=o.length;a<r;a++){var n=o[a],i=g.getSelectorFromElement(n),s=[].slice.call(document.querySelectorAll(i)).filter(function(t){return t===e});null!==i&&0<s.length&&(this._selector=i,this._triggerArray.push(n))}this._parent=this._config.parent?this._getParent():null,this._config.parent||this._addAriaAndCollapsedClass(this._element,this._triggerArray),this._config.toggle&&this.toggle()}var o=e.prototype;return o.toggle=function(){t(this._element).hasClass(Y)?this.hide():this.show()},o.show=function(){var o=this;if(!(this._isTransitioning||t(this._element).hasClass(Y))){var a,r;if(this._parent&&(a=[].slice.call(this._parent.querySelectorAll('.show, .collapsing')).filter(function(e){return'string'==typeof o._config.parent?e.getAttribute('data-parent')===o._config.parent:e.classList.contains(J)}),0===a.length&&(a=null)),!(a&&(r=t(a).not(this._selector).data(G),r&&r._isTransitioning))){var n=t.Event('show'+H);if(t(this._element).trigger(n),!n.isDefaultPrevented()){a&&(e._jQueryInterface.call(t(a).not(this._selector),'hide'),!r&&t(a).data(G,null));var i=this._getDimension();t(this._element).removeClass(J).addClass(Q),this._element.style[i]=0,this._triggerArray.length&&t(this._triggerArray).removeClass(ee).attr('aria-expanded',!0),this.setTransitioning(!0);var s=function(){t(o._element).removeClass(Q).addClass(J+' '+Y),o._element.style[i]='',o.setTransitioning(!1),t(o._element).trigger('shown'+H)},l=i[0].toUpperCase()+i.slice(1),p=g.getTransitionDurationFromElement(this._element);t(this._element).one(g.TRANSITION_END,s).emulateTransitionEnd(p),this._element.style[i]=this._element['scroll'+l]+'px'}}}},o.hide=function(){var e=this;if(!this._isTransitioning&&t(this._element).hasClass(Y)){var o=t.Event('hide'+H);if(t(this._element).trigger(o),!o.isDefaultPrevented()){var a=this._getDimension();this._element.style[a]=this._element.getBoundingClientRect()[a]+'px',g.reflow(this._element),t(this._element).addClass(Q).removeClass(J+' '+Y);var r=this._triggerArray.length;if(0<r)for(var n=0;n<r;n++){var i=this._triggerArray[n],s=g.getSelectorFromElement(i);if(null!==s){var l=t([].slice.call(document.querySelectorAll(s)));l.hasClass(Y)||t(i).addClass(ee).attr('aria-expanded',!1)}}this.setTransitioning(!0);var p=function(){e.setTransitioning(!1),t(e._element).removeClass(Q).addClass(J).trigger('hidden'+H)};this._element.style[a]='';var d=g.getTransitionDurationFromElement(this._element);t(this._element).one(g.TRANSITION_END,p).emulateTransitionEnd(d)}}},o.setTransitioning=function(e){this._isTransitioning=e},o.dispose=function(){t.removeData(this._element,G),this._config=null,this._parent=null,this._element=null,this._triggerArray=null,this._isTransitioning=null},o._getConfig=function(e){return e=n({},X,e),e.toggle=!!e.toggle,g.typeCheckConfig(Z,e,K),e},o._getDimension=function(){var e=t(this._element).hasClass(te);return e?te:'height'},o._getParent=function(){var o=this,a;g.isElement(this._config.parent)?(a=this._config.parent,'undefined'!=typeof this._config.parent.jquery&&(a=this._config.parent[0])):a=document.querySelector(this._config.parent);var r='[data-toggle="collapse"][data-parent="'+this._config.parent+'"]',n=[].slice.call(a.querySelectorAll(r));return t(n).each(function(t,a){o._addAriaAndCollapsedClass(e._getTargetFromElement(a),[a])}),a},o._addAriaAndCollapsedClass=function(e,o){var a=t(e).hasClass(Y);o.length&&t(o).toggleClass(ee,!a).attr('aria-expanded',a)},e._getTargetFromElement=function(e){var t=g.getSelectorFromElement(e);return t?document.querySelector(t):null},e._jQueryInterface=function(o){return this.each(function(){var a=t(this),r=a.data(G),i=n({},X,a.data(),'object'==typeof o&&o?o:{});if(!r&&i.toggle&&'string'==typeof o&&/show|hide/.test(o)&&(i.toggle=!1),r||(r=new e(this,i),a.data(G,r)),'string'==typeof o){if('undefined'==typeof r[o])throw new TypeError('No method named "'+o+'"');r[o]()}})},r(e,null,[{key:'VERSION',get:function(){return'4.5.2'}},{key:'Default',get:function(){return X}}]),e}();t(document).on('click'+H+'.data-api',oe,function(e){'A'===e.currentTarget.tagName&&e.preventDefault();var o=t(this),a=g.getSelectorFromElement(this),r=[].slice.call(document.querySelectorAll(a));t(r).each(function(){var e=t(this),a=e.data(G),r=a?'toggle':o.data();ae._jQueryInterface.call(e,r)})}),t.fn[Z]=ae._jQueryInterface,t.fn[Z].Constructor=ae,t.fn[Z].noConflict=function(){return t.fn[Z]=W,ae._jQueryInterface};var re='dropdown',ne='bs.dropdown',ie='.'+ne,se='.data-api',le=t.fn[re],pe=27,de=32,ce=9,ue=38,me=40,ge=/38|40|27/,ye='hide'+ie,_e='hidden'+ie,fe='click'+ie+se,he='keydown'+ie+se,xe='disabled',ve='show',be='dropdown-menu-right',we='[data-toggle="dropdown"]',Te='.dropdown-menu',Ee={offset:0,flip:!0,boundary:'scrollParent',reference:'toggle',display:'dynamic',popperConfig:null},Se={offset:'(number|string|function)',flip:'boolean',boundary:'(string|element)',reference:'(string|element)',display:'string',popperConfig:'(null|object)'},Ce=function(){function e(e,t){this._element=e,this._popper=null,this._config=this._getConfig(t),this._menu=this._getMenuElement(),this._inNavbar=this._detectNavbar(),this._addEventListeners()}var a=e.prototype;return a.toggle=function(){if(!(this._element.disabled||t(this._element).hasClass(xe))){var o=t(this._menu).hasClass(ve);e._clearMenus(),o||this.show(!0)}},a.show=function(a){if(void 0===a&&(a=!1),!(this._element.disabled||t(this._element).hasClass(xe)||t(this._menu).hasClass(ve))){var r={relatedTarget:this._element},n=t.Event('show'+ie,r),i=e._getParentFromElement(this._element);if(t(i).trigger(n),!n.isDefaultPrevented()){if(!this._inNavbar&&a){if('undefined'==typeof o)throw new TypeError('Bootstrap\'s dropdowns require Popper.js (https://popper.js.org/)');var s=this._element;'parent'===this._config.reference?s=i:g.isElement(this._config.reference)&&(s=this._config.reference,'undefined'!=typeof this._config.reference.jquery&&(s=this._config.reference[0])),'scrollParent'!==this._config.boundary&&t(i).addClass('position-static'),this._popper=new o(s,this._menu,this._getPopperConfig())}'ontouchstart'in document.documentElement&&0===t(i).closest('.navbar-nav').length&&t(document.body).children().on('mouseover',null,t.noop),this._element.focus(),this._element.setAttribute('aria-expanded',!0),t(this._menu).toggleClass(ve),t(i).toggleClass(ve).trigger(t.Event('shown'+ie,r))}}},a.hide=function(){if(!(this._element.disabled||t(this._element).hasClass(xe)||!t(this._menu).hasClass(ve))){var o={relatedTarget:this._element},a=t.Event(ye,o),r=e._getParentFromElement(this._element);t(r).trigger(a),a.isDefaultPrevented()||(this._popper&&this._popper.destroy(),t(this._menu).toggleClass(ve),t(r).toggleClass(ve).trigger(t.Event(_e,o)))}},a.dispose=function(){t.removeData(this._element,ne),t(this._element).off(ie),this._element=null,this._menu=null,null!==this._popper&&(this._popper.destroy(),this._popper=null)},a.update=function(){this._inNavbar=this._detectNavbar(),null!==this._popper&&this._popper.scheduleUpdate()},a._addEventListeners=function(){var e=this;t(this._element).on('click'+ie,function(t){t.preventDefault(),t.stopPropagation(),e.toggle()})},a._getConfig=function(e){return e=n({},this.constructor.Default,t(this._element).data(),e),g.typeCheckConfig(re,e,this.constructor.DefaultType),e},a._getMenuElement=function(){if(!this._menu){var t=e._getParentFromElement(this._element);t&&(this._menu=t.querySelector(Te))}return this._menu},a._getPlacement=function(){var e=t(this._element.parentNode),o='bottom-start';return e.hasClass('dropup')?o=t(this._menu).hasClass(be)?'top-end':'top-start':e.hasClass('dropright')?o='right-start':e.hasClass('dropleft')?o='left-start':t(this._menu).hasClass(be)&&(o='bottom-end'),o},a._detectNavbar=function(){return 0<t(this._element).closest('.navbar').length},a._getOffset=function(){var e=this,t={};return'function'==typeof this._config.offset?t.fn=function(t){return t.offsets=n({},t.offsets,e._config.offset(t.offsets,e._element)||{}),t}:t.offset=this._config.offset,t},a._getPopperConfig=function(){var e={placement:this._getPlacement(),modifiers:{offset:this._getOffset(),flip:{enabled:this._config.flip},preventOverflow:{boundariesElement:this._config.boundary}}};return'static'===this._config.display&&(e.modifiers.applyStyle={enabled:!1}),n({},e,this._config.popperConfig)},e._jQueryInterface=function(o){return this.each(function(){var a=t(this).data(ne),r='object'==typeof o?o:null;if(a||(a=new e(this,r),t(this).data(ne,a)),'string'==typeof o){if('undefined'==typeof a[o])throw new TypeError('No method named "'+o+'"');a[o]()}})},e._clearMenus=function(o){if(!(o&&(o.which===3||'keyup'===o.type&&o.which!==ce)))for(var a=[].slice.call(document.querySelectorAll(we)),r=0,n=a.length;r<n;r++){var i=e._getParentFromElement(a[r]),s=t(a[r]).data(ne),l={relatedTarget:a[r]};if(o&&'click'===o.type&&(l.clickEvent=o),!!s){var p=s._menu;if(t(i).hasClass(ve)&&!(o&&('click'===o.type&&/input|textarea/i.test(o.target.tagName)||'keyup'===o.type&&o.which===ce)&&t.contains(i,o.target))){var d=t.Event(ye,l);(t(i).trigger(d),!d.isDefaultPrevented())&&('ontouchstart'in document.documentElement&&t(document.body).children().off('mouseover',null,t.noop),a[r].setAttribute('aria-expanded','false'),s._popper&&s._popper.destroy(),t(p).removeClass(ve),t(i).removeClass(ve).trigger(t.Event(_e,l)))}}}},e._getParentFromElement=function(e){var t=g.getSelectorFromElement(e),o;return t&&(o=document.querySelector(t)),o||e.parentNode},e._dataApiKeydownHandler=function(o){if((/input|textarea/i.test(o.target.tagName)?!(o.which===de||o.which!==pe&&(o.which!==me&&o.which!==ue||t(o.target).closest(Te).length)):!!ge.test(o.which))&&!(this.disabled||t(this).hasClass(xe))){var a=e._getParentFromElement(this),r=t(a).hasClass(ve);if(r||o.which!==pe){if(o.preventDefault(),o.stopPropagation(),!r||r&&(o.which===pe||o.which===de))return o.which===pe&&t(a.querySelector(we)).trigger('focus'),void t(this).trigger('click');var n=[].slice.call(a.querySelectorAll('.dropdown-menu .dropdown-item:not(.disabled):not(:disabled)')).filter(function(e){return t(e).is(':visible')});if(0!==n.length){var i=n.indexOf(o.target);o.which===ue&&0<i&&i--,o.which===me&&i<n.length-1&&i++,0>i&&(i=0),n[i].focus()}}}},r(e,null,[{key:'VERSION',get:function(){return'4.5.2'}},{key:'Default',get:function(){return Ee}},{key:'DefaultType',get:function(){return Se}}]),e}();t(document).on(he,we,Ce._dataApiKeydownHandler).on(he,Te,Ce._dataApiKeydownHandler).on(fe+' '+('keyup'+ie+se),Ce._clearMenus).on(fe,we,function(e){e.preventDefault(),e.stopPropagation(),Ce._jQueryInterface.call(t(this),'toggle')}).on(fe,'.dropdown form',function(t){t.stopPropagation()}),t.fn[re]=Ce._jQueryInterface,t.fn[re].Constructor=Ce,t.fn[re].noConflict=function(){return t.fn[re]=le,Ce._jQueryInterface};var Ie='modal',Ae='bs.modal',ke='.'+Ae,Pe=t.fn[Ie],ze=27,De={backdrop:!0,keyboard:!0,focus:!0,show:!0},Le={backdrop:'(boolean|string)',keyboard:'boolean',focus:'boolean',show:'boolean'},Re='hidden'+ke,Be='show'+ke,Fe='focusin'+ke,Me='resize'+ke,Oe='click.dismiss'+ke,Ne='keydown.dismiss'+ke,Ue='mousedown.dismiss'+ke,Ve='modal-open',qe='fade',je='show',Ze='modal-static',Ge='.fixed-top, .fixed-bottom, .is-fixed, .sticky-top',He='.sticky-top',We=function(){function e(e,t){this._config=this._getConfig(t),this._element=e,this._dialog=e.querySelector('.modal-dialog'),this._backdrop=null,this._isShown=!1,this._isBodyOverflowing=!1,this._ignoreBackdropClick=!1,this._isTransitioning=!1,this._scrollbarWidth=0}var o=e.prototype;return o.toggle=function(e){return this._isShown?this.hide():this.show(e)},o.show=function(e){var o=this;if(!(this._isShown||this._isTransitioning)){t(this._element).hasClass(qe)&&(this._isTransitioning=!0);var a=t.Event(Be,{relatedTarget:e});t(this._element).trigger(a),this._isShown||a.isDefaultPrevented()||(this._isShown=!0,this._checkScrollbar(),this._setScrollbar(),this._adjustDialog(),this._setEscapeEvent(),this._setResizeEvent(),t(this._element).on(Oe,'[data-dismiss="modal"]',function(e){return o.hide(e)}),t(this._dialog).on(Ue,function(){t(o._element).one('mouseup.dismiss'+ke,function(e){t(e.target).is(o._element)&&(o._ignoreBackdropClick=!0)})}),this._showBackdrop(function(){return o._showElement(e)}))}},o.hide=function(e){var o=this;if(e&&e.preventDefault(),this._isShown&&!this._isTransitioning){var a=t.Event('hide'+ke);if(t(this._element).trigger(a),this._isShown&&!a.isDefaultPrevented()){this._isShown=!1;var r=t(this._element).hasClass(qe);if(r&&(this._isTransitioning=!0),this._setEscapeEvent(),this._setResizeEvent(),t(document).off(Fe),t(this._element).removeClass(je),t(this._element).off(Oe),t(this._dialog).off(Ue),r){var n=g.getTransitionDurationFromElement(this._element);t(this._element).one(g.TRANSITION_END,function(e){return o._hideModal(e)}).emulateTransitionEnd(n)}else this._hideModal()}}},o.dispose=function(){[window,this._element,this._dialog].forEach(function(e){return t(e).off(ke)}),t(document).off(Fe),t.removeData(this._element,Ae),this._config=null,this._element=null,this._dialog=null,this._backdrop=null,this._isShown=null,this._isBodyOverflowing=null,this._ignoreBackdropClick=null,this._isTransitioning=null,this._scrollbarWidth=null},o.handleUpdate=function(){this._adjustDialog()},o._getConfig=function(e){return e=n({},De,e),g.typeCheckConfig(Ie,e,Le),e},o._triggerBackdropTransition=function(){var e=this;if('static'===this._config.backdrop){var o=t.Event('hidePrevented'+ke);if(t(this._element).trigger(o),o.defaultPrevented)return;var a=this._element.scrollHeight>document.documentElement.clientHeight;a||(this._element.style.overflowY='hidden'),this._element.classList.add(Ze);var r=g.getTransitionDurationFromElement(this._dialog);t(this._element).off(g.TRANSITION_END),t(this._element).one(g.TRANSITION_END,function(){e._element.classList.remove(Ze),a||t(e._element).one(g.TRANSITION_END,function(){e._element.style.overflowY=''}).emulateTransitionEnd(e._element,r)}).emulateTransitionEnd(r),this._element.focus()}else this.hide()},o._showElement=function(e){var o=this,a=t(this._element).hasClass(qe),r=this._dialog?this._dialog.querySelector('.modal-body'):null;this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE||document.body.appendChild(this._element),this._element.style.display='block',this._element.removeAttribute('aria-hidden'),this._element.setAttribute('aria-modal',!0),this._element.setAttribute('role','dialog'),t(this._dialog).hasClass('modal-dialog-scrollable')&&r?r.scrollTop=0:this._element.scrollTop=0,a&&g.reflow(this._element),t(this._element).addClass(je),this._config.focus&&this._enforceFocus();var n=t.Event('shown'+ke,{relatedTarget:e}),i=function(){o._config.focus&&o._element.focus(),o._isTransitioning=!1,t(o._element).trigger(n)};if(a){var s=g.getTransitionDurationFromElement(this._dialog);t(this._dialog).one(g.TRANSITION_END,i).emulateTransitionEnd(s)}else i()},o._enforceFocus=function(){var e=this;t(document).off(Fe).on(Fe,function(o){document!==o.target&&e._element!==o.target&&0===t(e._element).has(o.target).length&&e._element.focus()})},o._setEscapeEvent=function(){var e=this;this._isShown?t(this._element).on(Ne,function(t){e._config.keyboard&&t.which===ze?(t.preventDefault(),e.hide()):!e._config.keyboard&&t.which===ze&&e._triggerBackdropTransition()}):!this._isShown&&t(this._element).off(Ne)},o._setResizeEvent=function(){var e=this;this._isShown?t(window).on(Me,function(t){return e.handleUpdate(t)}):t(window).off(Me)},o._hideModal=function(){var e=this;this._element.style.display='none',this._element.setAttribute('aria-hidden',!0),this._element.removeAttribute('aria-modal'),this._element.removeAttribute('role'),this._isTransitioning=!1,this._showBackdrop(function(){t(document.body).removeClass(Ve),e._resetAdjustments(),e._resetScrollbar(),t(e._element).trigger(Re)})},o._removeBackdrop=function(){this._backdrop&&(t(this._backdrop).remove(),this._backdrop=null)},o._showBackdrop=function(e){var o=this,a=t(this._element).hasClass(qe)?qe:'';if(this._isShown&&this._config.backdrop){if(this._backdrop=document.createElement('div'),this._backdrop.className='modal-backdrop',a&&this._backdrop.classList.add(a),t(this._backdrop).appendTo(document.body),t(this._element).on(Oe,function(e){return o._ignoreBackdropClick?void(o._ignoreBackdropClick=!1):void(e.target!==e.currentTarget||o._triggerBackdropTransition())}),a&&g.reflow(this._backdrop),t(this._backdrop).addClass(je),!e)return;if(!a)return void e();var r=g.getTransitionDurationFromElement(this._backdrop);t(this._backdrop).one(g.TRANSITION_END,e).emulateTransitionEnd(r)}else if(!this._isShown&&this._backdrop){t(this._backdrop).removeClass(je);var n=function(){o._removeBackdrop(),e&&e()};if(t(this._element).hasClass(qe)){var i=g.getTransitionDurationFromElement(this._backdrop);t(this._backdrop).one(g.TRANSITION_END,n).emulateTransitionEnd(i)}else n()}else e&&e()},o._adjustDialog=function(){var e=this._element.scrollHeight>document.documentElement.clientHeight;!this._isBodyOverflowing&&e&&(this._element.style.paddingLeft=this._scrollbarWidth+'px'),this._isBodyOverflowing&&!e&&(this._element.style.paddingRight=this._scrollbarWidth+'px')},o._resetAdjustments=function(){this._element.style.paddingLeft='',this._element.style.paddingRight=''},o._checkScrollbar=function(){var e=document.body.getBoundingClientRect();this._isBodyOverflowing=Math.round(e.left+e.right)<window.innerWidth,this._scrollbarWidth=this._getScrollbarWidth()},o._setScrollbar=function(){var e=this;if(this._isBodyOverflowing){var o=[].slice.call(document.querySelectorAll(Ge)),a=[].slice.call(document.querySelectorAll(He));t(o).each(function(o,a){var r=a.style.paddingRight,n=t(a).css('padding-right');t(a).data('padding-right',r).css('padding-right',parseFloat(n)+e._scrollbarWidth+'px')}),t(a).each(function(o,a){var r=a.style.marginRight,n=t(a).css('margin-right');t(a).data('margin-right',r).css('margin-right',parseFloat(n)-e._scrollbarWidth+'px')});var r=document.body.style.paddingRight,n=t(document.body).css('padding-right');t(document.body).data('padding-right',r).css('padding-right',parseFloat(n)+this._scrollbarWidth+'px')}t(document.body).addClass(Ve)},o._resetScrollbar=function(){var e=[].slice.call(document.querySelectorAll(Ge));t(e).each(function(e,o){var a=t(o).data('padding-right');t(o).removeData('padding-right'),o.style.paddingRight=a?a:''});var o=[].slice.call(document.querySelectorAll(''+He));t(o).each(function(e,o){var a=t(o).data('margin-right');'undefined'!=typeof a&&t(o).css('margin-right',a).removeData('margin-right')});var a=t(document.body).data('padding-right');t(document.body).removeData('padding-right'),document.body.style.paddingRight=a?a:''},o._getScrollbarWidth=function(){var e=document.createElement('div');e.className='modal-scrollbar-measure',document.body.appendChild(e);var t=e.getBoundingClientRect().width-e.clientWidth;return document.body.removeChild(e),t},e._jQueryInterface=function(o,a){return this.each(function(){var r=t(this).data(Ae),i=n({},De,t(this).data(),'object'==typeof o&&o?o:{});if(r||(r=new e(this,i),t(this).data(Ae,r)),'string'==typeof o){if('undefined'==typeof r[o])throw new TypeError('No method named "'+o+'"');r[o](a)}else i.show&&r.show(a)})},r(e,null,[{key:'VERSION',get:function(){return'4.5.2'}},{key:'Default',get:function(){return De}}]),e}();t(document).on('click'+ke+'.data-api','[data-toggle="modal"]',function(e){var o=this,a=g.getSelectorFromElement(this),r;a&&(r=document.querySelector(a));var i=t(r).data(Ae)?'toggle':n({},t(r).data(),t(this).data());('A'===this.tagName||'AREA'===this.tagName)&&e.preventDefault();var s=t(r).one(Be,function(e){e.isDefaultPrevented()||s.one(Re,function(){t(o).is(':visible')&&o.focus()})});We._jQueryInterface.call(t(r),i,this)}),t.fn[Ie]=We._jQueryInterface,t.fn[Ie].Constructor=We,t.fn[Ie].noConflict=function(){return t.fn[Ie]=Pe,We._jQueryInterface};var Xe=['background','cite','href','itemtype','longdesc','poster','src','xlink:href'],Ke=/^aria-[\w-]*$/i,Ye=/^(?:(?:https?|mailto|ftp|tel|file):|[^#&/:?]*(?:[#/?]|$))/gi,Je=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[\d+/a-z]+=*$/i,$e='tooltip',Qe='bs.tooltip',et='.'+Qe,tt=t.fn[$e],ot=/(^|\s)bs-tooltip\S+/g,at=['sanitize','whiteList','sanitizeFn'],rt={animation:'boolean',template:'string',title:'(string|element|function)',trigger:'string',delay:'(number|object)',html:'boolean',selector:'(string|boolean)',placement:'(string|function)',offset:'(number|string|function)',container:'(string|element|boolean)',fallbackPlacement:'(string|array)',boundary:'(string|element)',sanitize:'boolean',sanitizeFn:'(null|function)',whiteList:'object',popperConfig:'(null|object)'},nt={AUTO:'auto',TOP:'top',RIGHT:'right',BOTTOM:'bottom',LEFT:'left'},it={animation:!0,template:'<div class="tooltip" role="tooltip"><div class="arrow"></div><div class="tooltip-inner"></div></div>',trigger:'hover focus',title:'',delay:0,html:!1,selector:!1,placement:'top',offset:0,container:!1,fallbackPlacement:'flip',boundary:'scrollParent',sanitize:!0,sanitizeFn:null,whiteList:{"*":['class','dir','id','lang','role',Ke],a:['target','href','title','rel'],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:['src','srcset','alt','title','width','height'],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},popperConfig:null},st='show',lt='out',pt={HIDE:'hide'+et,HIDDEN:'hidden'+et,SHOW:'show'+et,SHOWN:'shown'+et,INSERTED:'inserted'+et,CLICK:'click'+et,FOCUSIN:'focusin'+et,FOCUSOUT:'focusout'+et,MOUSEENTER:'mouseenter'+et,MOUSELEAVE:'mouseleave'+et},dt='fade',ct='show',ut='hover',mt='focus',gt=function(){function e(e,t){if('undefined'==typeof o)throw new TypeError('Bootstrap\'s tooltips require Popper.js (https://popper.js.org/)');this._isEnabled=!0,this._timeout=0,this._hoverState='',this._activeTrigger={},this._popper=null,this.element=e,this.config=this._getConfig(t),this.tip=null,this._setListeners()}var a=e.prototype;return a.enable=function(){this._isEnabled=!0},a.disable=function(){this._isEnabled=!1},a.toggleEnabled=function(){this._isEnabled=!this._isEnabled},a.toggle=function(e){if(this._isEnabled)if(e){var o=this.constructor.DATA_KEY,a=t(e.currentTarget).data(o);a||(a=new this.constructor(e.currentTarget,this._getDelegateConfig()),t(e.currentTarget).data(o,a)),a._activeTrigger.click=!a._activeTrigger.click,a._isWithActiveTrigger()?a._enter(null,a):a._leave(null,a)}else{if(t(this.getTipElement()).hasClass(ct))return void this._leave(null,this);this._enter(null,this)}},a.dispose=function(){clearTimeout(this._timeout),t.removeData(this.element,this.constructor.DATA_KEY),t(this.element).off(this.constructor.EVENT_KEY),t(this.element).closest('.modal').off('hide.bs.modal',this._hideModalHandler),this.tip&&t(this.tip).remove(),this._isEnabled=null,this._timeout=null,this._hoverState=null,this._activeTrigger=null,this._popper&&this._popper.destroy(),this._popper=null,this.element=null,this.config=null,this.tip=null},a.show=function(){var e=this;if('none'===t(this.element).css('display'))throw new Error('Please use show on visible elements');var a=t.Event(this.constructor.Event.SHOW);if(this.isWithContent()&&this._isEnabled){t(this.element).trigger(a);var r=g.findShadowRoot(this.element),n=t.contains(null===r?this.element.ownerDocument.documentElement:r,this.element);if(a.isDefaultPrevented()||!n)return;var i=this.getTipElement(),s=g.getUID(this.constructor.NAME);i.setAttribute('id',s),this.element.setAttribute('aria-describedby',s),this.setContent(),this.config.animation&&t(i).addClass(dt);var l='function'==typeof this.config.placement?this.config.placement.call(this,i,this.element):this.config.placement,p=this._getAttachment(l);this.addAttachmentClass(p);var d=this._getContainer();t(i).data(this.constructor.DATA_KEY,this),t.contains(this.element.ownerDocument.documentElement,this.tip)||t(i).appendTo(d),t(this.element).trigger(this.constructor.Event.INSERTED),this._popper=new o(this.element,i,this._getPopperConfig(p)),t(i).addClass(ct),'ontouchstart'in document.documentElement&&t(document.body).children().on('mouseover',null,t.noop);var c=function(){e.config.animation&&e._fixTransition();var o=e._hoverState;e._hoverState=null,t(e.element).trigger(e.constructor.Event.SHOWN),o===lt&&e._leave(null,e)};if(t(this.tip).hasClass(dt)){var u=g.getTransitionDurationFromElement(this.tip);t(this.tip).one(g.TRANSITION_END,c).emulateTransitionEnd(u)}else c()}},a.hide=function(e){var o=this,a=this.getTipElement(),r=t.Event(this.constructor.Event.HIDE),n=function(){o._hoverState!==st&&a.parentNode&&a.parentNode.removeChild(a),o._cleanTipClass(),o.element.removeAttribute('aria-describedby'),t(o.element).trigger(o.constructor.Event.HIDDEN),null!==o._popper&&o._popper.destroy(),e&&e()};if(t(this.element).trigger(r),!r.isDefaultPrevented()){if(t(a).removeClass(ct),'ontouchstart'in document.documentElement&&t(document.body).children().off('mouseover',null,t.noop),this._activeTrigger['click']=!1,this._activeTrigger[mt]=!1,this._activeTrigger[ut]=!1,t(this.tip).hasClass(dt)){var i=g.getTransitionDurationFromElement(a);t(a).one(g.TRANSITION_END,n).emulateTransitionEnd(i)}else n();this._hoverState=''}},a.update=function(){null!==this._popper&&this._popper.scheduleUpdate()},a.isWithContent=function(){return!!this.getTitle()},a.addAttachmentClass=function(e){t(this.getTipElement()).addClass('bs-tooltip'+'-'+e)},a.getTipElement=function(){return this.tip=this.tip||t(this.config.template)[0],this.tip},a.setContent=function(){var e=this.getTipElement();this.setElementContent(t(e.querySelectorAll('.tooltip-inner')),this.getTitle()),t(e).removeClass(dt+' '+ct)},a.setElementContent=function(e,o){return'object'==typeof o&&(o.nodeType||o.jquery)?void(this.config.html?!t(o).parent().is(e)&&e.empty().append(o):e.text(t(o).text())):void(this.config.html?(this.config.sanitize&&(o=u(o,this.config.whiteList,this.config.sanitizeFn)),e.html(o)):e.text(o))},a.getTitle=function(){var e=this.element.getAttribute('data-original-title');return e||(e='function'==typeof this.config.title?this.config.title.call(this.element):this.config.title),e},a._getPopperConfig=function(e){var t=this,o={placement:e,modifiers:{offset:this._getOffset(),flip:{behavior:this.config.fallbackPlacement},arrow:{element:'.arrow'},preventOverflow:{boundariesElement:this.config.boundary}},onCreate:function(e){e.originalPlacement!==e.placement&&t._handlePopperPlacementChange(e)},onUpdate:function(e){return t._handlePopperPlacementChange(e)}};return n({},o,this.config.popperConfig)},a._getOffset=function(){var e=this,t={};return'function'==typeof this.config.offset?t.fn=function(t){return t.offsets=n({},t.offsets,e.config.offset(t.offsets,e.element)||{}),t}:t.offset=this.config.offset,t},a._getContainer=function(){return!1===this.config.container?document.body:g.isElement(this.config.container)?t(this.config.container):t(document).find(this.config.container)},a._getAttachment=function(e){return nt[e.toUpperCase()]},a._setListeners=function(){var e=this,o=this.config.trigger.split(' ');o.forEach(function(o){if('click'===o)t(e.element).on(e.constructor.Event.CLICK,e.config.selector,function(t){return e.toggle(t)});else if(o!=='manual'){var a=o===ut?e.constructor.Event.MOUSEENTER:e.constructor.Event.FOCUSIN,r=o===ut?e.constructor.Event.MOUSELEAVE:e.constructor.Event.FOCUSOUT;t(e.element).on(a,e.config.selector,function(t){return e._enter(t)}).on(r,e.config.selector,function(t){return e._leave(t)})}}),this._hideModalHandler=function(){e.element&&e.hide()},t(this.element).closest('.modal').on('hide.bs.modal',this._hideModalHandler),this.config.selector?this.config=n({},this.config,{trigger:'manual',selector:''}):this._fixTitle()},a._fixTitle=function(){var e=typeof this.element.getAttribute('data-original-title');(this.element.getAttribute('title')||'string'!=e)&&(this.element.setAttribute('data-original-title',this.element.getAttribute('title')||''),this.element.setAttribute('title',''))},a._enter=function(e,o){var a=this.constructor.DATA_KEY;return(o=o||t(e.currentTarget).data(a),o||(o=new this.constructor(e.currentTarget,this._getDelegateConfig()),t(e.currentTarget).data(a,o)),e&&(o._activeTrigger['focusin'===e.type?mt:ut]=!0),t(o.getTipElement()).hasClass(ct)||o._hoverState===st)?void(o._hoverState=st):(clearTimeout(o._timeout),o._hoverState=st,o.config.delay&&o.config.delay.show?void(o._timeout=setTimeout(function(){o._hoverState===st&&o.show()},o.config.delay.show)):void o.show())},a._leave=function(e,o){var a=this.constructor.DATA_KEY;if(o=o||t(e.currentTarget).data(a),o||(o=new this.constructor(e.currentTarget,this._getDelegateConfig()),t(e.currentTarget).data(a,o)),e&&(o._activeTrigger['focusout'===e.type?mt:ut]=!1),!o._isWithActiveTrigger())return clearTimeout(o._timeout),o._hoverState=lt,o.config.delay&&o.config.delay.hide?void(o._timeout=setTimeout(function(){o._hoverState===lt&&o.hide()},o.config.delay.hide)):void o.hide()},a._isWithActiveTrigger=function(){for(var e in this._activeTrigger)if(this._activeTrigger[e])return!0;return!1},a._getConfig=function(e){var o=t(this.element).data();return Object.keys(o).forEach(function(e){-1!==at.indexOf(e)&&delete o[e]}),e=n({},this.constructor.Default,o,'object'==typeof e&&e?e:{}),'number'==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),'number'==typeof e.title&&(e.title=e.title.toString()),'number'==typeof e.content&&(e.content=e.content.toString()),g.typeCheckConfig($e,e,this.constructor.DefaultType),e.sanitize&&(e.template=u(e.template,e.whiteList,e.sanitizeFn)),e},a._getDelegateConfig=function(){var e={};if(this.config)for(var t in this.config)this.constructor.Default[t]!==this.config[t]&&(e[t]=this.config[t]);return e},a._cleanTipClass=function(){var e=t(this.getTipElement()),o=e.attr('class').match(ot);null!==o&&o.length&&e.removeClass(o.join(''))},a._handlePopperPlacementChange=function(e){this.tip=e.instance.popper,this._cleanTipClass(),this.addAttachmentClass(this._getAttachment(e.placement))},a._fixTransition=function(){var e=this.getTipElement(),o=this.config.animation;null!==e.getAttribute('x-placement')||(t(e).removeClass(dt),this.config.animation=!1,this.hide(),this.show(),this.config.animation=o)},e._jQueryInterface=function(o){return this.each(function(){var a=t(this).data(Qe);if((a||!/dispose|hide/.test(o))&&(a||(a=new e(this,'object'==typeof o&&o),t(this).data(Qe,a)),'string'==typeof o)){if('undefined'==typeof a[o])throw new TypeError('No method named "'+o+'"');a[o]()}})},r(e,null,[{key:'VERSION',get:function(){return'4.5.2'}},{key:'Default',get:function(){return it}},{key:'NAME',get:function(){return $e}},{key:'DATA_KEY',get:function(){return Qe}},{key:'Event',get:function(){return pt}},{key:'EVENT_KEY',get:function(){return et}},{key:'DefaultType',get:function(){return rt}}]),e}();t.fn[$e]=gt._jQueryInterface,t.fn[$e].Constructor=gt,t.fn[$e].noConflict=function(){return t.fn[$e]=tt,gt._jQueryInterface};var yt='popover',_t='bs.popover',ft='.'+_t,ht=t.fn[yt],xt=/(^|\s)bs-popover\S+/g,vt=n({},gt.Default,{placement:'right',trigger:'click',content:'',template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>'}),bt=n({},gt.DefaultType,{content:'(string|element|function)'}),wt={HIDE:'hide'+ft,HIDDEN:'hidden'+ft,SHOW:'show'+ft,SHOWN:'shown'+ft,INSERTED:'inserted'+ft,CLICK:'click'+ft,FOCUSIN:'focusin'+ft,FOCUSOUT:'focusout'+ft,MOUSEENTER:'mouseenter'+ft,MOUSELEAVE:'mouseleave'+ft},Tt=function(e){function o(){return e.apply(this,arguments)||this}i(o,e);var a=o.prototype;return a.isWithContent=function(){return this.getTitle()||this._getContent()},a.addAttachmentClass=function(e){t(this.getTipElement()).addClass('bs-popover'+'-'+e)},a.getTipElement=function(){return this.tip=this.tip||t(this.config.template)[0],this.tip},a.setContent=function(){var e=t(this.getTipElement());this.setElementContent(e.find('.popover-header'),this.getTitle());var o=this._getContent();'function'==typeof o&&(o=o.call(this.element)),this.setElementContent(e.find('.popover-body'),o),e.removeClass('fade'+' '+'show')},a._getContent=function(){return this.element.getAttribute('data-content')||this.config.content},a._cleanTipClass=function(){var e=t(this.getTipElement()),o=e.attr('class').match(xt);null!==o&&0<o.length&&e.removeClass(o.join(''))},o._jQueryInterface=function(e){return this.each(function(){var a=t(this).data(_t),r='object'==typeof e?e:null;if((a||!/dispose|hide/.test(e))&&(a||(a=new o(this,r),t(this).data(_t,a)),'string'==typeof e)){if('undefined'==typeof a[e])throw new TypeError('No method named "'+e+'"');a[e]()}})},r(o,null,[{key:'VERSION',get:function(){return'4.5.2'}},{key:'Default',get:function(){return vt}},{key:'NAME',get:function(){return yt}},{key:'DATA_KEY',get:function(){return _t}},{key:'Event',get:function(){return wt}},{key:'EVENT_KEY',get:function(){return ft}},{key:'DefaultType',get:function(){return bt}}]),o}(gt);t.fn[yt]=Tt._jQueryInterface,t.fn[yt].Constructor=Tt,t.fn[yt].noConflict=function(){return t.fn[yt]=ht,Tt._jQueryInterface};var Et='scrollspy',St='bs.scrollspy',Ct='.'+St,It=t.fn[Et],At={offset:10,method:'auto',target:''},kt={offset:'number',method:'string',target:'(string|element)'},Pt='active',zt='.nav, .list-group',Dt='.nav-link',Lt='.list-group-item',Rt='position',Bt=function(){function e(e,o){var a=this;this._element=e,this._scrollElement='BODY'===e.tagName?window:e,this._config=this._getConfig(o),this._selector=this._config.target+' '+Dt+','+(this._config.target+' '+Lt+',')+(this._config.target+' '+'.dropdown-item'),this._offsets=[],this._targets=[],this._activeTarget=null,this._scrollHeight=0,t(this._scrollElement).on('scroll'+Ct,function(e){return a._process(e)}),this.refresh(),this._process()}var o=e.prototype;return o.refresh=function(){var e=this,o=this._scrollElement===this._scrollElement.window?'offset':Rt,a='auto'===this._config.method?o:this._config.method,r=a===Rt?this._getScrollTop():0;this._offsets=[],this._targets=[],this._scrollHeight=this._getScrollHeight();var n=[].slice.call(document.querySelectorAll(this._selector));n.map(function(e){var o=g.getSelectorFromElement(e),n;if(o&&(n=document.querySelector(o)),n){var i=n.getBoundingClientRect();if(i.width||i.height)return[t(n)[a]().top+r,o]}return null}).filter(function(e){return e}).sort(function(e,t){return e[0]-t[0]}).forEach(function(t){e._offsets.push(t[0]),e._targets.push(t[1])})},o.dispose=function(){t.removeData(this._element,St),t(this._scrollElement).off(Ct),this._element=null,this._scrollElement=null,this._config=null,this._selector=null,this._offsets=null,this._targets=null,this._activeTarget=null,this._scrollHeight=null},o._getConfig=function(e){if(e=n({},At,'object'==typeof e&&e?e:{}),'string'!=typeof e.target&&g.isElement(e.target)){var o=t(e.target).attr('id');o||(o=g.getUID(Et),t(e.target).attr('id',o)),e.target='#'+o}return g.typeCheckConfig(Et,e,kt),e},o._getScrollTop=function(){return this._scrollElement===window?this._scrollElement.pageYOffset:this._scrollElement.scrollTop},o._getScrollHeight=function(){return this._scrollElement.scrollHeight||Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)},o._getOffsetHeight=function(){return this._scrollElement===window?window.innerHeight:this._scrollElement.getBoundingClientRect().height},o._process=function(){var e=this._getScrollTop()+this._config.offset,t=this._getScrollHeight(),o=this._config.offset+t-this._getOffsetHeight();if(this._scrollHeight!==t&&this.refresh(),e>=o){var a=this._targets[this._targets.length-1];return void(this._activeTarget!==a&&this._activate(a))}if(this._activeTarget&&e<this._offsets[0]&&0<this._offsets[0])return this._activeTarget=null,void this._clear();for(var r=this._offsets.length,n;r--;)n=this._activeTarget!==this._targets[r]&&e>=this._offsets[r]&&('undefined'==typeof this._offsets[r+1]||e<this._offsets[r+1]),n&&this._activate(this._targets[r])},o._activate=function(e){this._activeTarget=e,this._clear();var o=this._selector.split(',').map(function(t){return t+'[data-target="'+e+'"],'+t+'[href="'+e+'"]'}),a=t([].slice.call(document.querySelectorAll(o.join(','))));a.hasClass('dropdown-item')?(a.closest('.dropdown').find('.dropdown-toggle').addClass(Pt),a.addClass(Pt)):(a.addClass(Pt),a.parents(zt).prev(Dt+', '+Lt).addClass(Pt),a.parents(zt).prev('.nav-item').children(Dt).addClass(Pt)),t(this._scrollElement).trigger('activate'+Ct,{relatedTarget:e})},o._clear=function(){[].slice.call(document.querySelectorAll(this._selector)).filter(function(e){return e.classList.contains(Pt)}).forEach(function(e){return e.classList.remove(Pt)})},e._jQueryInterface=function(o){return this.each(function(){var a=t(this).data(St);if(a||(a=new e(this,'object'==typeof o&&o),t(this).data(St,a)),'string'==typeof o){if('undefined'==typeof a[o])throw new TypeError('No method named "'+o+'"');a[o]()}})},r(e,null,[{key:'VERSION',get:function(){return'4.5.2'}},{key:'Default',get:function(){return At}}]),e}();t(window).on('load'+Ct+'.data-api',function(){for(var e=[].slice.call(document.querySelectorAll('[data-spy="scroll"]')),o=e.length,a=o,r;a--;)r=t(e[a]),Bt._jQueryInterface.call(r,r.data())}),t.fn[Et]=Bt._jQueryInterface,t.fn[Et].Constructor=Bt,t.fn[Et].noConflict=function(){return t.fn[Et]=It,Bt._jQueryInterface};var Ft='tab',Mt='bs.tab',Ot='.'+Mt,Nt=t.fn[Ft],Ut='active',Vt='fade',qt='show',jt='.active',Zt='> li > .active',Gt=function(){function e(e){this._element=e}var o=e.prototype;return o.show=function(){var e=this;if(!(this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE&&t(this._element).hasClass(Ut)||t(this._element).hasClass('disabled'))){var o=t(this._element).closest('.nav, .list-group')[0],a=g.getSelectorFromElement(this._element),r,n;if(o){var i='UL'===o.nodeName||'OL'===o.nodeName?Zt:jt;n=t.makeArray(t(o).find(i)),n=n[n.length-1]}var s=t.Event('hide'+Ot,{relatedTarget:this._element}),l=t.Event('show'+Ot,{relatedTarget:n});if(n&&t(n).trigger(s),t(this._element).trigger(l),!(l.isDefaultPrevented()||s.isDefaultPrevented())){a&&(r=document.querySelector(a)),this._activate(this._element,o);var p=function(){var o=t.Event('hidden'+Ot,{relatedTarget:e._element}),a=t.Event('shown'+Ot,{relatedTarget:n});t(n).trigger(o),t(e._element).trigger(a)};r?this._activate(r,r.parentNode,p):p()}}},o.dispose=function(){t.removeData(this._element,Mt),this._element=null},o._activate=function(e,o,a){var r=this,n=o&&('UL'===o.nodeName||'OL'===o.nodeName)?t(o).find(Zt):t(o).children(jt),i=n[0],s=a&&i&&t(i).hasClass(Vt),l=function(){return r._transitionComplete(e,i,a)};if(i&&s){var p=g.getTransitionDurationFromElement(i);t(i).removeClass(qt).one(g.TRANSITION_END,l).emulateTransitionEnd(p)}else l()},o._transitionComplete=function(e,o,a){if(o){t(o).removeClass(Ut);var r=t(o.parentNode).find('> .dropdown-menu .active')[0];r&&t(r).removeClass(Ut),'tab'===o.getAttribute('role')&&o.setAttribute('aria-selected',!1)}if(t(e).addClass(Ut),'tab'===e.getAttribute('role')&&e.setAttribute('aria-selected',!0),g.reflow(e),e.classList.contains(Vt)&&e.classList.add(qt),e.parentNode&&t(e.parentNode).hasClass('dropdown-menu')){var n=t(e).closest('.dropdown')[0];if(n){var i=[].slice.call(n.querySelectorAll('.dropdown-toggle'));t(i).addClass(Ut)}e.setAttribute('aria-expanded',!0)}a&&a()},e._jQueryInterface=function(o){return this.each(function(){var a=t(this),r=a.data(Mt);if(r||(r=new e(this),a.data(Mt,r)),'string'==typeof o){if('undefined'==typeof r[o])throw new TypeError('No method named "'+o+'"');r[o]()}})},r(e,null,[{key:'VERSION',get:function(){return'4.5.2'}}]),e}();t(document).on('click'+Ot+'.data-api','[data-toggle="tab"], [data-toggle="pill"], [data-toggle="list"]',function(e){e.preventDefault(),Gt._jQueryInterface.call(t(this),'show')}),t.fn[Ft]=Gt._jQueryInterface,t.fn[Ft].Constructor=Gt,t.fn[Ft].noConflict=function(){return t.fn[Ft]=Nt,Gt._jQueryInterface};var Ht='toast',Wt='bs.toast',Xt='.'+Wt,Kt=t.fn[Ht],Yt='click.dismiss'+Xt,Jt='hide',$t='show',Qt='showing',eo={animation:'boolean',autohide:'boolean',delay:'number'},to={animation:!0,autohide:!0,delay:500},oo=function(){function e(e,t){this._element=e,this._config=this._getConfig(t),this._timeout=null,this._setListeners()}var o=e.prototype;return o.show=function(){var e=this,o=t.Event('show'+Xt);if(t(this._element).trigger(o),!o.isDefaultPrevented()){this._clearTimeout(),this._config.animation&&this._element.classList.add('fade');var a=function(){e._element.classList.remove(Qt),e._element.classList.add($t),t(e._element).trigger('shown'+Xt),e._config.autohide&&(e._timeout=setTimeout(function(){e.hide()},e._config.delay))};if(this._element.classList.remove(Jt),g.reflow(this._element),this._element.classList.add(Qt),this._config.animation){var r=g.getTransitionDurationFromElement(this._element);t(this._element).one(g.TRANSITION_END,a).emulateTransitionEnd(r)}else a()}},o.hide=function(){if(this._element.classList.contains($t)){var e=t.Event('hide'+Xt);t(this._element).trigger(e),e.isDefaultPrevented()||this._close()}},o.dispose=function(){this._clearTimeout(),this._element.classList.contains($t)&&this._element.classList.remove($t),t(this._element).off(Yt),t.removeData(this._element,Wt),this._element=null,this._config=null},o._getConfig=function(e){return e=n({},to,t(this._element).data(),'object'==typeof e&&e?e:{}),g.typeCheckConfig(Ht,e,this.constructor.DefaultType),e},o._setListeners=function(){var e=this;t(this._element).on(Yt,'[data-dismiss="toast"]',function(){return e.hide()})},o._close=function(){var e=this,o=function(){e._element.classList.add(Jt),t(e._element).trigger('hidden'+Xt)};if(this._element.classList.remove($t),this._config.animation){var a=g.getTransitionDurationFromElement(this._element);t(this._element).one(g.TRANSITION_END,o).emulateTransitionEnd(a)}else o()},o._clearTimeout=function(){clearTimeout(this._timeout),this._timeout=null},e._jQueryInterface=function(o){return this.each(function(){var a=t(this),r=a.data(Wt);if(r||(r=new e(this,'object'==typeof o&&o),a.data(Wt,r)),'string'==typeof o){if('undefined'==typeof r[o])throw new TypeError('No method named "'+o+'"');r[o](this)}})},r(e,null,[{key:'VERSION',get:function(){return'4.5.2'}},{key:'DefaultType',get:function(){return eo}},{key:'Default',get:function(){return to}}]),e}();t.fn[Ht]=oo._jQueryInterface,t.fn[Ht].Constructor=oo,t.fn[Ht].noConflict=function(){return t.fn[Ht]=Kt,oo._jQueryInterface},e.Alert=x,e.Button=k,e.Carousel=j,e.Collapse=ae,e.Dropdown=Ce,e.Modal=We,e.Popover=Tt,e.Scrollspy=Bt,e.Tab=Gt,e.Toast=oo,e.Tooltip=gt,e.Util=g,Object.defineProperty(e,'__esModule',{value:!0})})},function(e){var t=function(){return this}();try{t=t||new Function('return this')()}catch(o){'object'==typeof window&&(t=window)}e.exports=t}]);